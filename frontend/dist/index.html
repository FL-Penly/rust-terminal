<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>VibeTerm - Mobile Terminal</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const C of g.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&s(C)}).observe(document,{childList:!0,subtree:!0});function r(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function s(d){if(d.ep)return;d.ep=!0;const g=r(d);fetch(d.href,g)}})();var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Th(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var d=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,d.get?d:{enumerable:!0,get:function(){return e[s]}})}),r}var Oh={exports:{}},Pn={},Ph={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=Symbol.for("react.element"),Lf=Symbol.for("react.portal"),Ef=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),Mf=Symbol.for("react.provider"),Df=Symbol.for("react.context"),Af=Symbol.for("react.forward_ref"),Tf=Symbol.for("react.suspense"),Bf=Symbol.for("react.memo"),Of=Symbol.for("react.lazy"),Vl=Symbol.iterator;function Pf(e){return e===null||typeof e!="object"?null:(e=Vl&&e[Vl]||e["@@iterator"],typeof e=="function"?e:null)}var Ih={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fh=Object.assign,Nh={};function gi(e,t,r){this.props=e,this.context=t,this.refs=Nh,this.updater=r||Ih}gi.prototype.isReactComponent={};gi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hh(){}Hh.prototype=gi.prototype;function Ha(e,t,r){this.props=e,this.context=t,this.refs=Nh,this.updater=r||Ih}var ja=Ha.prototype=new Hh;ja.constructor=Ha;Fh(ja,gi.prototype);ja.isPureReactComponent=!0;var Gl=Array.isArray,jh=Object.prototype.hasOwnProperty,$a={current:null},$h={key:!0,ref:!0,__self:!0,__source:!0};function Wh(e,t,r){var s,d={},g=null,C=null;if(t!=null)for(s in t.ref!==void 0&&(C=t.ref),t.key!==void 0&&(g=""+t.key),t)jh.call(t,s)&&!$h.hasOwnProperty(s)&&(d[s]=t[s]);var i=arguments.length-2;if(i===1)d.children=r;else if(1<i){for(var o=Array(i),f=0;f<i;f++)o[f]=arguments[f+2];d.children=o}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)d[s]===void 0&&(d[s]=i[s]);return{$$typeof:ds,type:e,key:g,ref:C,props:d,_owner:$a.current}}function If(e,t){return{$$typeof:ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wa(e){return typeof e=="object"&&e!==null&&e.$$typeof===ds}function Ff(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Kl=/\/+/g;function ao(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ff(""+e.key):t.toString(36)}function Us(e,t,r,s,d){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var C=!1;if(e===null)C=!0;else switch(g){case"string":case"number":C=!0;break;case"object":switch(e.$$typeof){case ds:case Lf:C=!0}}if(C)return C=e,d=d(C),e=s===""?"."+ao(C,0):s,Gl(d)?(r="",e!=null&&(r=e.replace(Kl,"$&/")+"/"),Us(d,t,r,"",function(f){return f})):d!=null&&(Wa(d)&&(d=If(d,r+(!d.key||C&&C.key===d.key?"":(""+d.key).replace(Kl,"$&/")+"/")+e)),t.push(d)),1;if(C=0,s=s===""?".":s+":",Gl(e))for(var i=0;i<e.length;i++){g=e[i];var o=s+ao(g,i);C+=Us(g,t,r,o,d)}else if(o=Pf(e),typeof o=="function")for(e=o.call(e),i=0;!(g=e.next()).done;)g=g.value,o=s+ao(g,i++),C+=Us(g,t,r,o,d);else if(g==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return C}function bs(e,t,r){if(e==null)return e;var s=[],d=0;return Us(e,s,"","",function(g){return t.call(r,g,d++)}),s}function Nf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Je={current:null},Vs={transition:null},Hf={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:Vs,ReactCurrentOwner:$a};function zh(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:bs,forEach:function(e,t,r){bs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return bs(e,function(){t++}),t},toArray:function(e){return bs(e,function(t){return t})||[]},only:function(e){if(!Wa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=gi;ge.Fragment=Ef;ge.Profiler=Rf;ge.PureComponent=Ha;ge.StrictMode=kf;ge.Suspense=Tf;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hf;ge.act=zh;ge.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Fh({},e.props),d=e.key,g=e.ref,C=e._owner;if(t!=null){if(t.ref!==void 0&&(g=t.ref,C=$a.current),t.key!==void 0&&(d=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(o in t)jh.call(t,o)&&!$h.hasOwnProperty(o)&&(s[o]=t[o]===void 0&&i!==void 0?i[o]:t[o])}var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){i=Array(o);for(var f=0;f<o;f++)i[f]=arguments[f+2];s.children=i}return{$$typeof:ds,type:e.type,key:d,ref:g,props:s,_owner:C}};ge.createContext=function(e){return e={$$typeof:Df,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mf,_context:e},e.Consumer=e};ge.createElement=Wh;ge.createFactory=function(e){var t=Wh.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:Af,render:e}};ge.isValidElement=Wa;ge.lazy=function(e){return{$$typeof:Of,_payload:{_status:-1,_result:e},_init:Nf}};ge.memo=function(e,t){return{$$typeof:Bf,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=Vs.transition;Vs.transition={};try{e()}finally{Vs.transition=t}};ge.unstable_act=zh;ge.useCallback=function(e,t){return Je.current.useCallback(e,t)};ge.useContext=function(e){return Je.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return Je.current.useDeferredValue(e)};ge.useEffect=function(e,t){return Je.current.useEffect(e,t)};ge.useId=function(){return Je.current.useId()};ge.useImperativeHandle=function(e,t,r){return Je.current.useImperativeHandle(e,t,r)};ge.useInsertionEffect=function(e,t){return Je.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return Je.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return Je.current.useMemo(e,t)};ge.useReducer=function(e,t,r){return Je.current.useReducer(e,t,r)};ge.useRef=function(e){return Je.current.useRef(e)};ge.useState=function(e){return Je.current.useState(e)};ge.useSyncExternalStore=function(e,t,r){return Je.current.useSyncExternalStore(e,t,r)};ge.useTransition=function(){return Je.current.useTransition()};ge.version="18.3.1";Ph.exports=ge;var V=Ph.exports;const jf=Th(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=V,Wf=Symbol.for("react.element"),zf=Symbol.for("react.fragment"),Uf=Object.prototype.hasOwnProperty,Vf=$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gf={key:!0,ref:!0,__self:!0,__source:!0};function Uh(e,t,r){var s,d={},g=null,C=null;r!==void 0&&(g=""+r),t.key!==void 0&&(g=""+t.key),t.ref!==void 0&&(C=t.ref);for(s in t)Uf.call(t,s)&&!Gf.hasOwnProperty(s)&&(d[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)d[s]===void 0&&(d[s]=t[s]);return{$$typeof:Wf,type:e,key:g,ref:C,props:d,_owner:Vf.current}}Pn.Fragment=zf;Pn.jsx=Uh;Pn.jsxs=Uh;Oh.exports=Pn;var I=Oh.exports,Ho={},Vh={exports:{}},gt={},Gh={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,k){var A=B.length;B.push(k);e:for(;0<A;){var P=A-1>>>1,F=B[P];if(0<d(F,k))B[P]=k,B[A]=F,A=P;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var k=B[0],A=B.pop();if(A!==k){B[0]=A;e:for(var P=0,F=B.length,W=F>>>1;P<W;){var z=2*(P+1)-1,q=B[z],Y=z+1,$=B[Y];if(0>d(q,A))Y<F&&0>d($,q)?(B[P]=$,B[Y]=A,P=Y):(B[P]=q,B[z]=A,P=z);else if(Y<F&&0>d($,A))B[P]=$,B[Y]=A,P=Y;else break e}}return k}function d(B,k){var A=B.sortIndex-k.sortIndex;return A!==0?A:B.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var C=Date,i=C.now();e.unstable_now=function(){return C.now()-i}}var o=[],f=[],_=1,h=null,p=3,w=!1,S=!1,u=!1,n=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,l=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(B){for(var k=r(f);k!==null;){if(k.callback===null)s(f);else if(k.startTime<=B)s(f),k.sortIndex=k.expirationTime,t(o,k);else break;k=r(f)}}function m(B){if(u=!1,c(B),!S)if(r(o)!==null)S=!0,j(L);else{var k=r(f);k!==null&&N(m,k.startTime-B)}}function L(B,k){S=!1,u&&(u=!1,a(y),y=-1),w=!0;var A=p;try{for(c(k),h=r(o);h!==null&&(!(h.expirationTime>k)||B&&!M());){var P=h.callback;if(typeof P=="function"){h.callback=null,p=h.priorityLevel;var F=P(h.expirationTime<=k);k=e.unstable_now(),typeof F=="function"?h.callback=F:h===r(o)&&s(o),c(k)}else s(o);h=r(o)}if(h!==null)var W=!0;else{var z=r(f);z!==null&&N(m,z.startTime-k),W=!1}return W}finally{h=null,p=A,w=!1}}var v=!1,x=null,y=-1,b=5,E=-1;function M(){return!(e.unstable_now()-E<b)}function R(){if(x!==null){var B=e.unstable_now();E=B;var k=!0;try{k=x(!0,B)}finally{k?D():(v=!1,x=null)}}else v=!1}var D;if(typeof l=="function")D=function(){l(R)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,H=T.port2;T.port1.onmessage=R,D=function(){H.postMessage(null)}}else D=function(){n(R,0)};function j(B){x=B,v||(v=!0,D())}function N(B,k){y=n(function(){B(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){S||w||(S=!0,j(L))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var A=p;p=k;try{return B()}finally{p=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,k){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var A=p;p=B;try{return k()}finally{p=A}},e.unstable_scheduleCallback=function(B,k,A){var P=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?P+A:P):A=P,B){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=A+F,B={id:_++,callback:k,priorityLevel:B,startTime:A,expirationTime:F,sortIndex:-1},A>P?(B.sortIndex=A,t(f,B),r(o)===null&&B===r(f)&&(u?(a(y),y=-1):u=!0,N(m,A-P))):(B.sortIndex=F,t(o,B),S||w||(S=!0,j(L))),B},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(B){var k=p;return function(){var A=p;p=k;try{return B.apply(this,arguments)}finally{p=A}}}})(Kh);Gh.exports=Kh;var Kf=Gh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf=V,pt=Kf;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qh=new Set,Gi={};function Nr(e,t){li(e,t),li(e+"Capture",t)}function li(e,t){for(Gi[e]=t,e=0;e<t.length;e++)qh.add(t[e])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jo=Object.prototype.hasOwnProperty,Xf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ql={},Xl={};function Yf(e){return jo.call(Xl,e)?!0:jo.call(ql,e)?!1:Xf.test(e)?Xl[e]=!0:(ql[e]=!0,!1)}function Jf(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zf(e,t,r,s){if(t===null||typeof t>"u"||Jf(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,r,s,d,g,C){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=g,this.removeEmptyString=C}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){We[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];We[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){We[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){We[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){We[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){We[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){We[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){We[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){We[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var za=/[\-:]([a-z])/g;function Ua(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(za,Ua);We[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(za,Ua);We[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(za,Ua);We[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){We[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});We.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){We[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Va(e,t,r,s){var d=We.hasOwnProperty(t)?We[t]:null;(d!==null?d.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zf(t,r,d,s)&&(r=null),s||d===null?Yf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,s=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Jt=qf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ls=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),zr=Symbol.for("react.fragment"),Ga=Symbol.for("react.strict_mode"),$o=Symbol.for("react.profiler"),Xh=Symbol.for("react.provider"),Yh=Symbol.for("react.context"),Ka=Symbol.for("react.forward_ref"),Wo=Symbol.for("react.suspense"),zo=Symbol.for("react.suspense_list"),qa=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),Jh=Symbol.for("react.offscreen"),Yl=Symbol.iterator;function bi(e){return e===null||typeof e!="object"?null:(e=Yl&&e[Yl]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,lo;function Bi(e){if(lo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);lo=t&&t[1]||""}return`
`+lo+e}var co=!1;function ho(e,t){if(!e||co)return"";co=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var d=f.stack.split(`
`),g=s.stack.split(`
`),C=d.length-1,i=g.length-1;1<=C&&0<=i&&d[C]!==g[i];)i--;for(;1<=C&&0<=i;C--,i--)if(d[C]!==g[i]){if(C!==1||i!==1)do if(C--,i--,0>i||d[C]!==g[i]){var o=`
`+d[C].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=C&&0<=i);break}}}finally{co=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Bi(e):""}function Qf(e){switch(e.tag){case 5:return Bi(e.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 2:case 15:return e=ho(e.type,!1),e;case 11:return e=ho(e.type.render,!1),e;case 1:return e=ho(e.type,!0),e;default:return""}}function Uo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zr:return"Fragment";case Wr:return"Portal";case $o:return"Profiler";case Ga:return"StrictMode";case Wo:return"Suspense";case zo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yh:return(e.displayName||"Context")+".Consumer";case Xh:return(e._context.displayName||"Context")+".Provider";case Ka:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qa:return t=e.displayName||null,t!==null?t:Uo(e.type)||"Memo";case rr:t=e._payload,e=e._init;try{return Uo(e(t))}catch{}}return null}function e_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uo(t);case 8:return t===Ga?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function t_(e){var t=Zh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,g=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(C){s=""+C,g.call(this,C)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(C){s=""+C},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Es(e){e._valueTracker||(e._valueTracker=t_(e))}function Qh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Zh(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function an(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vo(e,t){var r=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Jl(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=mr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eu(e,t){t=t.checked,t!=null&&Va(e,"checked",t,!1)}function Go(e,t){eu(e,t);var r=mr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ko(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ko(e,t.type,mr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ko(e,t,r){(t!=="number"||an(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Oi=Array.isArray;function ei(e,t,r,s){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&s&&(e[r].defaultSelected=!0)}else{for(r=""+mr(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,s&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function qo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ql(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(J(92));if(Oi(r)){if(1<r.length)throw Error(J(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:mr(r)}}function tu(e,t){var r=mr(t.value),s=mr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ec(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ru(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ru(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ks,iu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ks=ks||document.createElement("div"),ks.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ks.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ki(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r_=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(e){r_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fi[t]=Fi[e]})});function su(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fi.hasOwnProperty(e)&&Fi[e]?(""+t).trim():t+"px"}function nu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,d=su(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,d):e[r]=d}}var i_=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yo(e,t){if(t){if(i_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Jo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zo=null;function Xa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qo=null,ti=null,ri=null;function tc(e){if(e=ps(e)){if(typeof Qo!="function")throw Error(J(280));var t=e.stateNode;t&&(t=jn(t),Qo(e.stateNode,e.type,t))}}function ou(e){ti?ri?ri.push(e):ri=[e]:ti=e}function au(){if(ti){var e=ti,t=ri;if(ri=ti=null,tc(e),t)for(e=0;e<t.length;e++)tc(t[e])}}function lu(e,t){return e(t)}function cu(){}var uo=!1;function hu(e,t,r){if(uo)return e(t,r);uo=!0;try{return lu(e,t,r)}finally{uo=!1,(ti!==null||ri!==null)&&(cu(),au())}}function qi(e,t){var r=e.stateNode;if(r===null)return null;var s=jn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(J(231,t,typeof r));return r}var ea=!1;if(Kt)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){ea=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{ea=!1}function s_(e,t,r,s,d,g,C,i,o){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(_){this.onError(_)}}var Ni=!1,ln=null,cn=!1,ta=null,n_={onError:function(e){Ni=!0,ln=e}};function o_(e,t,r,s,d,g,C,i,o){Ni=!1,ln=null,s_.apply(n_,arguments)}function a_(e,t,r,s,d,g,C,i,o){if(o_.apply(this,arguments),Ni){if(Ni){var f=ln;Ni=!1,ln=null}else throw Error(J(198));cn||(cn=!0,ta=f)}}function Hr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function uu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rc(e){if(Hr(e)!==e)throw Error(J(188))}function l_(e){var t=e.alternate;if(!t){if(t=Hr(e),t===null)throw Error(J(188));return t!==e?null:e}for(var r=e,s=t;;){var d=r.return;if(d===null)break;var g=d.alternate;if(g===null){if(s=d.return,s!==null){r=s;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===r)return rc(d),e;if(g===s)return rc(d),t;g=g.sibling}throw Error(J(188))}if(r.return!==s.return)r=d,s=g;else{for(var C=!1,i=d.child;i;){if(i===r){C=!0,r=d,s=g;break}if(i===s){C=!0,s=d,r=g;break}i=i.sibling}if(!C){for(i=g.child;i;){if(i===r){C=!0,r=g,s=d;break}if(i===s){C=!0,s=g,r=d;break}i=i.sibling}if(!C)throw Error(J(189))}}if(r.alternate!==s)throw Error(J(190))}if(r.tag!==3)throw Error(J(188));return r.stateNode.current===r?e:t}function du(e){return e=l_(e),e!==null?fu(e):null}function fu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fu(e);if(t!==null)return t;e=e.sibling}return null}var _u=pt.unstable_scheduleCallback,ic=pt.unstable_cancelCallback,c_=pt.unstable_shouldYield,h_=pt.unstable_requestPaint,De=pt.unstable_now,u_=pt.unstable_getCurrentPriorityLevel,Ya=pt.unstable_ImmediatePriority,pu=pt.unstable_UserBlockingPriority,hn=pt.unstable_NormalPriority,d_=pt.unstable_LowPriority,gu=pt.unstable_IdlePriority,In=null,Nt=null;function f_(e){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(In,e,void 0,(e.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:g_,__=Math.log,p_=Math.LN2;function g_(e){return e>>>=0,e===0?32:31-(__(e)/p_|0)|0}var Rs=64,Ms=4194304;function Pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function un(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,d=e.suspendedLanes,g=e.pingedLanes,C=r&268435455;if(C!==0){var i=C&~d;i!==0?s=Pi(i):(g&=C,g!==0&&(s=Pi(g)))}else C=r&~d,C!==0?s=Pi(C):g!==0&&(s=Pi(g));if(s===0)return 0;if(t!==0&&t!==s&&!(t&d)&&(d=s&-s,g=t&-t,d>=g||d===16&&(g&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Mt(t),d=1<<r,s|=e[r],t&=~d;return s}function v_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m_(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes;0<g;){var C=31-Mt(g),i=1<<C,o=d[C];o===-1?(!(i&r)||i&s)&&(d[C]=v_(i,t)):o<=t&&(e.expiredLanes|=i),g&=~i}}function ra(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vu(){var e=Rs;return Rs<<=1,!(Rs&4194240)&&(Rs=64),e}function fo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mt(t),e[t]=r}function y_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-Mt(r),g=1<<d;t[d]=0,s[d]=-1,e[d]=-1,r&=~g}}function Ja(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Mt(r),d=1<<s;d&t|e[s]&t&&(e[s]|=t),r&=~d}}var Ce=0;function mu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yu,Za,Cu,Su,wu,ia=!1,Ds=[],cr=null,hr=null,ur=null,Xi=new Map,Yi=new Map,sr=[],C_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(e,t){switch(e){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Xi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yi.delete(t.pointerId)}}function Ei(e,t,r,s,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:g,targetContainers:[d]},t!==null&&(t=ps(t),t!==null&&Za(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function S_(e,t,r,s,d){switch(t){case"focusin":return cr=Ei(cr,e,t,r,s,d),!0;case"dragenter":return hr=Ei(hr,e,t,r,s,d),!0;case"mouseover":return ur=Ei(ur,e,t,r,s,d),!0;case"pointerover":var g=d.pointerId;return Xi.set(g,Ei(Xi.get(g)||null,e,t,r,s,d)),!0;case"gotpointercapture":return g=d.pointerId,Yi.set(g,Ei(Yi.get(g)||null,e,t,r,s,d)),!0}return!1}function xu(e){var t=Er(e.target);if(t!==null){var r=Hr(t);if(r!==null){if(t=r.tag,t===13){if(t=uu(r),t!==null){e.blockedOn=t,wu(e.priority,function(){Cu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=sa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Zo=s,r.target.dispatchEvent(s),Zo=null}else return t=ps(r),t!==null&&Za(t),e.blockedOn=r,!1;t.shift()}return!0}function nc(e,t,r){Gs(e)&&r.delete(t)}function w_(){ia=!1,cr!==null&&Gs(cr)&&(cr=null),hr!==null&&Gs(hr)&&(hr=null),ur!==null&&Gs(ur)&&(ur=null),Xi.forEach(nc),Yi.forEach(nc)}function ki(e,t){e.blockedOn===t&&(e.blockedOn=null,ia||(ia=!0,pt.unstable_scheduleCallback(pt.unstable_NormalPriority,w_)))}function Ji(e){function t(d){return ki(d,e)}if(0<Ds.length){ki(Ds[0],e);for(var r=1;r<Ds.length;r++){var s=Ds[r];s.blockedOn===e&&(s.blockedOn=null)}}for(cr!==null&&ki(cr,e),hr!==null&&ki(hr,e),ur!==null&&ki(ur,e),Xi.forEach(t),Yi.forEach(t),r=0;r<sr.length;r++)s=sr[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<sr.length&&(r=sr[0],r.blockedOn===null);)xu(r),r.blockedOn===null&&sr.shift()}var ii=Jt.ReactCurrentBatchConfig,dn=!0;function x_(e,t,r,s){var d=Ce,g=ii.transition;ii.transition=null;try{Ce=1,Qa(e,t,r,s)}finally{Ce=d,ii.transition=g}}function b_(e,t,r,s){var d=Ce,g=ii.transition;ii.transition=null;try{Ce=4,Qa(e,t,r,s)}finally{Ce=d,ii.transition=g}}function Qa(e,t,r,s){if(dn){var d=sa(e,t,r,s);if(d===null)xo(e,t,s,fn,r),sc(e,s);else if(S_(d,e,t,r,s))s.stopPropagation();else if(sc(e,s),t&4&&-1<C_.indexOf(e)){for(;d!==null;){var g=ps(d);if(g!==null&&yu(g),g=sa(e,t,r,s),g===null&&xo(e,t,s,fn,r),g===d)break;d=g}d!==null&&s.stopPropagation()}else xo(e,t,s,null,r)}}var fn=null;function sa(e,t,r,s){if(fn=null,e=Xa(s),e=Er(e),e!==null)if(t=Hr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=uu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fn=e,null}function bu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u_()){case Ya:return 1;case pu:return 4;case hn:case d_:return 16;case gu:return 536870912;default:return 16}default:return 16}}var or=null,el=null,Ks=null;function Lu(){if(Ks)return Ks;var e,t=el,r=t.length,s,d="value"in or?or.value:or.textContent,g=d.length;for(e=0;e<r&&t[e]===d[e];e++);var C=r-e;for(s=1;s<=C&&t[r-s]===d[g-s];s++);return Ks=d.slice(e,1<s?1-s:void 0)}function qs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function As(){return!0}function oc(){return!1}function vt(e){function t(r,s,d,g,C){this._reactName=r,this._targetInst=d,this.type=s,this.nativeEvent=g,this.target=C,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(g):g[i]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?As:oc,this.isPropagationStopped=oc,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),t}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=vt(vi),_s=Re({},vi,{view:0,detail:0}),L_=vt(_s),_o,po,Ri,Fn=Re({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ri&&(Ri&&e.type==="mousemove"?(_o=e.screenX-Ri.screenX,po=e.screenY-Ri.screenY):po=_o=0,Ri=e),_o)},movementY:function(e){return"movementY"in e?e.movementY:po}}),ac=vt(Fn),E_=Re({},Fn,{dataTransfer:0}),k_=vt(E_),R_=Re({},_s,{relatedTarget:0}),go=vt(R_),M_=Re({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),D_=vt(M_),A_=Re({},vi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),T_=vt(A_),B_=Re({},vi,{data:0}),lc=vt(B_),O_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=I_[e])?!!t[e]:!1}function rl(){return F_}var N_=Re({},_s,{key:function(e){if(e.key){var t=O_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?P_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rl,charCode:function(e){return e.type==="keypress"?qs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),H_=vt(N_),j_=Re({},Fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cc=vt(j_),$_=Re({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rl}),W_=vt($_),z_=Re({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),U_=vt(z_),V_=Re({},Fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G_=vt(V_),K_=[9,13,27,32],il=Kt&&"CompositionEvent"in window,Hi=null;Kt&&"documentMode"in document&&(Hi=document.documentMode);var q_=Kt&&"TextEvent"in window&&!Hi,Eu=Kt&&(!il||Hi&&8<Hi&&11>=Hi),hc=" ",uc=!1;function ku(e,t){switch(e){case"keyup":return K_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ru(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ur=!1;function X_(e,t){switch(e){case"compositionend":return Ru(t);case"keypress":return t.which!==32?null:(uc=!0,hc);case"textInput":return e=t.data,e===hc&&uc?null:e;default:return null}}function Y_(e,t){if(Ur)return e==="compositionend"||!il&&ku(e,t)?(e=Lu(),Ks=el=or=null,Ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Eu&&t.locale!=="ko"?null:t.data;default:return null}}var J_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J_[e.type]:t==="textarea"}function Mu(e,t,r,s){ou(s),t=_n(t,"onChange"),0<t.length&&(r=new tl("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var ji=null,Zi=null;function Z_(e){ju(e,0)}function Nn(e){var t=Kr(e);if(Qh(t))return e}function Q_(e,t){if(e==="change")return t}var Du=!1;if(Kt){var vo;if(Kt){var mo="oninput"in document;if(!mo){var fc=document.createElement("div");fc.setAttribute("oninput","return;"),mo=typeof fc.oninput=="function"}vo=mo}else vo=!1;Du=vo&&(!document.documentMode||9<document.documentMode)}function _c(){ji&&(ji.detachEvent("onpropertychange",Au),Zi=ji=null)}function Au(e){if(e.propertyName==="value"&&Nn(Zi)){var t=[];Mu(t,Zi,e,Xa(e)),hu(Z_,t)}}function ep(e,t,r){e==="focusin"?(_c(),ji=t,Zi=r,ji.attachEvent("onpropertychange",Au)):e==="focusout"&&_c()}function tp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nn(Zi)}function rp(e,t){if(e==="click")return Nn(t)}function ip(e,t){if(e==="input"||e==="change")return Nn(t)}function sp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:sp;function Qi(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var d=r[s];if(!jo.call(t,d)||!At(e[d],t[d]))return!1}return!0}function pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gc(e,t){var r=pc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pc(r)}}function Tu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bu(){for(var e=window,t=an();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=an(e.document)}return t}function sl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function np(e){var t=Bu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Tu(r.ownerDocument.documentElement,r)){if(s!==null&&sl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,g=Math.min(s.start,d);s=s.end===void 0?g:Math.min(s.end,d),!e.extend&&g>s&&(d=s,s=g,g=d),d=gc(r,g);var C=gc(r,s);d&&C&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==C.node||e.focusOffset!==C.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),g>s?(e.addRange(t),e.extend(C.node,C.offset)):(t.setEnd(C.node,C.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var op=Kt&&"documentMode"in document&&11>=document.documentMode,Vr=null,na=null,$i=null,oa=!1;function vc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;oa||Vr==null||Vr!==an(s)||(s=Vr,"selectionStart"in s&&sl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),$i&&Qi($i,s)||($i=s,s=_n(na,"onSelect"),0<s.length&&(t=new tl("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Vr)))}function Ts(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Gr={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},yo={},Ou={};Kt&&(Ou=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function Hn(e){if(yo[e])return yo[e];if(!Gr[e])return e;var t=Gr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ou)return yo[e]=t[r];return e}var Pu=Hn("animationend"),Iu=Hn("animationiteration"),Fu=Hn("animationstart"),Nu=Hn("transitionend"),Hu=new Map,mc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){Hu.set(e,t),Nr(t,[e])}for(var Co=0;Co<mc.length;Co++){var So=mc[Co],ap=So.toLowerCase(),lp=So[0].toUpperCase()+So.slice(1);Cr(ap,"on"+lp)}Cr(Pu,"onAnimationEnd");Cr(Iu,"onAnimationIteration");Cr(Fu,"onAnimationStart");Cr("dblclick","onDoubleClick");Cr("focusin","onFocus");Cr("focusout","onBlur");Cr(Nu,"onTransitionEnd");li("onMouseEnter",["mouseout","mouseover"]);li("onMouseLeave",["mouseout","mouseover"]);li("onPointerEnter",["pointerout","pointerover"]);li("onPointerLeave",["pointerout","pointerover"]);Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function yc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,a_(s,t,void 0,e),e.currentTarget=null}function ju(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],d=s.event;s=s.listeners;e:{var g=void 0;if(t)for(var C=s.length-1;0<=C;C--){var i=s[C],o=i.instance,f=i.currentTarget;if(i=i.listener,o!==g&&d.isPropagationStopped())break e;yc(d,i,f),g=o}else for(C=0;C<s.length;C++){if(i=s[C],o=i.instance,f=i.currentTarget,i=i.listener,o!==g&&d.isPropagationStopped())break e;yc(d,i,f),g=o}}}if(cn)throw e=ta,cn=!1,ta=null,e}function xe(e,t){var r=t[ua];r===void 0&&(r=t[ua]=new Set);var s=e+"__bubble";r.has(s)||($u(t,e,2,!1),r.add(s))}function wo(e,t,r){var s=0;t&&(s|=4),$u(r,e,s,t)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function es(e){if(!e[Bs]){e[Bs]=!0,qh.forEach(function(r){r!=="selectionchange"&&(cp.has(r)||wo(r,!1,e),wo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bs]||(t[Bs]=!0,wo("selectionchange",!1,t))}}function $u(e,t,r,s){switch(bu(t)){case 1:var d=x_;break;case 4:d=b_;break;default:d=Qa}r=d.bind(null,t,r,e),d=void 0,!ea||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),s?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function xo(e,t,r,s,d){var g=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var C=s.tag;if(C===3||C===4){var i=s.stateNode.containerInfo;if(i===d||i.nodeType===8&&i.parentNode===d)break;if(C===4)for(C=s.return;C!==null;){var o=C.tag;if((o===3||o===4)&&(o=C.stateNode.containerInfo,o===d||o.nodeType===8&&o.parentNode===d))return;C=C.return}for(;i!==null;){if(C=Er(i),C===null)return;if(o=C.tag,o===5||o===6){s=g=C;continue e}i=i.parentNode}}s=s.return}hu(function(){var f=g,_=Xa(r),h=[];e:{var p=Hu.get(e);if(p!==void 0){var w=tl,S=e;switch(e){case"keypress":if(qs(r)===0)break e;case"keydown":case"keyup":w=H_;break;case"focusin":S="focus",w=go;break;case"focusout":S="blur",w=go;break;case"beforeblur":case"afterblur":w=go;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=k_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=W_;break;case Pu:case Iu:case Fu:w=D_;break;case Nu:w=U_;break;case"scroll":w=L_;break;case"wheel":w=G_;break;case"copy":case"cut":case"paste":w=T_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=cc}var u=(t&4)!==0,n=!u&&e==="scroll",a=u?p!==null?p+"Capture":null:p;u=[];for(var l=f,c;l!==null;){c=l;var m=c.stateNode;if(c.tag===5&&m!==null&&(c=m,a!==null&&(m=qi(l,a),m!=null&&u.push(ts(l,m,c)))),n)break;l=l.return}0<u.length&&(p=new w(p,S,null,r,_),h.push({event:p,listeners:u}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",p&&r!==Zo&&(S=r.relatedTarget||r.fromElement)&&(Er(S)||S[qt]))break e;if((w||p)&&(p=_.window===_?_:(p=_.ownerDocument)?p.defaultView||p.parentWindow:window,w?(S=r.relatedTarget||r.toElement,w=f,S=S?Er(S):null,S!==null&&(n=Hr(S),S!==n||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=f),w!==S)){if(u=ac,m="onMouseLeave",a="onMouseEnter",l="mouse",(e==="pointerout"||e==="pointerover")&&(u=cc,m="onPointerLeave",a="onPointerEnter",l="pointer"),n=w==null?p:Kr(w),c=S==null?p:Kr(S),p=new u(m,l+"leave",w,r,_),p.target=n,p.relatedTarget=c,m=null,Er(_)===f&&(u=new u(a,l+"enter",S,r,_),u.target=c,u.relatedTarget=n,m=u),n=m,w&&S)t:{for(u=w,a=S,l=0,c=u;c;c=$r(c))l++;for(c=0,m=a;m;m=$r(m))c++;for(;0<l-c;)u=$r(u),l--;for(;0<c-l;)a=$r(a),c--;for(;l--;){if(u===a||a!==null&&u===a.alternate)break t;u=$r(u),a=$r(a)}u=null}else u=null;w!==null&&Cc(h,p,w,u,!1),S!==null&&n!==null&&Cc(h,n,S,u,!0)}}e:{if(p=f?Kr(f):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var L=Q_;else if(dc(p))if(Du)L=ip;else{L=tp;var v=ep}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=rp);if(L&&(L=L(e,f))){Mu(h,L,r,_);break e}v&&v(e,p,f),e==="focusout"&&(v=p._wrapperState)&&v.controlled&&p.type==="number"&&Ko(p,"number",p.value)}switch(v=f?Kr(f):window,e){case"focusin":(dc(v)||v.contentEditable==="true")&&(Vr=v,na=f,$i=null);break;case"focusout":$i=na=Vr=null;break;case"mousedown":oa=!0;break;case"contextmenu":case"mouseup":case"dragend":oa=!1,vc(h,r,_);break;case"selectionchange":if(op)break;case"keydown":case"keyup":vc(h,r,_)}var x;if(il)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ur?ku(e,r)&&(y="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(y="onCompositionStart");y&&(Eu&&r.locale!=="ko"&&(Ur||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ur&&(x=Lu()):(or=_,el="value"in or?or.value:or.textContent,Ur=!0)),v=_n(f,y),0<v.length&&(y=new lc(y,e,null,r,_),h.push({event:y,listeners:v}),x?y.data=x:(x=Ru(r),x!==null&&(y.data=x)))),(x=q_?X_(e,r):Y_(e,r))&&(f=_n(f,"onBeforeInput"),0<f.length&&(_=new lc("onBeforeInput","beforeinput",null,r,_),h.push({event:_,listeners:f}),_.data=x))}ju(h,t)})}function ts(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _n(e,t){for(var r=t+"Capture",s=[];e!==null;){var d=e,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=qi(e,r),g!=null&&s.unshift(ts(e,g,d)),g=qi(e,t),g!=null&&s.push(ts(e,g,d))),e=e.return}return s}function $r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cc(e,t,r,s,d){for(var g=t._reactName,C=[];r!==null&&r!==s;){var i=r,o=i.alternate,f=i.stateNode;if(o!==null&&o===s)break;i.tag===5&&f!==null&&(i=f,d?(o=qi(r,g),o!=null&&C.unshift(ts(r,o,i))):d||(o=qi(r,g),o!=null&&C.push(ts(r,o,i)))),r=r.return}C.length!==0&&e.push({event:t,listeners:C})}var hp=/\r\n?/g,up=/\u0000|\uFFFD/g;function Sc(e){return(typeof e=="string"?e:""+e).replace(hp,`
`).replace(up,"")}function Os(e,t,r){if(t=Sc(t),Sc(e)!==t&&r)throw Error(J(425))}function pn(){}var aa=null,la=null;function ca(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ha=typeof setTimeout=="function"?setTimeout:void 0,dp=typeof clearTimeout=="function"?clearTimeout:void 0,wc=typeof Promise=="function"?Promise:void 0,fp=typeof queueMicrotask=="function"?queueMicrotask:typeof wc<"u"?function(e){return wc.resolve(null).then(e).catch(_p)}:ha;function _p(e){setTimeout(function(){throw e})}function bo(e,t){var r=t,s=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(s===0){e.removeChild(d),Ji(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=d}while(r);Ji(t)}function dr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var mi=Math.random().toString(36).slice(2),Ft="__reactFiber$"+mi,rs="__reactProps$"+mi,qt="__reactContainer$"+mi,ua="__reactEvents$"+mi,pp="__reactListeners$"+mi,gp="__reactHandles$"+mi;function Er(e){var t=e[Ft];if(t)return t;for(var r=e.parentNode;r;){if(t=r[qt]||r[Ft]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=xc(e);e!==null;){if(r=e[Ft])return r;e=xc(e)}return t}e=r,r=e.parentNode}return null}function ps(e){return e=e[Ft]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function jn(e){return e[rs]||null}var da=[],qr=-1;function Sr(e){return{current:e}}function be(e){0>qr||(e.current=da[qr],da[qr]=null,qr--)}function we(e,t){qr++,da[qr]=e.current,e.current=t}var yr={},qe=Sr(yr),nt=Sr(!1),Tr=yr;function ci(e,t){var r=e.type.contextTypes;if(!r)return yr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in r)d[g]=t[g];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function ot(e){return e=e.childContextTypes,e!=null}function gn(){be(nt),be(qe)}function bc(e,t,r){if(qe.current!==yr)throw Error(J(168));we(qe,t),we(nt,r)}function Wu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var d in s)if(!(d in t))throw Error(J(108,e_(e)||"Unknown",d));return Re({},r,s)}function vn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yr,Tr=qe.current,we(qe,e),we(nt,nt.current),!0}function Lc(e,t,r){var s=e.stateNode;if(!s)throw Error(J(169));r?(e=Wu(e,t,Tr),s.__reactInternalMemoizedMergedChildContext=e,be(nt),be(qe),we(qe,e)):be(nt),we(nt,r)}var Wt=null,$n=!1,Lo=!1;function zu(e){Wt===null?Wt=[e]:Wt.push(e)}function vp(e){$n=!0,zu(e)}function wr(){if(!Lo&&Wt!==null){Lo=!0;var e=0,t=Ce;try{var r=Wt;for(Ce=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Wt=null,$n=!1}catch(d){throw Wt!==null&&(Wt=Wt.slice(e+1)),_u(Ya,wr),d}finally{Ce=t,Lo=!1}}return null}var Xr=[],Yr=0,mn=null,yn=0,mt=[],yt=0,Br=null,zt=1,Ut="";function br(e,t){Xr[Yr++]=yn,Xr[Yr++]=mn,mn=e,yn=t}function Uu(e,t,r){mt[yt++]=zt,mt[yt++]=Ut,mt[yt++]=Br,Br=e;var s=zt;e=Ut;var d=32-Mt(s)-1;s&=~(1<<d),r+=1;var g=32-Mt(t)+d;if(30<g){var C=d-d%5;g=(s&(1<<C)-1).toString(32),s>>=C,d-=C,zt=1<<32-Mt(t)+d|r<<d|s,Ut=g+e}else zt=1<<g|r<<d|s,Ut=e}function nl(e){e.return!==null&&(br(e,1),Uu(e,1,0))}function ol(e){for(;e===mn;)mn=Xr[--Yr],Xr[Yr]=null,yn=Xr[--Yr],Xr[Yr]=null;for(;e===Br;)Br=mt[--yt],mt[yt]=null,Ut=mt[--yt],mt[yt]=null,zt=mt[--yt],mt[yt]=null}var ft=null,dt=null,Le=!1,Rt=null;function Vu(e,t){var r=Ct(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ec(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ft=e,dt=dr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ft=e,dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Br!==null?{id:zt,overflow:Ut}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ct(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ft=e,dt=null,!0):!1;default:return!1}}function fa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _a(e){if(Le){var t=dt;if(t){var r=t;if(!Ec(e,t)){if(fa(e))throw Error(J(418));t=dr(r.nextSibling);var s=ft;t&&Ec(e,t)?Vu(s,r):(e.flags=e.flags&-4097|2,Le=!1,ft=e)}}else{if(fa(e))throw Error(J(418));e.flags=e.flags&-4097|2,Le=!1,ft=e}}}function kc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ft=e}function Ps(e){if(e!==ft)return!1;if(!Le)return kc(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ca(e.type,e.memoizedProps)),t&&(t=dt)){if(fa(e))throw Gu(),Error(J(418));for(;t;)Vu(e,t),t=dr(t.nextSibling)}if(kc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){dt=dr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}dt=null}}else dt=ft?dr(e.stateNode.nextSibling):null;return!0}function Gu(){for(var e=dt;e;)e=dr(e.nextSibling)}function hi(){dt=ft=null,Le=!1}function al(e){Rt===null?Rt=[e]:Rt.push(e)}var mp=Jt.ReactCurrentBatchConfig;function Mi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(J(309));var s=r.stateNode}if(!s)throw Error(J(147,e));var d=s,g=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===g?t.ref:(t=function(C){var i=d.refs;C===null?delete i[g]:i[g]=C},t._stringRef=g,t)}if(typeof e!="string")throw Error(J(284));if(!r._owner)throw Error(J(290,e))}return e}function Is(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rc(e){var t=e._init;return t(e._payload)}function Ku(e){function t(a,l){if(e){var c=a.deletions;c===null?(a.deletions=[l],a.flags|=16):c.push(l)}}function r(a,l){if(!e)return null;for(;l!==null;)t(a,l),l=l.sibling;return null}function s(a,l){for(a=new Map;l!==null;)l.key!==null?a.set(l.key,l):a.set(l.index,l),l=l.sibling;return a}function d(a,l){return a=gr(a,l),a.index=0,a.sibling=null,a}function g(a,l,c){return a.index=c,e?(c=a.alternate,c!==null?(c=c.index,c<l?(a.flags|=2,l):c):(a.flags|=2,l)):(a.flags|=1048576,l)}function C(a){return e&&a.alternate===null&&(a.flags|=2),a}function i(a,l,c,m){return l===null||l.tag!==6?(l=To(c,a.mode,m),l.return=a,l):(l=d(l,c),l.return=a,l)}function o(a,l,c,m){var L=c.type;return L===zr?_(a,l,c.props.children,m,c.key):l!==null&&(l.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===rr&&Rc(L)===l.type)?(m=d(l,c.props),m.ref=Mi(a,l,c),m.return=a,m):(m=tn(c.type,c.key,c.props,null,a.mode,m),m.ref=Mi(a,l,c),m.return=a,m)}function f(a,l,c,m){return l===null||l.tag!==4||l.stateNode.containerInfo!==c.containerInfo||l.stateNode.implementation!==c.implementation?(l=Bo(c,a.mode,m),l.return=a,l):(l=d(l,c.children||[]),l.return=a,l)}function _(a,l,c,m,L){return l===null||l.tag!==7?(l=Ar(c,a.mode,m,L),l.return=a,l):(l=d(l,c),l.return=a,l)}function h(a,l,c){if(typeof l=="string"&&l!==""||typeof l=="number")return l=To(""+l,a.mode,c),l.return=a,l;if(typeof l=="object"&&l!==null){switch(l.$$typeof){case Ls:return c=tn(l.type,l.key,l.props,null,a.mode,c),c.ref=Mi(a,null,l),c.return=a,c;case Wr:return l=Bo(l,a.mode,c),l.return=a,l;case rr:var m=l._init;return h(a,m(l._payload),c)}if(Oi(l)||bi(l))return l=Ar(l,a.mode,c,null),l.return=a,l;Is(a,l)}return null}function p(a,l,c,m){var L=l!==null?l.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return L!==null?null:i(a,l,""+c,m);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Ls:return c.key===L?o(a,l,c,m):null;case Wr:return c.key===L?f(a,l,c,m):null;case rr:return L=c._init,p(a,l,L(c._payload),m)}if(Oi(c)||bi(c))return L!==null?null:_(a,l,c,m,null);Is(a,c)}return null}function w(a,l,c,m,L){if(typeof m=="string"&&m!==""||typeof m=="number")return a=a.get(c)||null,i(l,a,""+m,L);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ls:return a=a.get(m.key===null?c:m.key)||null,o(l,a,m,L);case Wr:return a=a.get(m.key===null?c:m.key)||null,f(l,a,m,L);case rr:var v=m._init;return w(a,l,c,v(m._payload),L)}if(Oi(m)||bi(m))return a=a.get(c)||null,_(l,a,m,L,null);Is(l,m)}return null}function S(a,l,c,m){for(var L=null,v=null,x=l,y=l=0,b=null;x!==null&&y<c.length;y++){x.index>y?(b=x,x=null):b=x.sibling;var E=p(a,x,c[y],m);if(E===null){x===null&&(x=b);break}e&&x&&E.alternate===null&&t(a,x),l=g(E,l,y),v===null?L=E:v.sibling=E,v=E,x=b}if(y===c.length)return r(a,x),Le&&br(a,y),L;if(x===null){for(;y<c.length;y++)x=h(a,c[y],m),x!==null&&(l=g(x,l,y),v===null?L=x:v.sibling=x,v=x);return Le&&br(a,y),L}for(x=s(a,x);y<c.length;y++)b=w(x,a,y,c[y],m),b!==null&&(e&&b.alternate!==null&&x.delete(b.key===null?y:b.key),l=g(b,l,y),v===null?L=b:v.sibling=b,v=b);return e&&x.forEach(function(M){return t(a,M)}),Le&&br(a,y),L}function u(a,l,c,m){var L=bi(c);if(typeof L!="function")throw Error(J(150));if(c=L.call(c),c==null)throw Error(J(151));for(var v=L=null,x=l,y=l=0,b=null,E=c.next();x!==null&&!E.done;y++,E=c.next()){x.index>y?(b=x,x=null):b=x.sibling;var M=p(a,x,E.value,m);if(M===null){x===null&&(x=b);break}e&&x&&M.alternate===null&&t(a,x),l=g(M,l,y),v===null?L=M:v.sibling=M,v=M,x=b}if(E.done)return r(a,x),Le&&br(a,y),L;if(x===null){for(;!E.done;y++,E=c.next())E=h(a,E.value,m),E!==null&&(l=g(E,l,y),v===null?L=E:v.sibling=E,v=E);return Le&&br(a,y),L}for(x=s(a,x);!E.done;y++,E=c.next())E=w(x,a,y,E.value,m),E!==null&&(e&&E.alternate!==null&&x.delete(E.key===null?y:E.key),l=g(E,l,y),v===null?L=E:v.sibling=E,v=E);return e&&x.forEach(function(R){return t(a,R)}),Le&&br(a,y),L}function n(a,l,c,m){if(typeof c=="object"&&c!==null&&c.type===zr&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case Ls:e:{for(var L=c.key,v=l;v!==null;){if(v.key===L){if(L=c.type,L===zr){if(v.tag===7){r(a,v.sibling),l=d(v,c.props.children),l.return=a,a=l;break e}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===rr&&Rc(L)===v.type){r(a,v.sibling),l=d(v,c.props),l.ref=Mi(a,v,c),l.return=a,a=l;break e}r(a,v);break}else t(a,v);v=v.sibling}c.type===zr?(l=Ar(c.props.children,a.mode,m,c.key),l.return=a,a=l):(m=tn(c.type,c.key,c.props,null,a.mode,m),m.ref=Mi(a,l,c),m.return=a,a=m)}return C(a);case Wr:e:{for(v=c.key;l!==null;){if(l.key===v)if(l.tag===4&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){r(a,l.sibling),l=d(l,c.children||[]),l.return=a,a=l;break e}else{r(a,l);break}else t(a,l);l=l.sibling}l=Bo(c,a.mode,m),l.return=a,a=l}return C(a);case rr:return v=c._init,n(a,l,v(c._payload),m)}if(Oi(c))return S(a,l,c,m);if(bi(c))return u(a,l,c,m);Is(a,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,l!==null&&l.tag===6?(r(a,l.sibling),l=d(l,c),l.return=a,a=l):(r(a,l),l=To(c,a.mode,m),l.return=a,a=l),C(a)):r(a,l)}return n}var ui=Ku(!0),qu=Ku(!1),Cn=Sr(null),Sn=null,Jr=null,ll=null;function cl(){ll=Jr=Sn=null}function hl(e){var t=Cn.current;be(Cn),e._currentValue=t}function pa(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function si(e,t){Sn=e,ll=Jr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(st=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(ll!==e)if(e={context:e,memoizedValue:t,next:null},Jr===null){if(Sn===null)throw Error(J(308));Jr=e,Sn.dependencies={lanes:0,firstContext:e}}else Jr=Jr.next=e;return t}var kr=null;function ul(e){kr===null?kr=[e]:kr.push(e)}function Xu(e,t,r,s){var d=t.interleaved;return d===null?(r.next=r,ul(t)):(r.next=d.next,d.next=r),t.interleaved=r,Xt(e,s)}function Xt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ir=!1;function dl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ve&2){var d=s.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),s.pending=t,Xt(e,r)}return d=s.interleaved,d===null?(t.next=t,ul(s)):(t.next=d.next,d.next=t),s.interleaved=t,Xt(e,r)}function Xs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ja(e,r)}}function Mc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var d=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var C={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};g===null?d=g=C:g=g.next=C,r=r.next}while(r!==null);g===null?d=g=t:g=g.next=t}else d=g=t;r={baseState:s.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function wn(e,t,r,s){var d=e.updateQueue;ir=!1;var g=d.firstBaseUpdate,C=d.lastBaseUpdate,i=d.shared.pending;if(i!==null){d.shared.pending=null;var o=i,f=o.next;o.next=null,C===null?g=f:C.next=f,C=o;var _=e.alternate;_!==null&&(_=_.updateQueue,i=_.lastBaseUpdate,i!==C&&(i===null?_.firstBaseUpdate=f:i.next=f,_.lastBaseUpdate=o))}if(g!==null){var h=d.baseState;C=0,_=f=o=null,i=g;do{var p=i.lane,w=i.eventTime;if((s&p)===p){_!==null&&(_=_.next={eventTime:w,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var S=e,u=i;switch(p=t,w=r,u.tag){case 1:if(S=u.payload,typeof S=="function"){h=S.call(w,h,p);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=u.payload,p=typeof S=="function"?S.call(w,h,p):S,p==null)break e;h=Re({},h,p);break e;case 2:ir=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=d.effects,p===null?d.effects=[i]:p.push(i))}else w={eventTime:w,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},_===null?(f=_=w,o=h):_=_.next=w,C|=p;if(i=i.next,i===null){if(i=d.shared.pending,i===null)break;p=i,i=p.next,p.next=null,d.lastBaseUpdate=p,d.shared.pending=null}}while(!0);if(_===null&&(o=h),d.baseState=o,d.firstBaseUpdate=f,d.lastBaseUpdate=_,t=d.shared.interleaved,t!==null){d=t;do C|=d.lane,d=d.next;while(d!==t)}else g===null&&(d.shared.lanes=0);Pr|=C,e.lanes=C,e.memoizedState=h}}function Dc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],d=s.callback;if(d!==null){if(s.callback=null,s=r,typeof d!="function")throw Error(J(191,d));d.call(s)}}}var gs={},Ht=Sr(gs),is=Sr(gs),ss=Sr(gs);function Rr(e){if(e===gs)throw Error(J(174));return e}function fl(e,t){switch(we(ss,t),we(is,e),we(Ht,gs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xo(t,e)}be(Ht),we(Ht,t)}function di(){be(Ht),be(is),be(ss)}function Ju(e){Rr(ss.current);var t=Rr(Ht.current),r=Xo(t,e.type);t!==r&&(we(is,e),we(Ht,r))}function _l(e){is.current===e&&(be(Ht),be(is))}var Ee=Sr(0);function xn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Eo=[];function pl(){for(var e=0;e<Eo.length;e++)Eo[e]._workInProgressVersionPrimary=null;Eo.length=0}var Ys=Jt.ReactCurrentDispatcher,ko=Jt.ReactCurrentBatchConfig,Or=0,ke=null,Be=null,Ie=null,bn=!1,Wi=!1,ns=0,yp=0;function ze(){throw Error(J(321))}function gl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!At(e[r],t[r]))return!1;return!0}function vl(e,t,r,s,d,g){if(Or=g,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ys.current=e===null||e.memoizedState===null?xp:bp,e=r(s,d),Wi){g=0;do{if(Wi=!1,ns=0,25<=g)throw Error(J(301));g+=1,Ie=Be=null,t.updateQueue=null,Ys.current=Lp,e=r(s,d)}while(Wi)}if(Ys.current=Ln,t=Be!==null&&Be.next!==null,Or=0,Ie=Be=ke=null,bn=!1,t)throw Error(J(300));return e}function ml(){var e=ns!==0;return ns=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?ke.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function xt(){if(Be===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Ie===null?ke.memoizedState:Ie.next;if(t!==null)Ie=t,Be=e;else{if(e===null)throw Error(J(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ie===null?ke.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function os(e,t){return typeof t=="function"?t(e):t}function Ro(e){var t=xt(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var s=Be,d=s.baseQueue,g=r.pending;if(g!==null){if(d!==null){var C=d.next;d.next=g.next,g.next=C}s.baseQueue=d=g,r.pending=null}if(d!==null){g=d.next,s=s.baseState;var i=C=null,o=null,f=g;do{var _=f.lane;if((Or&_)===_)o!==null&&(o=o.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var h={lane:_,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};o===null?(i=o=h,C=s):o=o.next=h,ke.lanes|=_,Pr|=_}f=f.next}while(f!==null&&f!==g);o===null?C=s:o.next=i,At(s,t.memoizedState)||(st=!0),t.memoizedState=s,t.baseState=C,t.baseQueue=o,r.lastRenderedState=s}if(e=r.interleaved,e!==null){d=e;do g=d.lane,ke.lanes|=g,Pr|=g,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Mo(e){var t=xt(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var s=r.dispatch,d=r.pending,g=t.memoizedState;if(d!==null){r.pending=null;var C=d=d.next;do g=e(g,C.action),C=C.next;while(C!==d);At(g,t.memoizedState)||(st=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),r.lastRenderedState=g}return[g,s]}function Zu(){}function Qu(e,t){var r=ke,s=xt(),d=t(),g=!At(s.memoizedState,d);if(g&&(s.memoizedState=d,st=!0),s=s.queue,yl(rd.bind(null,r,s,e),[e]),s.getSnapshot!==t||g||Ie!==null&&Ie.memoizedState.tag&1){if(r.flags|=2048,as(9,td.bind(null,r,s,d,t),void 0,null),Fe===null)throw Error(J(349));Or&30||ed(r,t,d)}return d}function ed(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function td(e,t,r,s){t.value=r,t.getSnapshot=s,id(t)&&sd(e)}function rd(e,t,r){return r(function(){id(t)&&sd(e)})}function id(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!At(e,r)}catch{return!0}}function sd(e){var t=Xt(e,1);t!==null&&Dt(t,e,1,-1)}function Ac(e){var t=Pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:e},t.queue=e,e=e.dispatch=wp.bind(null,ke,e),[t.memoizedState,e]}function as(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function nd(){return xt().memoizedState}function Js(e,t,r,s){var d=Pt();ke.flags|=e,d.memoizedState=as(1|t,r,void 0,s===void 0?null:s)}function Wn(e,t,r,s){var d=xt();s=s===void 0?null:s;var g=void 0;if(Be!==null){var C=Be.memoizedState;if(g=C.destroy,s!==null&&gl(s,C.deps)){d.memoizedState=as(t,r,g,s);return}}ke.flags|=e,d.memoizedState=as(1|t,r,g,s)}function Tc(e,t){return Js(8390656,8,e,t)}function yl(e,t){return Wn(2048,8,e,t)}function od(e,t){return Wn(4,2,e,t)}function ad(e,t){return Wn(4,4,e,t)}function ld(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cd(e,t,r){return r=r!=null?r.concat([e]):null,Wn(4,4,ld.bind(null,t,e),r)}function Cl(){}function hd(e,t){var r=xt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&gl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function ud(e,t){var r=xt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&gl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function dd(e,t,r){return Or&21?(At(r,t)||(r=vu(),ke.lanes|=r,Pr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=r)}function Cp(e,t){var r=Ce;Ce=r!==0&&4>r?r:4,e(!0);var s=ko.transition;ko.transition={};try{e(!1),t()}finally{Ce=r,ko.transition=s}}function fd(){return xt().memoizedState}function Sp(e,t,r){var s=pr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},_d(e))pd(t,r);else if(r=Xu(e,t,r,s),r!==null){var d=Ye();Dt(r,e,s,d),gd(r,t,s)}}function wp(e,t,r){var s=pr(e),d={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(_d(e))pd(t,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var C=t.lastRenderedState,i=g(C,r);if(d.hasEagerState=!0,d.eagerState=i,At(i,C)){var o=t.interleaved;o===null?(d.next=d,ul(t)):(d.next=o.next,o.next=d),t.interleaved=d;return}}catch{}finally{}r=Xu(e,t,d,s),r!==null&&(d=Ye(),Dt(r,e,s,d),gd(r,t,s))}}function _d(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function pd(e,t){Wi=bn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function gd(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ja(e,r)}}var Ln={readContext:wt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},xp={readContext:wt,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:Tc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Js(4194308,4,ld.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Js(4194308,4,e,t)},useInsertionEffect:function(e,t){return Js(4,2,e,t)},useMemo:function(e,t){var r=Pt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Pt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Sp.bind(null,ke,e),[s.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:Ac,useDebugValue:Cl,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=Ac(!1),t=e[0];return e=Cp.bind(null,e[1]),Pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ke,d=Pt();if(Le){if(r===void 0)throw Error(J(407));r=r()}else{if(r=t(),Fe===null)throw Error(J(349));Or&30||ed(s,t,r)}d.memoizedState=r;var g={value:r,getSnapshot:t};return d.queue=g,Tc(rd.bind(null,s,g,e),[e]),s.flags|=2048,as(9,td.bind(null,s,g,r,t),void 0,null),r},useId:function(){var e=Pt(),t=Fe.identifierPrefix;if(Le){var r=Ut,s=zt;r=(s&~(1<<32-Mt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ns++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=yp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bp={readContext:wt,useCallback:hd,useContext:wt,useEffect:yl,useImperativeHandle:cd,useInsertionEffect:od,useLayoutEffect:ad,useMemo:ud,useReducer:Ro,useRef:nd,useState:function(){return Ro(os)},useDebugValue:Cl,useDeferredValue:function(e){var t=xt();return dd(t,Be.memoizedState,e)},useTransition:function(){var e=Ro(os)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:Qu,useId:fd,unstable_isNewReconciler:!1},Lp={readContext:wt,useCallback:hd,useContext:wt,useEffect:yl,useImperativeHandle:cd,useInsertionEffect:od,useLayoutEffect:ad,useMemo:ud,useReducer:Mo,useRef:nd,useState:function(){return Mo(os)},useDebugValue:Cl,useDeferredValue:function(e){var t=xt();return Be===null?t.memoizedState=e:dd(t,Be.memoizedState,e)},useTransition:function(){var e=Mo(os)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:Qu,useId:fd,unstable_isNewReconciler:!1};function Et(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ga(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Re({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var zn={isMounted:function(e){return(e=e._reactInternals)?Hr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ye(),d=pr(e),g=Gt(s,d);g.payload=t,r!=null&&(g.callback=r),t=fr(e,g,d),t!==null&&(Dt(t,e,d,s),Xs(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ye(),d=pr(e),g=Gt(s,d);g.tag=1,g.payload=t,r!=null&&(g.callback=r),t=fr(e,g,d),t!==null&&(Dt(t,e,d,s),Xs(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ye(),s=pr(e),d=Gt(r,s);d.tag=2,t!=null&&(d.callback=t),t=fr(e,d,s),t!==null&&(Dt(t,e,s,r),Xs(t,e,s))}};function Bc(e,t,r,s,d,g,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,g,C):t.prototype&&t.prototype.isPureReactComponent?!Qi(r,s)||!Qi(d,g):!0}function vd(e,t,r){var s=!1,d=yr,g=t.contextType;return typeof g=="object"&&g!==null?g=wt(g):(d=ot(t)?Tr:qe.current,s=t.contextTypes,g=(s=s!=null)?ci(e,d):yr),t=new t(r,g),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zn,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=g),t}function Oc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&zn.enqueueReplaceState(t,t.state,null)}function va(e,t,r,s){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},dl(e);var g=t.contextType;typeof g=="object"&&g!==null?d.context=wt(g):(g=ot(t)?Tr:qe.current,d.context=ci(e,g)),d.state=e.memoizedState,g=t.getDerivedStateFromProps,typeof g=="function"&&(ga(e,t,g,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&zn.enqueueReplaceState(d,d.state,null),wn(e,r,d,s),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function fi(e,t){try{var r="",s=t;do r+=Qf(s),s=s.return;while(s);var d=r}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:t,stack:d,digest:null}}function Do(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ma(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ep=typeof WeakMap=="function"?WeakMap:Map;function md(e,t,r){r=Gt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){kn||(kn=!0,Ra=s),ma(e,t)},r}function yd(e,t,r){r=Gt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var d=t.value;r.payload=function(){return s(d)},r.callback=function(){ma(e,t)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(r.callback=function(){ma(e,t),typeof s!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var C=t.stack;this.componentDidCatch(t.value,{componentStack:C!==null?C:""})}),r}function Pc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Ep;var d=new Set;s.set(t,d)}else d=s.get(t),d===void 0&&(d=new Set,s.set(t,d));d.has(r)||(d.add(r),e=jp.bind(null,e,t,r),t.then(e,e))}function Ic(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fc(e,t,r,s,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gt(-1,1),t.tag=2,fr(r,t,1))),r.lanes|=1),e)}var kp=Jt.ReactCurrentOwner,st=!1;function Xe(e,t,r,s){t.child=e===null?qu(t,null,r,s):ui(t,e.child,r,s)}function Nc(e,t,r,s,d){r=r.render;var g=t.ref;return si(t,d),s=vl(e,t,r,s,g,d),r=ml(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Yt(e,t,d)):(Le&&r&&nl(t),t.flags|=1,Xe(e,t,s,d),t.child)}function Hc(e,t,r,s,d){if(e===null){var g=r.type;return typeof g=="function"&&!Rl(g)&&g.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=g,Cd(e,t,g,s,d)):(e=tn(r.type,null,s,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!(e.lanes&d)){var C=g.memoizedProps;if(r=r.compare,r=r!==null?r:Qi,r(C,s)&&e.ref===t.ref)return Yt(e,t,d)}return t.flags|=1,e=gr(g,s),e.ref=t.ref,e.return=t,t.child=e}function Cd(e,t,r,s,d){if(e!==null){var g=e.memoizedProps;if(Qi(g,s)&&e.ref===t.ref)if(st=!1,t.pendingProps=s=g,(e.lanes&d)!==0)e.flags&131072&&(st=!0);else return t.lanes=e.lanes,Yt(e,t,d)}return ya(e,t,r,s,d)}function Sd(e,t,r){var s=t.pendingProps,d=s.children,g=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Qr,ut),ut|=r;else{if(!(r&1073741824))return e=g!==null?g.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(Qr,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=g!==null?g.baseLanes:r,we(Qr,ut),ut|=s}else g!==null?(s=g.baseLanes|r,t.memoizedState=null):s=r,we(Qr,ut),ut|=s;return Xe(e,t,d,r),t.child}function wd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ya(e,t,r,s,d){var g=ot(r)?Tr:qe.current;return g=ci(t,g),si(t,d),r=vl(e,t,r,s,g,d),s=ml(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Yt(e,t,d)):(Le&&s&&nl(t),t.flags|=1,Xe(e,t,r,d),t.child)}function jc(e,t,r,s,d){if(ot(r)){var g=!0;vn(t)}else g=!1;if(si(t,d),t.stateNode===null)Zs(e,t),vd(t,r,s),va(t,r,s,d),s=!0;else if(e===null){var C=t.stateNode,i=t.memoizedProps;C.props=i;var o=C.context,f=r.contextType;typeof f=="object"&&f!==null?f=wt(f):(f=ot(r)?Tr:qe.current,f=ci(t,f));var _=r.getDerivedStateFromProps,h=typeof _=="function"||typeof C.getSnapshotBeforeUpdate=="function";h||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(i!==s||o!==f)&&Oc(t,C,s,f),ir=!1;var p=t.memoizedState;C.state=p,wn(t,s,C,d),o=t.memoizedState,i!==s||p!==o||nt.current||ir?(typeof _=="function"&&(ga(t,r,_,s),o=t.memoizedState),(i=ir||Bc(t,r,i,s,p,o,f))?(h||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(t.flags|=4194308)):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=o),C.props=s,C.state=o,C.context=f,s=i):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{C=t.stateNode,Yu(e,t),i=t.memoizedProps,f=t.type===t.elementType?i:Et(t.type,i),C.props=f,h=t.pendingProps,p=C.context,o=r.contextType,typeof o=="object"&&o!==null?o=wt(o):(o=ot(r)?Tr:qe.current,o=ci(t,o));var w=r.getDerivedStateFromProps;(_=typeof w=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(i!==h||p!==o)&&Oc(t,C,s,o),ir=!1,p=t.memoizedState,C.state=p,wn(t,s,C,d);var S=t.memoizedState;i!==h||p!==S||nt.current||ir?(typeof w=="function"&&(ga(t,r,w,s),S=t.memoizedState),(f=ir||Bc(t,r,f,s,p,S,o)||!1)?(_||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(s,S,o),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(s,S,o)),typeof C.componentDidUpdate=="function"&&(t.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof C.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=S),C.props=s,C.state=S,C.context=o,s=f):(typeof C.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return Ca(e,t,r,s,g,d)}function Ca(e,t,r,s,d,g){wd(e,t);var C=(t.flags&128)!==0;if(!s&&!C)return d&&Lc(t,r,!1),Yt(e,t,g);s=t.stateNode,kp.current=t;var i=C&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&C?(t.child=ui(t,e.child,null,g),t.child=ui(t,null,i,g)):Xe(e,t,i,g),t.memoizedState=s.state,d&&Lc(t,r,!0),t.child}function xd(e){var t=e.stateNode;t.pendingContext?bc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bc(e,t.context,!1),fl(e,t.containerInfo)}function $c(e,t,r,s,d){return hi(),al(d),t.flags|=256,Xe(e,t,r,s),t.child}var Sa={dehydrated:null,treeContext:null,retryLane:0};function wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function bd(e,t,r){var s=t.pendingProps,d=Ee.current,g=!1,C=(t.flags&128)!==0,i;if((i=C)||(i=e!==null&&e.memoizedState===null?!1:(d&2)!==0),i?(g=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),we(Ee,d&1),e===null)return _a(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(C=s.children,e=s.fallback,g?(s=t.mode,g=t.child,C={mode:"hidden",children:C},!(s&1)&&g!==null?(g.childLanes=0,g.pendingProps=C):g=Gn(C,s,0,null),e=Ar(e,s,r,null),g.return=t,e.return=t,g.sibling=e,t.child=g,t.child.memoizedState=wa(r),t.memoizedState=Sa,e):Sl(t,C));if(d=e.memoizedState,d!==null&&(i=d.dehydrated,i!==null))return Rp(e,t,C,s,i,d,r);if(g){g=s.fallback,C=t.mode,d=e.child,i=d.sibling;var o={mode:"hidden",children:s.children};return!(C&1)&&t.child!==d?(s=t.child,s.childLanes=0,s.pendingProps=o,t.deletions=null):(s=gr(d,o),s.subtreeFlags=d.subtreeFlags&14680064),i!==null?g=gr(i,g):(g=Ar(g,C,r,null),g.flags|=2),g.return=t,s.return=t,s.sibling=g,t.child=s,s=g,g=t.child,C=e.child.memoizedState,C=C===null?wa(r):{baseLanes:C.baseLanes|r,cachePool:null,transitions:C.transitions},g.memoizedState=C,g.childLanes=e.childLanes&~r,t.memoizedState=Sa,s}return g=e.child,e=g.sibling,s=gr(g,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Sl(e,t){return t=Gn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fs(e,t,r,s){return s!==null&&al(s),ui(t,e.child,null,r),e=Sl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rp(e,t,r,s,d,g,C){if(r)return t.flags&256?(t.flags&=-257,s=Do(Error(J(422))),Fs(e,t,C,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(g=s.fallback,d=t.mode,s=Gn({mode:"visible",children:s.children},d,0,null),g=Ar(g,d,C,null),g.flags|=2,s.return=t,g.return=t,s.sibling=g,t.child=s,t.mode&1&&ui(t,e.child,null,C),t.child.memoizedState=wa(C),t.memoizedState=Sa,g);if(!(t.mode&1))return Fs(e,t,C,null);if(d.data==="$!"){if(s=d.nextSibling&&d.nextSibling.dataset,s)var i=s.dgst;return s=i,g=Error(J(419)),s=Do(g,s,void 0),Fs(e,t,C,s)}if(i=(C&e.childLanes)!==0,st||i){if(s=Fe,s!==null){switch(C&-C){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(s.suspendedLanes|C)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Xt(e,d),Dt(s,e,d,-1))}return kl(),s=Do(Error(J(421))),Fs(e,t,C,s)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=$p.bind(null,e),d._reactRetry=t,null):(e=g.treeContext,dt=dr(d.nextSibling),ft=t,Le=!0,Rt=null,e!==null&&(mt[yt++]=zt,mt[yt++]=Ut,mt[yt++]=Br,zt=e.id,Ut=e.overflow,Br=t),t=Sl(t,s.children),t.flags|=4096,t)}function Wc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),pa(e.return,t,r)}function Ao(e,t,r,s,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=r,g.tailMode=d)}function Ld(e,t,r){var s=t.pendingProps,d=s.revealOrder,g=s.tail;if(Xe(e,t,s.children,r),s=Ee.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wc(e,r,t);else if(e.tag===19)Wc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(we(Ee,s),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&xn(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Ao(t,!1,d,r,g);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&xn(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Ao(t,!0,r,null,g);break;case"together":Ao(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Pr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,r=gr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=gr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Mp(e,t,r){switch(t.tag){case 3:xd(t),hi();break;case 5:Ju(t);break;case 1:ot(t.type)&&vn(t);break;case 4:fl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,d=t.memoizedProps.value;we(Cn,s._currentValue),s._currentValue=d;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(we(Ee,Ee.current&1),t.flags|=128,null):r&t.child.childLanes?bd(e,t,r):(we(Ee,Ee.current&1),e=Yt(e,t,r),e!==null?e.sibling:null);we(Ee,Ee.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Ld(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),we(Ee,Ee.current),s)break;return null;case 22:case 23:return t.lanes=0,Sd(e,t,r)}return Yt(e,t,r)}var Ed,xa,kd,Rd;Ed=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xa=function(){};kd=function(e,t,r,s){var d=e.memoizedProps;if(d!==s){e=t.stateNode,Rr(Ht.current);var g=null;switch(r){case"input":d=Vo(e,d),s=Vo(e,s),g=[];break;case"select":d=Re({},d,{value:void 0}),s=Re({},s,{value:void 0}),g=[];break;case"textarea":d=qo(e,d),s=qo(e,s),g=[];break;default:typeof d.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=pn)}Yo(r,s);var C;r=null;for(f in d)if(!s.hasOwnProperty(f)&&d.hasOwnProperty(f)&&d[f]!=null)if(f==="style"){var i=d[f];for(C in i)i.hasOwnProperty(C)&&(r||(r={}),r[C]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Gi.hasOwnProperty(f)?g||(g=[]):(g=g||[]).push(f,null));for(f in s){var o=s[f];if(i=d?.[f],s.hasOwnProperty(f)&&o!==i&&(o!=null||i!=null))if(f==="style")if(i){for(C in i)!i.hasOwnProperty(C)||o&&o.hasOwnProperty(C)||(r||(r={}),r[C]="");for(C in o)o.hasOwnProperty(C)&&i[C]!==o[C]&&(r||(r={}),r[C]=o[C])}else r||(g||(g=[]),g.push(f,r)),r=o;else f==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,i=i?i.__html:void 0,o!=null&&i!==o&&(g=g||[]).push(f,o)):f==="children"?typeof o!="string"&&typeof o!="number"||(g=g||[]).push(f,""+o):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Gi.hasOwnProperty(f)?(o!=null&&f==="onScroll"&&xe("scroll",e),g||i===o||(g=[])):(g=g||[]).push(f,o))}r&&(g=g||[]).push("style",r);var f=g;(t.updateQueue=f)&&(t.flags|=4)}};Rd=function(e,t,r,s){r!==s&&(t.flags|=4)};function Di(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags&14680064,s|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags,s|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Dp(e,t,r){var s=t.pendingProps;switch(ol(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return ot(t.type)&&gn(),Ue(t),null;case 3:return s=t.stateNode,di(),be(nt),be(qe),pl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ps(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rt!==null&&(Aa(Rt),Rt=null))),xa(e,t),Ue(t),null;case 5:_l(t);var d=Rr(ss.current);if(r=t.type,e!==null&&t.stateNode!=null)kd(e,t,r,s,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(J(166));return Ue(t),null}if(e=Rr(Ht.current),Ps(t)){s=t.stateNode,r=t.type;var g=t.memoizedProps;switch(s[Ft]=t,s[rs]=g,e=(t.mode&1)!==0,r){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(d=0;d<Ii.length;d++)xe(Ii[d],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":Jl(s,g),xe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!g.multiple},xe("invalid",s);break;case"textarea":Ql(s,g),xe("invalid",s)}Yo(r,g),d=null;for(var C in g)if(g.hasOwnProperty(C)){var i=g[C];C==="children"?typeof i=="string"?s.textContent!==i&&(g.suppressHydrationWarning!==!0&&Os(s.textContent,i,e),d=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(g.suppressHydrationWarning!==!0&&Os(s.textContent,i,e),d=["children",""+i]):Gi.hasOwnProperty(C)&&i!=null&&C==="onScroll"&&xe("scroll",s)}switch(r){case"input":Es(s),Zl(s,g,!0);break;case"textarea":Es(s),ec(s);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(s.onclick=pn)}s=d,t.updateQueue=s,s!==null&&(t.flags|=4)}else{C=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ru(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=C.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=C.createElement(r,{is:s.is}):(e=C.createElement(r),r==="select"&&(C=e,s.multiple?C.multiple=!0:s.size&&(C.size=s.size))):e=C.createElementNS(e,r),e[Ft]=t,e[rs]=s,Ed(e,t,!1,!1),t.stateNode=e;e:{switch(C=Jo(r,s),r){case"dialog":xe("cancel",e),xe("close",e),d=s;break;case"iframe":case"object":case"embed":xe("load",e),d=s;break;case"video":case"audio":for(d=0;d<Ii.length;d++)xe(Ii[d],e);d=s;break;case"source":xe("error",e),d=s;break;case"img":case"image":case"link":xe("error",e),xe("load",e),d=s;break;case"details":xe("toggle",e),d=s;break;case"input":Jl(e,s),d=Vo(e,s),xe("invalid",e);break;case"option":d=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},d=Re({},s,{value:void 0}),xe("invalid",e);break;case"textarea":Ql(e,s),d=qo(e,s),xe("invalid",e);break;default:d=s}Yo(r,d),i=d;for(g in i)if(i.hasOwnProperty(g)){var o=i[g];g==="style"?nu(e,o):g==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&iu(e,o)):g==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Ki(e,o):typeof o=="number"&&Ki(e,""+o):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Gi.hasOwnProperty(g)?o!=null&&g==="onScroll"&&xe("scroll",e):o!=null&&Va(e,g,o,C))}switch(r){case"input":Es(e),Zl(e,s,!1);break;case"textarea":Es(e),ec(e);break;case"option":s.value!=null&&e.setAttribute("value",""+mr(s.value));break;case"select":e.multiple=!!s.multiple,g=s.value,g!=null?ei(e,!!s.multiple,g,!1):s.defaultValue!=null&&ei(e,!!s.multiple,s.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=pn)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ue(t),null;case 6:if(e&&t.stateNode!=null)Rd(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(J(166));if(r=Rr(ss.current),Rr(Ht.current),Ps(t)){if(s=t.stateNode,r=t.memoizedProps,s[Ft]=t,(g=s.nodeValue!==r)&&(e=ft,e!==null))switch(e.tag){case 3:Os(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Os(s.nodeValue,r,(e.mode&1)!==0)}g&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ft]=t,t.stateNode=s}return Ue(t),null;case 13:if(be(Ee),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&dt!==null&&t.mode&1&&!(t.flags&128))Gu(),hi(),t.flags|=98560,g=!1;else if(g=Ps(t),s!==null&&s.dehydrated!==null){if(e===null){if(!g)throw Error(J(318));if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(J(317));g[Ft]=t}else hi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ue(t),g=!1}else Rt!==null&&(Aa(Rt),Rt=null),g=!0;if(!g)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?Oe===0&&(Oe=3):kl())),t.updateQueue!==null&&(t.flags|=4),Ue(t),null);case 4:return di(),xa(e,t),e===null&&es(t.stateNode.containerInfo),Ue(t),null;case 10:return hl(t.type._context),Ue(t),null;case 17:return ot(t.type)&&gn(),Ue(t),null;case 19:if(be(Ee),g=t.memoizedState,g===null)return Ue(t),null;if(s=(t.flags&128)!==0,C=g.rendering,C===null)if(s)Di(g,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(C=xn(e),C!==null){for(t.flags|=128,Di(g,!1),s=C.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)g=r,e=s,g.flags&=14680066,C=g.alternate,C===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=C.childLanes,g.lanes=C.lanes,g.child=C.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=C.memoizedProps,g.memoizedState=C.memoizedState,g.updateQueue=C.updateQueue,g.type=C.type,e=C.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return we(Ee,Ee.current&1|2),t.child}e=e.sibling}g.tail!==null&&De()>_i&&(t.flags|=128,s=!0,Di(g,!1),t.lanes=4194304)}else{if(!s)if(e=xn(C),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Di(g,!0),g.tail===null&&g.tailMode==="hidden"&&!C.alternate&&!Le)return Ue(t),null}else 2*De()-g.renderingStartTime>_i&&r!==1073741824&&(t.flags|=128,s=!0,Di(g,!1),t.lanes=4194304);g.isBackwards?(C.sibling=t.child,t.child=C):(r=g.last,r!==null?r.sibling=C:t.child=C,g.last=C)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=De(),t.sibling=null,r=Ee.current,we(Ee,s?r&1|2:r&1),t):(Ue(t),null);case 22:case 23:return El(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ut&1073741824&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function Ap(e,t){switch(ol(t),t.tag){case 1:return ot(t.type)&&gn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return di(),be(nt),be(qe),pl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _l(t),null;case 13:if(be(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Ee),null;case 4:return di(),null;case 10:return hl(t.type._context),null;case 22:case 23:return El(),null;case 24:return null;default:return null}}var Ns=!1,Ke=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Zr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Me(e,t,s)}else r.current=null}function ba(e,t,r){try{r()}catch(s){Me(e,t,s)}}var zc=!1;function Bp(e,t){if(aa=dn,e=Bu(),sl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var d=s.anchorOffset,g=s.focusNode;s=s.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var C=0,i=-1,o=-1,f=0,_=0,h=e,p=null;t:for(;;){for(var w;h!==r||d!==0&&h.nodeType!==3||(i=C+d),h!==g||s!==0&&h.nodeType!==3||(o=C+s),h.nodeType===3&&(C+=h.nodeValue.length),(w=h.firstChild)!==null;)p=h,h=w;for(;;){if(h===e)break t;if(p===r&&++f===d&&(i=C),p===g&&++_===s&&(o=C),(w=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=w}r=i===-1||o===-1?null:{start:i,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(la={focusedElem:e,selectionRange:r},dn=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var u=S.memoizedProps,n=S.memoizedState,a=t.stateNode,l=a.getSnapshotBeforeUpdate(t.elementType===t.type?u:Et(t.type,u),n);a.__reactInternalSnapshotBeforeUpdate=l}break;case 3:var c=t.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(m){Me(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return S=zc,zc=!1,S}function zi(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&e)===e){var g=d.destroy;d.destroy=void 0,g!==void 0&&ba(t,r,g)}d=d.next}while(d!==s)}}function Un(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function La(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Md(e){var t=e.alternate;t!==null&&(e.alternate=null,Md(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ft],delete t[rs],delete t[ua],delete t[pp],delete t[gp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dd(e){return e.tag===5||e.tag===3||e.tag===4}function Uc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ea(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=pn));else if(s!==4&&(e=e.child,e!==null))for(Ea(e,t,r),e=e.sibling;e!==null;)Ea(e,t,r),e=e.sibling}function ka(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(ka(e,t,r),e=e.sibling;e!==null;)ka(e,t,r),e=e.sibling}var He=null,kt=!1;function tr(e,t,r){for(r=r.child;r!==null;)Ad(e,t,r),r=r.sibling}function Ad(e,t,r){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(In,r)}catch{}switch(r.tag){case 5:Ke||Zr(r,t);case 6:var s=He,d=kt;He=null,tr(e,t,r),He=s,kt=d,He!==null&&(kt?(e=He,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):He.removeChild(r.stateNode));break;case 18:He!==null&&(kt?(e=He,r=r.stateNode,e.nodeType===8?bo(e.parentNode,r):e.nodeType===1&&bo(e,r),Ji(e)):bo(He,r.stateNode));break;case 4:s=He,d=kt,He=r.stateNode.containerInfo,kt=!0,tr(e,t,r),He=s,kt=d;break;case 0:case 11:case 14:case 15:if(!Ke&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){d=s=s.next;do{var g=d,C=g.destroy;g=g.tag,C!==void 0&&(g&2||g&4)&&ba(r,t,C),d=d.next}while(d!==s)}tr(e,t,r);break;case 1:if(!Ke&&(Zr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(i){Me(r,t,i)}tr(e,t,r);break;case 21:tr(e,t,r);break;case 22:r.mode&1?(Ke=(s=Ke)||r.memoizedState!==null,tr(e,t,r),Ke=s):tr(e,t,r);break;default:tr(e,t,r)}}function Vc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Tp),t.forEach(function(s){var d=Wp.bind(null,e,s);r.has(s)||(r.add(s),s.then(d,d))})}}function Lt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var d=r[s];try{var g=e,C=t,i=C;e:for(;i!==null;){switch(i.tag){case 5:He=i.stateNode,kt=!1;break e;case 3:He=i.stateNode.containerInfo,kt=!0;break e;case 4:He=i.stateNode.containerInfo,kt=!0;break e}i=i.return}if(He===null)throw Error(J(160));Ad(g,C,d),He=null,kt=!1;var o=d.alternate;o!==null&&(o.return=null),d.return=null}catch(f){Me(d,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Td(t,e),t=t.sibling}function Td(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(t,e),Bt(e),s&4){try{zi(3,e,e.return),Un(3,e)}catch(u){Me(e,e.return,u)}try{zi(5,e,e.return)}catch(u){Me(e,e.return,u)}}break;case 1:Lt(t,e),Bt(e),s&512&&r!==null&&Zr(r,r.return);break;case 5:if(Lt(t,e),Bt(e),s&512&&r!==null&&Zr(r,r.return),e.flags&32){var d=e.stateNode;try{Ki(d,"")}catch(u){Me(e,e.return,u)}}if(s&4&&(d=e.stateNode,d!=null)){var g=e.memoizedProps,C=r!==null?r.memoizedProps:g,i=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{i==="input"&&g.type==="radio"&&g.name!=null&&eu(d,g),Jo(i,C);var f=Jo(i,g);for(C=0;C<o.length;C+=2){var _=o[C],h=o[C+1];_==="style"?nu(d,h):_==="dangerouslySetInnerHTML"?iu(d,h):_==="children"?Ki(d,h):Va(d,_,h,f)}switch(i){case"input":Go(d,g);break;case"textarea":tu(d,g);break;case"select":var p=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var w=g.value;w!=null?ei(d,!!g.multiple,w,!1):p!==!!g.multiple&&(g.defaultValue!=null?ei(d,!!g.multiple,g.defaultValue,!0):ei(d,!!g.multiple,g.multiple?[]:"",!1))}d[rs]=g}catch(u){Me(e,e.return,u)}}break;case 6:if(Lt(t,e),Bt(e),s&4){if(e.stateNode===null)throw Error(J(162));d=e.stateNode,g=e.memoizedProps;try{d.nodeValue=g}catch(u){Me(e,e.return,u)}}break;case 3:if(Lt(t,e),Bt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ji(t.containerInfo)}catch(u){Me(e,e.return,u)}break;case 4:Lt(t,e),Bt(e);break;case 13:Lt(t,e),Bt(e),d=e.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(bl=De())),s&4&&Vc(e);break;case 22:if(_=r!==null&&r.memoizedState!==null,e.mode&1?(Ke=(f=Ke)||_,Lt(t,e),Ke=f):Lt(t,e),Bt(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!_&&e.mode&1)for(ne=e,_=e.child;_!==null;){for(h=ne=_;ne!==null;){switch(p=ne,w=p.child,p.tag){case 0:case 11:case 14:case 15:zi(4,p,p.return);break;case 1:Zr(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){s=p,r=p.return;try{t=s,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(u){Me(s,r,u)}}break;case 5:Zr(p,p.return);break;case 22:if(p.memoizedState!==null){Kc(h);continue}}w!==null?(w.return=p,ne=w):Kc(h)}_=_.sibling}e:for(_=null,h=e;;){if(h.tag===5){if(_===null){_=h;try{d=h.stateNode,f?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(i=h.stateNode,o=h.memoizedProps.style,C=o!=null&&o.hasOwnProperty("display")?o.display:null,i.style.display=su("display",C))}catch(u){Me(e,e.return,u)}}}else if(h.tag===6){if(_===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(u){Me(e,e.return,u)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;_===h&&(_=null),h=h.return}_===h&&(_=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Lt(t,e),Bt(e),s&4&&Vc(e);break;case 21:break;default:Lt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Dd(r)){var s=r;break e}r=r.return}throw Error(J(160))}switch(s.tag){case 5:var d=s.stateNode;s.flags&32&&(Ki(d,""),s.flags&=-33);var g=Uc(e);ka(e,g,d);break;case 3:case 4:var C=s.stateNode.containerInfo,i=Uc(e);Ea(e,i,C);break;default:throw Error(J(161))}}catch(o){Me(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Op(e,t,r){ne=e,Bd(e)}function Bd(e,t,r){for(var s=(e.mode&1)!==0;ne!==null;){var d=ne,g=d.child;if(d.tag===22&&s){var C=d.memoizedState!==null||Ns;if(!C){var i=d.alternate,o=i!==null&&i.memoizedState!==null||Ke;i=Ns;var f=Ke;if(Ns=C,(Ke=o)&&!f)for(ne=d;ne!==null;)C=ne,o=C.child,C.tag===22&&C.memoizedState!==null?qc(d):o!==null?(o.return=C,ne=o):qc(d);for(;g!==null;)ne=g,Bd(g),g=g.sibling;ne=d,Ns=i,Ke=f}Gc(e)}else d.subtreeFlags&8772&&g!==null?(g.return=d,ne=g):Gc(e)}}function Gc(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ke||Un(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ke)if(r===null)s.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:Et(t.type,r.memoizedProps);s.componentDidUpdate(d,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var g=t.updateQueue;g!==null&&Dc(t,g,s);break;case 3:var C=t.updateQueue;if(C!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Dc(t,C,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var _=f.memoizedState;if(_!==null){var h=_.dehydrated;h!==null&&Ji(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Ke||t.flags&512&&La(t)}catch(p){Me(t,t.return,p)}}if(t===e){ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}}function Kc(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ne=r;break}ne=t.return}}function qc(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Un(4,t)}catch(o){Me(t,r,o)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var d=t.return;try{s.componentDidMount()}catch(o){Me(t,d,o)}}var g=t.return;try{La(t)}catch(o){Me(t,g,o)}break;case 5:var C=t.return;try{La(t)}catch(o){Me(t,C,o)}}}catch(o){Me(t,t.return,o)}if(t===e){ne=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ne=i;break}ne=t.return}}var Pp=Math.ceil,En=Jt.ReactCurrentDispatcher,wl=Jt.ReactCurrentOwner,St=Jt.ReactCurrentBatchConfig,ve=0,Fe=null,Te=null,$e=0,ut=0,Qr=Sr(0),Oe=0,ls=null,Pr=0,Vn=0,xl=0,Ui=null,it=null,bl=0,_i=1/0,$t=null,kn=!1,Ra=null,_r=null,Hs=!1,ar=null,Rn=0,Vi=0,Ma=null,Qs=-1,en=0;function Ye(){return ve&6?De():Qs!==-1?Qs:Qs=De()}function pr(e){return e.mode&1?ve&2&&$e!==0?$e&-$e:mp.transition!==null?(en===0&&(en=vu()),en):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:bu(e.type)),e):1}function Dt(e,t,r,s){if(50<Vi)throw Vi=0,Ma=null,Error(J(185));fs(e,r,s),(!(ve&2)||e!==Fe)&&(e===Fe&&(!(ve&2)&&(Vn|=r),Oe===4&&nr(e,$e)),at(e,s),r===1&&ve===0&&!(t.mode&1)&&(_i=De()+500,$n&&wr()))}function at(e,t){var r=e.callbackNode;m_(e,t);var s=un(e,e===Fe?$e:0);if(s===0)r!==null&&ic(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&ic(r),t===1)e.tag===0?vp(Xc.bind(null,e)):zu(Xc.bind(null,e)),fp(function(){!(ve&6)&&wr()}),r=null;else{switch(mu(s)){case 1:r=Ya;break;case 4:r=pu;break;case 16:r=hn;break;case 536870912:r=gu;break;default:r=hn}r=$d(r,Od.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Od(e,t){if(Qs=-1,en=0,ve&6)throw Error(J(327));var r=e.callbackNode;if(ni()&&e.callbackNode!==r)return null;var s=un(e,e===Fe?$e:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Mn(e,s);else{t=s;var d=ve;ve|=2;var g=Id();(Fe!==e||$e!==t)&&($t=null,_i=De()+500,Dr(e,t));do try{Np();break}catch(i){Pd(e,i)}while(!0);cl(),En.current=g,ve=d,Te!==null?t=0:(Fe=null,$e=0,t=Oe)}if(t!==0){if(t===2&&(d=ra(e),d!==0&&(s=d,t=Da(e,d))),t===1)throw r=ls,Dr(e,0),nr(e,s),at(e,De()),r;if(t===6)nr(e,s);else{if(d=e.current.alternate,!(s&30)&&!Ip(d)&&(t=Mn(e,s),t===2&&(g=ra(e),g!==0&&(s=g,t=Da(e,g))),t===1))throw r=ls,Dr(e,0),nr(e,s),at(e,De()),r;switch(e.finishedWork=d,e.finishedLanes=s,t){case 0:case 1:throw Error(J(345));case 2:Lr(e,it,$t);break;case 3:if(nr(e,s),(s&130023424)===s&&(t=bl+500-De(),10<t)){if(un(e,0)!==0)break;if(d=e.suspendedLanes,(d&s)!==s){Ye(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=ha(Lr.bind(null,e,it,$t),t);break}Lr(e,it,$t);break;case 4:if(nr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,d=-1;0<s;){var C=31-Mt(s);g=1<<C,C=t[C],C>d&&(d=C),s&=~g}if(s=d,s=De()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Pp(s/1960))-s,10<s){e.timeoutHandle=ha(Lr.bind(null,e,it,$t),s);break}Lr(e,it,$t);break;case 5:Lr(e,it,$t);break;default:throw Error(J(329))}}}return at(e,De()),e.callbackNode===r?Od.bind(null,e):null}function Da(e,t){var r=Ui;return e.current.memoizedState.isDehydrated&&(Dr(e,t).flags|=256),e=Mn(e,t),e!==2&&(t=it,it=r,t!==null&&Aa(t)),e}function Aa(e){it===null?it=e:it.push.apply(it,e)}function Ip(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var d=r[s],g=d.getSnapshot;d=d.value;try{if(!At(g(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nr(e,t){for(t&=~xl,t&=~Vn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Mt(t),s=1<<r;e[r]=-1,t&=~s}}function Xc(e){if(ve&6)throw Error(J(327));ni();var t=un(e,0);if(!(t&1))return at(e,De()),null;var r=Mn(e,t);if(e.tag!==0&&r===2){var s=ra(e);s!==0&&(t=s,r=Da(e,s))}if(r===1)throw r=ls,Dr(e,0),nr(e,t),at(e,De()),r;if(r===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lr(e,it,$t),at(e,De()),null}function Ll(e,t){var r=ve;ve|=1;try{return e(t)}finally{ve=r,ve===0&&(_i=De()+500,$n&&wr())}}function Ir(e){ar!==null&&ar.tag===0&&!(ve&6)&&ni();var t=ve;ve|=1;var r=St.transition,s=Ce;try{if(St.transition=null,Ce=1,e)return e()}finally{Ce=s,St.transition=r,ve=t,!(ve&6)&&wr()}}function El(){ut=Qr.current,be(Qr)}function Dr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,dp(r)),Te!==null)for(r=Te.return;r!==null;){var s=r;switch(ol(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&gn();break;case 3:di(),be(nt),be(qe),pl();break;case 5:_l(s);break;case 4:di();break;case 13:be(Ee);break;case 19:be(Ee);break;case 10:hl(s.type._context);break;case 22:case 23:El()}r=r.return}if(Fe=e,Te=e=gr(e.current,null),$e=ut=t,Oe=0,ls=null,xl=Vn=Pr=0,it=Ui=null,kr!==null){for(t=0;t<kr.length;t++)if(r=kr[t],s=r.interleaved,s!==null){r.interleaved=null;var d=s.next,g=r.pending;if(g!==null){var C=g.next;g.next=d,s.next=C}r.pending=s}kr=null}return e}function Pd(e,t){do{var r=Te;try{if(cl(),Ys.current=Ln,bn){for(var s=ke.memoizedState;s!==null;){var d=s.queue;d!==null&&(d.pending=null),s=s.next}bn=!1}if(Or=0,Ie=Be=ke=null,Wi=!1,ns=0,wl.current=null,r===null||r.return===null){Oe=1,ls=t,Te=null;break}e:{var g=e,C=r.return,i=r,o=t;if(t=$e,i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var f=o,_=i,h=_.tag;if(!(_.mode&1)&&(h===0||h===11||h===15)){var p=_.alternate;p?(_.updateQueue=p.updateQueue,_.memoizedState=p.memoizedState,_.lanes=p.lanes):(_.updateQueue=null,_.memoizedState=null)}var w=Ic(C);if(w!==null){w.flags&=-257,Fc(w,C,i,g,t),w.mode&1&&Pc(g,f,t),t=w,o=f;var S=t.updateQueue;if(S===null){var u=new Set;u.add(o),t.updateQueue=u}else S.add(o);break e}else{if(!(t&1)){Pc(g,f,t),kl();break e}o=Error(J(426))}}else if(Le&&i.mode&1){var n=Ic(C);if(n!==null){!(n.flags&65536)&&(n.flags|=256),Fc(n,C,i,g,t),al(fi(o,i));break e}}g=o=fi(o,i),Oe!==4&&(Oe=2),Ui===null?Ui=[g]:Ui.push(g),g=C;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t;var a=md(g,o,t);Mc(g,a);break e;case 1:i=o;var l=g.type,c=g.stateNode;if(!(g.flags&128)&&(typeof l.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(_r===null||!_r.has(c)))){g.flags|=65536,t&=-t,g.lanes|=t;var m=yd(g,i,t);Mc(g,m);break e}}g=g.return}while(g!==null)}Nd(r)}catch(L){t=L,Te===r&&r!==null&&(Te=r=r.return);continue}break}while(!0)}function Id(){var e=En.current;return En.current=Ln,e===null?Ln:e}function kl(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Fe===null||!(Pr&268435455)&&!(Vn&268435455)||nr(Fe,$e)}function Mn(e,t){var r=ve;ve|=2;var s=Id();(Fe!==e||$e!==t)&&($t=null,Dr(e,t));do try{Fp();break}catch(d){Pd(e,d)}while(!0);if(cl(),ve=r,En.current=s,Te!==null)throw Error(J(261));return Fe=null,$e=0,Oe}function Fp(){for(;Te!==null;)Fd(Te)}function Np(){for(;Te!==null&&!c_();)Fd(Te)}function Fd(e){var t=jd(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?Nd(e):Te=t,wl.current=null}function Nd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ap(r,t),r!==null){r.flags&=32767,Te=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Te=null;return}}else if(r=Dp(r,t,ut),r!==null){Te=r;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);Oe===0&&(Oe=5)}function Lr(e,t,r){var s=Ce,d=St.transition;try{St.transition=null,Ce=1,Hp(e,t,r,s)}finally{St.transition=d,Ce=s}return null}function Hp(e,t,r,s){do ni();while(ar!==null);if(ve&6)throw Error(J(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var g=r.lanes|r.childLanes;if(y_(e,g),e===Fe&&(Te=Fe=null,$e=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hs||(Hs=!0,$d(hn,function(){return ni(),null})),g=(r.flags&15990)!==0,r.subtreeFlags&15990||g){g=St.transition,St.transition=null;var C=Ce;Ce=1;var i=ve;ve|=4,wl.current=null,Bp(e,r),Td(r,e),np(la),dn=!!aa,la=aa=null,e.current=r,Op(r),h_(),ve=i,Ce=C,St.transition=g}else e.current=r;if(Hs&&(Hs=!1,ar=e,Rn=d),g=e.pendingLanes,g===0&&(_r=null),f_(r.stateNode),at(e,De()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],s(d.value,{componentStack:d.stack,digest:d.digest});if(kn)throw kn=!1,e=Ra,Ra=null,e;return Rn&1&&e.tag!==0&&ni(),g=e.pendingLanes,g&1?e===Ma?Vi++:(Vi=0,Ma=e):Vi=0,wr(),null}function ni(){if(ar!==null){var e=mu(Rn),t=St.transition,r=Ce;try{if(St.transition=null,Ce=16>e?16:e,ar===null)var s=!1;else{if(e=ar,ar=null,Rn=0,ve&6)throw Error(J(331));var d=ve;for(ve|=4,ne=e.current;ne!==null;){var g=ne,C=g.child;if(ne.flags&16){var i=g.deletions;if(i!==null){for(var o=0;o<i.length;o++){var f=i[o];for(ne=f;ne!==null;){var _=ne;switch(_.tag){case 0:case 11:case 15:zi(8,_,g)}var h=_.child;if(h!==null)h.return=_,ne=h;else for(;ne!==null;){_=ne;var p=_.sibling,w=_.return;if(Md(_),_===f){ne=null;break}if(p!==null){p.return=w,ne=p;break}ne=w}}}var S=g.alternate;if(S!==null){var u=S.child;if(u!==null){S.child=null;do{var n=u.sibling;u.sibling=null,u=n}while(u!==null)}}ne=g}}if(g.subtreeFlags&2064&&C!==null)C.return=g,ne=C;else e:for(;ne!==null;){if(g=ne,g.flags&2048)switch(g.tag){case 0:case 11:case 15:zi(9,g,g.return)}var a=g.sibling;if(a!==null){a.return=g.return,ne=a;break e}ne=g.return}}var l=e.current;for(ne=l;ne!==null;){C=ne;var c=C.child;if(C.subtreeFlags&2064&&c!==null)c.return=C,ne=c;else e:for(C=l;ne!==null;){if(i=ne,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Un(9,i)}}catch(L){Me(i,i.return,L)}if(i===C){ne=null;break e}var m=i.sibling;if(m!==null){m.return=i.return,ne=m;break e}ne=i.return}}if(ve=d,wr(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(In,e)}catch{}s=!0}return s}finally{Ce=r,St.transition=t}}return!1}function Yc(e,t,r){t=fi(r,t),t=md(e,t,1),e=fr(e,t,1),t=Ye(),e!==null&&(fs(e,1,t),at(e,t))}function Me(e,t,r){if(e.tag===3)Yc(e,e,r);else for(;t!==null;){if(t.tag===3){Yc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(_r===null||!_r.has(s))){e=fi(r,e),e=yd(t,e,1),t=fr(t,e,1),e=Ye(),t!==null&&(fs(t,1,e),at(t,e));break}}t=t.return}}function jp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ye(),e.pingedLanes|=e.suspendedLanes&r,Fe===e&&($e&r)===r&&(Oe===4||Oe===3&&($e&130023424)===$e&&500>De()-bl?Dr(e,0):xl|=r),at(e,t)}function Hd(e,t){t===0&&(e.mode&1?(t=Ms,Ms<<=1,!(Ms&130023424)&&(Ms=4194304)):t=1);var r=Ye();e=Xt(e,t),e!==null&&(fs(e,t,r),at(e,r))}function $p(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Hd(e,r)}function Wp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(J(314))}s!==null&&s.delete(t),Hd(e,r)}var jd;jd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)st=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return st=!1,Mp(e,t,r);st=!!(e.flags&131072)}else st=!1,Le&&t.flags&1048576&&Uu(t,yn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Zs(e,t),e=t.pendingProps;var d=ci(t,qe.current);si(t,r),d=vl(null,t,s,e,d,r);var g=ml();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(s)?(g=!0,vn(t)):g=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,dl(t),d.updater=zn,t.stateNode=d,d._reactInternals=t,va(t,s,e,r),t=Ca(null,t,s,!0,g,r)):(t.tag=0,Le&&g&&nl(t),Xe(null,t,d,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,d=s._init,s=d(s._payload),t.type=s,d=t.tag=Up(s),e=Et(s,e),d){case 0:t=ya(null,t,s,e,r);break e;case 1:t=jc(null,t,s,e,r);break e;case 11:t=Nc(null,t,s,e,r);break e;case 14:t=Hc(null,t,s,Et(s.type,e),r);break e}throw Error(J(306,s,""))}return t;case 0:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Et(s,d),ya(e,t,s,d,r);case 1:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Et(s,d),jc(e,t,s,d,r);case 3:e:{if(xd(t),e===null)throw Error(J(387));s=t.pendingProps,g=t.memoizedState,d=g.element,Yu(e,t),wn(t,s,null,r);var C=t.memoizedState;if(s=C.element,g.isDehydrated)if(g={element:s,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){d=fi(Error(J(423)),t),t=$c(e,t,s,r,d);break e}else if(s!==d){d=fi(Error(J(424)),t),t=$c(e,t,s,r,d);break e}else for(dt=dr(t.stateNode.containerInfo.firstChild),ft=t,Le=!0,Rt=null,r=qu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hi(),s===d){t=Yt(e,t,r);break e}Xe(e,t,s,r)}t=t.child}return t;case 5:return Ju(t),e===null&&_a(t),s=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,C=d.children,ca(s,d)?C=null:g!==null&&ca(s,g)&&(t.flags|=32),wd(e,t),Xe(e,t,C,r),t.child;case 6:return e===null&&_a(t),null;case 13:return bd(e,t,r);case 4:return fl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ui(t,null,s,r):Xe(e,t,s,r),t.child;case 11:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Et(s,d),Nc(e,t,s,d,r);case 7:return Xe(e,t,t.pendingProps,r),t.child;case 8:return Xe(e,t,t.pendingProps.children,r),t.child;case 12:return Xe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,d=t.pendingProps,g=t.memoizedProps,C=d.value,we(Cn,s._currentValue),s._currentValue=C,g!==null)if(At(g.value,C)){if(g.children===d.children&&!nt.current){t=Yt(e,t,r);break e}}else for(g=t.child,g!==null&&(g.return=t);g!==null;){var i=g.dependencies;if(i!==null){C=g.child;for(var o=i.firstContext;o!==null;){if(o.context===s){if(g.tag===1){o=Gt(-1,r&-r),o.tag=2;var f=g.updateQueue;if(f!==null){f=f.shared;var _=f.pending;_===null?o.next=o:(o.next=_.next,_.next=o),f.pending=o}}g.lanes|=r,o=g.alternate,o!==null&&(o.lanes|=r),pa(g.return,r,t),i.lanes|=r;break}o=o.next}}else if(g.tag===10)C=g.type===t.type?null:g.child;else if(g.tag===18){if(C=g.return,C===null)throw Error(J(341));C.lanes|=r,i=C.alternate,i!==null&&(i.lanes|=r),pa(C,r,t),C=g.sibling}else C=g.child;if(C!==null)C.return=g;else for(C=g;C!==null;){if(C===t){C=null;break}if(g=C.sibling,g!==null){g.return=C.return,C=g;break}C=C.return}g=C}Xe(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,s=t.pendingProps.children,si(t,r),d=wt(d),s=s(d),t.flags|=1,Xe(e,t,s,r),t.child;case 14:return s=t.type,d=Et(s,t.pendingProps),d=Et(s.type,d),Hc(e,t,s,d,r);case 15:return Cd(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Et(s,d),Zs(e,t),t.tag=1,ot(s)?(e=!0,vn(t)):e=!1,si(t,r),vd(t,s,d),va(t,s,d,r),Ca(null,t,s,!0,e,r);case 19:return Ld(e,t,r);case 22:return Sd(e,t,r)}throw Error(J(156,t.tag))};function $d(e,t){return _u(e,t)}function zp(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,r,s){return new zp(e,t,r,s)}function Rl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Up(e){if(typeof e=="function")return Rl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ka)return 11;if(e===qa)return 14}return 2}function gr(e,t){var r=e.alternate;return r===null?(r=Ct(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function tn(e,t,r,s,d,g){var C=2;if(s=e,typeof e=="function")Rl(e)&&(C=1);else if(typeof e=="string")C=5;else e:switch(e){case zr:return Ar(r.children,d,g,t);case Ga:C=8,d|=8;break;case $o:return e=Ct(12,r,t,d|2),e.elementType=$o,e.lanes=g,e;case Wo:return e=Ct(13,r,t,d),e.elementType=Wo,e.lanes=g,e;case zo:return e=Ct(19,r,t,d),e.elementType=zo,e.lanes=g,e;case Jh:return Gn(r,d,g,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xh:C=10;break e;case Yh:C=9;break e;case Ka:C=11;break e;case qa:C=14;break e;case rr:C=16,s=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Ct(C,r,t,d),t.elementType=e,t.type=s,t.lanes=g,t}function Ar(e,t,r,s){return e=Ct(7,e,s,t),e.lanes=r,e}function Gn(e,t,r,s){return e=Ct(22,e,s,t),e.elementType=Jh,e.lanes=r,e.stateNode={isHidden:!1},e}function To(e,t,r){return e=Ct(6,e,null,t),e.lanes=r,e}function Bo(e,t,r){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vp(e,t,r,s,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fo(0),this.expirationTimes=fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fo(0),this.identifierPrefix=s,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ml(e,t,r,s,d,g,C,i,o){return e=new Vp(e,t,r,i,o),t===1?(t=1,g===!0&&(t|=8)):t=0,g=Ct(3,null,null,t),e.current=g,g.stateNode=e,g.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},dl(g),e}function Gp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Wd(e){if(!e)return yr;e=e._reactInternals;e:{if(Hr(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var r=e.type;if(ot(r))return Wu(e,r,t)}return t}function zd(e,t,r,s,d,g,C,i,o){return e=Ml(r,s,!0,e,d,g,C,i,o),e.context=Wd(null),r=e.current,s=Ye(),d=pr(r),g=Gt(s,d),g.callback=t??null,fr(r,g,d),e.current.lanes=d,fs(e,d,s),at(e,s),e}function Kn(e,t,r,s){var d=t.current,g=Ye(),C=pr(d);return r=Wd(r),t.context===null?t.context=r:t.pendingContext=r,t=Gt(g,C),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=fr(d,t,C),e!==null&&(Dt(e,d,C,g),Xs(e,d,C)),C}function Dn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Dl(e,t){Jc(e,t),(e=e.alternate)&&Jc(e,t)}function Kp(){return null}var Ud=typeof reportError=="function"?reportError:function(e){console.error(e)};function Al(e){this._internalRoot=e}qn.prototype.render=Al.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Kn(e,t,null,null)};qn.prototype.unmount=Al.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){Kn(null,e,null,null)}),t[qt]=null}};function qn(e){this._internalRoot=e}qn.prototype.unstable_scheduleHydration=function(e){if(e){var t=Su();e={blockedOn:null,target:e,priority:t};for(var r=0;r<sr.length&&t!==0&&t<sr[r].priority;r++);sr.splice(r,0,e),r===0&&xu(e)}};function Tl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zc(){}function qp(e,t,r,s,d){if(d){if(typeof s=="function"){var g=s;s=function(){var f=Dn(C);g.call(f)}}var C=zd(t,s,e,0,null,!1,!1,"",Zc);return e._reactRootContainer=C,e[qt]=C.current,es(e.nodeType===8?e.parentNode:e),Ir(),C}for(;d=e.lastChild;)e.removeChild(d);if(typeof s=="function"){var i=s;s=function(){var f=Dn(o);i.call(f)}}var o=Ml(e,0,!1,null,null,!1,!1,"",Zc);return e._reactRootContainer=o,e[qt]=o.current,es(e.nodeType===8?e.parentNode:e),Ir(function(){Kn(t,o,r,s)}),o}function Yn(e,t,r,s,d){var g=r._reactRootContainer;if(g){var C=g;if(typeof d=="function"){var i=d;d=function(){var o=Dn(C);i.call(o)}}Kn(t,C,e,d)}else C=qp(r,t,e,d,s);return Dn(C)}yu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pi(t.pendingLanes);r!==0&&(Ja(t,r|1),at(t,De()),!(ve&6)&&(_i=De()+500,wr()))}break;case 13:Ir(function(){var s=Xt(e,1);if(s!==null){var d=Ye();Dt(s,e,1,d)}}),Dl(e,1)}};Za=function(e){if(e.tag===13){var t=Xt(e,134217728);if(t!==null){var r=Ye();Dt(t,e,134217728,r)}Dl(e,134217728)}};Cu=function(e){if(e.tag===13){var t=pr(e),r=Xt(e,t);if(r!==null){var s=Ye();Dt(r,e,t,s)}Dl(e,t)}};Su=function(){return Ce};wu=function(e,t){var r=Ce;try{return Ce=e,t()}finally{Ce=r}};Qo=function(e,t,r){switch(t){case"input":if(Go(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var d=jn(s);if(!d)throw Error(J(90));Qh(s),Go(s,d)}}}break;case"textarea":tu(e,r);break;case"select":t=r.value,t!=null&&ei(e,!!r.multiple,t,!1)}};lu=Ll;cu=Ir;var Xp={usingClientEntryPoint:!1,Events:[ps,Kr,jn,ou,au,Ll]},Ai={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yp={bundleType:Ai.bundleType,version:Ai.version,rendererPackageName:Ai.rendererPackageName,rendererConfig:Ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=du(e),e===null?null:e.stateNode},findFiberByHostInstance:Ai.findFiberByHostInstance||Kp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var js=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!js.isDisabled&&js.supportsFiber)try{In=js.inject(Yp),Nt=js}catch{}}gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xp;gt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tl(t))throw Error(J(200));return Gp(e,t,null,r)};gt.createRoot=function(e,t){if(!Tl(e))throw Error(J(299));var r=!1,s="",d=Ud;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Ml(e,1,!1,null,null,r,!1,s,d),e[qt]=t.current,es(e.nodeType===8?e.parentNode:e),new Al(t)};gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=du(t),e=e===null?null:e.stateNode,e};gt.flushSync=function(e){return Ir(e)};gt.hydrate=function(e,t,r){if(!Xn(t))throw Error(J(200));return Yn(null,e,t,!0,r)};gt.hydrateRoot=function(e,t,r){if(!Tl(e))throw Error(J(405));var s=r!=null&&r.hydratedSources||null,d=!1,g="",C=Ud;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),t=zd(t,null,e,1,r??null,d,!1,g,C),e[qt]=t.current,es(e),s)for(e=0;e<s.length;e++)r=s[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new qn(t)};gt.render=function(e,t,r){if(!Xn(t))throw Error(J(200));return Yn(null,e,t,!1,r)};gt.unmountComponentAtNode=function(e){if(!Xn(e))throw Error(J(40));return e._reactRootContainer?(Ir(function(){Yn(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1};gt.unstable_batchedUpdates=Ll;gt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Xn(r))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Yn(e,t,r,!1,s)};gt.version="18.3.1-next-f1338f8080-20240426";function Vd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vd)}catch(e){console.error(e)}}Vd(),Vh.exports=gt;var Jp=Vh.exports,Qc=Jp;Ho.createRoot=Qc.createRoot,Ho.hydrateRoot=Qc.hydrateRoot;const Gd=V.createContext(null),Zt=()=>{const e=V.useContext(Gd);if(!e)throw new Error("useTerminal must be used within a TerminalProvider");return e},Zp={ESC:"\x1B",TAB:"	",ENTER:"\r",CTRL_C:"",ARROW_UP:"\x1B[A",ARROW_DOWN:"\x1B[B",ARROW_RIGHT:"\x1B[C",ARROW_LEFT:"\x1B[D",PAGE_UP:"\x1B[5~",PAGE_DOWN:"\x1B[6~",CTRL_L:"\f"},Qp=10,eg=[500,1e3,2e3,3e3,5e3,5e3,1e4,1e4,15e3,3e4],eh="ttyd_last_tmux_session",tg=({children:e})=>{const t=V.useRef(null),r=V.useRef(null),s=V.useRef(new Set),[d,g]=V.useState("connecting"),[C,i]=V.useState(0),o=V.useRef(null),f=V.useRef(!1),_=V.useRef(!1),h=V.useRef(0),[p,w]=V.useState(null),S=V.useRef(null),u=V.useRef({cols:80,rows:24}),n=V.useRef([]),a=V.useRef(!1),l=V.useRef([]),c=V.useRef(0),m=V.useRef(null),L=V.useCallback(()=>{const N=l.current;if(N.length===0)return;m.current=null;let B;if(N.length===1)B=N[0];else{B=new Uint8Array(c.current);let k=0;for(const A of N)B.set(A,k),k+=A.length}if(l.current=[],c.current=0,!a.current){n.current.push(B);return}s.current.forEach(k=>k(B))},[]),v=V.useCallback(async(N=3e3)=>{const B=Date.now();for(;Date.now()-B<N;){if(S.current)return S.current;await new Promise(k=>setTimeout(k,100))}return S.current},[]),x=V.useCallback(async N=>{const B=sessionStorage.getItem(eh);if(!B)return;console.log(`[Terminal] Restoring tmux session: ${B}`);const k=await v(3e3);if(k)for(let A=0;A<10;A++){try{const P=`/api/tmux/list?client_tty=${encodeURIComponent(k)}`,F=await fetch(P,{signal:AbortSignal.timeout(3e3)});if(!F.ok)break;const W=await F.json();if(!(W.sessions||[]).some(q=>q.name===B)){console.log(`[Terminal] Saved session "${B}" no longer exists`),sessionStorage.removeItem(eh);return}if(W.currentSession){if(W.currentSession===B){console.log(`[Terminal] Already on correct session: ${B}`);return}const q=`/api/tmux/switch?session=${encodeURIComponent(B)}&client_tty=${encodeURIComponent(k)}`;if((await fetch(q,{signal:AbortSignal.timeout(3e3)})).ok){console.log(`[Terminal] Restored tmux session via API: ${B}`);return}}}catch{}await new Promise(P=>setTimeout(P,500))}},[v]),y=V.useCallback(()=>{if(r.current?.readyState===WebSocket.OPEN)return;const N=_.current;g(N?"reconnecting":"connecting");const B=window.location.protocol==="https:"?"wss:":"ws:",k=window.location.host,A=window.location.pathname.replace(/\/$/,""),P=`${B}//${k}${A}/ws`,F=new WebSocket(P,["tty"]);F.binaryType="arraybuffer",r.current=F,F.onopen=()=>{console.log("[Terminal] WebSocket connected"),g("connected"),i(0),h.current=Date.now(),S.current=null,w(null);const{cols:W,rows:z}=u.current,q=JSON.stringify({AuthToken:"",columns:W,rows:z});F.send(new TextEncoder().encode(q)),N&&(_.current=!1),x(F)},F.onmessage=W=>{const z=new Uint8Array(W.data);if(z.length===0)return;const q=String.fromCharCode(z[0]);if(q==="0"){const Y=z.subarray(1);if(!S.current){const U=new TextDecoder().decode(Y).match(/\]7337;(\/dev\/pts\/\d+)/);U&&(S.current=U[1],w(U[1]))}l.current.push(Y),c.current+=Y.length;const $=512*1024;c.current>$?L():m.current===null&&(m.current=requestAnimationFrame(L))}else if(q==="1"){const Y=new TextDecoder().decode(z.subarray(1));document.title=Y}},F.onclose=()=>{if(console.log("[Terminal] WebSocket closed"),r.current=null,L(),m.current!==null&&(cancelAnimationFrame(m.current),m.current=null),f.current){f.current=!1,g("disconnected");return}g("disconnected"),_.current=!0,i(W=>{const z=W+1;if(z<=Qp){const q=eg[W]||3e4;console.log(`[Terminal] Reconnecting in ${q}ms (attempt ${z})`),o.current=window.setTimeout(()=>{y()},q)}return z})},F.onerror=W=>{console.error("[Terminal] WebSocket error",W)}},[x,L]),b=V.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null),_.current=!0,i(0),y()},[y]);V.useEffect(()=>{const N=()=>{if(document.visibilityState==="visible"){const B=r.current;if(!B||B.readyState===WebSocket.CLOSED||B.readyState===WebSocket.CLOSING)console.log("[Terminal] Page became visible, connection lost  reconnecting immediately"),o.current&&(clearTimeout(o.current),o.current=null),_.current=!0,i(0),y();else if(B&&B.readyState===WebSocket.OPEN&&Date.now()-h.current>3e4){const{cols:P,rows:F}=u.current,W=JSON.stringify({AuthToken:"",columns:P,rows:F}),z=new TextEncoder().encode(W),q=new Uint8Array(z.length+1);q[0]=49,q.set(z,1);try{B.send(q)}catch{console.log("[Terminal] Connection stale on visibility change  forcing reconnect"),B.close()}}}};return document.addEventListener("visibilitychange",N),()=>document.removeEventListener("visibilitychange",N)},[y]),V.useEffect(()=>(y(),()=>{f.current=!0,o.current&&clearTimeout(o.current),m.current!==null&&(cancelAnimationFrame(m.current),m.current=null),r.current&&r.current.close()}),[y]);const E=V.useCallback(N=>{if(r.current&&r.current.readyState===WebSocket.OPEN){const B=new TextEncoder().encode(N),k=new Uint8Array(B.length+1);k[0]=48,k.set(B,1),r.current.send(k)}},[]),M=V.useCallback(N=>{const B=Zp[N];B&&E(B)},[E]),R=V.useCallback(N=>{if(s.current.add(N),!a.current){a.current=!0;const B=n.current;n.current=[];for(const k of B)N(k)}return()=>{s.current.delete(N)}},[]),D=V.useCallback(N=>{r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(new Uint8Array([N]))},[]),T=V.useCallback(N=>{S.current=N,w(N)},[]),H=V.useCallback((N,B)=>{if(u.current={cols:N,rows:B},r.current&&r.current.readyState===WebSocket.OPEN){const k=JSON.stringify({AuthToken:"",columns:N,rows:B}),A=new TextEncoder().encode(k),P=new Uint8Array(A.length+1);P[0]=49,P.set(A,1),r.current.send(P)}},[]),j=V.useMemo(()=>({connectionState:d,sendInput:E,sendKey:M,subscribeOutput:R,sendControl:D,terminalRef:t,resize:H,reconnect:b,reconnectAttempt:C,clientTty:p,setClientTty:T}),[d,E,M,R,D,t,H,b,C,p,T]);return I.jsx(Gd.Provider,{value:j,children:e})},rg=5e3,Kd=V.createContext(null),qd=()=>{const e=V.useContext(Kd);if(!e)throw new Error("useServerEvents must be used within a ServerEventsProvider");return e},ig=({children:e})=>{const{clientTty:t}=Zt(),r=V.useRef(null),[s,d]=V.useState(""),[g,C]=V.useState(""),[i,o]=V.useState([]),[f,_]=V.useState(null),[h,p]=V.useState(!1),[w,S]=V.useState(!1),u=V.useRef(null),n=V.useRef(null),a=V.useRef(!0),l=V.useCallback(y=>{d(y.branch||""),C(y.path||""),o(y.tmux?.sessions||[]),_(y.tmux?.currentSession||null),p(!1),S(!0)},[]),c=V.useCallback(async()=>{try{const y=r.current?`?client_tty=${encodeURIComponent(r.current)}`:"",[b,E]=await Promise.all([fetch("/api/diff",{signal:AbortSignal.timeout(3e3)}),fetch(`/api/tmux/list${y}`,{signal:AbortSignal.timeout(3e3)})]);let M="",R="";if(b.ok){const H=await b.json();M=H.branch||"",R=H.git_root||H.cwd||""}let D=[],T=null;if(E.ok){const H=await E.json();D=H.sessions||[],T=H.currentSession||null}d(M),C(R),o(D),_(T),p(!1),S(!0)}catch{p(!0)}},[]),m=V.useCallback(()=>{n.current||(c(),n.current=window.setInterval(c,rg))},[c]),L=V.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]),v=V.useCallback(()=>{c()},[c]);V.useEffect(()=>{r.current=t},[t]),V.useEffect(()=>{let y=!1;return(async()=>{try{const E=await fetch("/api/tmux/list",{signal:AbortSignal.timeout(3e3)});if(E.ok&&!y){const M=await E.json();o(M.sessions||[]),_(M.currentSession||null),S(!0)}}catch{}})(),()=>{y=!0}},[]),V.useEffect(()=>{if(!t)return;const b=`/api/events${`?client_tty=${encodeURIComponent(t)}`}`,E=new EventSource(b);return u.current=E,E.onmessage=M=>{try{const R=JSON.parse(M.data);l(R)}catch{}},E.onerror=()=>{E.close(),u.current=null,a.current=!1,m()},()=>{E.close(),u.current=null,L()}},[t,l,m,L]);const x=V.useMemo(()=>({branch:s,path:g,tmuxSessions:i,currentTmuxSession:f,isOffline:h,clientTty:t,sessionsLoaded:w,refresh:v}),[s,g,i,f,h,t,w,v]);return I.jsx(Kd.Provider,{value:x,children:e})},th={defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]},sg=({isOpen:e,onClose:t,onConfigChange:r})=>{const[s,d]=V.useState(th),[g,C]=V.useState(""),[i,o]=V.useState(""),[f,_]=V.useState(()=>localStorage.getItem("terminal_predictive_echo")==="on");V.useEffect(()=>{if(e){const u=localStorage.getItem("ttyd_commands");if(u)try{d(JSON.parse(u))}catch(n){console.error("Failed to parse ttyd_commands",n)}else d(th)}},[e]);const h=u=>{d(u),localStorage.setItem("ttyd_commands",JSON.stringify(u)),r()},p=u=>{const n=[...s.defaultCommands];n[u].visible=!n[u].visible,h({...s,defaultCommands:n})},w=u=>{const n=s.customCommands.filter((a,l)=>l!==u);h({...s,customCommands:n})},S=u=>{if(u.preventDefault(),!g.trim()||!i.trim())return;const n=[...s.customCommands,{name:g.trim(),cmd:i.trim()}];h({...s,customCommands:n}),C(""),o("")};return e?I.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:I.jsxs("div",{className:"bg-bg-secondary w-full max-w-sm mx-4 rounded-xl shadow-2xl border border-border-subtle flex flex-col max-h-[80vh]",onClick:u=>u.stopPropagation(),children:[I.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[I.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Command Settings"}),I.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:""})]}),I.jsxs("div",{className:"overflow-y-auto p-4 space-y-6",children:[I.jsxs("section",{children:[I.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Built-in Commands"}),I.jsx("div",{className:"space-y-2",children:s.defaultCommands.map((u,n)=>I.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[I.jsx("span",{className:"font-mono text-sm text-text-primary",children:u.name}),I.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[I.jsx("input",{type:"checkbox",className:"sr-only peer",checked:u.visible,onChange:()=>p(n)}),I.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-green"})]})]},u.name))})]}),I.jsxs("section",{children:[I.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Custom Commands"}),s.customCommands.length===0?I.jsx("p",{className:"text-sm text-text-muted italic",children:"No custom commands added"}):I.jsx("div",{className:"space-y-2",children:s.customCommands.map((u,n)=>I.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[I.jsxs("div",{className:"flex flex-col min-w-0 mr-2",children:[I.jsx("span",{className:"font-mono text-sm text-text-primary truncate",children:u.name}),I.jsx("span",{className:"font-mono text-xs text-text-muted truncate",children:u.cmd})]}),I.jsx("button",{onClick:()=>w(n),className:"p-2 text-text-secondary hover:text-accent-red transition-colors",children:""})]},n))})]}),I.jsxs("section",{children:[I.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Performance"}),I.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[I.jsxs("div",{className:"flex flex-col",children:[I.jsx("span",{className:"text-sm text-text-primary",children:"Predictive Echo"}),I.jsx("span",{className:"text-xs text-text-muted",children:"Show keystrokes before server confirms"})]}),I.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[I.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f,onChange:()=>{const u=!f;_(u),localStorage.setItem("terminal_predictive_echo",u?"on":"off"),window.dispatchEvent(new CustomEvent("predictive-echo-changed",{detail:u}))}}),I.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-green"})]})]})]}),I.jsxs("section",{children:[I.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Add New Command"}),I.jsxs("form",{onSubmit:S,className:"space-y-3",children:[I.jsx("div",{children:I.jsx("input",{type:"text",placeholder:"Button Name (e.g. ls -la)",value:g,onChange:u=>C(u.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),I.jsx("div",{children:I.jsx("input",{type:"text",placeholder:"Command (e.g. ls -la\\r)",value:i,onChange:u=>o(u.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),I.jsx("button",{type:"submit",disabled:!g.trim()||!i.trim(),className:"w-full py-2 bg-accent-blue/10 text-accent-blue border border-accent-blue/30 rounded font-medium hover:bg-accent-blue/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Command"})]})]})]})]})}):null},ng=({isOpen:e,onClose:t,onSend:r})=>{const[s,d]=V.useState(""),g=V.useRef(null);V.useEffect(()=>{e?setTimeout(()=>{g.current&&g.current.focus()},50):d("")},[e]);const C=()=>{s&&(r(s),t())},i=o=>{o.key==="Enter"&&(o.metaKey||o.ctrlKey)&&(o.preventDefault(),C())};return e?I.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:I.jsxs("div",{className:"bg-bg-secondary w-full max-w-lg mx-4 rounded-xl shadow-2xl border border-border-subtle flex flex-col h-[50vh]",onClick:o=>o.stopPropagation(),children:[I.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[I.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Input Text"}),I.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:""})]}),I.jsx("div",{className:"flex-1 p-4",children:I.jsx("textarea",{ref:g,value:s,onChange:o=>d(o.target.value),onKeyDown:i,placeholder:"Type or paste long text here...",className:"w-full h-full bg-bg-primary border border-border-subtle rounded p-3 font-mono text-sm text-text-primary focus:outline-none focus:border-accent-blue resize-none"})}),I.jsxs("div",{className:"p-4 border-t border-border-subtle flex justify-end gap-3",children:[I.jsx("button",{onClick:t,className:"px-4 py-2 rounded text-text-secondary hover:bg-bg-tertiary transition-colors",children:"Cancel"}),I.jsx("button",{onClick:C,disabled:!s,className:"px-4 py-2 bg-accent-blue text-white rounded font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Send (Cmd+Enter)"})]})]})}):null};var Xd={},Yd={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var g="",C=0;C<arguments.length;C++){var i=arguments[C];i&&(g=d(g,s(i)))}return g}function s(g){if(typeof g=="string"||typeof g=="number")return g;if(typeof g!="object")return"";if(Array.isArray(g))return r.apply(null,g);if(g.toString!==Object.prototype.toString&&!g.toString.toString().includes("[native code]"))return g.toString();var C="";for(var i in g)t.call(g,i)&&g[i]&&(C=d(C,i));return C}function d(g,C){return C?g?g+" "+C:g+C:g}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Yd);var og=Yd.exports,vr={},Jd={},Qt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){}t.prototype={diff:function(d,g){var C,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var f=this;function _(x){return o?(setTimeout(function(){o(void 0,x)},0),!0):x}d=this.castInput(d),g=this.castInput(g),d=this.removeEmpty(this.tokenize(d)),g=this.removeEmpty(this.tokenize(g));var h=g.length,p=d.length,w=1,S=h+p;i.maxEditLength&&(S=Math.min(S,i.maxEditLength));var u=(C=i.timeout)!==null&&C!==void 0?C:1/0,n=Date.now()+u,a=[{oldPos:-1,lastComponent:void 0}],l=this.extractCommon(a[0],g,d,0);if(a[0].oldPos+1>=p&&l+1>=h)return _([{value:this.join(g),count:g.length}]);var c=-1/0,m=1/0;function L(){for(var x=Math.max(c,-w);x<=Math.min(m,w);x+=2){var y=void 0,b=a[x-1],E=a[x+1];b&&(a[x-1]=void 0);var M=!1;if(E){var R=E.oldPos-x;M=E&&0<=R&&R<h}var D=b&&b.oldPos+1<p;if(!M&&!D){a[x]=void 0;continue}if(!D||M&&b.oldPos+1<E.oldPos?y=f.addToPath(E,!0,void 0,0):y=f.addToPath(b,void 0,!0,1),l=f.extractCommon(y,g,d,x),y.oldPos+1>=p&&l+1>=h)return _(r(f,y.lastComponent,g,d,f.useLongestToken));a[x]=y,y.oldPos+1>=p&&(m=Math.min(m,x-1)),l+1>=h&&(c=Math.max(c,x+1))}w++}if(o)(function x(){setTimeout(function(){if(w>S||Date.now()>n)return o();L()||x()},0)})();else for(;w<=S&&Date.now()<=n;){var v=L();if(v)return v}},addToPath:function(d,g,C,i){var o=d.lastComponent;return o&&o.added===g&&o.removed===C?{oldPos:d.oldPos+i,lastComponent:{count:o.count+1,added:g,removed:C,previousComponent:o.previousComponent}}:{oldPos:d.oldPos+i,lastComponent:{count:1,added:g,removed:C,previousComponent:o}}},extractCommon:function(d,g,C,i){for(var o=g.length,f=C.length,_=d.oldPos,h=_-i,p=0;h+1<o&&_+1<f&&this.equals(g[h+1],C[_+1]);)h++,_++,p++;return p&&(d.lastComponent={count:p,previousComponent:d.lastComponent}),d.oldPos=_,h},equals:function(d,g){return this.options.comparator?this.options.comparator(d,g):d===g||this.options.ignoreCase&&d.toLowerCase()===g.toLowerCase()},removeEmpty:function(d){for(var g=[],C=0;C<d.length;C++)d[C]&&g.push(d[C]);return g},castInput:function(d){return d},tokenize:function(d){return d.split("")},join:function(d){return d.join("")}};function r(s,d,g,C,i){for(var o=[],f;d;)o.push(d),f=d.previousComponent,delete d.previousComponent,d=f;o.reverse();for(var _=0,h=o.length,p=0,w=0;_<h;_++){var S=o[_];if(S.removed){if(S.value=s.join(C.slice(w,w+S.count)),w+=S.count,_&&o[_-1].added){var n=o[_-1];o[_-1]=o[_],o[_]=n}}else{if(!S.added&&i){var u=g.slice(p,p+S.count);u=u.map(function(l,c){var m=C[w+c];return m.length>l.length?m:l}),S.value=s.join(u)}else S.value=s.join(g.slice(p,p+S.count));p+=S.count,S.added||(w+=S.count)}}var a=o[h-1];return h>1&&typeof a.value=="string"&&(a.added||a.removed)&&s.equals("",a.value)&&(o[h-2].value+=a.value,o.pop()),o}})(Qt);var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.diffChars=cg;vs.characterDiff=void 0;var ag=lg(Qt);function lg(e){return e&&e.__esModule?e:{default:e}}var Zd=new ag.default;vs.characterDiff=Zd;function cg(e,t,r){return Zd.diff(e,t,r)}var yi={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.generateOptions=hg;function hg(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}Object.defineProperty(yi,"__esModule",{value:!0});yi.diffWords=_g;yi.diffWordsWithSpace=pg;yi.wordDiff=void 0;var ug=fg(Qt),dg=Jn;function fg(e){return e&&e.__esModule?e:{default:e}}var rh=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,ih=/\S/,ms=new ug.default;yi.wordDiff=ms;ms.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!ih.test(e)&&!ih.test(t)};ms.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&rh.test(t[r])&&rh.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};function _g(e,t,r){return r=(0,dg.generateOptions)(r,{ignoreWhitespace:!0}),ms.diff(e,t,r)}function pg(e,t,r){return ms.diff(e,t,r)}var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.diffLines=yg;xr.diffTrimmedLines=Cg;xr.lineDiff=void 0;var gg=mg(Qt),vg=Jn;function mg(e){return e&&e.__esModule?e:{default:e}}var Zn=new gg.default;xr.lineDiff=Zn;Zn.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var s=0;s<r.length;s++){var d=r[s];s%2&&!this.options.newlineIsToken?t[t.length-1]+=d:(this.options.ignoreWhitespace&&(d=d.trim()),t.push(d))}return t};function yg(e,t,r){return Zn.diff(e,t,r)}function Cg(e,t,r){var s=(0,vg.generateOptions)(r,{ignoreWhitespace:!0});return Zn.diff(e,t,s)}var ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.diffSentences=xg;ys.sentenceDiff=void 0;var Sg=wg(Qt);function wg(e){return e&&e.__esModule?e:{default:e}}var Bl=new Sg.default;ys.sentenceDiff=Bl;Bl.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function xg(e,t,r){return Bl.diff(e,t,r)}var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.diffCss=Eg;Cs.cssDiff=void 0;var bg=Lg(Qt);function Lg(e){return e&&e.__esModule?e:{default:e}}var Ol=new bg.default;Cs.cssDiff=Ol;Ol.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Eg(e,t,r){return Ol.diff(e,t,r)}var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.diffJson=Dg;Ci.canonicalize=An;Ci.jsonDiff=void 0;var Qd=Rg(Qt),kg=xr;function Rg(e){return e&&e.__esModule?e:{default:e}}function rn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rn=function(r){return typeof r}:rn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rn(e)}var Mg=Object.prototype.toString,Fr=new Qd.default;Ci.jsonDiff=Fr;Fr.useLongestToken=!0;Fr.tokenize=kg.lineDiff.tokenize;Fr.castInput=function(e){var t=this.options,r=t.undefinedReplacement,s=t.stringifyReplacer,d=s===void 0?function(g,C){return typeof C>"u"?r:C}:s;return typeof e=="string"?e:JSON.stringify(An(e,null,null,d),d,"  ")};Fr.equals=function(e,t){return Qd.default.prototype.equals.call(Fr,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Dg(e,t,r){return Fr.diff(e,t,r)}function An(e,t,r,s,d){t=t||[],r=r||[],s&&(e=s(d,e));var g;for(g=0;g<t.length;g+=1)if(t[g]===e)return r[g];var C;if(Mg.call(e)==="[object Array]"){for(t.push(e),C=new Array(e.length),r.push(C),g=0;g<e.length;g+=1)C[g]=An(e[g],t,r,s,d);return t.pop(),r.pop(),C}if(e&&e.toJSON&&(e=e.toJSON()),rn(e)==="object"&&e!==null){t.push(e),C={},r.push(C);var i=[],o;for(o in e)e.hasOwnProperty(o)&&i.push(o);for(i.sort(),g=0;g<i.length;g+=1)o=i[g],C[o]=An(e[o],t,r,s,o);t.pop(),r.pop()}else C=e;return C}var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.diffArrays=Bg;Ss.arrayDiff=void 0;var Ag=Tg(Qt);function Tg(e){return e&&e.__esModule?e:{default:e}}var cs=new Ag.default;Ss.arrayDiff=cs;cs.tokenize=function(e){return e.slice()};cs.join=cs.removeEmpty=function(e){return e};function Bg(e,t,r){return cs.diff(e,t,r)}var Qn={},ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.parsePatch=Og;function Og(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.split(/\r\n|[\n\v\f\r\x85]/),s=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],d=[],g=0;function C(){var f={};for(d.push(f);g<r.length;){var _=r[g];if(/^(\-\-\-|\+\+\+|@@)\s/.test(_))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+/.exec(_);h&&(f.index=_.substring(h[0].length).trim()),g++}for(i(f),i(f),f.hunks=[];g<r.length;){var p=r[g];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))f.hunks.push(o());else{if(p&&t.strict)throw new Error("Unknown line "+(g+1)+" "+JSON.stringify(p));g++}}}function i(f){var _=/^(---|\+\+\+)\s+/.exec(r[g]);if(_){var h=_[1]==="---"?"old":"new",p=r[g].substring(3).trim().split("	",2),w=p[0].replace(/\\\\/g,"\\");w.startsWith('"')&&w.endsWith('"')&&(w=w.substr(1,w.length-2)),f[h+"FileName"]=w,f[h+"Header"]=(p[1]||"").trim(),g++}}function o(){var f=g,_=r[g++],h=_.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+h[1],oldLines:typeof h[2]>"u"?1:+h[2],newStart:+h[3],newLines:typeof h[4]>"u"?1:+h[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var w=0,S=0;g<r.length&&!(r[g].indexOf("--- ")===0&&g+2<r.length&&r[g+1].indexOf("+++ ")===0&&r[g+2].indexOf("@@")===0);g++){var u=r[g].length==0&&g!=r.length-1?" ":r[g][0];if(u==="+"||u==="-"||u===" "||u==="\\")p.lines.push(r[g]),p.linedelimiters.push(s[g]||`
`),u==="+"?w++:u==="-"?S++:u===" "&&(w++,S++);else break}if(!w&&p.newLines===1&&(p.newLines=0),!S&&p.oldLines===1&&(p.oldLines=0),t.strict){if(w!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(f+1));if(S!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(f+1))}return p}for(;g<r.length;)C();return d}var ef={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r,s,d){var g=!0,C=!1,i=!1,o=1;return function f(){if(g&&!i){if(C?o++:g=!1,r+o<=d)return o;i=!0}if(!C)return i||(g=!0),s<=r-o?-o++:(C=!0,f())}}})(ef);Object.defineProperty(Qn,"__esModule",{value:!0});Qn.applyPatch=rf;Qn.applyPatches=Fg;var tf=ws,Pg=Ig(ef);function Ig(e){return e&&e.__esModule?e:{default:e}}function rf(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=(0,tf.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var s=e.split(/\r\n|[\n\v\f\r\x85]/),d=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],g=t.hunks,C=r.compareLine||function(H,j,N,B){return j===B},i=0,o=r.fuzzFactor||0,f=0,_=0,h,p;function w(H,j){for(var N=0;N<H.lines.length;N++){var B=H.lines[N],k=B.length>0?B[0]:" ",A=B.length>0?B.substr(1):B;if(k===" "||k==="-"){if(!C(j+1,s[j],k,A)&&(i++,i>o))return!1;j++}}return!0}for(var S=0;S<g.length;S++){for(var u=g[S],n=s.length-u.oldLines,a=0,l=_+u.oldStart-1,c=(0,Pg.default)(l,f,n);a!==void 0;a=c())if(w(u,l+a)){u.offset=_+=a;break}if(a===void 0)return!1;f=u.offset+u.oldStart+u.oldLines}for(var m=0,L=0;L<g.length;L++){var v=g[L],x=v.oldStart+v.offset+m-1;m+=v.newLines-v.oldLines;for(var y=0;y<v.lines.length;y++){var b=v.lines[y],E=b.length>0?b[0]:" ",M=b.length>0?b.substr(1):b,R=v.linedelimiters&&v.linedelimiters[y]||`
`;if(E===" ")x++;else if(E==="-")s.splice(x,1),d.splice(x,1);else if(E==="+")s.splice(x,0,M),d.splice(x,0,R),x++;else if(E==="\\"){var D=v.lines[y-1]?v.lines[y-1][0]:null;D==="+"?h=!0:D==="-"&&(p=!0)}}}if(h)for(;!s[s.length-1];)s.pop(),d.pop();else p&&(s.push(""),d.push(`
`));for(var T=0;T<s.length-1;T++)s[T]=s[T]+d[T];return s.join("")}function Fg(e,t){typeof e=="string"&&(e=(0,tf.parsePatch)(e));var r=0;function s(){var d=e[r++];if(!d)return t.complete();t.loadFile(d,function(g,C){if(g)return t.complete(g);var i=rf(C,d,t);t.patched(d,i,function(o){if(o)return t.complete(o);s()})})}s()}var eo={},jr={};Object.defineProperty(jr,"__esModule",{value:!0});jr.structuredPatch=sf;jr.formatPatch=Pl;jr.createTwoFilesPatch=nf;jr.createPatch=zg;var Ng=xr;function Oo(e){return Wg(e)||$g(e)||jg(e)||Hg()}function Hg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jg(e,t){if(e){if(typeof e=="string")return Ta(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ta(e,t)}}function $g(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Wg(e){if(Array.isArray(e))return Ta(e)}function Ta(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function sf(e,t,r,s,d,g,C){C||(C={}),typeof C.context>"u"&&(C.context=4);var i=(0,Ng.diffLines)(r,s,C);if(!i)return;i.push({value:"",lines:[]});function o(a){return a.map(function(l){return" "+l})}for(var f=[],_=0,h=0,p=[],w=1,S=1,u=function(l){var c=i[l],m=c.lines||c.value.replace(/\n$/,"").split(`
`);if(c.lines=m,c.added||c.removed){var L;if(!_){var v=i[l-1];_=w,h=S,v&&(p=C.context>0?o(v.lines.slice(-C.context)):[],_-=p.length,h-=p.length)}(L=p).push.apply(L,Oo(m.map(function(T){return(c.added?"+":"-")+T}))),c.added?S+=m.length:w+=m.length}else{if(_)if(m.length<=C.context*2&&l<i.length-2){var x;(x=p).push.apply(x,Oo(o(m)))}else{var y,b=Math.min(m.length,C.context);(y=p).push.apply(y,Oo(o(m.slice(0,b))));var E={oldStart:_,oldLines:w-_+b,newStart:h,newLines:S-h+b,lines:p};if(l>=i.length-2&&m.length<=C.context){var M=/\n$/.test(r),R=/\n$/.test(s),D=m.length==0&&p.length>E.oldLines;!M&&D&&r.length>0&&p.splice(E.oldLines,0,"\\ No newline at end of file"),(!M&&!D||!R)&&p.push("\\ No newline at end of file")}f.push(E),_=0,h=0,p=[]}w+=m.length,S+=m.length}},n=0;n<i.length;n++)u(n);return{oldFileName:e,newFileName:t,oldHeader:d,newHeader:g,hunks:f}}function Pl(e){if(Array.isArray(e))return e.map(Pl).join(`
`);var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader>"u"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader>"u"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var s=e.hunks[r];s.oldLines===0&&(s.oldStart-=1),s.newLines===0&&(s.newStart-=1),t.push("@@ -"+s.oldStart+","+s.oldLines+" +"+s.newStart+","+s.newLines+" @@"),t.push.apply(t,s.lines)}return t.join(`
`)+`
`}function nf(e,t,r,s,d,g,C){return Pl(sf(e,t,r,s,d,g,C))}function zg(e,t,r,s,d,g){return nf(e,e,t,r,s,d,g)}var to={};Object.defineProperty(to,"__esModule",{value:!0});to.arrayEqual=Ug;to.arrayStartsWith=of;function Ug(e,t){return e.length!==t.length?!1:of(e,t)}function of(e,t){if(t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}Object.defineProperty(eo,"__esModule",{value:!0});eo.calcLineCount=af;eo.merge=Jg;var Vg=jr,Gg=ws,Po=to;function oi(e){return Yg(e)||Xg(e)||qg(e)||Kg()}function Kg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qg(e,t){if(e){if(typeof e=="string")return Ba(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ba(e,t)}}function Xg(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Yg(e){if(Array.isArray(e))return Ba(e)}function Ba(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function af(e){var t=Oa(e.lines),r=t.oldLines,s=t.newLines;r!==void 0?e.oldLines=r:delete e.oldLines,s!==void 0?e.newLines=s:delete e.newLines}function Jg(e,t,r){e=sh(e,r),t=sh(t,r);var s={};(e.index||t.index)&&(s.index=e.index||t.index),(e.newFileName||t.newFileName)&&(nh(e)?nh(t)?(s.oldFileName=$s(s,e.oldFileName,t.oldFileName),s.newFileName=$s(s,e.newFileName,t.newFileName),s.oldHeader=$s(s,e.oldHeader,t.oldHeader),s.newHeader=$s(s,e.newHeader,t.newHeader)):(s.oldFileName=e.oldFileName,s.newFileName=e.newFileName,s.oldHeader=e.oldHeader,s.newHeader=e.newHeader):(s.oldFileName=t.oldFileName||e.oldFileName,s.newFileName=t.newFileName||e.newFileName,s.oldHeader=t.oldHeader||e.oldHeader,s.newHeader=t.newHeader||e.newHeader)),s.hunks=[];for(var d=0,g=0,C=0,i=0;d<e.hunks.length||g<t.hunks.length;){var o=e.hunks[d]||{oldStart:1/0},f=t.hunks[g]||{oldStart:1/0};if(oh(o,f))s.hunks.push(ah(o,C)),d++,i+=o.newLines-o.oldLines;else if(oh(f,o))s.hunks.push(ah(f,i)),g++,C+=f.newLines-f.oldLines;else{var _={oldStart:Math.min(o.oldStart,f.oldStart),oldLines:0,newStart:Math.min(o.newStart+C,f.oldStart+i),newLines:0,lines:[]};Zg(_,o.oldStart,o.lines,f.oldStart,f.lines),g++,d++,s.hunks.push(_)}}return s}function sh(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,Gg.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,Vg.structuredPatch)(void 0,void 0,t,e)}return e}function nh(e){return e.newFileName&&e.newFileName!==e.oldFileName}function $s(e,t,r){return t===r?t:(e.conflict=!0,{mine:t,theirs:r})}function oh(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function ah(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function Zg(e,t,r,s,d){var g={offset:t,lines:r,index:0},C={offset:s,lines:d,index:0};for(ch(e,g,C),ch(e,C,g);g.index<g.lines.length&&C.index<C.lines.length;){var i=g.lines[g.index],o=C.lines[C.index];if((i[0]==="-"||i[0]==="+")&&(o[0]==="-"||o[0]==="+"))Qg(e,g,C);else if(i[0]==="+"&&o[0]===" "){var f;(f=e.lines).push.apply(f,oi(Mr(g)))}else if(o[0]==="+"&&i[0]===" "){var _;(_=e.lines).push.apply(_,oi(Mr(C)))}else i[0]==="-"&&o[0]===" "?lh(e,g,C):o[0]==="-"&&i[0]===" "?lh(e,C,g,!0):i===o?(e.lines.push(i),g.index++,C.index++):Il(e,Mr(g),Mr(C))}hh(e,g),hh(e,C),af(e)}function Qg(e,t,r){var s=Mr(t),d=Mr(r);if(uh(s)&&uh(d)){if((0,Po.arrayStartsWith)(s,d)&&dh(r,s,s.length-d.length)){var g;(g=e.lines).push.apply(g,oi(s));return}else if((0,Po.arrayStartsWith)(d,s)&&dh(t,d,d.length-s.length)){var C;(C=e.lines).push.apply(C,oi(d));return}}else if((0,Po.arrayEqual)(s,d)){var i;(i=e.lines).push.apply(i,oi(s));return}Il(e,s,d)}function lh(e,t,r,s){var d=Mr(t),g=ev(r,d);if(g.merged){var C;(C=e.lines).push.apply(C,oi(g.merged))}else Il(e,s?g:d,s?d:g)}function Il(e,t,r){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:r})}function ch(e,t,r){for(;t.offset<r.offset&&t.index<t.lines.length;){var s=t.lines[t.index++];e.lines.push(s),t.offset++}}function hh(e,t){for(;t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r)}}function Mr(e){for(var t=[],r=e.lines[e.index][0];e.index<e.lines.length;){var s=e.lines[e.index];if(r==="-"&&s[0]==="+"&&(r="+"),r===s[0])t.push(s),e.index++;else break}return t}function ev(e,t){for(var r=[],s=[],d=0,g=!1,C=!1;d<t.length&&e.index<e.lines.length;){var i=e.lines[e.index],o=t[d];if(o[0]==="+")break;if(g=g||i[0]!==" ",s.push(o),d++,i[0]==="+")for(C=!0;i[0]==="+";)r.push(i),i=e.lines[++e.index];o.substr(1)===i.substr(1)?(r.push(i),e.index++):C=!0}if((t[d]||"")[0]==="+"&&g&&(C=!0),C)return r;for(;d<t.length;)s.push(t[d++]);return{merged:s,changes:r}}function uh(e){return e.reduce(function(t,r){return t&&r[0]==="-"},!0)}function dh(e,t,r){for(var s=0;s<r;s++){var d=t[t.length-r+s].substr(1);if(e.lines[e.index+s]!==" "+d)return!1}return e.index+=r,!0}function Oa(e){var t=0,r=0;return e.forEach(function(s){if(typeof s!="string"){var d=Oa(s.mine),g=Oa(s.theirs);t!==void 0&&(d.oldLines===g.oldLines?t+=d.oldLines:t=void 0),r!==void 0&&(d.newLines===g.newLines?r+=d.newLines:r=void 0)}else r!==void 0&&(s[0]==="+"||s[0]===" ")&&r++,t!==void 0&&(s[0]==="-"||s[0]===" ")&&t++}),{oldLines:t,newLines:r}}var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.reversePatch=lf;function fh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,s)}return r}function _h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fh(Object(r),!0).forEach(function(s){tv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fh(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function tv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lf(e){return Array.isArray(e)?e.map(lf).reverse():_h(_h({},e),{},{oldFileName:e.newFileName,oldHeader:e.newHeader,newFileName:e.oldFileName,newHeader:e.oldHeader,hunks:e.hunks.map(function(t){return{oldLines:t.newLines,oldStart:t.newStart,newLines:t.oldLines,newStart:t.oldStart,linedelimiters:t.linedelimiters,lines:t.lines.map(function(r){return r.startsWith("-")?"+".concat(r.slice(1)):r.startsWith("+")?"-".concat(r.slice(1)):r})}})})}var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.convertChangesToDMP=rv;function rv(e){for(var t=[],r,s,d=0;d<e.length;d++)r=e[d],r.added?s=1:r.removed?s=-1:s=0,t.push([s,r.value]);return t}var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.convertChangesToXML=iv;function iv(e){for(var t=[],r=0;r<e.length;r++){var s=e[r];s.added?t.push("<ins>"):s.removed&&t.push("<del>"),t.push(sv(s.value)),s.added?t.push("</ins>"):s.removed&&t.push("</del>")}return t.join("")}function sv(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Diff",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"diffChars",{enumerable:!0,get:function(){return r.diffChars}}),Object.defineProperty(e,"diffWords",{enumerable:!0,get:function(){return s.diffWords}}),Object.defineProperty(e,"diffWordsWithSpace",{enumerable:!0,get:function(){return s.diffWordsWithSpace}}),Object.defineProperty(e,"diffLines",{enumerable:!0,get:function(){return d.diffLines}}),Object.defineProperty(e,"diffTrimmedLines",{enumerable:!0,get:function(){return d.diffTrimmedLines}}),Object.defineProperty(e,"diffSentences",{enumerable:!0,get:function(){return g.diffSentences}}),Object.defineProperty(e,"diffCss",{enumerable:!0,get:function(){return C.diffCss}}),Object.defineProperty(e,"diffJson",{enumerable:!0,get:function(){return i.diffJson}}),Object.defineProperty(e,"canonicalize",{enumerable:!0,get:function(){return i.canonicalize}}),Object.defineProperty(e,"diffArrays",{enumerable:!0,get:function(){return o.diffArrays}}),Object.defineProperty(e,"applyPatch",{enumerable:!0,get:function(){return f.applyPatch}}),Object.defineProperty(e,"applyPatches",{enumerable:!0,get:function(){return f.applyPatches}}),Object.defineProperty(e,"parsePatch",{enumerable:!0,get:function(){return _.parsePatch}}),Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return h.merge}}),Object.defineProperty(e,"reversePatch",{enumerable:!0,get:function(){return p.reversePatch}}),Object.defineProperty(e,"structuredPatch",{enumerable:!0,get:function(){return w.structuredPatch}}),Object.defineProperty(e,"createTwoFilesPatch",{enumerable:!0,get:function(){return w.createTwoFilesPatch}}),Object.defineProperty(e,"createPatch",{enumerable:!0,get:function(){return w.createPatch}}),Object.defineProperty(e,"formatPatch",{enumerable:!0,get:function(){return w.formatPatch}}),Object.defineProperty(e,"convertChangesToDMP",{enumerable:!0,get:function(){return S.convertChangesToDMP}}),Object.defineProperty(e,"convertChangesToXML",{enumerable:!0,get:function(){return u.convertChangesToXML}});var t=n(Qt),r=vs,s=yi,d=xr,g=ys,C=Cs,i=Ci,o=Ss,f=Qn,_=ws,h=eo,p=Fl,w=jr,S=Nl,u=Hl;function n(a){return a&&a.__esModule?a:{default:a}}})(Jd);var nv=Pe&&Pe.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r);var d=Object.getOwnPropertyDescriptor(t,r);(!d||("get"in d?!t.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,d)}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),ov=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),av=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&nv(t,e,r);return ov(t,e),t};Object.defineProperty(vr,"__esModule",{value:!0});vr.computeLineInformation=vr.DiffMethod=vr.DiffType=void 0;const Pa=av(Jd),lv=Pa;var Vt;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ADDED=1]="ADDED",e[e.REMOVED=2]="REMOVED",e[e.CHANGED=3]="CHANGED"})(Vt||(vr.DiffType=Vt={}));var Tn;(function(e){e.CHARS="diffChars",e.WORDS="diffWords",e.WORDS_WITH_SPACE="diffWordsWithSpace",e.LINES="diffLines",e.TRIMMED_LINES="diffTrimmedLines",e.SENTENCES="diffSentences",e.CSS="diffCss",e.JSON="diffJson"})(Tn||(vr.DiffMethod=Tn={}));const ph=e=>e===""?[]:e.replace(/\n$/,"").split(`
`),cv=(e,t,r=Tn.CHARS)=>{const s=lv[r](e,t),d={left:[],right:[]};return s.forEach(({added:g,removed:C,value:i})=>{const o={};return g&&(o.type=Vt.ADDED,o.value=i,d.right.push(o)),C&&(o.type=Vt.REMOVED,o.value=i,d.left.push(o)),!C&&!g&&(o.type=Vt.DEFAULT,o.value=i,d.right.push(o),d.left.push(o)),o}),d},hv=(e,t,r=!1,s=Tn.CHARS,d=0,g=[])=>{let C=[];typeof e=="string"&&typeof t=="string"?C=Pa.diffLines(e.trimRight(),t.trimRight(),{newlineIsToken:!1,ignoreWhitespace:!1,ignoreCase:!1}):C=Pa.diffJson(e,t);let i=d,o=d,f=[],_=0;const h=[],p=[],w=(S,u,n,a,l)=>ph(S).map((m,L)=>{const v={},x={};if(!(p.includes(`${u}-${L}`)||l&&L!==0)){if(n||a){let y=!0;if(a){o+=1,v.lineNumber=o,v.type=Vt.REMOVED,v.value=m||" ";const b=C[u+1];if(b&&b.added){const E=ph(b.value)[L];if(E){const M=w(E,u,!0,!1,!0),{value:R,lineNumber:D,type:T}=M[0].right;if(p.push(`${u+1}-${L}`),x.lineNumber=D,v.value===R)y=!1,x.type=0,v.type=0,x.value=R;else if(x.type=T,r)x.value=R;else{const H=cv(m,R,s);x.value=H.right,v.value=H.left}}}}else i+=1,x.lineNumber=i,x.type=Vt.ADDED,x.value=m;y&&!l&&(h.includes(_)||h.push(_))}else o+=1,i+=1,v.lineNumber=o,v.type=Vt.DEFAULT,v.value=m,x.lineNumber=i,x.type=Vt.DEFAULT,x.value=m;return(g?.includes(`L-${v.lineNumber}`)||g?.includes(`R-${x.lineNumber}`)&&!h.includes(_))&&h.push(_),l||(_+=1),{right:x,left:v}}}).filter(Boolean);return C.forEach(({added:S,removed:u,value:n},a)=>{f=[...f,...w(n,a,S,u)]}),{lineInformation:f,diffLines:h}};vr.computeLineInformation=hv;var jl={};function uv(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function dv(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var fv=function(){function e(r){var s=this;this._insertTag=function(d){var g;s.tags.length===0?s.insertionPoint?g=s.insertionPoint.nextSibling:s.prepend?g=s.container.firstChild:g=s.before:g=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(d,g),s.tags.push(d)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(dv(this));var d=this.tags[this.tags.length-1];if(this.isSpeedy){var g=uv(d);try{g.insertRule(s,g.cssRules.length)}catch{}}else d.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var d;return(d=s.parentNode)==null?void 0:d.removeChild(s)}),this.tags=[],this.ctr=0},e}(),Ge="-ms-",Bn="-moz-",me="-webkit-",cf="comm",$l="rule",Wl="decl",_v="@import",hf="@keyframes",pv="@layer",gv=Math.abs,ro=String.fromCharCode,vv=Object.assign;function mv(e,t){return je(e,0)^45?(((t<<2^je(e,0))<<2^je(e,1))<<2^je(e,2))<<2^je(e,3):0}function uf(e){return e.trim()}function yv(e,t){return(e=t.exec(e))?e[0]:e}function ye(e,t,r){return e.replace(t,r)}function Ia(e,t){return e.indexOf(t)}function je(e,t){return e.charCodeAt(t)|0}function hs(e,t,r){return e.slice(t,r)}function It(e){return e.length}function zl(e){return e.length}function Ws(e,t){return t.push(e),e}function Cv(e,t){return e.map(t).join("")}var io=1,pi=1,df=0,lt=0,Ae=0,Si="";function so(e,t,r,s,d,g,C){return{value:e,root:t,parent:r,type:s,props:d,children:g,line:io,column:pi,length:C,return:""}}function Ti(e,t){return vv(so("",null,null,"",null,null,0),e,{length:-e.length},t)}function Sv(){return Ae}function wv(){return Ae=lt>0?je(Si,--lt):0,pi--,Ae===10&&(pi=1,io--),Ae}function _t(){return Ae=lt<df?je(Si,lt++):0,pi++,Ae===10&&(pi=1,io++),Ae}function jt(){return je(Si,lt)}function sn(){return lt}function xs(e,t){return hs(Si,e,t)}function us(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ff(e){return io=pi=1,df=It(Si=e),lt=0,[]}function _f(e){return Si="",e}function nn(e){return uf(xs(lt-1,Fa(e===91?e+2:e===40?e+1:e)))}function xv(e){for(;(Ae=jt())&&Ae<33;)_t();return us(e)>2||us(Ae)>3?"":" "}function bv(e,t){for(;--t&&_t()&&!(Ae<48||Ae>102||Ae>57&&Ae<65||Ae>70&&Ae<97););return xs(e,sn()+(t<6&&jt()==32&&_t()==32))}function Fa(e){for(;_t();)switch(Ae){case e:return lt;case 34:case 39:e!==34&&e!==39&&Fa(Ae);break;case 40:e===41&&Fa(e);break;case 92:_t();break}return lt}function Lv(e,t){for(;_t()&&e+Ae!==57;)if(e+Ae===84&&jt()===47)break;return"/*"+xs(t,lt-1)+"*"+ro(e===47?e:_t())}function Ev(e){for(;!us(jt());)_t();return xs(e,lt)}function kv(e){return _f(on("",null,null,null,[""],e=ff(e),0,[0],e))}function on(e,t,r,s,d,g,C,i,o){for(var f=0,_=0,h=C,p=0,w=0,S=0,u=1,n=1,a=1,l=0,c="",m=d,L=g,v=s,x=c;n;)switch(S=l,l=_t()){case 40:if(S!=108&&je(x,h-1)==58){Ia(x+=ye(nn(l),"&","&\f"),"&\f")!=-1&&(a=-1);break}case 34:case 39:case 91:x+=nn(l);break;case 9:case 10:case 13:case 32:x+=xv(S);break;case 92:x+=bv(sn()-1,7);continue;case 47:switch(jt()){case 42:case 47:Ws(Rv(Lv(_t(),sn()),t,r),o);break;default:x+="/"}break;case 123*u:i[f++]=It(x)*a;case 125*u:case 59:case 0:switch(l){case 0:case 125:n=0;case 59+_:a==-1&&(x=ye(x,/\f/g,"")),w>0&&It(x)-h&&Ws(w>32?vh(x+";",s,r,h-1):vh(ye(x," ","")+";",s,r,h-2),o);break;case 59:x+=";";default:if(Ws(v=gh(x,t,r,f,_,d,i,c,m=[],L=[],h),g),l===123)if(_===0)on(x,t,v,v,m,g,h,i,L);else switch(p===99&&je(x,3)===110?100:p){case 100:case 108:case 109:case 115:on(e,v,v,s&&Ws(gh(e,v,v,0,0,d,i,c,d,m=[],h),L),d,L,h,i,s?m:L);break;default:on(x,v,v,v,[""],L,0,i,L)}}f=_=w=0,u=a=1,c=x="",h=C;break;case 58:h=1+It(x),w=S;default:if(u<1){if(l==123)--u;else if(l==125&&u++==0&&wv()==125)continue}switch(x+=ro(l),l*u){case 38:a=_>0?1:(x+="\f",-1);break;case 44:i[f++]=(It(x)-1)*a,a=1;break;case 64:jt()===45&&(x+=nn(_t())),p=jt(),_=h=It(c=x+=Ev(sn())),l++;break;case 45:S===45&&It(x)==2&&(u=0)}}return g}function gh(e,t,r,s,d,g,C,i,o,f,_){for(var h=d-1,p=d===0?g:[""],w=zl(p),S=0,u=0,n=0;S<s;++S)for(var a=0,l=hs(e,h+1,h=gv(u=C[S])),c=e;a<w;++a)(c=uf(u>0?p[a]+" "+l:ye(l,/&\f/g,p[a])))&&(o[n++]=c);return so(e,t,r,d===0?$l:i,o,f,_)}function Rv(e,t,r){return so(e,t,r,cf,ro(Sv()),hs(e,2,-2),0)}function vh(e,t,r,s){return so(e,t,r,Wl,hs(e,0,s),hs(e,s+1,-1),s)}function ai(e,t){for(var r="",s=zl(e),d=0;d<s;d++)r+=t(e[d],d,e,t)||"";return r}function Mv(e,t,r,s){switch(e.type){case pv:if(e.children.length)break;case _v:case Wl:return e.return=e.return||e.value;case cf:return"";case hf:return e.return=e.value+"{"+ai(e.children,s)+"}";case $l:e.value=e.props.join(",")}return It(r=ai(e.children,s))?e.return=e.value+"{"+r+"}":""}function Dv(e){var t=zl(e);return function(r,s,d,g){for(var C="",i=0;i<t;i++)C+=e[i](r,s,d,g)||"";return C}}function Av(e){return function(t){t.root||(t=t.return)&&e(t)}}function Tv(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Bv=function(t,r,s){for(var d=0,g=0;d=g,g=jt(),d===38&&g===12&&(r[s]=1),!us(g);)_t();return xs(t,lt)},Ov=function(t,r){var s=-1,d=44;do switch(us(d)){case 0:d===38&&jt()===12&&(r[s]=1),t[s]+=Bv(lt-1,r,s);break;case 2:t[s]+=nn(d);break;case 4:if(d===44){t[++s]=jt()===58?"&\f":"",r[s]=t[s].length;break}default:t[s]+=ro(d)}while(d=_t());return t},Pv=function(t,r){return _f(Ov(ff(t),r))},mh=new WeakMap,Iv=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,s=t.parent,d=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!mh.get(s))&&!d){mh.set(t,!0);for(var g=[],C=Pv(r,g),i=s.props,o=0,f=0;o<C.length;o++)for(var _=0;_<i.length;_++,f++)t.props[f]=g[o]?C[o].replace(/&\f/g,i[_]):i[_]+" "+C[o]}}},Fv=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function pf(e,t){switch(mv(e,t)){case 5103:return me+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return me+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return me+e+Bn+e+Ge+e+e;case 6828:case 4268:return me+e+Ge+e+e;case 6165:return me+e+Ge+"flex-"+e+e;case 5187:return me+e+ye(e,/(\w+).+(:[^]+)/,me+"box-$1$2"+Ge+"flex-$1$2")+e;case 5443:return me+e+Ge+"flex-item-"+ye(e,/flex-|-self/,"")+e;case 4675:return me+e+Ge+"flex-line-pack"+ye(e,/align-content|flex-|-self/,"")+e;case 5548:return me+e+Ge+ye(e,"shrink","negative")+e;case 5292:return me+e+Ge+ye(e,"basis","preferred-size")+e;case 6060:return me+"box-"+ye(e,"-grow","")+me+e+Ge+ye(e,"grow","positive")+e;case 4554:return me+ye(e,/([^-])(transform)/g,"$1"+me+"$2")+e;case 6187:return ye(ye(ye(e,/(zoom-|grab)/,me+"$1"),/(image-set)/,me+"$1"),e,"")+e;case 5495:case 3959:return ye(e,/(image-set\([^]*)/,me+"$1$`$1");case 4968:return ye(ye(e,/(.+:)(flex-)?(.*)/,me+"box-pack:$3"+Ge+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+me+e+e;case 4095:case 3583:case 4068:case 2532:return ye(e,/(.+)-inline(.+)/,me+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(It(e)-1-t>6)switch(je(e,t+1)){case 109:if(je(e,t+4)!==45)break;case 102:return ye(e,/(.+:)(.+)-([^]+)/,"$1"+me+"$2-$3$1"+Bn+(je(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Ia(e,"stretch")?pf(ye(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(je(e,t+1)!==115)break;case 6444:switch(je(e,It(e)-3-(~Ia(e,"!important")&&10))){case 107:return ye(e,":",":"+me)+e;case 101:return ye(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+me+(je(e,14)===45?"inline-":"")+"box$3$1"+me+"$2$3$1"+Ge+"$2box$3")+e}break;case 5936:switch(je(e,t+11)){case 114:return me+e+Ge+ye(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return me+e+Ge+ye(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return me+e+Ge+ye(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return me+e+Ge+e+e}return e}var Nv=function(t,r,s,d){if(t.length>-1&&!t.return)switch(t.type){case Wl:t.return=pf(t.value,t.length);break;case hf:return ai([Ti(t,{value:ye(t.value,"@","@"+me)})],d);case $l:if(t.length)return Cv(t.props,function(g){switch(yv(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ai([Ti(t,{props:[ye(g,/:(read-\w+)/,":"+Bn+"$1")]})],d);case"::placeholder":return ai([Ti(t,{props:[ye(g,/:(plac\w+)/,":"+me+"input-$1")]}),Ti(t,{props:[ye(g,/:(plac\w+)/,":"+Bn+"$1")]}),Ti(t,{props:[ye(g,/:(plac\w+)/,Ge+"input-$1")]})],d)}return""})}},Hv=[Nv],jv=function(t){var r=t.key;if(r==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(u){var n=u.getAttribute("data-emotion");n.indexOf(" ")!==-1&&(document.head.appendChild(u),u.setAttribute("data-s",""))})}var d=t.stylisPlugins||Hv,g={},C,i=[];C=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(u){for(var n=u.getAttribute("data-emotion").split(" "),a=1;a<n.length;a++)g[n[a]]=!0;i.push(u)});var o,f=[Iv,Fv];{var _,h=[Mv,Av(function(u){_.insert(u)})],p=Dv(f.concat(d,h)),w=function(n){return ai(kv(n),p)};o=function(n,a,l,c){_=l,w(n?n+"{"+a.styles+"}":a.styles),c&&(S.inserted[a.name]=!0)}}var S={key:r,sheet:new fv({key:r,container:C,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:g,registered:{},insert:o};return S.sheet.hydrate(i),S};function $v(e){for(var t=0,r,s=0,d=e.length;d>=4;++s,d-=4)r=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(d){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Wv={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zv=/[A-Z]|^ms/g,Uv=/_EMO_([^_]+?)_([^]*?)_EMO_/g,gf=function(t){return t.charCodeAt(1)===45},yh=function(t){return t!=null&&typeof t!="boolean"},Io=Tv(function(e){return gf(e)?e:e.replace(zv,"-$&").toLowerCase()}),Ch=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(Uv,function(s,d,g){return lr={name:d,styles:g,next:lr},d})}return Wv[t]!==1&&!gf(t)&&typeof r=="number"&&r!==0?r+"px":r};function On(e,t,r){if(r==null)return"";var s=r;if(s.__emotion_styles!==void 0)return s;switch(typeof r){case"boolean":return"";case"object":{var d=r;if(d.anim===1)return lr={name:d.name,styles:d.styles,next:lr},d.name;var g=r;if(g.styles!==void 0){var C=g.next;if(C!==void 0)for(;C!==void 0;)lr={name:C.name,styles:C.styles,next:lr},C=C.next;var i=g.styles+";";return i}return Vv(e,t,r)}}var o=r;if(t==null)return o;var f=t[o];return f!==void 0?f:o}function Vv(e,t,r){var s="";if(Array.isArray(r))for(var d=0;d<r.length;d++)s+=On(e,t,r[d])+";";else for(var g in r){var C=r[g];if(typeof C!="object"){var i=C;t!=null&&t[i]!==void 0?s+=g+"{"+t[i]+"}":yh(i)&&(s+=Io(g)+":"+Ch(g,i)+";")}else if(Array.isArray(C)&&typeof C[0]=="string"&&(t==null||t[C[0]]===void 0))for(var o=0;o<C.length;o++)yh(C[o])&&(s+=Io(g)+":"+Ch(g,C[o])+";");else{var f=On(e,t,C);switch(g){case"animation":case"animationName":{s+=Io(g)+":"+f+";";break}default:s+=g+"{"+f+"}"}}}return s}var Sh=/label:\s*([^\s;{]+)\s*(;|$)/g,lr;function Fo(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,d="";lr=void 0;var g=e[0];if(g==null||g.raw===void 0)s=!1,d+=On(r,t,g);else{var C=g;d+=C[0]}for(var i=1;i<e.length;i++)if(d+=On(r,t,e[i]),s){var o=g;d+=o[i]}Sh.lastIndex=0;for(var f="",_;(_=Sh.exec(d))!==null;)f+="-"+_[1];var h=$v(d)+f;return{name:h,styles:d,next:lr}}function vf(e,t,r){var s="";return r.split(" ").forEach(function(d){e[d]!==void 0?t.push(e[d]+";"):d&&(s+=d+" ")}),s}var Gv=function(t,r,s){var d=t.key+"-"+r.name;t.registered[d]===void 0&&(t.registered[d]=r.styles)},Kv=function(t,r,s){Gv(t,r);var d=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var g=r;do t.insert(r===g?"."+d:"",g,t.sheet,!0),g=g.next;while(g!==void 0)}};function wh(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function xh(e,t,r){var s=[],d=vf(e,s,r);return s.length<2?r:d+t(s)}var qv=function(t){var r=jv(t);r.sheet.speedy=function(i){this.isSpeedy=i},r.compat=!0;var s=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var h=Fo(f,r.registered,void 0);return Kv(r,h),r.key+"-"+h.name},d=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var h=Fo(f,r.registered),p="animation-"+h.name;return wh(r,{name:h.name,styles:"@keyframes "+p+"{"+h.styles+"}"}),p},g=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var h=Fo(f,r.registered);wh(r,h)},C=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];return xh(r.registered,s,Xv(f))};return{css:s,cx:C,injectGlobal:g,keyframes:d,hydrate:function(o){o.forEach(function(f){r.inserted[f]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:vf.bind(null,r.registered),merge:xh.bind(null,r.registered,s)}},Xv=function e(t){for(var r="",s=0;s<t.length;s++){var d=t[s];if(d!=null){var g=void 0;switch(typeof d){case"boolean":break;case"object":{if(Array.isArray(d))g=e(d);else{g="";for(var C in d)d[C]&&C&&(g&&(g+=" "),g+=C)}break}default:g=d}g&&(r&&(r+=" "),r+=g)}}return r};const Yv=Object.freeze(Object.defineProperty({__proto__:null,default:qv},Symbol.toStringTag,{value:"Module"})),Jv=Bh(Yv);var Zv=Pe&&Pe.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)t.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(r[s[d]]=e[s[d]]);return r},Qv=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jl,"__esModule",{value:!0});const em=Qv(Jv);jl.default=(e,t=!1,r="")=>{const{variables:s={}}=e,d=Zv(e,["variables"]),g={light:Object.assign({diffViewerBackground:"#fff",diffViewerColor:"#212529",addedBackground:"#e6ffed",addedColor:"#24292e",removedBackground:"#ffeef0",removedColor:"#24292e",changedBackground:"#fffbdd",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0",addedGutterBackground:"#cdffd8",removedGutterBackground:"#ffdce0",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",codeFoldGutterBackground:"#dbedff",codeFoldBackground:"#f1f8ff",emptyLineBackground:"#fafbfc",gutterColor:"#212529",addedGutterColor:"#212529",removedGutterColor:"#212529",codeFoldContentColor:"#212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleColor:"#212529",diffViewerTitleBorderColor:"#eee"},s.light||{}),dark:Object.assign({diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",addedBackground:"#044B53",addedColor:"white",removedBackground:"#632F34",removedColor:"white",changedBackground:"#3e302c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f",addedGutterBackground:"#034148",removedGutterBackground:"#632b30",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",codeFoldGutterBackground:"#21232b",codeFoldBackground:"#262831",emptyLineBackground:"#363946",gutterColor:"#666c87",addedGutterColor:"#8c8c8c",removedGutterColor:"#8c8c8c",codeFoldContentColor:"#656a8b",diffViewerTitleBackground:"#2f323e",diffViewerTitleColor:"#555a7b",diffViewerTitleBorderColor:"#353846"},s.dark||{})},C=t?g.dark:g.light,{css:i,cx:o}=(0,em.default)({key:"react-diff",nonce:r}),f=i({width:"100%",label:"content"}),_=i({[`.${f}`]:{width:"50%"},label:"split-view"}),h=i({width:"100%",background:C.diffViewerBackground,pre:{margin:0,whiteSpace:"pre-wrap",lineHeight:"25px"},label:"diff-container",borderCollapse:"collapse"}),p=i({color:C.codeFoldContentColor,label:"code-fold-content"}),w=i({color:C.diffViewerColor,label:"content-text"}),S=i({background:C.diffViewerTitleBackground,padding:10,borderBottom:`1px solid ${C.diffViewerTitleBorderColor}`,label:"title-block",":last-child":{borderLeft:`1px solid ${C.diffViewerTitleBorderColor}`},[`.${w}`]:{color:C.diffViewerTitleColor}}),u=i({color:C.gutterColor,label:"line-number"}),n=i({background:C.removedBackground,color:C.removedColor,pre:{color:C.removedColor},[`.${u}`]:{color:C.removedGutterColor},label:"diff-removed"}),a=i({background:C.addedBackground,color:C.addedColor,pre:{color:C.addedColor},[`.${u}`]:{color:C.addedGutterColor},label:"diff-added"}),l=i({background:C.changedBackground,[`.${u}`]:{color:C.gutterColor},label:"diff-changed"}),c=i({padding:2,display:"inline-flex",borderRadius:4,wordBreak:"break-all",label:"word-diff"}),m=i({background:C.wordAddedBackground,label:"word-added"}),L=i({background:C.wordRemovedBackground,label:"word-removed"}),v=i({backgroundColor:C.codeFoldGutterBackground,label:"code-fold-gutter"}),x=i({backgroundColor:C.codeFoldBackground,height:40,fontSize:14,fontWeight:700,label:"code-fold",a:{textDecoration:"underline !important",cursor:"pointer",pre:{display:"inline"}}}),y=i({backgroundColor:C.emptyLineBackground,label:"empty-line"}),b=i({width:25,paddingLeft:10,paddingRight:10,userSelect:"none",label:"marker",[`&.${a}`]:{pre:{color:C.addedColor}},[`&.${n}`]:{pre:{color:C.removedColor}}}),E=i({background:C.highlightBackground,label:"highlighted-line",[`.${m}, .${L}`]:{backgroundColor:"initial"}}),M=i({label:"highlighted-gutter"}),R=i({userSelect:"none",minWidth:50,padding:"0 10px",whiteSpace:"nowrap",label:"gutter",textAlign:"right",background:C.gutterBackground,"&:hover":{cursor:"pointer",background:C.gutterBackgroundDark,pre:{opacity:1}},pre:{opacity:.5},[`&.${a}`]:{background:C.addedGutterBackground},[`&.${n}`]:{background:C.removedGutterBackground},[`&.${M}`]:{background:C.highlightGutterBackground,"&:hover":{background:C.highlightGutterBackground}}}),D=i({"&:hover":{background:C.gutterBackground,cursor:"initial"},label:"empty-gutter"}),T=i({verticalAlign:"baseline",label:"line"}),H={diffContainer:h,diffRemoved:n,diffAdded:a,diffChanged:l,splitView:_,marker:b,highlightedGutter:M,highlightedLine:E,gutter:R,line:T,wordDiff:c,wordAdded:m,wordRemoved:L,codeFoldGutter:v,codeFold:x,emptyGutter:D,emptyLine:y,lineNumber:u,contentText:w,content:f,codeFoldContent:p,titleBlock:S},j=Object.keys(d).reduce((N,B)=>Object.assign(Object.assign({},N),{[B]:i(d[B])}),{});return Object.keys(H).reduce((N,B)=>Object.assign(Object.assign({},N),{[B]:j[B]?o(H[B],j[B]):H[B]}),{})};var no={};Object.defineProperty(no,"__esModule",{value:!0});no.computeHiddenBlocks=void 0;function tm(e,t,r){let s=0,d,g={},C=[];return e.forEach((i,o)=>{const f=t.some(_=>_>=o-r&&_<=o+r);!f&&d==null?(d={index:s,startLine:o,endLine:o,lines:1},C.push(d),g[o]=d.index,s++):f?d=void 0:(d.endLine=o,d.lines++,g[o]=d.index)}),{lineBlocks:g,blocks:C}}no.computeHiddenBlocks=tm;var bh=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function rm(e,t){return!!(e===t||bh(e)&&bh(t))}function im(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!rm(e[r],t[r]))return!1;return!0}function sm(e,t){t===void 0&&(t=im);var r=null;function s(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];if(r&&r.lastThis===this&&t(d,r.lastArgs))return r.lastResult;var C=e.apply(this,d);return r={lastResult:C,lastArgs:d,lastThis:this},C}return s.clear=function(){r=null},s}const nm=Object.freeze(Object.defineProperty({__proto__:null,default:sm},Symbol.toStringTag,{value:"Module"})),om=Bh(nm);(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(u,n,a,l){l===void 0&&(l=a);var c=Object.getOwnPropertyDescriptor(n,a);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(u,l,c)}:function(u,n,a,l){l===void 0&&(l=a),u[l]=n[a]}),r=Pe&&Pe.__setModuleDefault||(Object.create?function(u,n){Object.defineProperty(u,"default",{enumerable:!0,value:n})}:function(u,n){u.default=n}),s=Pe&&Pe.__importStar||function(u){if(u&&u.__esModule)return u;var n={};if(u!=null)for(var a in u)a!=="default"&&Object.prototype.hasOwnProperty.call(u,a)&&t(n,u,a);return r(n,u),n},d=Pe&&Pe.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.DiffMethod=e.LineNumberPrefix=void 0;const g=I,C=s(V),i=d(og),o=vr;Object.defineProperty(e,"DiffMethod",{enumerable:!0,get:function(){return o.DiffMethod}});const f=d(jl),_=no,h=om,p=h.default||h;var w;(function(u){u.LEFT="L",u.RIGHT="R"})(w||(e.LineNumberPrefix=w={}));class S extends C.Component{constructor(n){super(n),this.resetCodeBlocks=()=>this.state.expandedBlocks.length>0?(this.setState({expandedBlocks:[]}),!0):!1,this.onBlockExpand=a=>{const l=this.state.expandedBlocks.slice();l.push(a),this.setState({expandedBlocks:l})},this.computeStyles=p(f.default),this.onLineNumberClickProxy=a=>this.props.onLineNumberClick?l=>this.props.onLineNumberClick(a,l):()=>{},this.renderWordDiff=(a,l)=>a.map((c,m)=>(0,g.jsx)("span",{className:(0,i.default)(this.styles.wordDiff,{[this.styles.wordAdded]:c.type===o.DiffType.ADDED,[this.styles.wordRemoved]:c.type===o.DiffType.REMOVED}),children:l?l(c.value):c.value},m)),this.renderLine=(a,l,c,m,L,v)=>{const x=`${c}-${a}`,y=`${v}-${L}`,b=this.props.highlightLines.includes(x)||this.props.highlightLines.includes(y),E=l===o.DiffType.ADDED,M=l===o.DiffType.REMOVED,R=l===o.DiffType.CHANGED;let D;return Array.isArray(m)?D=this.renderWordDiff(m,this.props.renderContent):this.props.renderContent?D=this.props.renderContent(m):D=m,(0,g.jsxs)(C.Fragment,{children:[!this.props.hideLineNumbers&&(0,g.jsx)("td",{onClick:a&&this.onLineNumberClickProxy(x),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!a,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:M,[this.styles.diffChanged]:R,[this.styles.highlightedGutter]:b}),children:(0,g.jsx)("pre",{className:this.styles.lineNumber,children:a})}),!this.props.splitView&&!this.props.hideLineNumbers&&(0,g.jsx)("td",{onClick:L&&this.onLineNumberClickProxy(y),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!L,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:M,[this.styles.diffChanged]:R,[this.styles.highlightedGutter]:b}),children:(0,g.jsx)("pre",{className:this.styles.lineNumber,children:L})}),this.props.renderGutter?this.props.renderGutter({lineNumber:a,type:l,prefix:c,value:m,additionalLineNumber:L,additionalPrefix:v,styles:this.styles}):null,!this.props.hideMarkers&&(0,g.jsx)("td",{className:(0,i.default)(this.styles.marker,{[this.styles.emptyLine]:!D,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:M,[this.styles.diffChanged]:R,[this.styles.highlightedLine]:b}),children:(0,g.jsxs)("pre",{children:[E&&"+",M&&"-"]})}),(0,g.jsx)("td",{className:(0,i.default)(this.styles.content,{[this.styles.emptyLine]:!D,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:M,[this.styles.diffChanged]:R,[this.styles.highlightedLine]:b}),children:(0,g.jsx)("pre",{className:this.styles.contentText,children:D})})]})},this.renderSplitView=({left:a,right:l},c)=>(0,g.jsxs)("tr",{className:this.styles.line,children:[this.renderLine(a.lineNumber,a.type,w.LEFT,a.value),this.renderLine(l.lineNumber,l.type,w.RIGHT,l.value)]},c),this.renderInlineView=({left:a,right:l},c)=>{let m;return a.type===o.DiffType.REMOVED&&l.type===o.DiffType.ADDED?(0,g.jsxs)(C.Fragment,{children:[(0,g.jsx)("tr",{className:this.styles.line,children:this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,null)}),(0,g.jsx)("tr",{className:this.styles.line,children:this.renderLine(null,l.type,w.RIGHT,l.value,l.lineNumber)})]},c):(a.type===o.DiffType.REMOVED&&(m=this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,null)),a.type===o.DiffType.DEFAULT&&(m=this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,l.lineNumber,w.RIGHT)),l.type===o.DiffType.ADDED&&(m=this.renderLine(null,l.type,w.RIGHT,l.value,l.lineNumber)),(0,g.jsx)("tr",{className:this.styles.line,children:m},c))},this.onBlockClickProxy=a=>()=>this.onBlockExpand(a),this.renderSkippedLineIndicator=(a,l,c,m)=>{const{hideLineNumbers:L,splitView:v}=this.props,x=this.props.codeFoldMessageRenderer?this.props.codeFoldMessageRenderer(a,c,m):(0,g.jsxs)("pre",{className:this.styles.codeFoldContent,children:["Expand ",a," lines ..."]}),y=(0,g.jsx)("td",{children:(0,g.jsx)("a",{onClick:this.onBlockClickProxy(l),tabIndex:0,children:x})}),b=!v&&!L;return(0,g.jsxs)("tr",{className:this.styles.codeFold,children:[!L&&(0,g.jsx)("td",{className:this.styles.codeFoldGutter}),this.props.renderGutter?(0,g.jsx)("td",{className:this.styles.codeFoldGutter}):null,(0,g.jsx)("td",{className:(0,i.default)({[this.styles.codeFoldGutter]:b})}),b?(0,g.jsxs)(C.Fragment,{children:[(0,g.jsx)("td",{}),y]}):(0,g.jsxs)(C.Fragment,{children:[y,this.props.renderGutter?(0,g.jsx)("td",{}):null,(0,g.jsx)("td",{})]}),(0,g.jsx)("td",{}),(0,g.jsx)("td",{})]},`${c}-${m}`)},this.renderDiff=()=>{const{oldValue:a,newValue:l,splitView:c,disableWordDiff:m,compareMethod:L,linesOffset:v}=this.props,{lineInformation:x,diffLines:y}=(0,o.computeLineInformation)(a,l,m,L,v,this.props.alwaysShowLines),b=this.props.extraLinesSurroundingDiff<0?0:Math.round(this.props.extraLinesSurroundingDiff),{lineBlocks:E,blocks:M}=(0,_.computeHiddenBlocks)(x,y,b);return x.map((R,D)=>{if(this.props.showDiffOnly){const H=E[D];if(H!==void 0){const j=M[H].endLine===D;if(!this.state.expandedBlocks.includes(H)&&j)return(0,g.jsx)(C.Fragment,{children:this.renderSkippedLineIndicator(M[H].lines,H,R.left.lineNumber,R.right.lineNumber)},D);if(!this.state.expandedBlocks.includes(H))return null}}return c?this.renderSplitView(R,D):this.renderInlineView(R,D)})},this.render=()=>{const{oldValue:a,newValue:l,useDarkTheme:c,leftTitle:m,rightTitle:L,splitView:v,hideLineNumbers:x,hideMarkers:y,nonce:b}=this.props;if(this.props.compareMethod!==o.DiffMethod.JSON&&(typeof a!="string"||typeof l!="string"))throw Error('"oldValue" and "newValue" should be strings');this.styles=this.computeStyles(this.props.styles,c,b);const E=this.renderDiff();let M=x?2:3,R=x?2:4;y&&(M-=1,R-=1);const D=this.props.renderGutter?1:0,T=(m||L)&&(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{colSpan:(v?M:R)+D,className:this.styles.titleBlock,children:(0,g.jsx)("pre",{className:this.styles.contentText,children:m})}),v&&(0,g.jsx)("td",{colSpan:M+D,className:this.styles.titleBlock,children:(0,g.jsx)("pre",{className:this.styles.contentText,children:L})})]});return(0,g.jsx)("table",{className:(0,i.default)(this.styles.diffContainer,{[this.styles.splitView]:v}),children:(0,g.jsxs)("tbody",{children:[T,E]})})},this.state={expandedBlocks:[]}}}S.defaultProps={oldValue:"",newValue:"",splitView:!0,highlightLines:[],disableWordDiff:!1,compareMethod:o.DiffMethod.CHARS,styles:{},hideLineNumbers:!1,hideMarkers:!1,extraLinesSurroundingDiff:3,showDiffOnly:!0,useDarkTheme:!1,linesOffset:0,nonce:""},e.default=S})(Xd);const am=Th(Xd),lm={variables:{dark:{diffViewerBackground:"#0d1117",diffViewerColor:"#e6edf3",addedBackground:"rgba(63, 185, 80, 0.15)",addedColor:"#e6edf3",removedBackground:"rgba(248, 81, 73, 0.15)",removedColor:"#e6edf3",wordAddedBackground:"rgba(63, 185, 80, 0.4)",wordRemovedBackground:"rgba(248, 81, 73, 0.4)",addedGutterBackground:"#1a4d2e",removedGutterBackground:"#4d1a1a",gutterBackground:"#161b22",gutterBackgroundDark:"#0d1117",highlightBackground:"#21262d",highlightGutterBackground:"#21262d",codeFoldGutterBackground:"#161b22",codeFoldBackground:"#161b22",emptyLineBackground:"#161b22",gutterColor:"#6e7681",addedGutterColor:"#3fb950",removedGutterColor:"#f85149",codeFoldContentColor:"#8b949e",diffViewerTitleBackground:"#161b22",diffViewerTitleColor:"#e6edf3",diffViewerTitleBorderColor:"#30363d"}}},cm={A:"Added",M:"Modified",D:"Deleted"},hm={A:"bg-accent-green text-white",M:"bg-accent-blue text-white",D:"bg-accent-red text-white"};function um(e){const t=e.querySelectorAll("td");for(const r of t){const s=r.querySelector("pre");if(s){const d=s.textContent?.trim();if(d==="+"||d==="-")return!0}}return!1}function dm(e){return e.textContent?.includes("hidden lines")||!1}function fm(e){const t=[],r=Array.from(e.querySelectorAll("tr"));let s=!1;for(const d of r){if(dm(d)){s=!1;continue}const g=um(d);g&&!s&&t.push(d),s=g}return t}function _m({file:e,defaultExpanded:t}){const[r,s]=V.useState(t),[d,g]=V.useState(-1),[C,i]=V.useState(0),o=V.useRef(null),f=V.useRef([]);V.useEffect(()=>{if(r&&o.current){const h=setTimeout(()=>{o.current&&(f.current=fm(o.current),i(f.current.length),g(f.current.length>0?0:-1))},200);return()=>clearTimeout(h)}else f.current=[],i(0),g(-1)},[r]);const _=h=>{if(f.current.length===0)return;let p;h==="prev"?p=Math.max(0,d-1):p=Math.min(f.current.length-1,d+1),p!==d&&(g(p),f.current[p]?.scrollIntoView({behavior:"smooth",block:"center"}))};return I.jsxs("div",{className:"border border-border-subtle rounded-lg overflow-hidden mb-3",children:[I.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-bg-tertiary",children:[I.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>s(!r),children:[I.jsx("span",{className:"text-text-secondary shrink-0",children:r?"":""}),I.jsx("span",{className:"text-sm truncate",children:e.filename}),I.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded shrink-0 ${hm[e.status]||"bg-bg-secondary"}`,children:cm[e.status]||e.status})]}),I.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[I.jsxs("span",{className:"text-xs text-text-secondary",children:[e.additions>0&&I.jsxs("span",{className:"text-accent-green mr-1",children:["+",e.additions]}),e.deletions>0&&I.jsxs("span",{className:"text-accent-red",children:["-",e.deletions]})]}),r&&C>0&&I.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[I.jsx("button",{onClick:h=>{h.stopPropagation(),_("prev")},disabled:d<=0,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""}),I.jsxs("span",{className:"text-xs text-text-muted min-w-[32px] text-center",children:[d+1,"/",C]}),I.jsx("button",{onClick:h=>{h.stopPropagation(),_("next")},disabled:d>=C-1,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]})]}),r&&I.jsx("div",{ref:o,className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:e.binary?I.jsx("div",{className:"p-4 text-center text-text-muted",children:"Binary file"}):I.jsx(am,{oldValue:e.oldValue||"",newValue:e.newValue||"",splitView:!1,useDarkTheme:!0,styles:lm,showDiffOnly:!0,extraLinesSurroundingDiff:3,codeFoldMessageRenderer:h=>I.jsxs("span",{children:[h," hidden lines"]})})})]})}const pm=({isOpen:e,onClose:t})=>{const[r,s]=V.useState(null),[d,g]=V.useState(!1),C=V.useCallback(async()=>{g(!0);try{const h=await fetch("/api/diff",{signal:AbortSignal.timeout(5e3)});if(!h.ok)throw new Error(`HTTP ${h.status}`);const p=await h.json();s(p)}catch(h){s({error:"connection_failed",message:h instanceof Error?h.message:"Cannot connect to diff server"})}finally{g(!1)}},[]);if(V.useEffect(()=>{e&&C()},[e,C]),V.useEffect(()=>{const h=p=>{e&&p.key==="Escape"&&(t(),p.preventDefault())};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[e,t]),!e)return null;const i=r?.files||[],o=i.length,f=r?.summary?.totalAdditions||0,_=r?.summary?.totalDeletions||0;return I.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-end justify-center",onClick:h=>h.target===h.currentTarget&&t(),children:I.jsxs("div",{className:"w-full h-[90vh] bg-bg-primary rounded-t-2xl flex flex-col overflow-hidden",children:[I.jsxs("div",{className:"shrink-0 px-4 py-3 border-b border-border-subtle flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("h2",{className:"text-lg font-semibold",children:"Git Diff"}),r?.branch&&I.jsx("span",{className:"text-sm text-accent-purple",children:r.branch})]}),I.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-bg-tertiary text-text-secondary",children:""})]}),I.jsxs("div",{className:"shrink-0 px-4 py-2 border-b border-border-subtle flex items-center justify-between text-xs text-text-secondary",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[r?.git_root&&I.jsx("span",{className:"truncate max-w-[200px]",title:r.git_root,children:r.git_root}),I.jsxs("span",{children:[o," file",o!==1?"s":""]})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsxs("span",{className:"text-accent-green",children:["+",f]}),I.jsxs("span",{className:"text-accent-red",children:["-",_]})]})]}),I.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d?I.jsx("div",{className:"flex items-center justify-center h-full",children:I.jsx("div",{className:"text-text-muted",children:"Loading..."})}):r?.error?I.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[I.jsx("span",{className:"text-2xl",children:""}),I.jsx("span",{className:"text-text-muted",children:r.message||"Error loading diff"})]}):i.length===0?I.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[I.jsx("span",{className:"text-2xl text-accent-green",children:""}),I.jsx("span",{className:"text-text-muted",children:"No changes"})]}):i.map((h,p)=>I.jsx(_m,{file:h,defaultExpanded:p===0},h.filename))})]})})},zs=()=>{try{navigator.vibrate?.(8)}catch{}},gm=()=>{const{sendKey:e,sendInput:t}=Zt(),[r,s]=V.useState(null),[d,g]=V.useState(!1),[C,i]=V.useState(!1),[o,f]=V.useState(!1),[_,h]=V.useState(()=>localStorage.getItem("ttyd_toolbar_expanded")!=="false"),p=()=>{h(c=>(localStorage.setItem("ttyd_toolbar_expanded",String(!c)),!c))},w=()=>{const c=localStorage.getItem("ttyd_commands");if(c)try{s(JSON.parse(c))}catch(m){console.error("Failed to parse ttyd_commands",m)}else s({defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]})};V.useEffect(()=>{w()},[]);const S=c=>{t(c+"\r")},u=c=>{zs(),e(c)},n=c=>{zs(),S(c)},a=V.useRef(null),l=async c=>{try{const m=await fetch("/api/upload-image",{method:"POST",headers:{"Content-Type":c.type},body:c});if(!m.ok)throw new Error(`Upload failed: ${m.status}`);const{path:L}=await m.json();t(L)}catch(m){console.error("[Toolbar] Image upload failed:",m)}};return I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"bg-bg-secondary border-t border-border-subtle shrink-0 pb-[env(safe-area-inset-bottom)]",children:I.jsx("div",{className:"flex flex-col gap-1.5 px-2 py-1.5",children:_?I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar",children:[I.jsx(Lh,{expanded:!0,onClick:p}),I.jsx(Ve,{label:"ESC",onClick:()=>u("ESC")}),I.jsx(Ve,{label:"^C",onClick:()=>u("CTRL_C"),className:"text-accent-red"}),I.jsx(Ve,{label:"^L",onClick:()=>u("CTRL_L")}),I.jsx(Na,{}),I.jsx(Eh,{config:r,onCmd:n}),I.jsx(Ot,{label:"",onClick:()=>i(!0),"aria-label":"Text input"}),I.jsx(Ot,{label:"",onClick:()=>a.current?.click(),"aria-label":"Upload image"}),I.jsx(Ot,{label:"Sel",onClick:()=>{zs(),window.dispatchEvent(new Event("terminal-copy-viewport"))},className:"text-accent-purple","aria-label":"Copy viewport"}),I.jsx(Ot,{label:"Diff",onClick:()=>f(!0),className:"text-accent-green"}),I.jsx(Ot,{label:"",onClick:()=>g(!0),"aria-label":"Settings"})]}),I.jsxs("div",{className:"flex items-center gap-1.5",children:[I.jsx(Ve,{label:"Tab",onClick:()=>u("TAB"),wide:!0}),I.jsx(Ve,{label:"Enter",onClick:()=>u("ENTER"),wide:!0}),I.jsx("div",{className:"flex-1"}),I.jsx(Ve,{label:"",onClick:()=>u("ARROW_UP")})]}),I.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[I.jsx(Ve,{label:"",onClick:()=>u("ARROW_LEFT")}),I.jsx(Ve,{label:"",onClick:()=>u("ARROW_DOWN")}),I.jsx(Ve,{label:"",onClick:()=>u("ARROW_RIGHT")})]})]}):I.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar mask-gradient-right",children:[I.jsx(Lh,{expanded:!1,onClick:p}),I.jsx(Ve,{label:"ESC",onClick:()=>u("ESC")}),I.jsx(Ve,{label:"Tab",onClick:()=>u("TAB")}),I.jsx(Ve,{label:"^C",onClick:()=>u("CTRL_C"),className:"text-accent-red"}),I.jsx(Ve,{label:"",onClick:()=>u("ARROW_UP")}),I.jsx(Ve,{label:"",onClick:()=>u("ARROW_DOWN")}),I.jsx(Ve,{label:"",onClick:()=>u("ARROW_LEFT")}),I.jsx(Ve,{label:"",onClick:()=>u("ARROW_RIGHT")}),I.jsx(Na,{}),I.jsx(Eh,{config:r,onCmd:n}),I.jsx(Ot,{label:"",onClick:()=>i(!0),"aria-label":"Text input"}),I.jsx(Ot,{label:"",onClick:()=>a.current?.click(),"aria-label":"Upload image"}),I.jsx(Ot,{label:"Sel",onClick:()=>{zs(),window.dispatchEvent(new Event("terminal-copy-viewport"))},className:"text-accent-purple","aria-label":"Copy viewport"}),I.jsx(Ot,{label:"Diff",onClick:()=>f(!0),className:"text-accent-green"}),I.jsx(Ot,{label:"",onClick:()=>g(!0),"aria-label":"Settings"})]})})}),I.jsx(sg,{isOpen:d,onClose:()=>g(!1),onConfigChange:w}),I.jsx(ng,{isOpen:C,onClose:()=>i(!1),onSend:c=>t(c)}),I.jsx("input",{ref:a,type:"file",accept:"image/*",className:"hidden",onChange:c=>{const m=c.target.files?.[0];m&&l(m),c.target.value=""}}),I.jsx(pm,{isOpen:o,onClose:()=>f(!1)})]})},Ul="min-h-[36px] flex items-center justify-center rounded-lg shadow-sm border border-border-subtle text-sm font-mono active:scale-95 active:bg-accent-blue/20 transition-transform duration-100 whitespace-nowrap select-none",Lh=({expanded:e,onClick:t})=>I.jsx("button",{onClick:t,className:`min-w-[36px] min-h-[36px] flex items-center justify-center rounded-lg shadow-sm border text-sm active:scale-95 transition-transform duration-100 shrink-0 select-none ${e?"bg-accent-blue/20 border-accent-blue text-accent-blue":"bg-bg-tertiary/50 border-border-subtle text-text-secondary"}`,"aria-label":e?"Collapse toolbar":"Expand toolbar",children:e?"":""}),Na=()=>I.jsx("div",{className:"w-px h-5 bg-border-subtle shrink-0"}),Eh=({config:e,onCmd:t})=>{if(!e)return null;const r=[...e.defaultCommands.filter(s=>s.visible),...e.customCommands];return r.length===0?null:I.jsxs(I.Fragment,{children:[r.map(s=>I.jsx(vm,{label:s.name,onClick:()=>t(s.cmd)},s.name)),I.jsx(Na,{})]})},Ve=({label:e,onClick:t,className:r="",wide:s})=>I.jsx("button",{onClick:t,className:`${Ul} bg-bg-tertiary text-text-primary ${s?"px-4":"min-w-[36px] px-2"} ${r}`,children:e}),vm=({label:e,onClick:t})=>I.jsx("button",{onClick:t,className:`${Ul} bg-bg-tertiary text-accent-blue px-3`,children:e}),Ot=({label:e,onClick:t,className:r="",...s})=>I.jsx("button",{onClick:t,"aria-label":s["aria-label"],className:`${Ul} bg-bg-tertiary/50 text-text-secondary min-w-[36px] px-2 ${r}`,children:e}),kh=({isOpen:e,onClose:t})=>{const{sendInput:r,clientTty:s}=Zt(),[d,g]=V.useState(""),C=V.useRef(null);V.useEffect(()=>{e&&(g(""),setTimeout(()=>C.current?.focus(),100))},[e]);const i=async()=>{const f=d.trim();if(f){t();try{if(s){const _=`/api/tmux/create?name=${encodeURIComponent(f)}&client_tty=${encodeURIComponent(s)}`;if((await fetch(_,{signal:AbortSignal.timeout(3e3)})).ok){sessionStorage.setItem("ttyd_last_tmux_session",f);return}}}catch{}r(` tmux new-session -d -s ${f} 2>/dev/null; tmux attach -t ${f}\r`),sessionStorage.setItem("ttyd_last_tmux_session",f)}},o=f=>{f.key==="Enter"?(f.preventDefault(),i()):f.key==="Escape"&&t()};return e?I.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:f=>f.target===f.currentTarget&&t(),children:I.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[I.jsx("h3",{className:"text-lg font-semibold mb-4",children:"New Tmux Session"}),I.jsx("input",{ref:C,type:"text",value:d,onChange:f=>g(f.target.value),onKeyDown:o,placeholder:"Session name (e.g. work, claude)",className:"w-full px-3 py-2 bg-bg-tertiary border border-border-subtle rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-purple mb-4"}),I.jsxs("div",{className:"flex gap-2 justify-end",children:[I.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),I.jsx("button",{onClick:i,disabled:!d.trim(),className:"px-4 py-2 rounded-lg bg-accent-purple text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Create & Attach"})]})]})}):null},mm=1500,ym=({sessionName:e,onConfirm:t,onCancel:r})=>I.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:s=>s.target===s.currentTarget&&r(),children:I.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[I.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Kill Session?"}),I.jsxs("p",{className:"text-text-secondary text-sm mb-4",children:["Are you sure you want to kill session ",I.jsxs("span",{className:"text-accent-red font-mono",children:['"',e,'"']}),"? This action cannot be undone."]}),I.jsxs("div",{className:"flex gap-2 justify-end",children:[I.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),I.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-accent-red text-white",children:"Kill Session"})]})]})}),Cm=()=>{const{sendInput:e}=Zt(),{tmuxSessions:t,currentTmuxSession:r,clientTty:s,sessionsLoaded:d,refresh:g}=qd(),[C,i]=V.useState(!1),[o,f]=V.useState(!1),[_,h]=V.useState(null),p=V.useRef(null),w=V.useRef(null),S=V.useRef(!1);V.useEffect(()=>{const y=b=>{p.current&&!p.current.contains(b.target)&&i(!1)};if(C)return document.addEventListener("mousedown",y),document.addEventListener("touchstart",y,{passive:!0}),()=>{document.removeEventListener("mousedown",y),document.removeEventListener("touchstart",y)}},[C]);const u=async y=>{i(!1);try{const b=s;if(b){const E=`/api/tmux/switch?session=${encodeURIComponent(y)}&client_tty=${encodeURIComponent(b)}`;if((await fetch(E,{signal:AbortSignal.timeout(3e3)})).ok){sessionStorage.setItem("ttyd_last_tmux_session",y),setTimeout(g,300);return}}}catch{}e(` tmux attach -t ${y}\r`),sessionStorage.setItem("ttyd_last_tmux_session",y),setTimeout(g,500)},n=async y=>{try{const b=`/api/tmux/kill?name=${encodeURIComponent(y)}`;await fetch(b,{signal:AbortSignal.timeout(5e3)}),g()}catch{}h(null)},a=y=>{S.current=!1,w.current=window.setTimeout(()=>{S.current=!0,h(y),i(!1)},mm)},l=()=>{w.current&&(clearTimeout(w.current),w.current=null)},c=y=>{S.current||u(y)},m=async()=>{i(!1);try{const y=s;if(y){const b=`/api/tmux/detach?client_tty=${encodeURIComponent(y)}`;await fetch(b,{signal:AbortSignal.timeout(3e3)}),setTimeout(g,500);return}}catch{}e(" tmux detach\r"),setTimeout(g,500)},L=()=>{i(!1),f(!0)};if(t.length===0)return d?I.jsxs(I.Fragment,{children:[I.jsx("button",{onTouchEnd:y=>{y.preventDefault(),L()},onClick:L,className:"flex items-center gap-1.5 px-2.5 py-1 text-accent-purple text-xs font-medium active:opacity-70",children:"+ New Session"}),I.jsx(kh,{isOpen:o,onClose:()=>f(!1)})]}):null;const v=r?t.find(y=>y.name===r):null,x=v?.name||(r??"Sessions");return I.jsxs(I.Fragment,{children:[I.jsxs("div",{ref:p,className:"relative",children:[I.jsxs("button",{onClick:()=>i(!C),className:"flex items-center gap-1.5 px-2.5 py-1 bg-accent-purple rounded-md text-white text-xs font-medium whitespace-nowrap",children:[I.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${v?"bg-accent-green":"bg-text-muted opacity-50"}`}),x,I.jsx("span",{className:"ml-1 text-[10px] opacity-70",children:C?"":""})]}),C&&I.jsxs("div",{className:"absolute top-full left-0 mt-1 min-w-[160px] bg-bg-secondary border border-border-subtle rounded-lg shadow-lg z-50 overflow-hidden",children:[I.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:t.map(y=>I.jsxs("button",{onClick:()=>c(y.name),onTouchStart:()=>a(y.name),onTouchEnd:l,onMouseDown:()=>a(y.name),onMouseUp:l,onMouseLeave:l,className:`w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm transition-colors ${y.name===r?"bg-accent-purple/20 text-accent-purple":"text-text-primary hover:bg-bg-tertiary"}`,children:[I.jsx("span",{className:`w-2 h-2 rounded-full ${y.attached?"bg-accent-green":"bg-text-muted opacity-50"}`}),I.jsx("span",{className:"flex-1 truncate",children:y.name}),I.jsxs("span",{className:"text-xs text-text-muted",children:[y.windows,"w"]})]},y.name))}),I.jsxs("div",{className:"border-t border-border-subtle",children:[I.jsxs("button",{onTouchEnd:y=>{y.preventDefault(),L()},onClick:L,className:"w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm text-accent-purple hover:bg-bg-tertiary active:bg-bg-tertiary",children:[I.jsx("span",{className:"w-2 h-2 flex items-center justify-center text-xs",children:"+"}),I.jsx("span",{children:"New Session"})]}),I.jsxs("button",{onTouchEnd:y=>{y.preventDefault(),m()},onClick:m,className:"w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm text-text-secondary hover:bg-bg-tertiary active:bg-bg-tertiary",children:[I.jsx("span",{className:"w-2 h-2 flex items-center justify-center text-xs",children:""}),I.jsx("span",{children:"Shell"})]})]})]})]}),I.jsx(kh,{isOpen:o,onClose:()=>f(!1)}),_&&I.jsx(ym,{sessionName:_,onConfirm:()=>n(_),onCancel:()=>h(null)})]})},Sm=({currentBranch:e,onBranchChange:t})=>{const[r,s]=V.useState(!1),[d,g]=V.useState({local:[],remote:[],current:""}),[C,i]=V.useState(""),[o,f]=V.useState(!1),_=V.useRef(null),h=V.useRef(null),p=V.useCallback(async()=>{f(!0);try{const a=await fetch("/api/git/branches",{signal:AbortSignal.timeout(5e3)});if(a.ok){const l=await a.json();g(l)}}catch{g({local:[],remote:[],current:""})}finally{f(!1)}},[]);V.useEffect(()=>{r?(p(),setTimeout(()=>h.current?.focus(),100)):i("")},[r,p]),V.useEffect(()=>{const a=l=>{_.current&&!_.current.contains(l.target)&&s(!1)};if(r)return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a,{passive:!0}),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[r]);const w=async a=>{s(!1);try{const l=`/api/git/checkout?branch=${encodeURIComponent(a)}`;(await fetch(l,{signal:AbortSignal.timeout(1e4)})).ok&&t?.()}catch{}},S=a=>{if(!C)return a;const l=C.toLowerCase();return a.filter(c=>c.toLowerCase().includes(l))},u=S(d.local),n=S(d.remote);return e?I.jsxs("div",{ref:_,className:"relative",children:[I.jsxs("button",{onClick:()=>s(!r),className:"text-accent-purple hover:text-accent-purple/80 text-xs font-mono flex items-center gap-1",children:[I.jsx("span",{children:e}),I.jsx("span",{className:"text-[10px] opacity-70",children:r?"":""})]}),r&&I.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-bg-secondary border border-border-subtle rounded-lg shadow-lg z-50 overflow-hidden",children:[I.jsx("div",{className:"p-2 border-b border-border-subtle",children:I.jsx("input",{ref:h,type:"text",value:C,onChange:a=>i(a.target.value),placeholder:"Search branches...",className:"w-full px-2 py-1.5 bg-bg-tertiary border border-border-subtle rounded text-sm text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-purple"})}),I.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:o?I.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:"Loading..."}):I.jsxs(I.Fragment,{children:[u.length>0&&I.jsxs("div",{children:[I.jsx("div",{className:"px-3 py-1.5 text-xs text-text-muted bg-bg-tertiary",children:"Local"}),u.map(a=>I.jsxs("button",{onClick:()=>w(a),className:`w-full px-3 py-2 text-left text-sm truncate ${a===d.current?"bg-accent-purple/20 text-accent-purple":"text-text-primary hover:bg-bg-tertiary"}`,children:[a===d.current&&I.jsx("span",{className:"mr-1",children:""}),a]},a))]}),n.length>0&&I.jsxs("div",{children:[I.jsx("div",{className:"px-3 py-1.5 text-xs text-text-muted bg-bg-tertiary",children:"Remote"}),n.map(a=>I.jsx("button",{onClick:()=>w(a),className:"w-full px-3 py-2 text-left text-sm text-text-secondary hover:bg-bg-tertiary truncate",children:a},a))]}),u.length===0&&n.length===0&&I.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:"No branches found"})]})})]})]}):null};function wm(e,t=20){if(e.length<=t)return e;const r=e.split("/");return r.length<=2?"..."+e.slice(-t+3):"~/"+r.slice(-2).join("/")}const xm=()=>{const{connectionState:e}=Zt(),{branch:t,path:r,isOffline:s,refresh:d}=qd(),g=V.useCallback(()=>{setTimeout(()=>d(),500)},[d]),C=e==="connected";return I.jsx("div",{className:"h-[40px] shrink-0 border-b border-border-subtle flex items-center px-3 bg-bg-secondary overflow-visible",children:I.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary font-mono w-full",children:[I.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${C?"bg-accent-green":"bg-accent-red"}`,title:C?"Connected":"Disconnected"}),I.jsx(Cm,{}),I.jsx("span",{className:"text-border-subtle shrink-0",children:""}),s?I.jsx("span",{className:"text-text-muted",children:"(offline)"}):I.jsxs(I.Fragment,{children:[I.jsx(Sm,{currentBranch:t||"-",onBranchChange:g}),I.jsx("span",{className:"text-border-subtle shrink-0",children:""}),I.jsx("span",{className:"truncate",title:r,children:wm(r)})]})]})})},mf="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9L1tcdTAwMUJcdTAwOUJdW1tcXSgpIzs/XSooPzooPzooPzooPzo7Wy1hLXpBLVpcZFwvIyYuOj0/JUB+X10rKSp8W2EtekEtWlxkXSsoPzo7Wy1hLXpBLVpcZFwvIyYuOj0/JUB+X10rKSopP1x1MDAwNyl8KD86KD86XGR7MSw0fSg/OjtcZHswLDR9KSopP1tcZEEtUFItVFpjZi1ucS11eT0+PH5dKSkvZztmdW5jdGlvbiBsKHQpe3JldHVybiB0LnJlcGxhY2UodSwiIil9Y29uc3QgYz1be3BhdHRlcm46L15SZWFkaW5nXHMrKC4rKSQvaSx0eXBlOiJyZWFkaW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15Xcm90ZVxzKyguKz8pKD86XHMrXCguKlwpKT8kL2ksdHlwZToid3JpdGluZyIsZmlsZUdyb3VwOjF9LHtwYXR0ZXJuOi9eQ3JlYXRlZFxzKyguKykkL2ksdHlwZToid3JpdGluZyIsZmlsZUdyb3VwOjF9LHtwYXR0ZXJuOi9eRWRpdGVkXHMrKC4rKSQvaSx0eXBlOiJ3cml0aW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15SdW5uaW5nXHMrKC4rKSQvaSx0eXBlOiJleGVjdXRpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXkV4ZWN1dGluZ1xzKyguKykkL2ksdHlwZToiZXhlY3V0aW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15UaGlua2luZ1wuezN9JC9pLHR5cGU6InRoaW5raW5nIn0se3BhdHRlcm46L15BbmFseXppbmdccysoLispL2ksdHlwZToidGhpbmtpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXlxbcmVhZFxdXHMrKC4rKSQvaSx0eXBlOiJyZWFkaW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15cW3dyaXRlXF1ccysoLispJC9pLHR5cGU6IndyaXRpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXlxbZXhlY1xdXHMrKC4rKSQvaSx0eXBlOiJleGVjdXRpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXuKck1xzKyguKykkL2ksdHlwZToiY29tcGxldGUiLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXuKcl1xzKyguKykkL2ksdHlwZToiZXJyb3IiLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXkVycm9yOlxzKyguKykvaSx0eXBlOiJlcnJvciIsZmlsZUdyb3VwOjF9XSxhPTFlMztsZXQgZT0iIjtmdW5jdGlvbiBmKHQpe2NvbnN0IG49dC50cmltKCk7aWYoIW4pcmV0dXJuIG51bGw7Zm9yKGNvbnN0e3BhdHRlcm46cCx0eXBlOm8sZmlsZUdyb3VwOml9b2YgYyl7Y29uc3Qgcz1uLm1hdGNoKHApO2lmKHMpe2NvbnN0IHI9aT9zW2ldOnZvaWQgMDtyZXR1cm57dHlwZTpvLG1lc3NhZ2U6cnx8bixmaWxlOnJ9fX1yZXR1cm4gbnVsbH1zZWxmLm9ubWVzc2FnZT10PT57aWYodC5kYXRhLnR5cGUhPT0iZGF0YSIpcmV0dXJuO2NvbnN0IG49bCh0LmRhdGEucGF5bG9hZCk7ZSs9bixlLmxlbmd0aD5hJiYoZT1lLnNsaWNlKC1hKSk7Y29uc3QgcD1lLnNwbGl0KC9ccj9cbi8pO2U9cC5wb3AoKXx8IiI7Y29uc3Qgbz1wLnNsaWNlKDAsNTApLGk9W107Zm9yKGNvbnN0IHMgb2Ygbyl7Y29uc3Qgcj1mKHMpO3ImJmkucHVzaChyKX1pLmxlbmd0aD4wJiZzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJhY3Rpdml0eSIsYWN0aXZpdGllczppfSl9fSkoKTsK",bm=e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0)),Rh=typeof self<"u"&&self.Blob&&new Blob([bm(mf)],{type:"text/javascript;charset=utf-8"});function Lm(e){let t;try{if(t=Rh&&(self.URL||self.webkitURL).createObjectURL(Rh),!t)throw"";const r=new Worker(t,{name:e?.name});return r.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),r}catch{return new Worker("data:text/javascript;base64,"+mf,{name:e?.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const Em=10;function km(){const[e,t]=V.useState([]),{subscribeOutput:r}=Zt(),s=V.useRef(0),d=V.useRef(null),g=V.useCallback((C,i,o)=>{const f={id:`activity-${++s.current}`,type:C,message:i,file:o,timestamp:new Date};t(_=>[f,..._].slice(0,Em))},[]);return V.useEffect(()=>{const C=new Lm;d.current=C,C.onmessage=o=>{if(o.data.type==="activity")for(const f of o.data.activities)g(f.type,f.message,f.file)};const i=r(o=>{const f=typeof o=="string"?o:new TextDecoder().decode(o);C.postMessage({type:"data",payload:f})});return()=>{i(),C.terminate(),d.current=null}},[r,g]),V.useEffect(()=>(typeof window<"u"&&(window.__addMockActivity=g),()=>{typeof window<"u"&&delete window.__addMockActivity}),[g]),{activities:e,addActivity:g}}const Mh={reading:"",writing:"",thinking:"",executing:"",complete:"",error:""},Dh={reading:"text-text-secondary",writing:"text-accent-green",thinking:"text-accent-purple",executing:"text-accent-blue",complete:"text-accent-green",error:"text-accent-red"},Rm=()=>{const[e,t]=V.useState(!1),{activities:r}=km(),s=r.length>0,d=r[0];return!s&&!e?I.jsx("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle cursor-pointer",onClick:()=>t(!0),children:I.jsxs("div",{className:"px-3 py-2 text-xs text-text-muted flex items-center gap-2",children:[I.jsx("span",{children:""}),I.jsx("span",{children:"No recent activity"})]})}):e?I.jsxs("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle max-h-[200px] overflow-y-auto",children:[I.jsxs("div",{className:"px-3 py-2 text-xs text-text-muted flex items-center gap-2 cursor-pointer sticky top-0 bg-bg-secondary border-b border-border-subtle",onClick:()=>t(!1),children:[I.jsx("span",{children:""}),I.jsxs("span",{children:[r.length," activities"]})]}),I.jsx("div",{className:"divide-y divide-border-subtle",children:r.map((g,C)=>{const i=C===0&&(g.type==="reading"||g.type==="thinking"||g.type==="executing");return I.jsxs("div",{className:`px-3 py-2 text-xs flex items-center gap-2 ${i?"bg-glow-ai border-l-2 border-accent-purple":""}`,style:i?{boxShadow:"0 0 12px var(--glow-ai)"}:void 0,children:[I.jsx("span",{className:Dh[g.type],children:Mh[g.type]}),I.jsx("span",{className:"text-text-primary truncate flex-1",children:g.message}),g.file&&g.file!==g.message&&I.jsx("span",{className:"text-text-muted truncate max-w-[120px]",title:g.file,children:g.file}),I.jsx("span",{className:"text-text-muted shrink-0",children:Mm(g.timestamp)})]},g.id)})}),!s&&I.jsx("div",{className:"px-3 py-4 text-xs text-text-muted text-center",children:"No recent activity"})]}):I.jsx("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle cursor-pointer",onClick:()=>t(!0),children:I.jsxs("div",{className:"px-3 py-2 text-xs flex items-center gap-2",children:[I.jsx("span",{className:"text-text-muted",children:""}),I.jsxs("span",{className:"text-text-secondary",children:[r.length," activities"]}),d&&I.jsxs(I.Fragment,{children:[I.jsx("span",{className:"text-border-subtle",children:""}),I.jsxs("span",{className:Dh[d.type],children:[Mh[d.type]," ",d.message]})]})]})})};function Mm(e){return e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}const Dm=()=>{const{connectionState:e,reconnect:t,reconnectAttempt:r}=Zt(),s=V.useCallback(i=>{i.key==="Enter"&&e==="disconnected"&&t()},[e,t]);if(V.useEffect(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)),[s]),e==="connected")return null;const d=e==="reconnecting",g=e==="connecting",C=e==="disconnected";return I.jsx("div",{className:"fixed inset-0 z-40 bg-black/70 flex items-center justify-center pointer-events-auto",children:I.jsxs("div",{className:"bg-bg-secondary rounded-xl p-6 max-w-xs w-full mx-4 text-center shadow-xl border border-border-subtle",children:[(g||d)&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-8 h-8 border-2 border-accent-purple border-t-transparent rounded-full animate-spin mx-auto mb-4"}),I.jsx("h3",{className:"text-lg font-semibold mb-2",children:d?"Reconnecting...":"Connecting..."}),d&&I.jsxs("p",{className:"text-sm text-text-secondary",children:["Attempt ",r," of 10"]})]}),C&&r>=10&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-red/20 flex items-center justify-center mx-auto mb-4",children:I.jsx("span",{className:"text-2xl",children:""})}),I.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connection Failed"}),I.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Could not connect after 10 attempts"}),I.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Try Again"})]}),C&&r<10&&r>0&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:I.jsx("span",{className:"text-2xl",children:""})}),I.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),I.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Reconnecting automatically..."}),I.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect Now"}),I.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]}),C&&r===0&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:I.jsx("span",{className:"text-2xl",children:""})}),I.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),I.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Connection lost"}),I.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect"}),I.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]})]})})},Am=({children:e})=>{const{terminalRef:t}=Zt(),[r,s]=V.useState(null),d=V.useCallback(()=>{const C=window.visualViewport;C&&s(C.height)},[]);V.useEffect(()=>{const C=window.visualViewport;if(C)return C.addEventListener("resize",d),C.addEventListener("scroll",d),d(),()=>{C.removeEventListener("resize",d),C.removeEventListener("scroll",d)}},[d]);const g=r?{height:`${r}px`}:{height:"100dvh"};return I.jsxs("div",{className:"flex flex-col bg-bg-primary overflow-hidden text-text-primary font-sans selection:bg-accent-blue/30",style:g,children:[I.jsx(xm,{}),I.jsx(Rm,{}),I.jsx("div",{ref:t,className:"flex-1 min-h-0 relative bg-bg-primary overflow-hidden",children:e}),I.jsx(gm,{}),I.jsx(Dm,{})]})};var yf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(globalThis,()=>(()=>{var r={4567:function(C,i,o){var f=this&&this.__decorate||function(l,c,m,L){var v,x=arguments.length,y=x<3?c:L===null?L=Object.getOwnPropertyDescriptor(c,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,c,m,L);else for(var b=l.length-1;b>=0;b--)(v=l[b])&&(y=(x<3?v(y):x>3?v(c,m,y):v(c,m))||y);return x>3&&y&&Object.defineProperty(c,m,y),y},_=this&&this.__param||function(l,c){return function(m,L){c(m,L,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=o(9042),p=o(9924),w=o(844),S=o(4725),u=o(2585),n=o(3656);let a=i.AccessibilityManager=class extends w.Disposable{constructor(l,c,m,L){super(),this._terminal=l,this._coreBrowserService=m,this._renderService=L,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let v=0;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);if(this._topBoundaryFocusListener=v=>this._handleBoundaryFocus(v,0),this._bottomBoundaryFocusListener=v=>this._handleBoundaryFocus(v,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(v=>this._handleResize(v.rows))),this.register(this._terminal.onRender(v=>this._refreshRows(v.start,v.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(v=>this._handleChar(v))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(v=>this._handleTab(v))),this.register(this._terminal.onKey(v=>this._handleKey(v.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,n.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(l){for(let c=0;c<l;c++)this._handleChar(" ")}_handleChar(l){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(l){this._clearLiveRegion(),/\p{Control}/u.test(l)||this._charsToConsume.push(l)}_refreshRows(l,c){this._liveRegionDebouncer.refresh(l,c,this._terminal.rows)}_renderRows(l,c){const m=this._terminal.buffer,L=m.lines.length.toString();for(let v=l;v<=c;v++){const x=m.lines.get(m.ydisp+v),y=[],b=x?.translateToString(!0,void 0,void 0,y)||"",E=(m.ydisp+v+1).toString(),M=this._rowElements[v];M&&(b.length===0?(M.innerText="",this._rowColumns.set(M,[0,1])):(M.textContent=b,this._rowColumns.set(M,y)),M.setAttribute("aria-posinset",E),M.setAttribute("aria-setsize",L))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(l,c){const m=l.target,L=this._rowElements[c===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(c===0?"1":`${this._terminal.buffer.lines.length}`)||l.relatedTarget!==L)return;let v,x;if(c===0?(v=m,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(v=this._rowElements.shift(),x=m,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const l=document.getSelection();if(!l)return;if(l.isCollapsed)return void(this._rowContainer.contains(l.anchorNode)&&this._terminal.clearSelection());if(!l.anchorNode||!l.focusNode)return void console.error("anchorNode and/or focusNode are null");let c={node:l.anchorNode,offset:l.anchorOffset},m={node:l.focusNode,offset:l.focusOffset};if((c.node.compareDocumentPosition(m.node)&Node.DOCUMENT_POSITION_PRECEDING||c.node===m.node&&c.offset>m.offset)&&([c,m]=[m,c]),c.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(c={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(c.node))return;const L=this._rowElements.slice(-1)[0];if(m.node.compareDocumentPosition(L)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(m={node:L,offset:L.textContent?.length??0}),!this._rowContainer.contains(m.node))return;const v=({node:b,offset:E})=>{const M=b instanceof Text?b.parentNode:b;let R=parseInt(M?.getAttribute("aria-posinset"),10)-1;if(isNaN(R))return console.warn("row is invalid. Race condition?"),null;const D=this._rowColumns.get(M);if(!D)return console.warn("columns is null. Race condition?"),null;let T=E<D.length?D[E]:D.slice(-1)[0]+1;return T>=this._terminal.cols&&(++R,T=0),{row:R,column:T}},x=v(c),y=v(m);if(x&&y){if(x.row>y.row||x.row===y.row&&x.column>=y.column)throw new Error("invalid range");this._terminal.select(x.column,x.row,(y.row-x.row)*this._terminal.cols-x.column+y.column)}}_handleResize(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const l=this._coreBrowserService.mainDocument.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}}_refreshRowDimensions(l){l.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=a=f([_(1,u.IInstantiationService),_(2,S.ICoreBrowserService),_(3,S.IRenderService)],a)},3614:(C,i)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function f(p,w){return w?"\x1B[200~"+p+"\x1B[201~":p}function _(p,w,S,u){p=f(p=o(p),S.decPrivateModes.bracketedPasteMode&&u.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(p,!0),w.value=""}function h(p,w,S){const u=S.getBoundingClientRect(),n=p.clientX-u.left-10,a=p.clientY-u.top-10;w.style.width="20px",w.style.height="20px",w.style.left=`${n}px`,w.style.top=`${a}px`,w.style.zIndex="1000",w.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=f,i.copyHandler=function(p,w){p.clipboardData&&p.clipboardData.setData("text/plain",w.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,w,S,u){p.stopPropagation(),p.clipboardData&&_(p.clipboardData.getData("text/plain"),w,S,u)},i.paste=_,i.moveTextAreaUnderMouseCursor=h,i.rightClickHandler=function(p,w,S,u,n){h(p,w,S),n&&u.rightClickSelect(p),w.value=u.selectionText,w.select()}},7239:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=o(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(_,h,p){this._css.set(_,h,p)}getCss(_,h){return this._css.get(_,h)}setColor(_,h,p){this._color.set(_,h,p)}getColor(_,h){return this._color.get(_,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,h){o.addEventListener(f,_,h);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,h))}}}},3551:function(C,i,o){var f=this&&this.__decorate||function(a,l,c,m){var L,v=arguments.length,x=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,l,c,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(v<3?L(x):v>3?L(l,c,x):L(l,c))||x);return v>3&&x&&Object.defineProperty(l,c,x),x},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const h=o(3656),p=o(8460),w=o(844),S=o(2585),u=o(4725);let n=i.Linkifier=class extends w.Disposable{get currentLink(){return this._currentLink}constructor(a,l,c,m,L){super(),this._element=a,this._mouseService=l,this._renderService=c,this._bufferService=m,this._linkProviderService=L,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,w.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,w.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){this._lastMouseEvent=a;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const c=a.composedPath();for(let m=0;m<c.length;m++){const L=c[m];if(L.classList.contains("xterm"))break;if(L.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,l){this._activeProviderReplies&&l||(this._activeProviderReplies?.forEach(m=>{m?.forEach(L=>{L.link.dispose&&L.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let c=!1;for(const[m,L]of this._linkProviderService.linkProviders.entries())l?this._activeProviderReplies?.get(m)&&(c=this._checkLinkProviderResult(m,a,c)):L.provideLinks(a.y,v=>{if(this._isMouseOut)return;const x=v?.map(y=>({link:y}));this._activeProviderReplies?.set(m,x),c=this._checkLinkProviderResult(m,a,c),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,l){const c=new Set;for(let m=0;m<l.size;m++){const L=l.get(m);if(L)for(let v=0;v<L.length;v++){const x=L[v],y=x.link.range.start.y<a?0:x.link.range.start.x,b=x.link.range.end.y>a?this._bufferService.cols:x.link.range.end.x;for(let E=y;E<=b;E++){if(c.has(E)){L.splice(v--,1);break}c.add(E)}}}}_checkLinkProviderResult(a,l,c){if(!this._activeProviderReplies)return c;const m=this._activeProviderReplies.get(a);let L=!1;for(let v=0;v<a;v++)this._activeProviderReplies.has(v)&&!this._activeProviderReplies.get(v)||(L=!0);if(!L&&m){const v=m.find(x=>this._linkAtPosition(x.link,l));v&&(c=!0,this._handleNewLink(v))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!c)for(let v=0;v<this._activeProviderReplies.size;v++){const x=this._activeProviderReplies.get(v)?.find(y=>this._linkAtPosition(y.link,l));if(x){c=!0,this._handleNewLink(x);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._currentLink)return;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,l){this._currentLink&&this._lastMouseEvent&&(!a||!l||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,w.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._lastMouseEvent)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(a.link,l)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:c=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",c))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:c=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,c))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const m=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,L=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=L&&(this._clearCurrentLink(m,L),this._lastMouseEvent)){const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._askForLink(v,!1)}})))}_linkHover(a,l,c){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(c,l.text)}_fireUnderlineEvent(a,l){const c=a.range,m=this._bufferService.buffer.ydisp,L=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-m-1,c.end.x,c.end.y-m-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(L)}_linkLeave(a,l,c){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(c,l.text)}_linkAtPosition(a,l){const c=a.range.start.y*this._bufferService.cols+a.range.start.x,m=a.range.end.y*this._bufferService.cols+a.range.end.x,L=l.y*this._bufferService.cols+l.x;return c<=L&&L<=m}_positionFromMouseEvent(a,l,c){const m=c.getCoords(a,l,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,l,c,m,L){return{x1:a,y1:l,x2:c,y2:m,cols:this._bufferService.cols,fg:L}}};i.Linkifier=n=f([_(1,u.IMouseService),_(2,u.IRenderService),_(3,S.IBufferService),_(4,u.ILinkProviderService)],n)},9042:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(C,i,o){var f=this&&this.__decorate||function(u,n,a,l){var c,m=arguments.length,L=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,n,a,l);else for(var v=u.length-1;v>=0;v--)(c=u[v])&&(L=(m<3?c(L):m>3?c(n,a,L):c(n,a))||L);return m>3&&L&&Object.defineProperty(n,a,L),L},_=this&&this.__param||function(u,n){return function(a,l){n(a,l,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const h=o(511),p=o(2585);let w=i.OscLinkProvider=class{constructor(u,n,a){this._bufferService=u,this._optionsService=n,this._oscLinkService=a}provideLinks(u,n){const a=this._bufferService.buffer.lines.get(u-1);if(!a)return void n(void 0);const l=[],c=this._optionsService.rawOptions.linkHandler,m=new h.CellData,L=a.getTrimmedLength();let v=-1,x=-1,y=!1;for(let b=0;b<L;b++)if(x!==-1||a.hasContent(b)){if(a.loadCell(b,m),m.hasExtendedAttrs()&&m.extended.urlId){if(x===-1){x=b,v=m.extended.urlId;continue}y=m.extended.urlId!==v}else x!==-1&&(y=!0);if(y||x!==-1&&b===L-1){const E=this._oscLinkService.getLinkData(v)?.uri;if(E){const M={start:{x:x+1,y:u},end:{x:b+(y||b!==L-1?0:1),y:u}};let R=!1;if(!c?.allowNonHttpProtocols)try{const D=new URL(E);["http:","https:"].includes(D.protocol)||(R=!0)}catch{R=!0}R||l.push({text:E,range:M,activate:(D,T)=>c?c.activate(D,T,M):S(0,T),hover:(D,T)=>c?.hover?.(D,T,M),leave:(D,T)=>c?.leave?.(D,T,M)})}y=!1,m.hasExtendedAttrs()&&m.extended.urlId?(x=b,v=m.extended.urlId):(x=-1,v=-1)}}n(l)}};function S(u,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=w=f([_(0,p.IBufferService),_(1,p.IOptionsService),_(2,p.IOscLinkService)],w)},6193:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=o(3614),_=o(3656),h=o(3551),p=o(9042),w=o(3730),S=o(1680),u=o(3107),n=o(5744),a=o(2950),l=o(1296),c=o(428),m=o(4269),L=o(5114),v=o(8934),x=o(3230),y=o(9312),b=o(4725),E=o(6731),M=o(8055),R=o(8969),D=o(8460),T=o(844),H=o(6114),j=o(8437),N=o(2584),B=o(7399),k=o(5941),A=o(9074),P=o(2585),F=o(5435),W=o(4567),z=o(779);class q extends R.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor($={}){super($),this.browser=H,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new T.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(z.LinkProviderService),this._instantiationService.setService(b.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(w.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((O,U)=>this.refresh(O,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(O=>this._reportWindowsOptions(O))),this.register(this._inputHandler.onColor(O=>this._handleColorEvent(O))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(O=>this._afterResize(O.cols,O.rows))),this.register((0,T.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent($){if(this._themeService)for(const O of $){let U,G="";switch(O.index){case 256:U="foreground",G="10";break;case 257:U="background",G="11";break;case 258:U="cursor",G="12";break;default:U="ansi",G="4;"+O.index}switch(O.type){case 0:const ee=M.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[O.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${N.C0.ESC}]${G};${(0,k.toRgbString)(ee)}${N.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(Z=>Z.ansi[O.index]=M.channels.toColor(...O.color));else{const Z=U;this._themeService.modifyColors(ce=>ce[Z]=M.channels.toColor(...O.color))}break;case 2:this._themeService.restoreColor(O.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange($){$?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus($){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const $=this.buffer.ybase+this.buffer.y,O=this.buffer.lines.get($);if(!O)return;const U=Math.min(this.buffer.x,this.cols-1),G=this._renderService.dimensions.css.cell.height,ee=O.getWidth(U),Z=this._renderService.dimensions.css.cell.width*ee,ce=this.buffer.y*this._renderService.dimensions.css.cell.height,Q=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Q+"px",this.textarea.style.top=ce+"px",this.textarea.style.width=Z+"px",this.textarea.style.height=G+"px",this.textarea.style.lineHeight=G+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",O=>{this.hasSelection()&&(0,f.copyHandler)(O,this._selectionService)}));const $=O=>(0,f.handlePasteEvent)(O,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",$)),this.register((0,_.addDisposableDomListener)(this.element,"paste",$)),H.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",O=>{O.button===2&&(0,f.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",O=>{(0,f.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),H.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",O=>{O.button===1&&(0,f.moveTextAreaUnderMouseCursor)(O,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",$=>this._keyUp($),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",$=>this._keyDown($),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",$=>this._keyPress($),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",$=>this._compositionHelper.compositionupdate($))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",$=>this._inputEvent($),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open($){if(!$)throw new Error("Terminal requires a parent element.");if($.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=$.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),$.appendChild(this.element);const O=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),O.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,_.addDisposableDomListener)(this.screenElement,"mousemove",U=>this.updateCursorStyle(U))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),O.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),H.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(L.CoreBrowserService,this.textarea,$.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(v.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(O);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(u.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const $=this,O=this.element;function U(Z){const ce=$._mouseService.getMouseReportCoords(Z,$.screenElement);if(!ce)return!1;let Q,_e;switch(Z.overrideType||Z.type){case"mousemove":_e=32,Z.buttons===void 0?(Q=3,Z.button!==void 0&&(Q=Z.button<3?Z.button:3)):Q=1&Z.buttons?0:4&Z.buttons?1:2&Z.buttons?2:3;break;case"mouseup":_e=0,Q=Z.button<3?Z.button:3;break;case"mousedown":_e=1,Q=Z.button<3?Z.button:3;break;case"wheel":if($._customWheelEventHandler&&$._customWheelEventHandler(Z)===!1||$.viewport.getLinesScrolled(Z)===0)return!1;_e=Z.deltaY<0?0:1,Q=4;break;default:return!1}return!(_e===void 0||Q===void 0||Q>4)&&$.coreMouseService.triggerMouseEvent({col:ce.col,row:ce.row,x:ce.x,y:ce.y,button:Q,action:_e,ctrl:Z.ctrlKey,alt:Z.altKey,shift:Z.shiftKey})}const G={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ee={mouseup:Z=>(U(Z),Z.buttons||(this._document.removeEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.removeEventListener("mousemove",G.mousedrag)),this.cancel(Z)),wheel:Z=>(U(Z),this.cancel(Z,!0)),mousedrag:Z=>{Z.buttons&&U(Z)},mousemove:Z=>{Z.buttons||U(Z)}};this.register(this.coreMouseService.onProtocolChange(Z=>{Z?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Z)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Z?G.mousemove||(O.addEventListener("mousemove",ee.mousemove),G.mousemove=ee.mousemove):(O.removeEventListener("mousemove",G.mousemove),G.mousemove=null),16&Z?G.wheel||(O.addEventListener("wheel",ee.wheel,{passive:!1}),G.wheel=ee.wheel):(O.removeEventListener("wheel",G.wheel),G.wheel=null),2&Z?G.mouseup||(G.mouseup=ee.mouseup):(this._document.removeEventListener("mouseup",G.mouseup),G.mouseup=null),4&Z?G.mousedrag||(G.mousedrag=ee.mousedrag):(this._document.removeEventListener("mousemove",G.mousedrag),G.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(O,"mousedown",Z=>{if(Z.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Z))return U(Z),G.mouseup&&this._document.addEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.addEventListener("mousemove",G.mousedrag),this.cancel(Z)})),this.register((0,_.addDisposableDomListener)(O,"wheel",Z=>{if(!G.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Z)===!1)return!1;if(!this.buffer.hasScrollback){const ce=this.viewport.getLinesScrolled(Z);if(ce===0)return;const Q=N.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Z.deltaY<0?"A":"B");let _e="";for(let Se=0;Se<Math.abs(ce);Se++)_e+=Q;return this.coreService.triggerDataEvent(_e,!0),this.cancel(Z,!0)}return this.viewport.handleWheel(Z)?this.cancel(Z):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(O,"touchstart",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Z),this.cancel(Z)},{passive:!0})),this.register((0,_.addDisposableDomListener)(O,"touchmove",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Z)?void 0:this.cancel(Z)},{passive:!1}))}refresh($,O){this._renderService?.refreshRows($,O)}updateCursorStyle($){this._selectionService?.shouldColumnSelect($)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines($,O,U=0){U===1?(super.scrollLines($,O,U),this.refresh(0,this.rows-1)):this.viewport?.scrollLines($)}paste($){(0,f.paste)($,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler($){this._customKeyEventHandler=$}attachCustomWheelEventHandler($){this._customWheelEventHandler=$}registerLinkProvider($){return this._linkProviderService.registerLinkProvider($)}registerCharacterJoiner($){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const O=this._characterJoinerService.register($);return this.refresh(0,this.rows-1),O}deregisterCharacterJoiner($){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister($)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker($){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+$)}registerDecoration($){return this._decorationService.registerDecoration($)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select($,O,U){this._selectionService.setSelection($,O,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines($,O){this._selectionService?.selectLines($,O)}_keyDown($){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler($)===!1)return!1;const O=this.browser.isMac&&this.options.macOptionIsMeta&&$.altKey;if(!O&&!this._compositionHelper.keydown($))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;O||$.key!=="Dead"&&$.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const U=(0,B.evaluateKeyboardEvent)($,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle($),U.type===3||U.type===2){const G=this.rows-1;return this.scrollLines(U.type===2?-G:G),this.cancel($,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,$)||(U.cancel&&this.cancel($,!0),!U.key||!!($.key&&!$.ctrlKey&&!$.altKey&&!$.metaKey&&$.key.length===1&&$.key.charCodeAt(0)>=65&&$.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==N.C0.ETX&&U.key!==N.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:$}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||$.altKey||$.ctrlKey?this.cancel($,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift($,O){const U=$.isMac&&!this.options.macOptionIsMeta&&O.altKey&&!O.ctrlKey&&!O.metaKey||$.isWindows&&O.altKey&&O.ctrlKey&&!O.metaKey||$.isWindows&&O.getModifierState("AltGraph");return O.type==="keypress"?U:U&&(!O.keyCode||O.keyCode>47)}_keyUp($){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler($)===!1||(function(O){return O.keyCode===16||O.keyCode===17||O.keyCode===18}($)||this.focus(),this.updateCursorStyle($),this._keyPressHandled=!1)}_keyPress($){let O;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler($)===!1)return!1;if(this.cancel($),$.charCode)O=$.charCode;else if($.which===null||$.which===void 0)O=$.keyCode;else{if($.which===0||$.charCode===0)return!1;O=$.which}return!(!O||($.altKey||$.ctrlKey||$.metaKey)&&!this._isThirdLevelShift(this.browser,$)||(O=String.fromCharCode(O),this._onKey.fire({key:O,domEvent:$}),this._showCursor(),this.coreService.triggerDataEvent(O,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent($){if($.data&&$.inputType==="insertText"&&(!$.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const O=$.data;return this.coreService.triggerDataEvent(O,!0),this.cancel($),!0}return!1}resize($,O){$!==this.cols||O!==this.rows?super.resize($,O):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize($,O){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let $=1;$<this.rows;$++)this.buffer.lines.push(this.buffer.getBlankLine(j.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const $=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=$,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(N.C0.ESC+"[I"):this.coreService.triggerDataEvent(N.C0.ESC+"[O")}_reportWindowsOptions($){if(this._renderService)switch($){case F.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const O=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[4;${U};${O}t`);break;case F.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const G=this._renderService.dimensions.css.cell.width.toFixed(0),ee=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[6;${ee};${G}t`)}}cancel($,O){if(this.options.cancelEvents||O)return $.preventDefault(),$.stopPropagation(),!1}}i.Terminal=q},9924:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,f=1e3){this._renderCallback=o,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=h-this._lastRefreshMs,w=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},w)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f)}}},1680:function(C,i,o){var f=this&&this.__decorate||function(a,l,c,m){var L,v=arguments.length,x=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,l,c,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(v<3?L(x):v>3?L(l,c,x):L(l,c))||x);return v>3&&x&&Object.defineProperty(l,c,x),x},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const h=o(3656),p=o(4725),w=o(8460),S=o(844),u=o(2585);let n=i.Viewport=class extends S.Disposable{constructor(a,l,c,m,L,v,x,y){super(),this._viewportElement=a,this._scrollArea=l,this._bufferService=c,this._optionsService=m,this._charSizeService=L,this._renderService=v,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,l){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&c<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const l=this._getPixelsScrolled(a);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(a,l){let c,m="";const L=[],v=l??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let y=a;y<v;y++){const b=x.get(y);if(!b)continue;const E=x.get(y+1)?.isWrapped;if(m+=b.translateToString(!E),!E||y===x.length-1){const M=document.createElement("div");M.textContent=m,L.push(M),m.length>0&&(c=M),m=""}}return{bufferElements:L,cursorElement:c}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(a,l){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&l.altKey||c==="ctrl"&&l.ctrlKey||c==="shift"&&l.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const l=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))}};i.Viewport=n=f([_(2,u.IBufferService),_(3,u.IOptionsService),_(4,p.ICharSizeService),_(5,p.IRenderService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],n)},3107:function(C,i,o){var f=this&&this.__decorate||function(u,n,a,l){var c,m=arguments.length,L=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,n,a,l);else for(var v=u.length-1;v>=0;v--)(c=u[v])&&(L=(m<3?c(L):m>3?c(n,a,L):c(n,a))||L);return m>3&&L&&Object.defineProperty(n,a,L),L},_=this&&this.__param||function(u,n){return function(a,l){n(a,l,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const h=o(4725),p=o(844),w=o(2585);let S=i.BufferDecorationRenderer=class extends p.Disposable{constructor(u,n,a,l,c){super(),this._screenElement=u,this._bufferService=n,this._coreBrowserService=a,this._decorationService=l,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",u?.options?.layer==="top"),n.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const a=u.options.x??0;return a&&a>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(u,n),n}_refreshStyle(u){const n=u.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let a=this._decorationElements.get(u);a||(a=this._createElement(u),u.element=a,this._decorationElements.set(u,a),this._container.appendChild(a),u.onDispose(()=>{this._decorationElements.delete(u),a.remove()})),a.style.top=n*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(a)}}_refreshXPosition(u,n=u.element){if(!n)return;const a=u.options.x??0;(u.options.anchor||"left")==="right"?n.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){this._decorationElements.get(u)?.remove(),this._decorationElements.delete(u),u.dispose()}};i.BufferDecorationRenderer=S=f([_(1,w.IBufferService),_(2,h.ICoreBrowserService),_(3,w.IDecorationService),_(4,h.IRenderService)],S)},5871:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const f of this._zones)if(f.color===o.options.overviewRulerOptions.color&&f.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,o.marker.line))return;if(this._lineAdjacentToZone(f,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(f,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,f){return f>=o.startBufferLine&&f<=o.endBufferLine}_lineAdjacentToZone(o,f,_){return f>=o.startBufferLine-this._linePadding[_||"full"]&&f<=o.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(o,f){o.startBufferLine=Math.min(o.startBufferLine,f),o.endBufferLine=Math.max(o.endBufferLine,f)}}},5744:function(C,i,o){var f=this&&this.__decorate||function(c,m,L,v){var x,y=arguments.length,b=y<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,L):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(c,m,L,v);else for(var E=c.length-1;E>=0;E--)(x=c[E])&&(b=(y<3?x(b):y>3?x(m,L,b):x(m,L))||b);return y>3&&b&&Object.defineProperty(m,L,b),b},_=this&&this.__param||function(c,m){return function(L,v){m(L,v,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const h=o(5871),p=o(4725),w=o(844),S=o(2585),u={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let l=i.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(c,m,L,v,x,y,b){super(),this._viewportElement=c,this._screenElement=m,this._bufferService=L,this._decorationService=v,this._renderService=x,this._optionsService=y,this._coreBrowserService=b,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const E=this._canvas.getContext("2d");if(!E)throw new Error("Ctx cannot be null");this._ctx=E,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=c,n.center=m,n.right=c,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=n.left,a.right=n.left+n.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowserService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowserService.dpr);u.left=m,u.center=m,u.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const m of c)m.position!=="full"&&this._renderColorZone(m);for(const m of c)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(a[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-u[c.position||"full"]/2),n[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[c.position||"full"]))}_queueRefresh(c,m){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=l=f([_(2,S.IBufferService),_(3,S.IDecorationService),_(4,p.IRenderService),_(5,S.IOptionsService),_(6,p.ICoreBrowserService)],l)},2950:function(C,i,o){var f=this&&this.__decorate||function(u,n,a,l){var c,m=arguments.length,L=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,n,a,l);else for(var v=u.length-1;v>=0;v--)(c=u[v])&&(L=(m<3?c(L):m>3?c(n,a,L):c(n,a))||L);return m>3&&L&&Object.defineProperty(n,a,L),L},_=this&&this.__param||function(u,n){return function(a,l){n(a,l,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const h=o(4725),p=o(2585),w=o(2584);let S=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(u,n,a,l,c,m){this._textarea=u,this._compositionView=n,this._bufferService=a,this._optionsService=l,this._coreService=c,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(u){this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(u){if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const u=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,a=n.replace(u,"");this._dataAlreadySent=a,n.length>u.length?this._coreService.triggerDataEvent(a,!0):n.length<u.length?this._coreService.triggerDataEvent(`${w.C0.DEL}`,!0):n.length===u.length&&n!==u&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(u){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}u||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=S=f([_(2,p.IBufferService),_(3,p.IOptionsService),_(4,p.ICoreService),_(5,h.IRenderService)],S)},9806:(C,i)=>{function o(f,_,h){const p=h.getBoundingClientRect(),w=f.getComputedStyle(h),S=parseInt(w.getPropertyValue("padding-left")),u=parseInt(w.getPropertyValue("padding-top"));return[_.clientX-p.left-S,_.clientY-p.top-u]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(f,_,h,p,w,S,u,n,a){if(!S)return;const l=o(f,_,h);return l?(l[0]=Math.ceil((l[0]+(a?u/2:0))/u),l[1]=Math.ceil(l[1]/n),l[0]=Math.min(Math.max(l[0],1),p+(a?1:0)),l[1]=Math.min(Math.max(l[1],1),w),l):void 0}},9504:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=o(2584);function _(n,a,l,c){const m=n-h(n,l),L=a-h(a,l),v=Math.abs(m-L)-function(x,y,b){let E=0;const M=x-h(x,b),R=y-h(y,b);for(let D=0;D<Math.abs(M-R);D++){const T=p(x,y)==="A"?-1:1;b.buffer.lines.get(M+T*D)?.isWrapped&&E++}return E}(n,a,l);return u(v,S(p(n,a),c))}function h(n,a){let l=0,c=a.buffer.lines.get(n),m=c?.isWrapped;for(;m&&n>=0&&n<a.rows;)l++,c=a.buffer.lines.get(--n),m=c?.isWrapped;return l}function p(n,a){return n>a?"A":"B"}function w(n,a,l,c,m,L){let v=n,x=a,y="";for(;v!==l||x!==c;)v+=m?1:-1,m&&v>L.cols-1?(y+=L.buffer.translateBufferLineToString(x,!1,n,v),v=0,n=0,x++):!m&&v<0&&(y+=L.buffer.translateBufferLineToString(x,!1,0,n+1),v=L.cols-1,n=v,x--);return y+L.buffer.translateBufferLineToString(x,!1,n,v)}function S(n,a){const l=a?"O":"[";return f.C0.ESC+l+n}function u(n,a){n=Math.floor(n);let l="";for(let c=0;c<n;c++)l+=a;return l}i.moveToCellSequence=function(n,a,l,c){const m=l.buffer.x,L=l.buffer.y;if(!l.buffer.hasScrollback)return function(y,b,E,M,R,D){return _(b,M,R,D).length===0?"":u(w(y,b,y,b-h(b,R),!1,R).length,S("D",D))}(m,L,0,a,l,c)+_(L,a,l,c)+function(y,b,E,M,R,D){let T;T=_(b,M,R,D).length>0?M-h(M,R):b;const H=M,j=function(N,B,k,A,P,F){let W;return W=_(k,A,P,F).length>0?A-h(A,P):B,N<k&&W<=A||N>=k&&W<A?"C":"D"}(y,b,E,M,R,D);return u(w(y,T,E,H,j==="C",R).length,S(j,D))}(m,L,n,a,l,c);let v;if(L===a)return v=m>n?"D":"C",u(Math.abs(m-n),S(v,c));v=L>a?"D":"C";const x=Math.abs(L-a);return u(function(y,b){return b.cols-y}(L>a?n:m,l)+(x-1)*l.cols+1+((L>a?m:n)-1),S(v,c))}},1296:function(C,i,o){var f=this&&this.__decorate||function(D,T,H,j){var N,B=arguments.length,k=B<3?T:j===null?j=Object.getOwnPropertyDescriptor(T,H):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(D,T,H,j);else for(var A=D.length-1;A>=0;A--)(N=D[A])&&(k=(B<3?N(k):B>3?N(T,H,k):N(T,H))||k);return B>3&&k&&Object.defineProperty(T,H,k),k},_=this&&this.__param||function(D,T){return function(H,j){T(H,j,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const h=o(3787),p=o(2550),w=o(2223),S=o(6171),u=o(6052),n=o(4725),a=o(8055),l=o(8460),c=o(844),m=o(2585),L="xterm-dom-renderer-owner-",v="xterm-rows",x="xterm-fg-",y="xterm-bg-",b="xterm-focus",E="xterm-selection";let M=1,R=i.DomRenderer=class extends c.Disposable{constructor(D,T,H,j,N,B,k,A,P,F,W,z,q){super(),this._terminal=D,this._document=T,this._element=H,this._screenElement=j,this._viewportElement=N,this._helperContainer=B,this._linkifier2=k,this._charSizeService=P,this._optionsService=F,this._bufferService=W,this._coreBrowserService=z,this._themeService=q,this._terminalClass=M++,this._rowElements=[],this._selectionRenderModel=(0,u.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(v),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Y=>this._injectCss(Y))),this._injectCss(this._themeService.colors),this._rowFactory=A.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(L+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Y=>this._handleLinkHover(Y))),this.register(this._linkifier2.onHideLinkUnderline(Y=>this._handleLinkLeave(Y))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(L+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const H of this._rowElements)H.style.width=`${this.dimensions.css.canvas.width}px`,H.style.height=`${this.dimensions.css.cell.height}px`,H.style.lineHeight=`${this.dimensions.css.cell.height}px`,H.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${v} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${v} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${v} .xterm-dim { color: ${a.color.multiplyOpacity(D.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const H=`blink_underline_${this._terminalClass}`,j=`blink_bar_${this._terminalClass}`,N=`blink_block_${this._terminalClass}`;T+=`@keyframes ${H} { 50% {  border-bottom-style: hidden; }}`,T+=`@keyframes ${j} { 50% {  box-shadow: none; }}`,T+=`@keyframes ${N} { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,T+=`${this._terminalSelector} .${v}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${H} 1s step-end infinite;}${this._terminalSelector} .${v}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${j} 1s step-end infinite;}${this._terminalSelector} .${v}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${N} 1s step-end infinite;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${D.cursor.css} !important; color: ${D.cursorAccent.css} !important;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[B,k]of D.ansi.entries())T+=`${this._terminalSelector} .${x}${B} { color: ${k.css}; }${this._terminalSelector} .${x}${B}.xterm-dim { color: ${a.color.multiplyOpacity(k,.5).css}; }${this._terminalSelector} .${y}${B} { background-color: ${k.css}; }`;T+=`${this._terminalSelector} .${x}${w.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(D.background).css}; }${this._terminalSelector} .${x}${w.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${y}${w.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,T){for(let H=this._rowElements.length;H<=T;H++){const j=this._document.createElement("div");this._rowContainer.appendChild(j),this._rowElements.push(j)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,T){this._refreshRowElements(D,T),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,T,H){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,T,H),this.renderRows(0,this._bufferService.rows-1),!D||!T)return;this._selectionRenderModel.update(this._terminal,D,T,H);const j=this._selectionRenderModel.viewportStartRow,N=this._selectionRenderModel.viewportEndRow,B=this._selectionRenderModel.viewportCappedStartRow,k=this._selectionRenderModel.viewportCappedEndRow;if(B>=this._bufferService.rows||k<0)return;const A=this._document.createDocumentFragment();if(H){const P=D[0]>T[0];A.appendChild(this._createSelectionElement(B,P?T[0]:D[0],P?D[0]:T[0],k-B+1))}else{const P=j===B?D[0]:0,F=B===N?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(B,P,F));const W=k-B-1;if(A.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,W)),B!==k){const z=N===k?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(k,0,z))}}this._selectionContainer.appendChild(A)}_createSelectionElement(D,T,H,j=1){const N=this._document.createElement("div"),B=T*this.dimensions.css.cell.width;let k=this.dimensions.css.cell.width*(H-T);return B+k>this.dimensions.css.canvas.width&&(k=this.dimensions.css.canvas.width-B),N.style.height=j*this.dimensions.css.cell.height+"px",N.style.top=D*this.dimensions.css.cell.height+"px",N.style.left=`${B}px`,N.style.width=`${k}px`,N}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,T){const H=this._bufferService.buffer,j=H.ybase+H.y,N=Math.min(H.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,k=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=D;P<=T;P++){const F=P+H.ydisp,W=this._rowElements[P],z=H.lines.get(F);if(!W||!z)break;W.replaceChildren(...this._rowFactory.createRow(z,F,F===j,k,A,N,B,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${L}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,T,H,j,N,B){H<0&&(D=0),j<0&&(T=0);const k=this._bufferService.rows-1;H=Math.max(Math.min(H,k),0),j=Math.max(Math.min(j,k),0),N=Math.min(N,this._bufferService.cols);const A=this._bufferService.buffer,P=A.ybase+A.y,F=Math.min(A.x,N-1),W=this._optionsService.rawOptions.cursorBlink,z=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let Y=H;Y<=j;++Y){const $=Y+A.ydisp,O=this._rowElements[Y],U=A.lines.get($);if(!O||!U)break;O.replaceChildren(...this._rowFactory.createRow(U,$,$===P,z,q,F,W,this.dimensions.css.cell.width,this._widthCache,B?Y===H?D:0:-1,B?(Y===j?T:N)-1:-1))}}};i.DomRenderer=R=f([_(7,m.IInstantiationService),_(8,n.ICharSizeService),_(9,m.IOptionsService),_(10,m.IBufferService),_(11,n.ICoreBrowserService),_(12,n.IThemeService)],R)},3787:function(C,i,o){var f=this&&this.__decorate||function(v,x,y,b){var E,M=arguments.length,R=M<3?x:b===null?b=Object.getOwnPropertyDescriptor(x,y):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(v,x,y,b);else for(var D=v.length-1;D>=0;D--)(E=v[D])&&(R=(M<3?E(R):M>3?E(x,y,R):E(x,y))||R);return M>3&&R&&Object.defineProperty(x,y,R),R},_=this&&this.__param||function(v,x){return function(y,b){x(y,b,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const h=o(2223),p=o(643),w=o(511),S=o(2585),u=o(8055),n=o(4725),a=o(4269),l=o(6171),c=o(3734);let m=i.DomRendererRowFactory=class{constructor(v,x,y,b,E,M,R){this._document=v,this._characterJoinerService=x,this._optionsService=y,this._coreBrowserService=b,this._coreService=E,this._decorationService=M,this._themeService=R,this._workCell=new w.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(v,x,y){this._selectionStart=v,this._selectionEnd=x,this._columnSelectMode=y}createRow(v,x,y,b,E,M,R,D,T,H,j){const N=[],B=this._characterJoinerService.getJoinedCharacters(x),k=this._themeService.colors;let A,P=v.getNoBgTrimmedLength();y&&P<M+1&&(P=M+1);let F=0,W="",z=0,q=0,Y=0,$=!1,O=0,U=!1,G=0;const ee=[],Z=H!==-1&&j!==-1;for(let ce=0;ce<P;ce++){v.loadCell(ce,this._workCell);let Q=this._workCell.getWidth();if(Q===0)continue;let _e=!1,Se=ce,oe=this._workCell;if(B.length>0&&ce===B[0][0]){_e=!0;const le=B.shift();oe=new a.JoinedCellData(this._workCell,v.translateToString(!0,le[0],le[1]),le[1]-le[0]),Se=le[1]-1,Q=oe.getWidth()}const Ne=this._isCellInSelection(ce,x),Qe=y&&ce===M,se=Z&&ce>=H&&ce<=j;let te=!1;this._decorationService.forEachDecorationAtCell(ce,x,void 0,le=>{te=!0});let re=oe.getChars()||p.WHITESPACE_CELL_CHAR;if(re===" "&&(oe.isUnderline()||oe.isOverline())&&(re=""),G=Q*D-T.get(re,oe.isBold(),oe.isItalic()),A){if(F&&(Ne&&U||!Ne&&!U&&oe.bg===z)&&(Ne&&U&&k.selectionForeground||oe.fg===q)&&oe.extended.ext===Y&&se===$&&G===O&&!Qe&&!_e&&!te){oe.isInvisible()?W+=p.WHITESPACE_CELL_CHAR:W+=re,F++;continue}F&&(A.textContent=W),A=this._document.createElement("span"),F=0,W=""}else A=this._document.createElement("span");if(z=oe.bg,q=oe.fg,Y=oe.extended.ext,$=se,O=G,U=Ne,_e&&M>=ce&&M<=Se&&(M=ce),!this._coreService.isCursorHidden&&Qe&&this._coreService.isCursorInitialized){if(ee.push("xterm-cursor"),this._coreBrowserService.isFocused)R&&ee.push("xterm-cursor-blink"),ee.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":ee.push("xterm-cursor-outline");break;case"block":ee.push("xterm-cursor-block");break;case"bar":ee.push("xterm-cursor-bar");break;case"underline":ee.push("xterm-cursor-underline")}}if(oe.isBold()&&ee.push("xterm-bold"),oe.isItalic()&&ee.push("xterm-italic"),oe.isDim()&&ee.push("xterm-dim"),W=oe.isInvisible()?p.WHITESPACE_CELL_CHAR:oe.getChars()||p.WHITESPACE_CELL_CHAR,oe.isUnderline()&&(ee.push(`xterm-underline-${oe.extended.underlineStyle}`),W===" "&&(W=""),!oe.isUnderlineColorDefault()))if(oe.isUnderlineColorRGB())A.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(oe.getUnderlineColor()).join(",")})`;else{let le=oe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&oe.isBold()&&le<8&&(le+=8),A.style.textDecorationColor=k.ansi[le].css}oe.isOverline()&&(ee.push("xterm-overline"),W===" "&&(W="")),oe.isStrikethrough()&&ee.push("xterm-strikethrough"),se&&(A.style.textDecoration="underline");let K=oe.getFgColor(),ie=oe.getFgColorMode(),pe=oe.getBgColor(),he=oe.getBgColorMode();const X=!!oe.isInverse();if(X){const le=K;K=pe,pe=le;const ct=ie;ie=he,he=ct}let fe,ue,de,ae=!1;switch(this._decorationService.forEachDecorationAtCell(ce,x,void 0,le=>{le.options.layer!=="top"&&ae||(le.backgroundColorRGB&&(he=50331648,pe=le.backgroundColorRGB.rgba>>8&16777215,fe=le.backgroundColorRGB),le.foregroundColorRGB&&(ie=50331648,K=le.foregroundColorRGB.rgba>>8&16777215,ue=le.foregroundColorRGB),ae=le.options.layer==="top")}),!ae&&Ne&&(fe=this._coreBrowserService.isFocused?k.selectionBackgroundOpaque:k.selectionInactiveBackgroundOpaque,pe=fe.rgba>>8&16777215,he=50331648,ae=!0,k.selectionForeground&&(ie=50331648,K=k.selectionForeground.rgba>>8&16777215,ue=k.selectionForeground)),ae&&ee.push("xterm-decoration-top"),he){case 16777216:case 33554432:de=k.ansi[pe],ee.push(`xterm-bg-${pe}`);break;case 50331648:de=u.channels.toColor(pe>>16,pe>>8&255,255&pe),this._addStyle(A,`background-color:#${L((pe>>>0).toString(16),"0",6)}`);break;default:X?(de=k.foreground,ee.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):de=k.background}switch(fe||oe.isDim()&&(fe=u.color.multiplyOpacity(de,.5)),ie){case 16777216:case 33554432:oe.isBold()&&K<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(K+=8),this._applyMinimumContrast(A,de,k.ansi[K],oe,fe,void 0)||ee.push(`xterm-fg-${K}`);break;case 50331648:const le=u.channels.toColor(K>>16&255,K>>8&255,255&K);this._applyMinimumContrast(A,de,le,oe,fe,ue)||this._addStyle(A,`color:#${L(K.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(A,de,k.foreground,oe,fe,ue)||X&&ee.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}ee.length&&(A.className=ee.join(" "),ee.length=0),Qe||_e||te?A.textContent=W:F++,G!==this.defaultSpacing&&(A.style.letterSpacing=`${G}px`),N.push(A),ce=Se}return A&&F&&(A.textContent=W),N}_applyMinimumContrast(v,x,y,b,E,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.treatGlyphAsBackgroundColor)(b.getCode()))return!1;const R=this._getContrastCache(b);let D;if(E||M||(D=R.getColor(x.rgba,y.rgba)),D===void 0){const T=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);D=u.color.ensureContrastRatio(E||x,M||y,T),R.setColor((E||x).rgba,(M||y).rgba,D??null)}return!!D&&(this._addStyle(v,`color:${D.css}`),!0)}_getContrastCache(v){return v.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(v,x){v.setAttribute("style",`${v.getAttribute("style")||""}${x};`)}_isCellInSelection(v,x){const y=this._selectionStart,b=this._selectionEnd;return!(!y||!b)&&(this._columnSelectMode?y[0]<=b[0]?v>=y[0]&&x>=y[1]&&v<b[0]&&x<=b[1]:v<y[0]&&x>=y[1]&&v>=b[0]&&x<=b[1]:x>y[1]&&x<b[1]||y[1]===b[1]&&x===y[1]&&v>=y[0]&&v<b[0]||y[1]<b[1]&&x===b[1]&&v<b[0]||y[1]<b[1]&&x===y[1]&&v>=y[0])}};function L(v,x,y){for(;v.length<y;)v=x+v;return v}i.DomRendererRowFactory=m=f([_(1,n.ICharacterJoinerService),_(2,S.IOptionsService),_(3,n.ICoreBrowserService),_(4,S.ICoreService),_(5,S.IDecorationService),_(6,n.IThemeService)],m)},2550:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=o.createElement("span");_.classList.add("xterm-char-measure-element");const h=o.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";const w=o.createElement("span");w.classList.add("xterm-char-measure-element"),w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[_,h,p,w],this._container.appendChild(_),this._container.appendChild(h),this._container.appendChild(p),this._container.appendChild(w),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,f,_,h){o===this._font&&f===this._fontSize&&_===this._weight&&h===this._weightBold||(this._font=o,this._fontSize=f,this._weight=_,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(o,f,_){let h=0;if(!f&&!_&&o.length===1&&(h=o.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const S=this._measure(o,0);return S>0&&(this._flat[h]=S),S}let p=o;f&&(p+="B"),_&&(p+="I");let w=this._holey.get(p);if(w===void 0){let S=0;f&&(S|=1),_&&(S|=2),w=this._measure(o,S),w>0&&this._holey.set(p,w)}return w}_measure(o,f){const _=this._measureElements[f];return _.textContent=o.repeat(32),_.offsetWidth/32}}},2223:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(C,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,h,p,w){return h===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(h){return 9472<=h&&h<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,h,p=0){return(_-(2*Math.round(h)-p))%(2*Math.round(h))}},6052:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,h,p,w=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const S=_.buffers.active.ydisp,u=h[1]-S,n=p[1]-S,a=Math.max(u,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=h[0],this.endCol=p[0])}isCellSelected(_,h,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,f=this.selectionEnd;return!(!o||!f)&&(o[1]>f[1]||o[1]===f[1]&&o[0]>f[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(C,i,o){var f=this&&this.__decorate||function(l,c,m,L){var v,x=arguments.length,y=x<3?c:L===null?L=Object.getOwnPropertyDescriptor(c,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,c,m,L);else for(var b=l.length-1;b>=0;b--)(v=l[b])&&(y=(x<3?v(y):x>3?v(c,m,y):v(c,m))||y);return x>3&&y&&Object.defineProperty(c,m,y),y},_=this&&this.__param||function(l,c){return function(m,L){c(m,L,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const h=o(2585),p=o(8460),w=o(844);let S=i.CharSizeService=class extends w.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,c,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new a(this._optionsService))}catch{this._measureStrategy=this.register(new n(l,c,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};i.CharSizeService=S=f([_(2,h.IOptionsService)],S);class u extends w.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(c,m){c!==void 0&&c>0&&m!==void 0&&m>0&&(this._result.width=c,this._result.height=m)}}class n extends u{constructor(c,m,L){super(),this._document=c,this._parentElement=m,this._optionsService=L,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class a extends u{constructor(c){super(),this._optionsService=c,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const m=this._ctx.measureText("W");if(!("width"in m&&"fontBoundingBoxAscent"in m&&"fontBoundingBoxDescent"in m))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const c=this._ctx.measureText("W");return this._validateAndSet(c.width,c.fontBoundingBoxAscent+c.fontBoundingBoxDescent),this._result}}},4269:function(C,i,o){var f=this&&this.__decorate||function(a,l,c,m){var L,v=arguments.length,x=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,l,c,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(v<3?L(x):v>3?L(l,c,x):L(l,c))||x);return v>3&&x&&Object.defineProperty(l,c,x),x},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=o(3734),p=o(643),w=o(511),S=o(2585);class u extends h.AttributeData{constructor(l,c,m){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=c,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let n=i.CharacterJoinerService=class Cf{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(l){const c={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(c),c.id}deregister(l){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===l)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(l);if(!c||c.length===0)return[];const m=[],L=c.translateToString(!0);let v=0,x=0,y=0,b=c.getFg(0),E=c.getBg(0);for(let M=0;M<c.getTrimmedLength();M++)if(c.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==E){if(M-v>1){const R=this._getJoinedRanges(L,y,x,c,v);for(let D=0;D<R.length;D++)m.push(R[D])}v=M,y=x,b=this._workCell.fg,E=this._workCell.bg}x+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const M=this._getJoinedRanges(L,y,x,c,v);for(let R=0;R<M.length;R++)m.push(M[R])}return m}_getJoinedRanges(l,c,m,L,v){const x=l.substring(c,m);let y=[];try{y=this._characterJoiners[0].handler(x)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const E=this._characterJoiners[b].handler(x);for(let M=0;M<E.length;M++)Cf._mergeRanges(y,E[M])}catch(E){console.error(E)}return this._stringRangesToCellRanges(y,L,v),y}_stringRangesToCellRanges(l,c,m){let L=0,v=!1,x=0,y=l[L];if(y){for(let b=m;b<this._bufferService.cols;b++){const E=c.getWidth(b),M=c.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!v&&y[0]<=x&&(y[0]=b,v=!0),y[1]<=x){if(y[1]=b,y=l[++L],!y)break;y[0]<=x?(y[0]=b,v=!0):v=!1}x+=M}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(l,c){let m=!1;for(let L=0;L<l.length;L++){const v=l[L];if(m){if(c[1]<=v[0])return l[L-1][1]=c[1],l;if(c[1]<=v[1])return l[L-1][1]=Math.max(c[1],v[1]),l.splice(L,1),l;l.splice(L,1),L--}else{if(c[1]<=v[0])return l.splice(L,0,c),l;if(c[1]<=v[1])return v[0]=Math.min(c[0],v[0]),l;c[0]<v[1]&&(v[0]=Math.min(c[0],v[0]),m=!0)}}return m?l[l.length-1][1]=c[1]:l.push(c),l}};i.CharacterJoinerService=n=f([_(0,S.IBufferService)],n)},5114:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=o(844),_=o(8460),h=o(3656);class p extends f.Disposable{constructor(u,n,a){super(),this._textarea=u,this._window=n,this.mainDocument=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new w(this._window),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new _.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(l=>this._screenDprMonitor.setWindow(l))),this.register((0,_.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(u){this._window!==u&&(this._window=u,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=p;class w extends f.Disposable{constructor(u){super(),this._parentWindow=u,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(u){this._parentWindow=u,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=o(844);class _ extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{const w=this.linkProviders.indexOf(p);w!==-1&&this.linkProviders.splice(w,1)}}}}i.LinkProviderService=_},8934:function(C,i,o){var f=this&&this.__decorate||function(S,u,n,a){var l,c=arguments.length,m=c<3?u:a===null?a=Object.getOwnPropertyDescriptor(u,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(S,u,n,a);else for(var L=S.length-1;L>=0;L--)(l=S[L])&&(m=(c<3?l(m):c>3?l(u,n,m):l(u,n))||m);return c>3&&m&&Object.defineProperty(u,n,m),m},_=this&&this.__param||function(S,u){return function(n,a){u(n,a,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const h=o(4725),p=o(9806);let w=i.MouseService=class{constructor(S,u){this._renderService=S,this._charSizeService=u}getCoords(S,u,n,a,l){return(0,p.getCoords)(window,S,u,n,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(S,u){const n=(0,p.getCoordsRelativeToElement)(window,S,u);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};i.MouseService=w=f([_(0,h.IRenderService),_(1,h.ICharSizeService)],w)},3230:function(C,i,o){var f=this&&this.__decorate||function(l,c,m,L){var v,x=arguments.length,y=x<3?c:L===null?L=Object.getOwnPropertyDescriptor(c,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,c,m,L);else for(var b=l.length-1;b>=0;b--)(v=l[b])&&(y=(x<3?v(y):x>3?v(c,m,y):v(c,m))||y);return x>3&&y&&Object.defineProperty(c,m,y),y},_=this&&this.__param||function(l,c){return function(m,L){c(m,L,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const h=o(6193),p=o(4725),w=o(8460),S=o(844),u=o(7226),n=o(2585);let a=i.RenderService=class extends S.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(l,c,m,L,v,x,y,b){super(),this._rowCount=l,this._charSizeService=L,this._renderer=this.register(new S.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._observerDisposable=this.register(new S.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((E,M)=>this._renderRows(E,M),y),this.register(this._renderDebouncer),this.register(y.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(x.onResize(()=>this._fullRefresh())),this.register(x.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(m.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(v.onDecorationRegistered(()=>this._fullRefresh())),this.register(v.onDecorationRemoved(()=>this._fullRefresh())),this.register(m.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(x.cols,x.rows),this._fullRefresh()})),this.register(m.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(x.buffer.y,x.buffer.y,!0))),this.register(b.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(y.window,c),this.register(y.onWindowChange(E=>this._registerIntersectionObserver(E,c)))}_registerIntersectionObserver(l,c){if("IntersectionObserver"in l){const m=new l.IntersectionObserver(L=>this._handleIntersectionChange(L[L.length-1]),{threshold:0});m.observe(c),this._observerDisposable.value=(0,S.toDisposable)(()=>m.disconnect())}}_handleIntersectionChange(l){this._isPaused=l.isIntersecting===void 0?l.intersectionRatio===0:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(l,c,m=!1){this._isPaused?this._needsFullRefresh=!0:(m||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,c,this._rowCount))}_renderRows(l,c){this._renderer.value&&(l=Math.min(l,this._rowCount-1),c=Math.min(c,this._rowCount-1),this._renderer.value.renderRows(l,c),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:l,end:c}),this._onRender.fire({start:l,end:c}),this._isNextRenderRedrawOnly=!0)}resize(l,c){this._rowCount=c,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(l){this._renderer.value=l,this._renderer.value&&(this._renderer.value.onRequestRedraw(c=>this.refreshRows(c.start,c.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(l){return this._renderDebouncer.addRefreshCallback(l)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(l,c){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(l,c)):this._renderer.value.handleResize(l,c),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(l,c,m){this._selectionState.start=l,this._selectionState.end=c,this._selectionState.columnSelectMode=m,this._renderer.value?.handleSelectionChanged(l,c,m)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};i.RenderService=a=f([_(2,n.IOptionsService),_(3,p.ICharSizeService),_(4,n.IDecorationService),_(5,n.IBufferService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],a)},9312:function(C,i,o){var f=this&&this.__decorate||function(y,b,E,M){var R,D=arguments.length,T=D<3?b:M===null?M=Object.getOwnPropertyDescriptor(b,E):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(y,b,E,M);else for(var H=y.length-1;H>=0;H--)(R=y[H])&&(T=(D<3?R(T):D>3?R(b,E,T):R(b,E))||T);return D>3&&T&&Object.defineProperty(b,E,T),T},_=this&&this.__param||function(y,b){return function(E,M){b(E,M,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const h=o(9806),p=o(9504),w=o(456),S=o(4725),u=o(8460),n=o(844),a=o(6114),l=o(4841),c=o(511),m=o(2585),L="",v=new RegExp(L,"g");let x=i.SelectionService=class extends n.Disposable{constructor(y,b,E,M,R,D,T,H,j){super(),this._element=y,this._screenElement=b,this._linkifier=E,this._bufferService=M,this._coreService=R,this._mouseService=D,this._optionsService=T,this._renderService=H,this._coreBrowserService=j,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new u.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new u.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new u.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=N=>this._handleMouseMove(N),this._mouseUpListener=N=>this._handleMouseUp(N),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(N=>this._handleTrim(N)),this.register(this._bufferService.buffers.onBufferActivate(N=>this._handleBufferActivate(N))),this.enable(),this._model=new w.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!y||!b||y[0]===b[0]&&y[1]===b[1])}get selectionText(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!y||!b)return"";const E=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(y[0]===b[0])return"";const R=y[0]<b[0]?y[0]:b[0],D=y[0]<b[0]?b[0]:y[0];for(let T=y[1];T<=b[1];T++){const H=E.translateBufferLineToString(T,!0,R,D);M.push(H)}}else{const R=y[1]===b[1]?b[0]:void 0;M.push(E.translateBufferLineToString(y[1],!0,y[0],R));for(let D=y[1]+1;D<=b[1]-1;D++){const T=E.lines.get(D),H=E.translateBufferLineToString(D,!0);T?.isWrapped?M[M.length-1]+=H:M.push(H)}if(y[1]!==b[1]){const D=E.lines.get(b[1]),T=E.translateBufferLineToString(b[1],!0,0,b[0]);D&&D.isWrapped?M[M.length-1]+=T:M.push(T)}}return M.map(R=>R.replace(v," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const b=this._getMouseBufferCoords(y),E=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(E&&M&&b)&&this._areCoordsInSelection(b,E,M)}isCellInSelection(y,b){const E=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!E||!M)&&this._areCoordsInSelection([y,b],E,M)}_areCoordsInSelection(y,b,E){return y[1]>b[1]&&y[1]<E[1]||b[1]===E[1]&&y[1]===b[1]&&y[0]>=b[0]&&y[0]<E[0]||b[1]<E[1]&&y[1]===E[1]&&y[0]<E[0]||b[1]<E[1]&&y[1]===b[1]&&y[0]>=b[0]}_selectWordAtCursor(y,b){const E=this._linkifier.currentLink?.link?.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const M=this._getMouseBufferCoords(y);return!!M&&(this._selectWordAt(M,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,b){this._model.clearSelection(),y=Math.max(y,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const b=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(y){let b=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const E=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=E?0:(b>E&&(b-=E),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(y){return a.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const b=this._getMouseBufferCoords(y);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(y){return y.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){const M=E.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const b=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const E=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){const M=(0,p.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,E=!(!y||!b||y[0]===b[0]&&y[1]===b[1]);E?y&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,b,E)):this._oldHasSelection&&this._fireOnSelectionChange(y,b,E)}_fireOnSelectionChange(y,b,E){this._oldSelectionStart=y,this._oldSelectionEnd=b,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(y,b){let E=b;for(let M=0;b>=M;M++){const R=y.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:R>1&&b!==M&&(E+=R-1)}return E}setSelection(y,b,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,b],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,b,E=!0,M=!0){if(y[0]>=this._bufferService.cols)return;const R=this._bufferService.buffer,D=R.lines.get(y[1]);if(!D)return;const T=R.translateBufferLineToString(y[1],!1);let H=this._convertViewportColToCharacterIndex(D,y[0]),j=H;const N=y[0]-H;let B=0,k=0,A=0,P=0;if(T.charAt(H)===" "){for(;H>0&&T.charAt(H-1)===" ";)H--;for(;j<T.length&&T.charAt(j+1)===" ";)j++}else{let z=y[0],q=y[0];D.getWidth(z)===0&&(B++,z--),D.getWidth(q)===2&&(k++,q++);const Y=D.getString(q).length;for(Y>1&&(P+=Y-1,j+=Y-1);z>0&&H>0&&!this._isCharWordSeparator(D.loadCell(z-1,this._workCell));){D.loadCell(z-1,this._workCell);const $=this._workCell.getChars().length;this._workCell.getWidth()===0?(B++,z--):$>1&&(A+=$-1,H-=$-1),H--,z--}for(;q<D.length&&j+1<T.length&&!this._isCharWordSeparator(D.loadCell(q+1,this._workCell));){D.loadCell(q+1,this._workCell);const $=this._workCell.getChars().length;this._workCell.getWidth()===2?(k++,q++):$>1&&(P+=$-1,j+=$-1),j++,q++}}j++;let F=H+N-B+A,W=Math.min(this._bufferService.cols,j-H+B+k-A-P);if(b||T.slice(H,j).trim()!==""){if(E&&F===0&&D.getCodePoint(0)!==32){const z=R.lines.get(y[1]-1);if(z&&D.isWrapped&&z.getCodePoint(this._bufferService.cols-1)!==32){const q=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(q){const Y=this._bufferService.cols-q.start;F-=Y,W+=Y}}}if(M&&F+W===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const z=R.lines.get(y[1]+1);if(z?.isWrapped&&z.getCodePoint(0)!==32){const q=this._getWordAt([0,y[1]+1],!1,!1,!0);q&&(W+=q.length)}}return{start:F,length:W}}}_selectWordAt(y,b){const E=this._getWordAt(y,b);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[E.start,y[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(y){const b=this._getWordAt(y,!0);if(b){let E=y[1];for(;b.start<0;)b.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,E]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const b=this._bufferService.buffer.getWrappedRangeForLine(y),E={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(E,this._bufferService.cols)}};i.SelectionService=x=f([_(3,m.IBufferService),_(4,m.ICoreService),_(5,S.IMouseService),_(6,m.IOptionsService),_(7,S.IRenderService),_(8,S.ICoreBrowserService)],x)},4725:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=o(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(C,i,o){var f=this&&this.__decorate||function(x,y,b,E){var M,R=arguments.length,D=R<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(x,y,b,E);else for(var T=x.length-1;T>=0;T--)(M=x[T])&&(D=(R<3?M(D):R>3?M(y,b,D):M(y,b))||D);return R>3&&D&&Object.defineProperty(y,b,D),D},_=this&&this.__param||function(x,y){return function(b,E){y(b,E,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const h=o(7239),p=o(8055),w=o(8460),S=o(844),u=o(2585),n=p.css.toColor("#ffffff"),a=p.css.toColor("#000000"),l=p.css.toColor("#ffffff"),c=p.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let b=0;b<216;b++){const E=y[b/36%6|0],M=y[b/6%6|0],R=y[b%6];x.push({css:p.channels.toCss(E,M,R),rgba:p.channels.toRgba(E,M,R)})}for(let b=0;b<24;b++){const E=8+10*b;x.push({css:p.channels.toCss(E,E,E),rgba:p.channels.toRgba(E,E,E)})}return x})());let L=i.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new w.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:a,cursor:l,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:p.color.blend(a,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:p.color.blend(a,m),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(x={}){const y=this._colors;if(y.foreground=v(x.foreground,n),y.background=v(x.background,a),y.cursor=v(x.cursor,l),y.cursorAccent=v(x.cursorAccent,c),y.selectionBackgroundTransparent=v(x.selectionBackground,m),y.selectionBackgroundOpaque=p.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=v(x.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=p.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=x.selectionForeground?v(x.selectionForeground,p.NULL_COLOR):void 0,y.selectionForeground===p.NULL_COLOR&&(y.selectionForeground=void 0),p.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=p.color.opacity(y.selectionBackgroundTransparent,.3)),p.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=p.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=i.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=v(x.black,i.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=v(x.red,i.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=v(x.green,i.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=v(x.yellow,i.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=v(x.blue,i.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=v(x.magenta,i.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=v(x.cyan,i.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=v(x.white,i.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=v(x.brightBlack,i.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=v(x.brightRed,i.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=v(x.brightGreen,i.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=v(x.brightYellow,i.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=v(x.brightBlue,i.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=v(x.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=v(x.brightCyan,i.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=v(x.brightWhite,i.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const b=Math.min(y.ansi.length-16,x.extendedAnsi.length);for(let E=0;E<b;E++)y.ansi[E+16]=v(x.extendedAnsi[E],i.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function v(x,y){if(x!==void 0)try{return p.css.toColor(x)}catch{}return y}i.ThemeService=L=f([_(0,u.IOptionsService)],L)},6349:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=o(8460),_=o(844);class h extends _.Disposable{constructor(w){super(),this._maxLength=w,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(w){if(this._maxLength===w)return;const S=new Array(w);for(let u=0;u<Math.min(w,this.length);u++)S[u]=this._array[this._getCyclicIndex(u)];this._array=S,this._maxLength=w,this._startIndex=0}get length(){return this._length}set length(w){if(w>this._length)for(let S=this._length;S<w;S++)this._array[S]=void 0;this._length=w}get(w){return this._array[this._getCyclicIndex(w)]}set(w,S){this._array[this._getCyclicIndex(w)]=S}push(w){this._array[this._getCyclicIndex(this._length)]=w,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(w,S,...u){if(S){for(let n=w;n<this._length-S;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+S)];this._length-=S,this.onDeleteEmitter.fire({index:w,amount:S})}for(let n=this._length-1;n>=w;n--)this._array[this._getCyclicIndex(n+u.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<u.length;n++)this._array[this._getCyclicIndex(w+n)]=u[n];if(u.length&&this.onInsertEmitter.fire({index:w,amount:u.length}),this._length+u.length>this._maxLength){const n=this._length+u.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=u.length}trimStart(w){w>this._length&&(w=this._length),this._startIndex+=w,this._length-=w,this.onTrimEmitter.fire(w)}shiftElements(w,S,u){if(!(S<=0)){if(w<0||w>=this._length)throw new Error("start argument out of range");if(w+u<0)throw new Error("Cannot shift elements in list beyond index 0");if(u>0){for(let a=S-1;a>=0;a--)this.set(w+a+u,this.get(w+a));const n=w+S+u-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<S;n++)this.set(w+n+u,this.get(w+n))}}_getCyclicIndex(w){return(this._startIndex+w)%this._maxLength}}i.CircularList=h},1439:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(f,_=5){if(typeof f!="object")return f;const h=Array.isArray(f)?[]:{};for(const p in f)h[p]=_<=1?f[p]:f[p]&&o(f[p],_-1);return h}},8055:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,h=0;var p,w,S,u,n;function a(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,L,v,x){return x!==void 0?`#${a(m)}${a(L)}${a(v)}${a(x)}`:`#${a(m)}${a(L)}${a(v)}`},c.toRgba=function(m,L,v,x=255){return(m<<24|L<<16|v<<8|x)>>>0},c.toColor=function(m,L,v,x){return{css:c.toCss(m,L,v,x),rgba:c.toRgba(m,L,v,x)}}}(p||(i.channels=p={})),function(c){function m(L,v){return h=Math.round(255*v),[o,f,_]=n.toChannels(L.rgba),{css:p.toCss(o,f,_,h),rgba:p.toRgba(o,f,_,h)}}c.blend=function(L,v){if(h=(255&v.rgba)/255,h===1)return{css:v.css,rgba:v.rgba};const x=v.rgba>>24&255,y=v.rgba>>16&255,b=v.rgba>>8&255,E=L.rgba>>24&255,M=L.rgba>>16&255,R=L.rgba>>8&255;return o=E+Math.round((x-E)*h),f=M+Math.round((y-M)*h),_=R+Math.round((b-R)*h),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},c.isOpaque=function(L){return(255&L.rgba)==255},c.ensureContrastRatio=function(L,v,x){const y=n.ensureContrastRatio(L.rgba,v.rgba,x);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},c.opaque=function(L){const v=(255|L.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},c.opacity=m,c.multiplyOpacity=function(L,v){return h=255&L.rgba,m(L,h*v/255)},c.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(i.color=w={})),function(c){let m,L;try{const v=document.createElement("canvas");v.width=1,v.height=1;const x=v.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",L=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),h=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,h);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const x=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return o=parseInt(x[1]),f=parseInt(x[2]),_=parseInt(x[3]),h=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),p.toColor(o,f,_,h);if(!m||!L)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=L,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,h]=m.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,h),css:v}}}(S||(i.css=S={})),function(c){function m(L,v,x){const y=L/255,b=v/255,E=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}c.relativeLuminance=function(L){return m(L>>16&255,L>>8&255,255&L)},c.relativeLuminance2=m}(u||(i.rgb=u={})),function(c){function m(v,x,y){const b=v>>24&255,E=v>>16&255,M=v>>8&255;let R=x>>24&255,D=x>>16&255,T=x>>8&255,H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));for(;H<y&&(R>0||D>0||T>0);)R-=Math.max(0,Math.ceil(.1*R)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));return(R<<24|D<<16|T<<8|255)>>>0}function L(v,x,y){const b=v>>24&255,E=v>>16&255,M=v>>8&255;let R=x>>24&255,D=x>>16&255,T=x>>8&255,H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));for(;H<y&&(R<255||D<255||T<255);)R=Math.min(255,R+Math.ceil(.1*(255-R))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));return(R<<24|D<<16|T<<8|255)>>>0}c.blend=function(v,x){if(h=(255&x)/255,h===1)return x;const y=x>>24&255,b=x>>16&255,E=x>>8&255,M=v>>24&255,R=v>>16&255,D=v>>8&255;return o=M+Math.round((y-M)*h),f=R+Math.round((b-R)*h),_=D+Math.round((E-D)*h),p.toRgba(o,f,_)},c.ensureContrastRatio=function(v,x,y){const b=u.relativeLuminance(v>>8),E=u.relativeLuminance(x>>8);if(l(b,E)<y){if(E<b){const D=m(v,x,y),T=l(b,u.relativeLuminance(D>>8));if(T<y){const H=L(v,x,y);return T>l(b,u.relativeLuminance(H>>8))?D:H}return D}const M=L(v,x,y),R=l(b,u.relativeLuminance(M>>8));if(R<y){const D=m(v,x,y);return R>l(b,u.relativeLuminance(D>>8))?M:D}return M}},c.reduceLuminance=m,c.increaseLuminance=L,c.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},8969:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=o(844),_=o(2585),h=o(4348),p=o(7866),w=o(744),S=o(7302),u=o(6975),n=o(8460),a=o(1753),l=o(1480),c=o(7994),m=o(9282),L=o(5435),v=o(5981),x=o(2660);let y=!1;class b extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(M=>{this._onScrollApi?.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(const R in M)this.optionsService.options[R]=M[R]}constructor(M){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new S.OptionsService(M)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(w.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(u.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new L.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new v.WriteBuffer((R,D)=>this._inputHandler.parse(R,D))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(M,R){this._writeBuffer.write(M,R)}writeSync(M,R){this._logService.logLevel<=_.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(M,R)}input(M,R=!0){this.coreService.triggerDataEvent(M,R)}resize(M,R){isNaN(M)||isNaN(R)||(M=Math.max(M,w.MINIMUM_COLS),R=Math.max(R,w.MINIMUM_ROWS),this._bufferService.resize(M,R))}scroll(M,R=!1){this._bufferService.scroll(M,R)}scrollLines(M,R,D){this._bufferService.scrollLines(M,R,D)}scrollPages(M){this.scrollLines(M*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(M){const R=M-this._bufferService.buffer.ydisp;R!==0&&this.scrollLines(R)}registerEscHandler(M,R){return this._inputHandler.registerEscHandler(M,R)}registerDcsHandler(M,R){return this._inputHandler.registerDcsHandler(M,R)}registerCsiHandler(M,R){return this._inputHandler.registerCsiHandler(M,R)}registerOscHandler(M,R){return this._inputHandler.registerOscHandler(M,R)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let M=!1;const R=this.optionsService.rawOptions.windowsPty;R&&R.buildNumber!==void 0&&R.buildNumber!==void 0?M=R.backend==="conpty"&&R.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(M=!0),M?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const M=[];M.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const R of M)R.dispose()})}}}i.CoreTerminal=b},8460:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},5435:function(C,i,o){var f=this&&this.__decorate||function(B,k,A,P){var F,W=arguments.length,z=W<3?k:P===null?P=Object.getOwnPropertyDescriptor(k,A):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(B,k,A,P);else for(var q=B.length-1;q>=0;q--)(F=B[q])&&(z=(W<3?F(z):W>3?F(k,A,z):F(k,A))||z);return W>3&&z&&Object.defineProperty(k,A,z),z},_=this&&this.__param||function(B,k){return function(A,P){k(A,P,B)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const h=o(2584),p=o(7116),w=o(2015),S=o(844),u=o(482),n=o(8437),a=o(8460),l=o(643),c=o(511),m=o(3734),L=o(2585),v=o(1480),x=o(6242),y=o(6351),b=o(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function R(B,k){if(B>24)return k.setWinLines||!1;switch(B){case 1:return!!k.restoreWin;case 2:return!!k.minimizeWin;case 3:return!!k.setWinPosition;case 4:return!!k.setWinSizePixels;case 5:return!!k.raiseWin;case 6:return!!k.lowerWin;case 7:return!!k.refreshWin;case 8:return!!k.setWinSizeChars;case 9:return!!k.maximizeWin;case 10:return!!k.fullscreenWin;case 11:return!!k.getWinState;case 13:return!!k.getWinPosition;case 14:return!!k.getWinSizePixels;case 15:return!!k.getScreenSizePixels;case 16:return!!k.getCellSizePixels;case 18:return!!k.getWinSizeChars;case 19:return!!k.getScreenSizeChars;case 20:return!!k.getIconTitle;case 21:return!!k.getWinTitle;case 22:return!!k.pushTitle;case 23:return!!k.popTitle;case 24:return!!k.setWinLines}return!1}var D;(function(B){B[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(i.WindowsOptionsReportType=D={}));let T=0;class H extends S.Disposable{getAttrData(){return this._curAttrData}constructor(k,A,P,F,W,z,q,Y,$=new w.EscapeSequenceParser){super(),this._bufferService=k,this._charsetService=A,this._coreService=P,this._logService=F,this._optionsService=W,this._oscLinkService=z,this._coreMouseService=q,this._unicodeService=Y,this._parser=$,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new u.StringToUtf32,this._utf8Decoder=new u.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new j(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,U)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:U.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,U,G)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:U,data:G})}),this._parser.setDcsHandlerFallback((O,U,G)=>{U==="HOOK"&&(G=G.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:U,payload:G})}),this._parser.setPrintHandler((O,U,G)=>this.print(O,U,G)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new x.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new x.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new x.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new x.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new x.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new x.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new x.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new x.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new x.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new x.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new x.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const O in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new y.DcsHandler((O,U)=>this.requestStatusString(O,U)))}_preserveStack(k,A,P,F){this._parseStack.paused=!0,this._parseStack.cursorStartX=k,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=P,this._parseStack.position=F}_logSlowResolvingAsync(k){this._logService.logLevel<=L.LogLevelEnum.WARN&&Promise.race([k,new Promise((A,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(k,A){let P,F=this._activeBuffer.x,W=this._activeBuffer.y,z=0;const q=this._parseStack.paused;if(q){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(P),P;F=this._parseStack.cursorStartX,W=this._parseStack.cursorStartY,this._parseStack.paused=!1,k.length>M&&(z=this._parseStack.position+M)}if(this._logService.logLevel<=L.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof k=="string"?` "${k}"`:` "${Array.prototype.map.call(k,O=>String.fromCharCode(O)).join("")}"`),typeof k=="string"?k.split("").map(O=>O.charCodeAt(0)):k),this._parseBuffer.length<k.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(k.length,M))),q||this._dirtyRowTracker.clearRange(),k.length>M)for(let O=z;O<k.length;O+=M){const U=O+M<k.length?O+M:k.length,G=typeof k=="string"?this._stringDecoder.decode(k.substring(O,U),this._parseBuffer):this._utf8Decoder.decode(k.subarray(O,U),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,G))return this._preserveStack(F,W,G,O),this._logSlowResolvingAsync(P),P}else if(!q){const O=typeof k=="string"?this._stringDecoder.decode(k,this._parseBuffer):this._utf8Decoder.decode(k,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,O))return this._preserveStack(F,W,O,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===F&&this._activeBuffer.y===W||this._onCursorMove.fire();const Y=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),$=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);$<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min($,this._bufferService.rows-1),Math.min(Y,this._bufferService.rows-1))}print(k,A,P){let F,W;const z=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,$=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,U=this._curAttrData;let G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-A>0&&G.getWidth(this._activeBuffer.x-1)===2&&G.setCellFromCodepoint(this._activeBuffer.x-1,0,1,U);let ee=this._parser.precedingJoinState;for(let Z=A;Z<P;++Z){if(F=k[Z],F<127&&z){const Se=z[String.fromCharCode(F)];Se&&(F=Se.charCodeAt(0))}const ce=this._unicodeService.charProperties(F,ee);W=v.UnicodeService.extractWidth(ce);const Q=v.UnicodeService.extractShouldJoin(ce),_e=Q?v.UnicodeService.extractWidth(ee):0;if(ee=ce,q&&this._onA11yChar.fire((0,u.stringFromCodePoint)(F)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+W-_e>Y){if($){const Se=G;let oe=this._activeBuffer.x-_e;for(this._activeBuffer.x=_e,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),_e>0&&G instanceof n.BufferLine&&G.copyCellsFrom(Se,oe,0,_e,!1);oe<Y;)Se.setCellFromCodepoint(oe++,0,1,U)}else if(this._activeBuffer.x=Y-1,W===2)continue}if(Q&&this._activeBuffer.x){const Se=G.getWidth(this._activeBuffer.x-1)?1:2;G.addCodepointToCell(this._activeBuffer.x-Se,F,W);for(let oe=W-_e;--oe>=0;)G.setCellFromCodepoint(this._activeBuffer.x++,0,0,U)}else if(O&&(G.insertCells(this._activeBuffer.x,W-_e,this._activeBuffer.getNullCell(U)),G.getWidth(Y-1)===2&&G.setCellFromCodepoint(Y-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,U)),G.setCellFromCodepoint(this._activeBuffer.x++,F,W,U),W>0)for(;--W;)G.setCellFromCodepoint(this._activeBuffer.x++,0,0,U)}this._parser.precedingJoinState=ee,this._activeBuffer.x<Y&&P-A>0&&G.getWidth(this._activeBuffer.x)===0&&!G.hasContent(this._activeBuffer.x)&&G.setCellFromCodepoint(this._activeBuffer.x,0,1,U),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(k,A){return k.final!=="t"||k.prefix||k.intermediates?this._parser.registerCsiHandler(k,A):this._parser.registerCsiHandler(k,P=>!R(P.params[0],this._optionsService.rawOptions.windowOptions)||A(P))}registerDcsHandler(k,A){return this._parser.registerDcsHandler(k,new y.DcsHandler(A))}registerEscHandler(k,A){return this._parser.registerEscHandler(k,A)}registerOscHandler(k,A){return this._parser.registerOscHandler(k,new x.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);k.hasWidth(this._activeBuffer.x)&&!k.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const k=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-k),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(k=this._bufferService.cols-1){this._activeBuffer.x=Math.min(k,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(k,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=k,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=k,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(k,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+k,this._activeBuffer.y+A)}cursorUp(k){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,k.params[0]||1)):this._moveCursor(0,-(k.params[0]||1)),!0}cursorDown(k){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,k.params[0]||1)):this._moveCursor(0,k.params[0]||1),!0}cursorForward(k){return this._moveCursor(k.params[0]||1,0),!0}cursorBackward(k){return this._moveCursor(-(k.params[0]||1),0),!0}cursorNextLine(k){return this.cursorDown(k),this._activeBuffer.x=0,!0}cursorPrecedingLine(k){return this.cursorUp(k),this._activeBuffer.x=0,!0}cursorCharAbsolute(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(k){return this._setCursor(k.length>=2?(k.params[1]||1)-1:0,(k.params[0]||1)-1),!0}charPosAbsolute(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(k){return this._moveCursor(k.params[0]||1,0),!0}linePosAbsolute(k){return this._setCursor(this._activeBuffer.x,(k.params[0]||1)-1),!0}vPositionRelative(k){return this._moveCursor(0,k.params[0]||1),!0}hVPosition(k){return this.cursorPosition(k),!0}tabClear(k){const A=k.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=k.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=k.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(k){const A=k.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(k,A,P,F=!1,W=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);z.replaceCells(A,P,this._activeBuffer.getNullCell(this._eraseAttrData()),W),F&&(z.isWrapped=!1)}_resetBufferLine(k,A=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+k),P.isWrapped=!1)}eraseInDisplay(k,A=!1){let P;switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);P<this._bufferService.rows;P++)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(0);break;case 3:const F=this._activeBuffer.lines.length-this._bufferService.rows;F>0&&(this._activeBuffer.lines.trimStart(F),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-F,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-F,0),this._onScroll.fire(0))}return!0}eraseInLine(k,A=!1){switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(k){this._restrictCursor();let A=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-F+1;for(;A--;)this._activeBuffer.lines.splice(W-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(k){this._restrictCursor();let A=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let F;for(F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-F;A--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(k){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(k){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(k){let A=k.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(k){let A=k.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);F.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);F.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);F.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);F.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(k){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(k.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(k){const A=this._parser.precedingJoinState;if(!A)return!0;const P=k.params[0]||1,F=v.UnicodeService.extractWidth(A),W=this._activeBuffer.x-F,z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(W),q=new Uint32Array(z.length*P);let Y=0;for(let O=0;O<z.length;){const U=z.codePointAt(O)||0;q[Y++]=U,O+=U>65535?2:1}let $=Y;for(let O=1;O<P;++O)q.copyWithin($,0,Y),$+=Y;return this.print(q,0,$),!0}sendDeviceAttributesPrimary(k){return k.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(k){return k.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(k.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(k){return(this._optionsService.rawOptions.termName+"").indexOf(k)===0}setMode(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),k.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(k,A){const P=this._coreService.decPrivateModes,{activeProtocol:F,activeEncoding:W}=this._coreMouseService,z=this._coreService,{buffers:q,cols:Y}=this._bufferService,{active:$,alt:O}=q,U=this._optionsService.rawOptions,G=Q=>Q?1:2,ee=k.params[0];return Z=ee,ce=A?ee===2?4:ee===4?G(z.modes.insertMode):ee===12?3:ee===20?G(U.convertEol):0:ee===1?G(P.applicationCursorKeys):ee===3?U.windowOptions.setWinLines?Y===80?2:Y===132?1:0:0:ee===6?G(P.origin):ee===7?G(P.wraparound):ee===8?3:ee===9?G(F==="X10"):ee===12?G(U.cursorBlink):ee===25?G(!z.isCursorHidden):ee===45?G(P.reverseWraparound):ee===66?G(P.applicationKeypad):ee===67?4:ee===1e3?G(F==="VT200"):ee===1002?G(F==="DRAG"):ee===1003?G(F==="ANY"):ee===1004?G(P.sendFocus):ee===1005?4:ee===1006?G(W==="SGR"):ee===1015?4:ee===1016?G(W==="SGR_PIXELS"):ee===1048?1:ee===47||ee===1047||ee===1049?G($===O):ee===2004?G(P.bracketedPasteMode):0,z.triggerDataEvent(`${h.C0.ESC}[${A?"":"?"}${Z};${ce}$y`),!0;var Z,ce}_updateAttrColor(k,A,P,F,W){return A===2?(k|=50331648,k&=-16777216,k|=m.AttributeData.fromColorRGB([P,F,W])):A===5&&(k&=-50331904,k|=33554432|255&P),k}_extractColor(k,A,P){const F=[0,0,-1,0,0,0];let W=0,z=0;do{if(F[z+W]=k.params[A+z],k.hasSubParams(A+z)){const q=k.getSubParams(A+z);let Y=0;do F[1]===5&&(W=1),F[z+Y+1+W]=q[Y];while(++Y<q.length&&Y+z+1+W<F.length);break}if(F[1]===5&&z+W>=2||F[1]===2&&z+W>=5)break;F[1]&&(W=1)}while(++z+A<k.length&&z+W<F.length);for(let q=2;q<F.length;++q)F[q]===-1&&(F[q]=0);switch(F[0]){case 38:P.fg=this._updateAttrColor(P.fg,F[1],F[3],F[4],F[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,F[1],F[3],F[4],F[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,F[1],F[3],F[4],F[5])}return z}_processUnderline(k,A){A.extended=A.extended.clone(),(!~k||k>5)&&(k=1),A.extended.underlineStyle=k,A.fg|=268435456,k===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(k){k.fg=n.DEFAULT_ATTR_DATA.fg,k.bg=n.DEFAULT_ATTR_DATA.bg,k.extended=k.extended.clone(),k.extended.underlineStyle=0,k.extended.underlineColor&=-67108864,k.updateExtended()}charAttributes(k){if(k.length===1&&k.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=k.length;let P;const F=this._curAttrData;for(let W=0;W<A;W++)P=k.params[W],P>=30&&P<=37?(F.fg&=-50331904,F.fg|=16777216|P-30):P>=40&&P<=47?(F.bg&=-50331904,F.bg|=16777216|P-40):P>=90&&P<=97?(F.fg&=-50331904,F.fg|=16777224|P-90):P>=100&&P<=107?(F.bg&=-50331904,F.bg|=16777224|P-100):P===0?this._processSGR0(F):P===1?F.fg|=134217728:P===3?F.bg|=67108864:P===4?(F.fg|=268435456,this._processUnderline(k.hasSubParams(W)?k.getSubParams(W)[0]:1,F)):P===5?F.fg|=536870912:P===7?F.fg|=67108864:P===8?F.fg|=1073741824:P===9?F.fg|=2147483648:P===2?F.bg|=134217728:P===21?this._processUnderline(2,F):P===22?(F.fg&=-134217729,F.bg&=-134217729):P===23?F.bg&=-67108865:P===24?(F.fg&=-268435457,this._processUnderline(0,F)):P===25?F.fg&=-536870913:P===27?F.fg&=-67108865:P===28?F.fg&=-1073741825:P===29?F.fg&=2147483647:P===39?(F.fg&=-67108864,F.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):P===49?(F.bg&=-67108864,F.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?W+=this._extractColor(k,W,F):P===53?F.bg|=1073741824:P===55?F.bg&=-1073741825:P===59?(F.extended=F.extended.clone(),F.extended.underlineColor=-1,F.updateExtended()):P===100?(F.fg&=-67108864,F.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,F.bg&=-67108864,F.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(k){switch(k.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${A};${P}R`)}return!0}deviceStatusPrivate(k){if(k.params[0]===6){const A=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${A};${P}R`)}return!0}softReset(k){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(k){const A=k.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=A%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(k){const A=k.params[0]||1;let P;return(k.length<2||(P=k.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(k){if(!R(k.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=k.length>1?k.params[1]:0;switch(k.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(k){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(k){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(k){return this._windowTitle=k,this._onTitleChange.fire(k),!0}setIconName(k){return this._iconName=k,!0}setOrReportIndexedColor(k){const A=[],P=k.split(";");for(;P.length>1;){const F=P.shift(),W=P.shift();if(/^\d+$/.exec(F)){const z=parseInt(F);if(N(z))if(W==="?")A.push({type:0,index:z});else{const q=(0,b.parseColor)(W);q&&A.push({type:1,index:z,color:q})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(k){const A=k.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(k,A){this._getCurrentLinkId()&&this._finishHyperlink();const P=k.split(":");let F;const W=P.findIndex(z=>z.startsWith("id="));return W!==-1&&(F=P[W].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:F,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(k,A){const P=k.split(";");for(let F=0;F<P.length&&!(A>=this._specialColors.length);++F,++A)if(P[F]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const W=(0,b.parseColor)(P[F]);W&&this._onColor.fire([{type:1,index:this._specialColors[A],color:W}])}return!0}setOrReportFgColor(k){return this._setOrReportSpecialColor(k,0)}setOrReportBgColor(k){return this._setOrReportSpecialColor(k,1)}setOrReportCursorColor(k){return this._setOrReportSpecialColor(k,2)}restoreIndexedColor(k){if(!k)return this._onColor.fire([{type:2}]),!0;const A=[],P=k.split(";");for(let F=0;F<P.length;++F)if(/^\d+$/.exec(P[F])){const W=parseInt(P[F]);N(W)&&A.push({type:2,index:W})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(k){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(k){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(k){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(k){return k.length!==2?(this.selectDefaultCharset(),!0):(k[0]==="/"||this._charsetService.setgCharset(E[k[0]],p.CHARSETS[k[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const k=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,k,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(k){return this._charsetService.setgLevel(k),!0}screenAlignmentPattern(){const k=new c.CellData;k.content=4194373,k.fg=this._curAttrData.fg,k.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const P=this._activeBuffer.ybase+this._activeBuffer.y+A,F=this._activeBuffer.lines.get(P);F&&(F.fill(k),F.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(k,A){const P=this._bufferService.buffer,F=this._optionsService.rawOptions;return(W=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${W}${h.C0.ESC}\\`),!0))(k==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:k==='"p'?'P1$r61;1"p':k==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:k==="m"?"P1$r0m":k===" q"?`P1$r${{block:2,underline:4,bar:6}[F.cursorStyle]-(F.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(k,A){this._dirtyRowTracker.markRangeDirty(k,A)}}i.InputHandler=H;let j=class{constructor(B){this._bufferService=B,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(B){B<this.start?this.start=B:B>this.end&&(this.end=B)}markRangeDirty(B,k){B>k&&(T=B,B=k,k=T),B<this.start&&(this.start=B),k>this.end&&(this.end=k)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function N(B){return 0<=B&&B<256}j=f([_(0,L.IBufferService)],j)},844:(C,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},1505:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,h,p){this._data[_]||(this._data[_]={}),this._data[_][h]=p}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,h,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(h,p,w)}get(f,_,h,p){return this._data.get(f,_)?.get(h,p)}clear(){this._data.clear()}}},6114:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(o=this._search(this._getKey(f)),this._array.splice(o,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const _=this._getKey(f);if(_===void 0||(o=this._search(_),o===-1)||this._getKey(this._array[o])!==_)return!1;do if(this._array[o]===f)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===_);return!1}*getKeyIterator(f){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===f)}forEachByKey(f,_){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do _(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===f)}values(){return[...this._array].values()}_search(f){let _=0,h=this._array.length-1;for(;h>=_;){let p=_+h>>1;const w=this._getKey(this._array[p]);if(w>f)h=p-1;else{if(!(w<f)){for(;p>0&&this._getKey(this._array[p-1])===f;)p--;return p}_=p+1}}return _}}},7226:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,u=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),u=Math.max(S,u),a=w.timeRemaining(),1.5*u>a)return n-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-S))}ms`),void this._start();n=a}this.clear()}}class h extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=o(643);i.updateWindowsModeWrappedState=function(_){const h=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),p=h?.get(_.cols-1),w=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);w&&p&&(w.isWrapped=p[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&p[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new o;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=o(6349),_=o(7226),h=o(3734),p=o(8437),w=o(4634),S=o(511),u=o(643),n=o(4863),a=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(l,c,m){this._hasScrollback=l,this._optionsService=c,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,c){return new p.BufferLine(this._bufferService.cols,this.getNullCell(l),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const c=l+this._optionsService.rawOptions.scrollback;return c>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:c}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=p.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,c){const m=this.getNullCell(p.DEFAULT_ATTR_DATA);let L=0;const v=this._getCorrectBufferLength(c);if(v>this.lines.maxLength&&(this.lines.maxLength=v),this.lines.length>0){if(this._cols<l)for(let y=0;y<this.lines.length;y++)L+=+this.lines.get(y).resize(l,m);let x=0;if(this._rows<c)for(let y=this._rows;y<c;y++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(l,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(l,m)));else for(let y=this._rows;y>c;y--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(v<this.lines.maxLength){const y=this.lines.length-v;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=v}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,c-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(l,c),this._cols>l))for(let x=0;x<this.lines.length;x++)L+=+this.lines.get(x).resize(l,m);this._cols=l,this._rows=c,this._memoryCleanupQueue.clear(),L>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,c){this._cols!==l&&(l>this._cols?this._reflowLarger(l,c):this._reflowSmaller(l,c))}_reflowLarger(l,c){const m=(0,w.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(m.length>0){const L=(0,w.reflowLargerCreateNewLayout)(this.lines,m);(0,w.reflowLargerApplyNewLayout)(this.lines,L.layout),this._reflowLargerAdjustViewport(l,c,L.countRemoved)}}_reflowLargerAdjustViewport(l,c,m){const L=this.getNullCell(p.DEFAULT_ATTR_DATA);let v=m;for(;v-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new p.BufferLine(l,L))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(l,c){const m=this.getNullCell(p.DEFAULT_ATTR_DATA),L=[];let v=0;for(let x=this.lines.length-1;x>=0;x--){let y=this.lines.get(x);if(!y||!y.isWrapped&&y.getTrimmedLength()<=l)continue;const b=[y];for(;y.isWrapped&&x>0;)y=this.lines.get(--x),b.unshift(y);const E=this.ybase+this.y;if(E>=x&&E<x+b.length)continue;const M=b[b.length-1].getTrimmedLength(),R=(0,w.reflowSmallerGetNewLineLengths)(b,this._cols,l),D=R.length-b.length;let T;T=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const H=[];for(let P=0;P<D;P++){const F=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);H.push(F)}H.length>0&&(L.push({start:x+b.length+v,newLines:H}),v+=H.length),b.push(...H);let j=R.length-1,N=R[j];N===0&&(j--,N=R[j]);let B=b.length-D-1,k=M;for(;B>=0;){const P=Math.min(k,N);if(b[j]===void 0)break;if(b[j].copyCellsFrom(b[B],k-P,N-P,P,!0),N-=P,N===0&&(j--,N=R[j]),k-=P,k===0){B--;const F=Math.max(B,0);k=(0,w.getWrappedLineTrimmedLength)(b,F,this._cols)}}for(let P=0;P<b.length;P++)R[P]<l&&b[P].setCell(R[P],m);let A=D-T;for(;A-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+v)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+c-1)}if(L.length>0){const x=[],y=[];for(let j=0;j<this.lines.length;j++)y.push(this.lines.get(j));const b=this.lines.length;let E=b-1,M=0,R=L[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+v);let D=0;for(let j=Math.min(this.lines.maxLength-1,b+v-1);j>=0;j--)if(R&&R.start>E+D){for(let N=R.newLines.length-1;N>=0;N--)this.lines.set(j--,R.newLines[N]);j++,x.push({index:E+1,amount:R.newLines.length}),D+=R.newLines.length,R=L[++M]}else this.lines.set(j,y[E--]);let T=0;for(let j=x.length-1;j>=0;j--)x[j].index+=T,this.lines.onInsertEmitter.fire(x[j]),T+=x[j].amount;const H=Math.max(0,b+v-this.lines.maxLength);H>0&&this.lines.onTrimEmitter.fire(H)}}translateBufferLineToString(l,c,m=0,L){const v=this.lines.get(l);return v?v.translateToString(c,m,L):""}getWrappedRangeForLine(l){let c=l,m=l;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:c,last:m}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===l&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const c=new n.Marker(l);return this.markers.push(c),c.register(this.lines.onTrim(m=>{c.line-=m,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(m=>{c.line>=m.index&&(c.line+=m.amount)})),c.register(this.lines.onDelete(m=>{c.line>=m.index&&c.line<m.index+m.amount&&c.dispose(),c.line>m.index&&(c.line-=m.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=o(3734),_=o(511),h=o(643),p=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let w=0;class S{constructor(n,a,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const c=a||_.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let m=0;m<n;++m)this.setCell(m,c);this.length=n}get(n){const a=this._data[3*n+0],l=2097151&a;return[this._data[3*n+1],2097152&a?this._combined[n]:l?(0,p.stringFromCodePoint)(l):"",a>>22,2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):l]}set(n,a){this._data[3*n+1]=a[h.CHAR_DATA_ATTR_INDEX],a[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=a[1],this._data[3*n+0]=2097152|n|a[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=a[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&a}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n]:2097151&a?(0,p.stringFromCodePoint)(2097151&a):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,a){return w=3*n,a.content=this._data[w+0],a.fg=this._data[w+1],a.bg=this._data[w+2],2097152&a.content&&(a.combinedData=this._combined[n]),268435456&a.bg&&(a.extended=this._extendedAttrs[n]),a}setCell(n,a){2097152&a.content&&(this._combined[n]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[n]=a.extended),this._data[3*n+0]=a.content,this._data[3*n+1]=a.fg,this._data[3*n+2]=a.bg}setCellFromCodepoint(n,a,l,c){268435456&c.bg&&(this._extendedAttrs[n]=c.extended),this._data[3*n+0]=a|l<<22,this._data[3*n+1]=c.fg,this._data[3*n+2]=c.bg}addCodepointToCell(n,a,l){let c=this._data[3*n+0];2097152&c?this._combined[n]+=(0,p.stringFromCodePoint)(a):2097151&c?(this._combined[n]=(0,p.stringFromCodePoint)(2097151&c)+(0,p.stringFromCodePoint)(a),c&=-2097152,c|=2097152):c=a|4194304,l&&(c&=-12582913,c|=l<<22),this._data[3*n+0]=c}insertCells(n,a,l){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length-n){const c=new _.CellData;for(let m=this.length-n-a-1;m>=0;--m)this.setCell(n+a+m,this.loadCell(n+m,c));for(let m=0;m<a;++m)this.setCell(n+m,l)}else for(let c=n;c<this.length;++c)this.setCell(c,l);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,l)}deleteCells(n,a,l){if(n%=this.length,a<this.length-n){const c=new _.CellData;for(let m=0;m<this.length-n-a;++m)this.setCell(n+m,this.loadCell(n+a+m,c));for(let m=this.length-a;m<this.length;++m)this.setCell(m,l)}else for(let c=n;c<this.length;++c)this.setCell(c,l);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,l)}replaceCells(n,a,l,c=!1){if(c)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodepoint(a,0,1,l);n<a&&n<this.length;)this.isProtected(n)||this.setCell(n,l),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a,0,1,l);n<a&&n<this.length;)this.setCell(n++,l)}resize(n,a){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const c=new Uint32Array(l);c.set(this._data),this._data=c}for(let c=this.length;c<n;++c)this.setCell(c,a)}else{this._data=this._data.subarray(0,l);const c=Object.keys(this._combined);for(let L=0;L<c.length;L++){const v=parseInt(c[L],10);v>=n&&delete this._combined[v]}const m=Object.keys(this._extendedAttrs);for(let L=0;L<m.length;L++){const v=parseInt(m[L],10);v>=n&&delete this._extendedAttrs[v]}}return this.length=n,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,a=!1){if(a)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,n);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const a in n._combined)this._combined[a]=n._combined[a];this._extendedAttrs={};for(const a in n._extendedAttrs)this._extendedAttrs[a]=n._extendedAttrs[a];this.isWrapped=n.isWrapped}clone(){const n=new S(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const a in this._combined)n._combined[a]=this._combined[a];for(const a in this._extendedAttrs)n._extendedAttrs[a]=this._extendedAttrs[a];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,a,l,c,m){const L=n._data;if(m)for(let x=c-1;x>=0;x--){for(let y=0;y<3;y++)this._data[3*(l+x)+y]=L[3*(a+x)+y];268435456&L[3*(a+x)+2]&&(this._extendedAttrs[l+x]=n._extendedAttrs[a+x])}else for(let x=0;x<c;x++){for(let y=0;y<3;y++)this._data[3*(l+x)+y]=L[3*(a+x)+y];268435456&L[3*(a+x)+2]&&(this._extendedAttrs[l+x]=n._extendedAttrs[a+x])}const v=Object.keys(n._combined);for(let x=0;x<v.length;x++){const y=parseInt(v[x],10);y>=a&&(this._combined[y-a+l]=n._combined[y])}}translateToString(n,a,l,c){a=a??0,l=l??this.length,n&&(l=Math.min(l,this.getTrimmedLength())),c&&(c.length=0);let m="";for(;a<l;){const L=this._data[3*a+0],v=2097151&L,x=2097152&L?this._combined[a]:v?(0,p.stringFromCodePoint)(v):h.WHITESPACE_CELL_CHAR;if(m+=x,c)for(let y=0;y<x.length;++y)c.push(a);a+=L>>22||1}return c&&c.push(a),m}}i.BufferLine=S},4841:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,f){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return f*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(C,i)=>{function o(f,_,h){if(_===f.length-1)return f[_].getTrimmedLength();const p=!f[_].hasContent(h-1)&&f[_].getWidth(h-1)===1,w=f[_+1].getWidth(0)===2;return p&&w?h-1:h}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,_,h,p,w){const S=[];for(let u=0;u<f.length-1;u++){let n=u,a=f.get(++n);if(!a.isWrapped)continue;const l=[f.get(u)];for(;n<f.length&&a.isWrapped;)l.push(a),a=f.get(++n);if(p>=u&&p<n){u+=l.length-1;continue}let c=0,m=o(l,c,_),L=1,v=0;for(;L<l.length;){const y=o(l,L,_),b=y-v,E=h-m,M=Math.min(b,E);l[c].copyCellsFrom(l[L],v,m,M,!1),m+=M,m===h&&(c++,m=0),v+=M,v===y&&(L++,v=0),m===0&&c!==0&&l[c-1].getWidth(h-1)===2&&(l[c].copyCellsFrom(l[c-1],h-1,m++,1,!1),l[c-1].setCell(h-1,w))}l[c].replaceCells(m,h,w);let x=0;for(let y=l.length-1;y>0&&(y>c||l[y].getTrimmedLength()===0);y--)x++;x>0&&(S.push(u+l.length-x),S.push(x)),u+=l.length-1}return S},i.reflowLargerCreateNewLayout=function(f,_){const h=[];let p=0,w=_[p],S=0;for(let u=0;u<f.length;u++)if(w===u){const n=_[++p];f.onDeleteEmitter.fire({index:u-S,amount:n}),u+=n-1,S+=n,w=_[++p]}else h.push(u);return{layout:h,countRemoved:S}},i.reflowLargerApplyNewLayout=function(f,_){const h=[];for(let p=0;p<_.length;p++)h.push(f.get(_[p]));for(let p=0;p<h.length;p++)f.set(p,h[p]);f.length=_.length},i.reflowSmallerGetNewLineLengths=function(f,_,h){const p=[],w=f.map((a,l)=>o(f,l,_)).reduce((a,l)=>a+l);let S=0,u=0,n=0;for(;n<w;){if(w-n<h){p.push(w-n);break}S+=h;const a=o(f,u,_);S>a&&(S-=a,u++);const l=f[u].getWidth(S-1)===2;l&&S--;const c=l?h-1:h;p.push(c),n+=c}return p},i.getWrappedLineTrimmedLength=o},5295:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=o(8460),_=o(844),h=o(9092);class p extends _.Disposable{constructor(S,u){super(),this._optionsService=S,this._bufferService=u,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,u){this._normal.resize(S,u),this._alt.resize(S,u),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}i.BufferSet=p},511:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(482),_=o(643),h=o(3734);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const u=new p;return u.setFromCharData(S),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const n=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=o(8460),_=o(844);class h{get id(){return this._id}constructor(w){this.line=w,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(w){return this._disposables.push(w),w}}i.Marker=h,h._nextId=1},7116:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(C,i)=>{var o,f,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(o||(i.C0=o={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(f||(i.C1=f={})),function(h){h.ST=`${o.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=o(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(h,p,w,S){const u={type:0,cancel:!1,key:void 0},n=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?u.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?u.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?u.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(u.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:u.key=h.ctrlKey?"\b":f.C0.DEL,h.altKey&&(u.key=f.C0.ESC+u.key);break;case 9:if(h.shiftKey){u.key=f.C0.ESC+"[Z";break}u.key=f.C0.HT,u.cancel=!0;break;case 13:u.key=h.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,u.cancel=!0;break;case 27:u.key=f.C0.ESC,h.altKey&&(u.key=f.C0.ESC+f.C0.ESC),u.cancel=!0;break;case 37:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"D",u.key===f.C0.ESC+"[1;3D"&&(u.key=f.C0.ESC+(w?"b":"[1;5D"))):u.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"C",u.key===f.C0.ESC+"[1;3C"&&(u.key=f.C0.ESC+(w?"f":"[1;5C"))):u.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"A",w||u.key!==f.C0.ESC+"[1;3A"||(u.key=f.C0.ESC+"[1;5A")):u.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"B",w||u.key!==f.C0.ESC+"[1;3B"||(u.key=f.C0.ESC+"[1;5B")):u.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(u.key=f.C0.ESC+"[2~");break;case 46:u.key=n?f.C0.ESC+"[3;"+(n+1)+"~":f.C0.ESC+"[3~";break;case 36:u.key=n?f.C0.ESC+"[1;"+(n+1)+"H":p?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:u.key=n?f.C0.ESC+"[1;"+(n+1)+"F":p?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:h.shiftKey?u.type=2:h.ctrlKey?u.key=f.C0.ESC+"[5;"+(n+1)+"~":u.key=f.C0.ESC+"[5~";break;case 34:h.shiftKey?u.type=3:h.ctrlKey?u.key=f.C0.ESC+"[6;"+(n+1)+"~":u.key=f.C0.ESC+"[6~";break;case 112:u.key=n?f.C0.ESC+"[1;"+(n+1)+"P":f.C0.ESC+"OP";break;case 113:u.key=n?f.C0.ESC+"[1;"+(n+1)+"Q":f.C0.ESC+"OQ";break;case 114:u.key=n?f.C0.ESC+"[1;"+(n+1)+"R":f.C0.ESC+"OR";break;case 115:u.key=n?f.C0.ESC+"[1;"+(n+1)+"S":f.C0.ESC+"OS";break;case 116:u.key=n?f.C0.ESC+"[15;"+(n+1)+"~":f.C0.ESC+"[15~";break;case 117:u.key=n?f.C0.ESC+"[17;"+(n+1)+"~":f.C0.ESC+"[17~";break;case 118:u.key=n?f.C0.ESC+"[18;"+(n+1)+"~":f.C0.ESC+"[18~";break;case 119:u.key=n?f.C0.ESC+"[19;"+(n+1)+"~":f.C0.ESC+"[19~";break;case 120:u.key=n?f.C0.ESC+"[20;"+(n+1)+"~":f.C0.ESC+"[20~";break;case 121:u.key=n?f.C0.ESC+"[21;"+(n+1)+"~":f.C0.ESC+"[21~";break;case 122:u.key=n?f.C0.ESC+"[23;"+(n+1)+"~":f.C0.ESC+"[23~";break;case 123:u.key=n?f.C0.ESC+"[24;"+(n+1)+"~":f.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(w&&!S||!h.altKey||h.metaKey)!w||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?u.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(u.key=f.C0.US),h.key==="@"&&(u.key=f.C0.NUL)):h.keyCode===65&&(u.type=1);else{const a=_[h.keyCode],l=a?.[h.shiftKey?1:0];if(l)u.key=f.C0.ESC+l;else if(h.keyCode>=65&&h.keyCode<=90){const c=h.ctrlKey?h.keyCode-64:h.keyCode+32;let m=String.fromCharCode(c);h.shiftKey&&(m=m.toUpperCase()),u.key=f.C0.ESC+m}else if(h.keyCode===32)u.key=f.C0.ESC+(h.ctrlKey?f.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let c=h.code.slice(3,4);h.shiftKey||(c=c.toLowerCase()),u.key=f.C0.ESC+c,u.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?u.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?u.key=f.C0.NUL:h.keyCode>=51&&h.keyCode<=55?u.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?u.key=f.C0.DEL:h.keyCode===219?u.key=f.C0.ESC:h.keyCode===220?u.key=f.C0.FS:h.keyCode===221&&(u.key=f.C0.GS)}return u}},482:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let h="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let h=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[h++]=1024*(this._interim-55296)+w-56320+65536:(f[h++]=this._interim,f[h++]=w),this._interim=0}for(let w=p;w<_;++w){const S=o.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=_)return this._interim=S,h;const u=o.charCodeAt(w);56320<=u&&u<=57343?f[h++]=1024*(S-55296)+u-56320+65536:(f[h++]=S,f[h++]=u)}else S!==65279&&(f[h++]=S)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let h,p,w,S,u=0,n=0,a=0;if(this.interim[0]){let m=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let v,x=0;for(;(v=63&this.interim[++x])&&x<4;)L<<=6,L|=v;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-x;for(;a<b;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[x++]=v,L<<=6,L|=63&v}m||(y===2?L<128?a--:f[u++]=L:y===3?L<2048||L>=55296&&L<=57343||L===65279||(f[u++]=L):L<65536||L>1114111||(f[u++]=L)),this.interim.fill(0)}const l=_-4;let c=a;for(;c<_;){for(;!(!(c<l)||128&(h=o[c])||128&(p=o[c+1])||128&(w=o[c+2])||128&(S=o[c+3]));)f[u++]=h,f[u++]=p,f[u++]=w,f[u++]=S,c+=4;if(h=o[c++],h<128)f[u++]=h;else if((224&h)==192){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(n=(31&h)<<6|63&p,n<128){c--;continue}f[u++]=n}else if((240&h)==224){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[c++],(192&w)!=128){c--;continue}if(n=(15&h)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&h)==240){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[c++],(192&w)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=w,u;if(S=o[c++],(192&S)!=128){c--;continue}if(n=(7&h)<<18|(63&p)<<12|(63&w)<<6|63&S,n<65536||n>1114111)continue;f[u++]=n}}return u}}},225:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=o(1480),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let p;i.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let w=0;w<_.length;++w)p.fill(0,_[w][0],_[w][1]+1)}}wcwidth(w){return w<32?0:w<127?1:w<65536?p[w]:function(S,u){let n,a=0,l=u.length-1;if(S<u[0][0]||S>u[l][1])return!1;for(;l>=a;)if(n=a+l>>1,S>u[n][1])a=n+1;else{if(!(S<u[n][0]))return!0;l=n-1}return!1}(w,h)?0:w>=131072&&w<=196605||w>=196608&&w<=262141?2:1}charProperties(w,S){let u=this.wcwidth(w),n=u===0&&S!==0;if(n){const a=f.UnicodeService.extractWidth(S);a===0?n=!1:a>u&&(u=a)}return f.UnicodeService.createPropertyValue(0,u,n)}}},5981:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=o(8460),_=o(844);class h extends _.Disposable{constructor(w){super(),this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(w,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let u;for(this._isSyncWriting=!0;u=this._writeBuffer.shift();){this._action(u);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(w,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(S)}_innerWrite(w=0,S=!0){const u=w||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],a=this._action(n,S);if(a){const c=m=>Date.now()-u>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(u,m);return void a.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(c)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=h},5941:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function _(h,p){const w=h.toString(16),S=w.length<2?"0"+w:w;switch(p){case 4:return w[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}i.parseColor=function(h){if(!h)return;let p=h.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const w=o.exec(p);if(w){const S=w[1]?15:w[4]?255:w[7]?4095:65535;return[Math.round(parseInt(w[1]||w[4]||w[7]||w[10],16)/S*255),Math.round(parseInt(w[2]||w[5]||w[8]||w[11],16)/S*255),Math.round(parseInt(w[3]||w[6]||w[9]||w[12],16)/S*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),f.exec(p)&&[3,6,9,12].includes(p.length))){const w=p.length/3,S=[0,0,0];for(let u=0;u<3;++u){const n=parseInt(p.slice(w*u,w*u+w),16);S[u]=w===1?n<<4:w===2?n:w===3?n>>4:n>>8}return S}},i.toRgbString=function(h,p=16){const[w,S,u]=h;return`rgb:${_(w,p)}/${_(S,p)}/${_(u,p)}`}},5770:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=o(482),_=o(8742),h=o(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(S,u){this._handlers[S]===void 0&&(this._handlers[S]=[]);const n=this._handlers[S];return n.push(u),{dispose:()=>{const a=n.indexOf(u);a!==-1&&n.splice(a,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(S,u){if(this.reset(),this._ident=S,this._active=this._handlers[S]||p,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(u);else this._handlerFb(this._ident,"HOOK",u)}put(S,u,n){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(S,u,n);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(S,u,n))}unhook(S,u=!0){if(this._active.length){let n=!1,a=this._active.length-1,l=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,n=u,l=this._stack.fallThrough,this._stack.paused=!1),!l&&n===!1){for(;a>=0&&(n=this._active[a].unhook(S),n!==!0);a--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,n;a--}for(;a>=0;a--)if(n=this._active[a].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",S);this._active=p,this._ident=0}};const w=new _.Params;w.addParam(0),i.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=w,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():w,this._data="",this._hitLimit=!1}put(S,u,n){this._hitLimit||(this._data+=(0,f.utf32ToString)(S,u,n),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let u=!1;if(this._hitLimit)u=!1;else if(S&&(u=this._handler(this._data,this._params),u instanceof Promise))return u.then(n=>(this._params=w,this._data="",this._hitLimit=!1,n));return this._params=w,this._data="",this._hitLimit=!1,u}}},2015:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=o(844),_=o(8742),h=o(6242),p=o(6351);class w{constructor(a){this.table=new Uint8Array(a)}setDefault(a,l){this.table.fill(a<<4|l)}add(a,l,c,m){this.table[l<<8|a]=c<<4|m}addMany(a,l,c,m){for(let L=0;L<a.length;L++)this.table[l<<8|a[L]]=c<<4|m}}i.TransitionTable=w;const S=160;i.VT500_TRANSITION_TABLE=function(){const n=new w(4095),a=Array.apply(null,Array(256)).map((x,y)=>y),l=(x,y)=>a.slice(x,y),c=l(32,127),m=l(0,24);m.push(25),m.push.apply(m,l(28,32));const L=l(0,14);let v;for(v in n.setDefault(1,0),n.addMany(c,0,2,0),L)n.addMany([24,26,153,154],v,3,0),n.addMany(l(128,144),v,3,0),n.addMany(l(144,152),v,3,0),n.add(156,v,0,0),n.add(27,v,11,1),n.add(157,v,4,8),n.addMany([152,158,159],v,0,7),n.add(155,v,11,3),n.add(144,v,11,9);return n.addMany(m,0,3,0),n.addMany(m,1,3,1),n.add(127,1,0,1),n.addMany(m,8,0,8),n.addMany(m,3,3,3),n.add(127,3,0,3),n.addMany(m,4,3,4),n.add(127,4,0,4),n.addMany(m,6,3,6),n.addMany(m,5,3,5),n.add(127,5,0,5),n.addMany(m,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(c,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(l(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(c,7,0,7),n.addMany(m,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(l(64,127),3,7,0),n.addMany(l(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(l(48,60),4,8,4),n.addMany(l(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(l(32,64),6,0,6),n.add(127,6,0,6),n.addMany(l(64,127),6,0,0),n.addMany(l(32,48),3,9,5),n.addMany(l(32,48),5,9,5),n.addMany(l(48,64),5,0,6),n.addMany(l(64,127),5,7,0),n.addMany(l(32,48),4,9,5),n.addMany(l(32,48),1,9,2),n.addMany(l(32,48),2,9,2),n.addMany(l(48,127),2,10,0),n.addMany(l(48,80),1,10,0),n.addMany(l(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(l(96,127),1,10,0),n.add(80,1,11,9),n.addMany(m,9,0,9),n.add(127,9,0,9),n.addMany(l(28,32),9,0,9),n.addMany(l(32,48),9,9,12),n.addMany(l(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(m,11,0,11),n.addMany(l(32,128),11,0,11),n.addMany(l(28,32),11,0,11),n.addMany(m,10,0,10),n.add(127,10,0,10),n.addMany(l(28,32),10,0,10),n.addMany(l(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(l(32,48),10,9,12),n.addMany(m,12,0,12),n.add(127,12,0,12),n.addMany(l(28,32),12,0,12),n.addMany(l(32,48),12,9,12),n.addMany(l(48,64),12,0,11),n.addMany(l(64,127),12,12,13),n.addMany(l(64,127),10,12,13),n.addMany(l(64,127),9,12,13),n.addMany(m,13,13,13),n.addMany(c,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(S,0,2,0),n.add(S,8,5,8),n.add(S,6,0,6),n.add(S,11,0,11),n.add(S,13,13,13),n}();class u extends f.Disposable{constructor(a=i.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(l,c,m)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,c)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,l=[64,126]){let c=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=a.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let L=0;L<a.intermediates.length;++L){const v=a.intermediates.charCodeAt(L);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=v}}if(a.final.length!==1)throw new Error("final must be a single byte");const m=a.final.charCodeAt(0);if(l[0]>m||m>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return c<<=8,c|=m,c}identToString(a){const l=[];for(;a;)l.push(String.fromCharCode(255&a)),a>>=8;return l.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,l){const c=this._identifier(a,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const m=this._escHandlers[c];return m.push(l),{dispose:()=>{const L=m.indexOf(l);L!==-1&&m.splice(L,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,l){this._executeHandlers[a.charCodeAt(0)]=l}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,l){const c=this._identifier(a);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const m=this._csiHandlers[c];return m.push(l),{dispose:()=>{const L=m.indexOf(l);L!==-1&&m.splice(L,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,l){return this._dcsParser.registerHandler(this._identifier(a),l)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,l){return this._oscParser.registerHandler(a,l)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,l,c,m,L){this._parseStack.state=a,this._parseStack.handlers=l,this._parseStack.handlerPos=c,this._parseStack.transition=m,this._parseStack.chunkPos=L}parse(a,l,c){let m,L=0,v=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&b>-1){for(;b>=0&&(m=y[b](this._params),m!==!0);b--)if(m instanceof Promise)return this._parseStack.handlerPos=b,m}this._parseStack.handlers=[];break;case 4:if(c===!1&&b>-1){for(;b>=0&&(m=y[b](),m!==!0);b--)if(m instanceof Promise)return this._parseStack.handlerPos=b,m}this._parseStack.handlers=[];break;case 6:if(L=a[this._parseStack.chunkPos],m=this._dcsParser.unhook(L!==24&&L!==26,c),m)return m;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(L=a[this._parseStack.chunkPos],m=this._oscParser.end(L!==24&&L!==26,c),m)return m;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let y=x;y<l;++y){switch(L=a[y],v=this._transitions.table[this.currentState<<8|(L<160?L:S)],v>>4){case 2:for(let D=y+1;;++D){if(D>=l||(L=a[D])<32||L>126&&L<S){this._printHandler(a,y,D),y=D-1;break}if(++D>=l||(L=a[D])<32||L>126&&L<S){this._printHandler(a,y,D),y=D-1;break}if(++D>=l||(L=a[D])<32||L>126&&L<S){this._printHandler(a,y,D),y=D-1;break}if(++D>=l||(L=a[D])<32||L>126&&L<S){this._printHandler(a,y,D),y=D-1;break}}break;case 3:this._executeHandlers[L]?this._executeHandlers[L]():this._executeHandlerFb(L),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:L,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const b=this._csiHandlers[this._collect<<8|L];let E=b?b.length-1:-1;for(;E>=0&&(m=b[E](this._params),m!==!0);E--)if(m instanceof Promise)return this._preserveStack(3,b,E,v,y),m;E<0&&this._csiHandlerFb(this._collect<<8|L,this._params),this.precedingJoinState=0;break;case 8:do switch(L){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(L-48)}while(++y<l&&(L=a[y])>47&&L<60);y--;break;case 9:this._collect<<=8,this._collect|=L;break;case 10:const M=this._escHandlers[this._collect<<8|L];let R=M?M.length-1:-1;for(;R>=0&&(m=M[R](),m!==!0);R--)if(m instanceof Promise)return this._preserveStack(4,M,R,v,y),m;R<0&&this._escHandlerFb(this._collect<<8|L),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|L,this._params);break;case 13:for(let D=y+1;;++D)if(D>=l||(L=a[D])===24||L===26||L===27||L>127&&L<S){this._dcsParser.put(a,y,D),y=D-1;break}break;case 14:if(m=this._dcsParser.unhook(L!==24&&L!==26),m)return this._preserveStack(6,[],0,v,y),m;L===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let D=y+1;;D++)if(D>=l||(L=a[D])<32||L>127&&L<S){this._oscParser.put(a,y,D),y=D-1;break}break;case 6:if(m=this._oscParser.end(L!==24&&L!==26),m)return this._preserveStack(5,[],0,v,y),m;L===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&v}}}i.EscapeSequenceParser=u},6242:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=o(5770),_=o(482),h=[];i.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,w){this._handlers[p]===void 0&&(this._handlers[p]=[]);const S=this._handlers[p];return S.push(w),{dispose:()=>{const u=S.indexOf(w);u!==-1&&S.splice(u,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,w,S){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(p,w,S);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(p,w,S))}start(){this.reset(),this._state=1}put(p,w,S){if(this._state!==3){if(this._state===1)for(;w<S;){const u=p[w++];if(u===59){this._state=2,this._start();break}if(u<48||57<u)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+u-48}this._state===2&&S-w>0&&this._put(p,w,S)}}end(p,w=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,u=this._active.length-1,n=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,S=w,n=this._stack.fallThrough,this._stack.paused=!1),!n&&S===!1){for(;u>=0&&(S=this._active[u].end(p),S!==!0);u--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,S;u--}for(;u>=0;u--)if(S=this._active[u].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",p);this._active=h,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,w,S){this._hitLimit||(this._data+=(0,_.utf32ToString)(p,w,S),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let w=!1;if(this._hitLimit)w=!1;else if(p&&(w=this._handler(this._data),w instanceof Promise))return w.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,w}}},8742:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class f{static fromArray(h){const p=new f;if(!h.length)return p;for(let w=Array.isArray(h[0])?1:0;w<h.length;++w){const S=h[w];if(Array.isArray(S))for(let u=0;u<S.length;++u)p.addSubParam(S[u]);else p.addParam(S)}return p}constructor(h=32,p=32){if(this.maxLength=h,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new f(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let p=0;p<this.length;++p){h.push(this.params[p]);const w=this._subParamsIdx[p]>>8,S=255&this._subParamsIdx[p];S-w>0&&h.push(Array.prototype.slice.call(this._subParams,w,S))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>o?o:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>o?o:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const p=this._subParamsIdx[h]>>8,w=255&this._subParamsIdx[h];return w-p>0?this._subParams.subarray(p,w):null}getSubParamsAll(){const h={};for(let p=0;p<this.length;++p){const w=this._subParamsIdx[p]>>8,S=255&this._subParamsIdx[p];S-w>0&&(h[p]=this._subParams.slice(w,S))}return h}addDigit(h){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const w=this._digitIsSub?this._subParams:this.params,S=w[p-1];w[p-1]=~S?Math.min(10*S+h,o):h}}i.Params=f},5741:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,f){const _={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(_),f.dispose=()=>this._wrappedAddonDispose(_),f.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let f=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===o){f=_;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(f,1)}}},8771:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=o(3785),_=o(511);i.BufferApiView=class{constructor(h,p){this._buffer=h,this.type=p}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const p=this._buffer.lines.get(h);if(p)return new f.BufferLineApiView(p)}getNullCell(){return new _.CellData}}},3785:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=o(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,h){if(!(_<0||_>=this._line.length))return h?(this._line.loadCell(_,h),h):this._line.loadCell(_,new f.CellData)}translateToString(_,h,p){return this._line.translateToString(_,h,p)}}},8285:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=o(8771),_=o(8460),h=o(844);class p extends h.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,f){return this._core.registerCsiHandler(o,_=>f(_.toArray()))}addCsiHandler(o,f){return this.registerCsiHandler(o,f)}registerDcsHandler(o,f){return this._core.registerDcsHandler(o,(_,h)=>f(_,h.toArray()))}addDcsHandler(o,f){return this.registerDcsHandler(o,f)}registerEscHandler(o,f){return this._core.registerEscHandler(o,f)}addEscHandler(o,f){return this.registerEscHandler(o,f)}registerOscHandler(o,f){return this._core.registerOscHandler(o,f)}addOscHandler(o,f){return this.registerOscHandler(o,f)}}},7090:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(C,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,L=arguments.length,v=L<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(v=(L<3?m(v):L>3?m(a,l,v):m(a,l))||v);return L>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const h=o(8460),p=o(844),w=o(5295),S=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let u=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new w.BufferSet(n,this))}resize(n,a){this.cols=n,this.rows=a,this.buffers.resize(n,a),this._onResize.fire({cols:n,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,a=!1){const l=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===n.fg&&c.getBg(0)===n.bg||(c=l.getBlankLine(n,a),this._cachedBlankLine=c),c.isWrapped=a;const m=l.ybase+l.scrollTop,L=l.ybase+l.scrollBottom;if(l.scrollTop===0){const v=l.lines.isFull;L===l.lines.length-1?v?l.lines.recycle().copyFrom(c):l.lines.push(c.clone()):l.lines.splice(L+1,0,c.clone()),v?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const v=L-m+1;l.lines.shiftElements(m+1,v-1,-1),l.lines.set(L,c.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(n,a,l){const c=this.buffer;if(n<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else n+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const m=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+n,c.ybase),0),m!==c.ydisp&&(a||this._onScroll.fire(c.ydisp))}};i.BufferService=u=f([_(0,S.IOptionsService)],u)},7994:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,f){this._charsets[o]=f,this.glevel===o&&(this.charset=f)}}},1753:function(C,i,o){var f=this&&this.__decorate||function(c,m,L,v){var x,y=arguments.length,b=y<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,L):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(c,m,L,v);else for(var E=c.length-1;E>=0;E--)(x=c[E])&&(b=(y<3?x(b):y>3?x(m,L,b):x(m,L))||b);return y>3&&b&&Object.defineProperty(m,L,b),b},_=this&&this.__param||function(c,m){return function(L,v){m(L,v,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const h=o(2585),p=o(8460),w=o(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function u(c,m){let L=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(L|=64,L|=c.action):(L|=3&c.button,4&c.button&&(L|=64),8&c.button&&(L|=128),c.action===32?L|=32:c.action!==0||m||(L|=3)),L}const n=String.fromCharCode,a={DEFAULT:c=>{const m=[u(c,!1)+32,c.col+32,c.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${n(m[0])}${n(m[1])}${n(m[2])}`},SGR:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${u(c,!0)};${c.col};${c.row}${m}`},SGR_PIXELS:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${u(c,!0)};${c.x};${c.y}${m}`}};let l=i.CoreMouseService=class extends w.Disposable{constructor(c,m){super(),this._bufferService=c,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const L of Object.keys(S))this.addProtocol(L,S[L]);for(const L of Object.keys(a))this.addEncoding(L,a[L]);this.reset()}addProtocol(c,m){this._protocols[c]=m}addEncoding(c,m){this._encodings[c]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const m=this._encodings[this._activeEncoding](c);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,m,L){if(L){if(c.x!==m.x||c.y!==m.y)return!1}else if(c.col!==m.col||c.row!==m.row)return!1;return c.button===m.button&&c.action===m.action&&c.ctrl===m.ctrl&&c.alt===m.alt&&c.shift===m.shift}};i.CoreMouseService=l=f([_(0,h.IBufferService),_(1,h.ICoreService)],l)},6975:function(C,i,o){var f=this&&this.__decorate||function(l,c,m,L){var v,x=arguments.length,y=x<3?c:L===null?L=Object.getOwnPropertyDescriptor(c,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,c,m,L);else for(var b=l.length-1;b>=0;b--)(v=l[b])&&(y=(x<3?v(y):x>3?v(c,m,y):v(c,m))||y);return x>3&&y&&Object.defineProperty(c,m,y),y},_=this&&this.__param||function(l,c){return function(m,L){c(m,L,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const h=o(1439),p=o(8460),w=o(844),S=o(2585),u=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=i.CoreService=class extends w.Disposable{constructor(l,c,m){super(),this._bufferService=l,this._logService=c,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(u),this.decPrivateModes=(0,h.clone)(n)}reset(){this.modes=(0,h.clone)(u),this.decPrivateModes=(0,h.clone)(n)}triggerDataEvent(l,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,()=>l.split("").map(L=>L.charCodeAt(0))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,()=>l.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(l))}};i.CoreService=a=f([_(0,S.IBufferService),_(1,S.ILogService),_(2,S.IOptionsService)],a)},9074:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=o(8055),_=o(8460),h=o(844),p=o(6106);let w=0,S=0;class u extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(l=>l?.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(l){if(l.marker.isDisposed)return;const c=new n(l);if(c){const m=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),m.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,c,m){let L=0,v=0;for(const x of this._decorations.getKeyIterator(c))L=x.options.x??0,v=L+(x.options.width??1),l>=L&&l<v&&(!m||(x.options.layer??"bottom")===m)&&(yield x)}forEachDecorationAtCell(l,c,m,L){this._decorations.forEachByKey(c,v=>{w=v.options.x??0,S=w+(v.options.width??1),l>=w&&l<S&&(!m||(v.options.layer??"bottom")===m)&&L(v)})}}i.DecorationService=u;class n extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=o(2585),_=o(8343);class h{constructor(...w){this._entries=new Map;for(const[S,u]of w)this.set(S,u)}set(w,S){const u=this._entries.get(w);return this._entries.set(w,S),u}forEach(w){for(const[S,u]of this._entries.entries())w(S,u)}has(w){return this._entries.has(w)}get(w){return this._entries.get(w)}}i.ServiceCollection=h,i.InstantiationService=class{constructor(){this._services=new h,this._services.set(f.IInstantiationService,this)}setService(p,w){this._services.set(p,w)}getService(p){return this._services.get(p)}createInstance(p,...w){const S=(0,_.getServiceDependencies)(p).sort((a,l)=>a.index-l.index),u=[];for(const a of S){const l=this._services.get(a.id);if(!l)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${a.id}.`);u.push(l)}const n=S.length>0?S[0].index:w.length;if(w.length!==n)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${n+1} conflicts with ${w.length} static arguments`);return new p(...w,...u)}}},7866:function(C,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,L=arguments.length,v=L<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(v=(L<3?m(v):L>3?m(a,l,v):m(a,l))||v);return L>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=o(844),p=o(2585),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let S,u=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){S=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(S.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,m);S.trace(`GlyphRenderer#${c.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const L=c.apply(this,m);return S.trace(`GlyphRenderer#${c.name} return`,L),L}}},7302:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=o(8460),_=o(844),h=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class w extends _.Disposable{constructor(u){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...i.DEFAULT_OPTIONS};for(const a in u)if(a in n)try{const l=u[a];n[a]=this._sanitizeAndValidateOption(a,l)}catch(l){console.error(l)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,_.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(u,n){return this.onOptionChange(a=>{a===u&&n(this.rawOptions[u])})}onMultipleOptionChange(u,n){return this.onOptionChange(a=>{u.indexOf(a)!==-1&&n()})}_setupOptions(){const u=a=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},n=(a,l)=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);l=this._sanitizeAndValidateOption(a,l),this.rawOptions[a]!==l&&(this.rawOptions[a]=l,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const l={get:u.bind(this,a),set:n.bind(this,a)};Object.defineProperty(this.options,a,l)}}_sanitizeAndValidateOption(u,n){switch(u){case"cursorStyle":if(n||(n=i.DEFAULT_OPTIONS[u]),!function(a){return a==="block"||a==="underline"||a==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${u}`);break;case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=p.includes(n)?n:i.DEFAULT_OPTIONS[u];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${u} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${u} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${u} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${u} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}i.OptionsService=w},2660:function(C,i,o){var f=this&&this.__decorate||function(w,S,u,n){var a,l=arguments.length,c=l<3?S:n===null?n=Object.getOwnPropertyDescriptor(S,u):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(w,S,u,n);else for(var m=w.length-1;m>=0;m--)(a=w[m])&&(c=(l<3?a(c):l>3?a(S,u,c):a(S,u))||c);return l>3&&c&&Object.defineProperty(S,u,c),c},_=this&&this.__param||function(w,S){return function(u,n){S(u,n,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const h=o(2585);let p=i.OscLinkService=class{constructor(w){this._bufferService=w,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(w){const S=this._bufferService.buffer;if(w.id===void 0){const m=S.addMarker(S.ybase+S.y),L={data:w,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(L,m)),this._dataByLinkId.set(L.id,L),L.id}const u=w,n=this._getEntryIdKey(u),a=this._entriesWithId.get(n);if(a)return this.addLineToLink(a.id,S.ybase+S.y),a.id;const l=S.addMarker(S.ybase+S.y),c={id:this._nextId++,key:this._getEntryIdKey(u),data:u,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(c,l)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(w,S){const u=this._dataByLinkId.get(w);if(u&&u.lines.every(n=>n.line!==S)){const n=this._bufferService.buffer.addMarker(S);u.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(u,n))}}getLinkData(w){return this._dataByLinkId.get(w)?.data}_getEntryIdKey(w){return`${w.id};;${w.uri}`}_removeMarkerFromLink(w,S){const u=w.lines.indexOf(S);u!==-1&&(w.lines.splice(u,1),w.lines.length===0&&(w.data.id!==void 0&&this._entriesWithId.delete(w.key),this._dataByLinkId.delete(w.id)))}};i.OscLinkService=p=f([_(0,h.IBufferService)],p)},8343:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(p,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(h,p,S)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},2585:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(8343);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=o(8460),_=o(225);class h{static extractShouldJoin(w){return(1&w)!=0}static extractWidth(w){return w>>1&3}static extractCharKind(w){return w>>3}static createPropertyValue(w,S,u=!1){return(16777215&w)<<3|(3&S)<<1|(u?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const w=new _.UnicodeV6;this.register(w),this._active=w.version,this._activeProvider=w}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(w){if(!this._providers[w])throw new Error(`unknown Unicode version "${w}"`);this._active=w,this._activeProvider=this._providers[w],this._onChange.fire(w)}register(w){this._providers[w.version]=w}wcwidth(w){return this._activeProvider.wcwidth(w)}getStringCellWidth(w){let S=0,u=0;const n=w.length;for(let a=0;a<n;++a){let l=w.charCodeAt(a);if(55296<=l&&l<=56319){if(++a>=n)return S+this.wcwidth(l);const L=w.charCodeAt(a);56320<=L&&L<=57343?l=1024*(l-55296)+L-56320+65536:S+=this.wcwidth(L)}const c=this.charProperties(l,u);let m=h.extractWidth(c);h.extractShouldJoin(c)&&(m-=h.extractWidth(u)),S+=m,u=c}return S}charProperties(w,S){return this._activeProvider.charProperties(w,S)}}i.UnicodeService=h}},s={};function d(C){var i=s[C];if(i!==void 0)return i.exports;var o=s[C]={exports:{}};return r[C].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var C=g;Object.defineProperty(C,"__esModule",{value:!0}),C.Terminal=void 0;const i=d(9042),o=d(3236),f=d(844),_=d(5741),h=d(8285),p=d(7975),w=d(7090),S=["cols","rows"];class u extends f.Disposable{constructor(a){super(),this._core=this.register(new o.Terminal(a)),this._addonManager=this.register(new _.AddonManager),this._publicOptions={...this._core.options};const l=m=>this._core.options[m],c=(m,L)=>{this._checkReadonlyOptions(m),this._core.options[m]=L};for(const m in this._core.options){const L={get:l.bind(this,m),set:c.bind(this,m)};Object.defineProperty(this._publicOptions,m,L)}}_checkReadonlyOptions(a){if(S.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new w.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const l in a)this._publicOptions[l]=a[l]}blur(){this._core.blur()}focus(){this._core.focus()}input(a,l=!0){this._core.input(a,l)}resize(a,l){this._verifyIntegers(a,l),this._core.resize(a,l)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}attachCustomWheelEventHandler(a){this._core.attachCustomWheelEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){return this._checkProposedApi(),this._verifyPositiveIntegers(a.x??0,a.width??0,a.height??0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,l,c){this._verifyIntegers(a,l,c),this._core.select(a,l,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,l){this._verifyIntegers(a,l),this._core.selectLines(a,l)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,l){this._core.write(a,l)}writeln(a,l){this._core.write(a),this._core.write(`\r
`,l)}paste(a){this._core.paste(a)}refresh(a,l){this._verifyIntegers(a,l),this._core.refresh(a,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return i}_verifyIntegers(...a){for(const l of a)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const l of a)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}C.Terminal=u})(),g})())})(yf);var Tm=yf.exports,Sf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(d){this._terminal=d}dispose(){}fit(){const d=this.proposeDimensions();if(!d||!this._terminal||isNaN(d.cols)||isNaN(d.rows))return;const g=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(g._renderService.clear(),this._terminal.resize(d.cols,d.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const d=this._terminal._core,g=d._renderService.dimensions;if(g.css.cell.width===0||g.css.cell.height===0)return;const C=this._terminal.options.scrollback===0?0:d.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),h=o-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),p=f-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-C;return{cols:Math.max(2,Math.floor(p/g.css.cell.width)),rows:Math.max(1,Math.floor(h/g.css.cell.height))}}}})(),r})())})(Sf);var Bm=Sf.exports,wf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={965:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;const f=o(374),_=o(509),h=o(855),p=o(859),w=o(381),S=11,u=S*Float32Array.BYTES_PER_ELEMENT;let n,a=0,l=0,c=0;class m extends p.Disposable{constructor(v,x,y,b){super(),this._terminal=v,this._gl=x,this._dimensions=y,this._optionsService=b,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const E=this._gl;_.TextureAtlas.maxAtlasPages===void 0&&(_.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),_.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,w.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(j){let N="";for(let B=1;B<j;B++)N+=` else if (v_texpage == ${B}) { outColor = texture(u_texture[${B}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${j}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${N}
}`}(_.TextureAtlas.maxAtlasPages))),this.register((0,p.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);const M=new Float32Array([0,0,1,0,0,1,1,1]),R=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(R))),E.bindBuffer(E.ARRAY_BUFFER,R),E.bufferData(E.ARRAY_BUFFER,M,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const D=new Uint8Array([0,1,2,3]),T=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(T))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,T),E.bufferData(E.ELEMENT_ARRAY_BUFFER,D,E.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(E.createBuffer()),this.register((0,p.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,u,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,u,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,u,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,u,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,u,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,u,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);const H=new Int32Array(_.TextureAtlas.maxAtlasPages);for(let j=0;j<_.TextureAtlas.maxAtlasPages;j++)H[j]=j;E.uniform1iv(this._textureLocation,H),E.uniformMatrix4fv(this._projectionLocation,!1,w.PROJECTION_MATRIX),this._atlasTextures=[];for(let j=0;j<_.TextureAtlas.maxAtlasPages;j++){const N=new w.GLTexture((0,f.throwIfFalsy)(E.createTexture()));this.register((0,p.toDisposable)(()=>E.deleteTexture(N.texture))),E.activeTexture(E.TEXTURE0+j),E.bindTexture(E.TEXTURE_2D,N.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[j]=N}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(v,x,y,b,E,M,R,D,T){this._updateCell(this._vertices.attributes,v,x,y,b,E,M,R,D,T)}_updateCell(v,x,y,b,E,M,R,D,T,H){a=(y*this._terminal.cols+x)*S,b!==h.NULL_CELL_CODE&&b!==void 0?this._atlas&&(n=D&&D.length>1?this._atlas.getRasterizedGlyphCombinedChar(D,E,M,R,!1):this._atlas.getRasterizedGlyph(b,E,M,R,!1),l=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),E!==H&&n.offset.x>l?(c=n.offset.x-l,v[a]=-(n.offset.x-c)+this._dimensions.device.char.left,v[a+1]=-n.offset.y+this._dimensions.device.char.top,v[a+2]=(n.size.x-c)/this._dimensions.device.canvas.width,v[a+3]=n.size.y/this._dimensions.device.canvas.height,v[a+4]=n.texturePage,v[a+5]=n.texturePositionClipSpace.x+c/this._atlas.pages[n.texturePage].canvas.width,v[a+6]=n.texturePositionClipSpace.y,v[a+7]=n.sizeClipSpace.x-c/this._atlas.pages[n.texturePage].canvas.width,v[a+8]=n.sizeClipSpace.y):(v[a]=-n.offset.x+this._dimensions.device.char.left,v[a+1]=-n.offset.y+this._dimensions.device.char.top,v[a+2]=n.size.x/this._dimensions.device.canvas.width,v[a+3]=n.size.y/this._dimensions.device.canvas.height,v[a+4]=n.texturePage,v[a+5]=n.texturePositionClipSpace.x,v[a+6]=n.texturePositionClipSpace.y,v[a+7]=n.sizeClipSpace.x,v[a+8]=n.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,f.allowRescaling)(b,T,n.size.x,this._dimensions.device.cell.width)&&(v[a+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):v.fill(0,a,a+S-1-2)}clear(){const v=this._terminal,x=v.cols*v.rows*S;this._vertices.count!==x?this._vertices.attributes=new Float32Array(x):this._vertices.attributes.fill(0);let y=0;for(;y<this._vertices.attributesBuffers.length;y++)this._vertices.count!==x?this._vertices.attributesBuffers[y]=new Float32Array(x):this._vertices.attributesBuffers[y].fill(0);this._vertices.count=x,y=0;for(let b=0;b<v.rows;b++)for(let E=0;E<v.cols;E++)this._vertices.attributes[y+9]=E/v.cols,this._vertices.attributes[y+10]=b/v.rows,y+=S}handleResize(){const v=this._gl;v.useProgram(this._program),v.viewport(0,0,v.canvas.width,v.canvas.height),v.uniform2f(this._resolutionLocation,v.canvas.width,v.canvas.height),this.clear()}render(v){if(!this._atlas)return;const x=this._gl;x.useProgram(this._program),x.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const y=this._vertices.attributesBuffers[this._activeBuffer];let b=0;for(let E=0;E<v.lineLengths.length;E++){const M=E*this._terminal.cols*S,R=this._vertices.attributes.subarray(M,M+v.lineLengths[E]*S);y.set(R,b),b+=R.length}x.bindBuffer(x.ARRAY_BUFFER,this._attributesBuffer),x.bufferData(x.ARRAY_BUFFER,y.subarray(0,b),x.STREAM_DRAW);for(let E=0;E<this._atlas.pages.length;E++)this._atlas.pages[E].version!==this._atlasTextures[E].version&&this._bindAtlasPageTexture(x,this._atlas,E);x.drawElementsInstanced(x.TRIANGLE_STRIP,4,x.UNSIGNED_BYTE,0,b/S)}setAtlas(v){this._atlas=v;for(const x of this._atlasTextures)x.version=-1}_bindAtlasPageTexture(v,x,y){v.activeTexture(v.TEXTURE0+y),v.bindTexture(v.TEXTURE_2D,this._atlasTextures[y].texture),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,x.pages[y].canvas),v.generateMipmap(v.TEXTURE_2D),this._atlasTextures[y].version=x.pages[y].version}setDimensions(v){this._dimensions=v}}i.GlyphRenderer=m},742:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;const f=o(374),_=o(859),h=o(310),p=o(381),w=8*Float32Array.BYTES_PER_ELEMENT;class S{constructor(){this.attributes=new Float32Array(160),this.count=0}}let u=0,n=0,a=0,l=0,c=0,m=0,L=0;class v extends _.Disposable{constructor(y,b,E,M){super(),this._terminal=y,this._gl=b,this._dimensions=E,this._themeService=M,this._vertices=new S,this._verticesCursor=new S;const R=this._gl;this._program=(0,f.throwIfFalsy)((0,p.createProgram)(R,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,_.toDisposable)(()=>R.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(R.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=R.createVertexArray(),R.bindVertexArray(this._vertexArrayObject);const D=new Float32Array([0,0,1,0,0,1,1,1]),T=R.createBuffer();this.register((0,_.toDisposable)(()=>R.deleteBuffer(T))),R.bindBuffer(R.ARRAY_BUFFER,T),R.bufferData(R.ARRAY_BUFFER,D,R.STATIC_DRAW),R.enableVertexAttribArray(3),R.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const H=new Uint8Array([0,1,2,3]),j=R.createBuffer();this.register((0,_.toDisposable)(()=>R.deleteBuffer(j))),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,j),R.bufferData(R.ELEMENT_ARRAY_BUFFER,H,R.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(R.createBuffer()),this.register((0,_.toDisposable)(()=>R.deleteBuffer(this._attributesBuffer))),R.bindBuffer(R.ARRAY_BUFFER,this._attributesBuffer),R.enableVertexAttribArray(0),R.vertexAttribPointer(0,2,R.FLOAT,!1,w,0),R.vertexAttribDivisor(0,1),R.enableVertexAttribArray(1),R.vertexAttribPointer(1,2,R.FLOAT,!1,w,2*Float32Array.BYTES_PER_ELEMENT),R.vertexAttribDivisor(1,1),R.enableVertexAttribArray(2),R.vertexAttribPointer(2,4,R.FLOAT,!1,w,4*Float32Array.BYTES_PER_ELEMENT),R.vertexAttribDivisor(2,1),this._updateCachedColors(M.colors),this.register(this._themeService.onChangeColors(N=>{this._updateCachedColors(N),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(y){const b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,y.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,y.count)}handleResize(){this._updateViewportRectangle()}setDimensions(y){this._dimensions=y}_updateCachedColors(y){this._bgFloat=this._colorToFloat32Array(y.background),this._cursorFloat=this._colorToFloat32Array(y.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(y){const b=this._terminal,E=this._vertices;let M,R,D,T,H,j,N,B,k,A,P,F=1;for(M=0;M<b.rows;M++){for(D=-1,T=0,H=0,j=!1,R=0;R<b.cols;R++)N=(M*b.cols+R)*h.RENDER_MODEL_INDICIES_PER_CELL,B=y.cells[N+h.RENDER_MODEL_BG_OFFSET],k=y.cells[N+h.RENDER_MODEL_FG_OFFSET],A=!!(67108864&k),(B!==T||k!==H&&(j||A))&&((T!==0||j&&H!==0)&&(P=8*F++,this._updateRectangle(E,P,H,T,D,R,M)),D=R,T=B,H=k,j=A);(T!==0||j&&H!==0)&&(P=8*F++,this._updateRectangle(E,P,H,T,D,b.cols,M))}E.count=F}updateCursor(y){const b=this._verticesCursor,E=y.cursor;if(!E||E.style==="block")return void(b.count=0);let M,R=0;E.style!=="bar"&&E.style!=="outline"||(M=8*R++,this._addRectangleFloat(b.attributes,M,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.style==="bar"?E.dpr*E.cursorWidth:E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),E.style!=="underline"&&E.style!=="outline"||(M=8*R++,this._addRectangleFloat(b.attributes,M,E.x*this._dimensions.device.cell.width,(E.y+1)*this._dimensions.device.cell.height-E.dpr,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat)),E.style==="outline"&&(M=8*R++,this._addRectangleFloat(b.attributes,M,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat),M=8*R++,this._addRectangleFloat(b.attributes,M,(E.x+E.width)*this._dimensions.device.cell.width-E.dpr,E.y*this._dimensions.device.cell.height,E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=R}_updateRectangle(y,b,E,M,R,D,T){if(67108864&E)switch(50331648&E){case 16777216:case 33554432:u=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:u=(16777215&E)<<8;break;default:u=this._themeService.colors.foreground.rgba}else switch(50331648&M){case 16777216:case 33554432:u=this._themeService.colors.ansi[255&M].rgba;break;case 50331648:u=(16777215&M)<<8;break;default:u=this._themeService.colors.background.rgba}y.attributes.length<b+4&&(y.attributes=(0,p.expandFloat32Array)(y.attributes,this._terminal.rows*this._terminal.cols*8)),n=R*this._dimensions.device.cell.width,a=T*this._dimensions.device.cell.height,l=(u>>24&255)/255,c=(u>>16&255)/255,m=(u>>8&255)/255,L=1,this._addRectangle(y.attributes,b,n,a,(D-R)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,l,c,m,L)}_addRectangle(y,b,E,M,R,D,T,H,j,N){y[b]=E/this._dimensions.device.canvas.width,y[b+1]=M/this._dimensions.device.canvas.height,y[b+2]=R/this._dimensions.device.canvas.width,y[b+3]=D/this._dimensions.device.canvas.height,y[b+4]=T,y[b+5]=H,y[b+6]=j,y[b+7]=N}_addRectangleFloat(y,b,E,M,R,D,T){y[b]=E/this._dimensions.device.canvas.width,y[b+1]=M/this._dimensions.device.canvas.height,y[b+2]=R/this._dimensions.device.canvas.width,y[b+3]=D/this._dimensions.device.canvas.height,y[b+4]=T[0],y[b+5]=T[1],y[b+6]=T[2],y[b+7]=T[3]}_colorToFloat32Array(y){return new Float32Array([(y.rgba>>24&255)/255,(y.rgba>>16&255)/255,(y.rgba>>8&255)/255,(255&y.rgba)/255])}}i.RectangleRenderer=v},310:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;const f=o(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,f.createSelectionRenderModel)()}resize(_,h){const p=_*h*i.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(h))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;const f=o(820),_=o(274),h=o(627),p=o(457),w=o(56),S=o(374),u=o(345),n=o(859),a=o(147),l=o(782),c=o(855),m=o(965),L=o(742),v=o(310),x=o(733);class y extends n.Disposable{constructor(R,D,T,H,j,N,B,k,A){super(),this._terminal=R,this._characterJoinerService=D,this._charSizeService=T,this._coreBrowserService=H,this._coreService=j,this._decorationService=N,this._optionsService=B,this._themeService=k,this._cursorBlinkStateManager=new n.MutableDisposable,this._charAtlasDisposable=this.register(new n.MutableDisposable),this._observerDisposable=this.register(new n.MutableDisposable),this._model=new v.RenderModel,this._workCell=new l.CellData,this._workCell2=new l.CellData,this._rectangleRenderer=this.register(new n.MutableDisposable),this._glyphRenderer=this.register(new n.MutableDisposable),this._onChangeTextureAtlas=this.register(new u.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new u.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new u.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new _.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new x.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,B,this._themeService)],this.dimensions=(0,S.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(B.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");const P={antialias:!1,depth:!1,preserveDrawingBuffer:A};if(this._gl=this._canvas.getContext("webgl2",P),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",F=>{console.log("webglcontextlost event received"),F.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(F)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",F=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,h.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,w.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(F,W)=>this._setCanvasDevicePixelDimensions(F,W)),this.register(this._coreBrowserService.onWindowChange(F=>{this._observerDisposable.value=(0,w.observeDevicePixelDimensions)(this._canvas,F,(W,z)=>this._setCanvasDevicePixelDimensions(W,z))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,n.toDisposable)(()=>{for(const F of this._renderLayers)F.dispose();this._canvas.parentElement?.removeChild(this._canvas),(0,h.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._charAtlas?.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(R,D){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const T of this._renderLayers)T.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.value?.setDimensions(this.dimensions),this._rectangleRenderer.value?.handleResize(),this._glyphRenderer.value?.setDimensions(this.dimensions),this._glyphRenderer.value?.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const R of this._renderLayers)R.handleBlur(this._terminal);this._cursorBlinkStateManager.value?.pause(),this._requestRedrawViewport()}handleFocus(){for(const R of this._renderLayers)R.handleFocus(this._terminal);this._cursorBlinkStateManager.value?.resume(),this._requestRedrawViewport()}handleSelectionChanged(R,D,T){for(const H of this._renderLayers)H.handleSelectionChanged(this._terminal,R,D,T);this._model.selection.update(this._core,R,D,T),this._requestRedrawViewport()}handleCursorMove(){for(const R of this._renderLayers)R.handleCursorMove(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new L.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new m.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const R=(0,h.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==R&&(this._onChangeTextureAtlas.fire(R.pages[0].canvas),this._charAtlasDisposable.value=(0,n.getDisposeArrayDisposable)([(0,u.forwardEvent)(R.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,u.forwardEvent)(R.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=R,this._charAtlas.warmUp(),this._glyphRenderer.value?.setAtlas(this._charAtlas)}_clearModel(R){this._model.clear(),R&&this._glyphRenderer.value?.clear()}clearTextureAtlas(){this._charAtlas?.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const R of this._renderLayers)R.reset(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(R){return-1}deregisterCharacterJoiner(R){return!1}renderRows(R,D){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const T of this._renderLayers)T.handleGridChanged(this._terminal,R,D);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(R,D),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new p.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(R,D){const T=this._core;let H,j,N,B,k,A,P,F,W,z,q,Y,$,O,U=this._workCell;R=E(R,T.rows-1,0),D=E(D,T.rows-1,0);const G=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,ee=G-T.buffer.ydisp,Z=Math.min(this._terminal.buffer.active.cursorX,T.cols-1);let ce=-1;const Q=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let _e=!1;for(j=R;j<=D;j++)for(N=j+T.buffer.ydisp,B=T.buffer.lines.get(N),this._model.lineLengths[j]=0,k=this._characterJoinerService.getJoinedCharacters(N),$=0;$<T.cols;$++)if(H=this._cellColorResolver.result.bg,B.loadCell($,U),$===0&&(H=this._cellColorResolver.result.bg),A=!1,P=$,k.length>0&&$===k[0][0]&&(A=!0,F=k.shift(),U=new b(U,B.translateToString(!0,F[0],F[1]),F[1]-F[0]),P=F[1]-1),W=U.getChars(),z=U.getCode(),Y=(j*T.cols+$)*v.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(U,$,N,this.dimensions.device.cell.width),Q&&N===G&&($===Z&&(this._model.cursor={x:Z,y:ee,width:U.getWidth(),style:this._coreBrowserService.isFocused?T.options.cursorStyle||"block":T.options.cursorInactiveStyle,cursorWidth:T.options.cursorWidth,dpr:this._devicePixelRatio},ce=Z+U.getWidth()-1),$>=Z&&$<=ce&&(this._coreBrowserService.isFocused&&(T.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&T.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),z!==c.NULL_CELL_CODE&&(this._model.lineLengths[j]=$+1),(this._model.cells[Y]!==z||this._model.cells[Y+v.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[Y+v.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[Y+v.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(_e=!0,W.length>1&&(z|=v.COMBINED_CHAR_BIT_MASK),this._model.cells[Y]=z,this._model.cells[Y+v.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Y+v.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Y+v.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,q=U.getWidth(),this._glyphRenderer.value.updateCell($,j,z,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,W,q,H),A))for(U=this._workCell,$++;$<P;$++)O=(j*T.cols+$)*v.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell($,j,c.NULL_CELL_CODE,0,0,0,c.NULL_CELL_CHAR,0,0),this._model.cells[O]=c.NULL_CELL_CODE,this._model.cells[O+v.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+v.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+v.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;_e&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(R,D){this._canvas.width===R&&this._canvas.height===D||(this._canvas.width=R,this._canvas.height=D,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const R=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:R,end:R})}}i.WebglRenderer=y;class b extends a.AttributeData{constructor(R,D,T){super(),this.content=0,this.combinedData="",this.fg=R.fg,this.bg=R.bg,this.combinedData=D,this._width=T}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(R){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function E(M,R,D=0){return Math.max(Math.min(M,R),D)}i.JoinedCellData=b},381:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;const f=o(374);function _(h,p,w){const S=(0,f.throwIfFalsy)(h.createShader(p));if(h.shaderSource(S,w),h.compileShader(S),h.getShaderParameter(S,h.COMPILE_STATUS))return S;console.error(h.getShaderInfoLog(S)),h.deleteShader(S)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(h,p,w){const S=(0,f.throwIfFalsy)(h.createProgram());if(h.attachShader(S,(0,f.throwIfFalsy)(_(h,h.VERTEX_SHADER,p))),h.attachShader(S,(0,f.throwIfFalsy)(_(h,h.FRAGMENT_SHADER,w))),h.linkProgram(S),h.getProgramParameter(S,h.LINK_STATUS))return S;console.error(h.getProgramInfoLog(S)),h.deleteProgram(S)},i.createShader=_,i.expandFloat32Array=function(h,p){const w=Math.min(2*h.length,p),S=new Float32Array(w);for(let u=0;u<h.length;u++)S[u]=h[u];return S},i.GLTexture=class{constructor(h){this.texture=h,this.version=-1}}},592:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(627),_=o(237),h=o(374),p=o(859);class w extends p.Disposable{constructor(u,n,a,l,c,m,L,v){super(),this._container=n,this._alpha=c,this._coreBrowserService=m,this._optionsService=L,this._themeService=v,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${a}-layer`),this._canvas.style.zIndex=l.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(x=>{this._refreshCharAtlas(u,x),this.reset(u)})),this.register((0,p.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,h.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(u){}handleFocus(u){}handleCursorMove(u){}handleGridChanged(u,n,a){}handleSelectionChanged(u,n,a,l=!1){}_setTransparency(u,n){if(n===this._alpha)return;const a=this._canvas;this._alpha=n,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,a),this._refreshCharAtlas(u,this._themeService.colors),this.handleGridChanged(u,0,u.rows-1)}_refreshCharAtlas(u,n){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,f.acquireTextureAtlas)(u,this._optionsService.rawOptions,n,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(u,n){this._deviceCellWidth=n.device.cell.width,this._deviceCellHeight=n.device.cell.height,this._deviceCharWidth=n.device.char.width,this._deviceCharHeight=n.device.char.height,this._deviceCharLeft=n.device.char.left,this._deviceCharTop=n.device.char.top,this._canvas.width=n.device.canvas.width,this._canvas.height=n.device.canvas.height,this._canvas.style.width=`${n.css.canvas.width}px`,this._canvas.style.height=`${n.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(u,this._themeService.colors)}_fillBottomLineAtCells(u,n,a=1){this._ctx.fillRect(u*this._deviceCellWidth,(n+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,a*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(u,n,a,l){this._alpha?this._ctx.clearRect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,l*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,l*this._deviceCellHeight))}_fillCharTrueColor(u,n,a,l){this._ctx.font=this._getFont(u,!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipCell(a,l,n.getWidth()),this._ctx.fillText(n.getChars(),a*this._deviceCellWidth+this._deviceCharLeft,l*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(u,n,a){this._ctx.beginPath(),this._ctx.rect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(u,n,a){return`${a?"italic":""} ${n?u.options.fontWeightBold:u.options.fontWeight} ${u.options.fontSize*this._coreBrowserService.dpr}px ${u.options.fontFamily}`}}i.BaseRenderLayer=w},733:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),h=o(592);class p extends h.BaseRenderLayer{constructor(S,u,n,a,l,c,m){super(n,S,"link",u,!0,l,c,m),this.register(a.onShowLinkUnderline(L=>this._handleShowLinkUnderline(L))),this.register(a.onHideLinkUnderline(L=>this._handleHideLinkUnderline(L)))}resize(S,u){super.resize(S,u),this._state=void 0}reset(S){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const S=this._state.y2-this._state.y1-1;S>0&&this._clearCells(0,this._state.y1+1,this._state.cols,S),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(S){if(S.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:S.fg!==void 0&&(0,f.is256Color)(S.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[S.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,S.y1===S.y2)this._fillBottomLineAtCells(S.x1,S.y1,S.x2-S.x1);else{this._fillBottomLineAtCells(S.x1,S.y1,S.cols-S.x1);for(let u=S.y1+1;u<S.y2;u++)this._fillBottomLineAtCells(0,u,S.cols);this._fillBottomLineAtCells(0,S.y2,S.x2)}this._state=S}_handleHideLinkUnderline(S){this._clearCurrentLink()}}i.LinkRenderLayer=p},820:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,h){o.addEventListener(f,_,h);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,h))}}}},274:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),h=o(374);let p,w=0,S=0,u=!1,n=!1,a=!1,l=0;i.CellColorResolver=class{constructor(c,m,L,v,x,y){this._terminal=c,this._optionService=m,this._selectionRenderModel=L,this._decorationService=v,this._coreBrowserService=x,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(c,m,L,v){if(this.result.bg=c.bg,this.result.fg=c.fg,this.result.ext=268435456&c.bg?c.extended.ext:0,S=0,w=0,n=!1,u=!1,a=!1,p=this._themeService.colors,l=0,c.getCode()!==f.NULL_CELL_CODE&&c.extended.underlineStyle===4){const x=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));l=m*v%(2*Math.round(x))}if(this._decorationService.forEachDecorationAtCell(m,L,"bottom",x=>{x.backgroundColorRGB&&(S=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,L),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:S=(16777215&this.result.fg)<<8|255;break;default:S=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:S=(16777215&this.result.bg)<<8|255}S=_.rgba.blend(S,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else S=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(w=p.selectionForeground.rgba>>8&16777215,u=!0),(0,h.treatGlyphAsBackgroundColor)(c.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))w=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}w=_.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}u=!0}}this._decorationService.forEachDecorationAtCell(m,L,"top",x=>{x.backgroundColorRGB&&(S=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),n&&(S=a?-16777216&c.bg&-134217729|S|50331648:-16777216&c.bg|S|50331648),u&&(w=-16777216&c.fg&-67108865|w|50331648),67108864&this.result.fg&&(n&&!u&&(w=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,u=!0),!n&&u&&(S=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?S:this.result.bg,this.result.fg=u?w:this.result.fg,this.result.ext&=536870911,this.result.ext|=l<<29&3758096384}}},627:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),h=[];i.acquireTextureAtlas=function(p,w,S,u,n,a,l,c){const m=(0,_.generateConfig)(u,n,a,l,w,S,c);for(let x=0;x<h.length;x++){const y=h[x],b=y.ownedBy.indexOf(p);if(b>=0){if((0,_.configEquals)(y.config,m))return y.atlas;y.ownedBy.length===1?(y.atlas.dispose(),h.splice(x,1)):y.ownedBy.splice(b,1);break}}for(let x=0;x<h.length;x++){const y=h[x];if((0,_.configEquals)(y.config,m))return y.ownedBy.push(p),y.atlas}const L=p._core,v={atlas:new f.TextureAtlas(document,m,L.unicodeService),config:m,ownedBy:[p]};return h.push(v),v.atlas},i.removeTerminalFromCache=function(p){for(let w=0;w<h.length;w++){const S=h[w].ownedBy.indexOf(p);if(S!==-1){h[w].ownedBy.length===1?(h[w].atlas.dispose(),h.splice(w,1)):h[w].ownedBy.splice(S,1);break}}}},197:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,h,p,w,S,u,n){const a={foreground:u.foreground,background:u.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:u.ansi.slice(),contrastCache:u.contrastCache,halfContrastCache:u.halfContrastCache};return{customGlyphs:S.customGlyphs,devicePixelRatio:n,letterSpacing:S.letterSpacing,lineHeight:S.lineHeight,deviceCellWidth:_,deviceCellHeight:h,deviceCharWidth:p,deviceCharHeight:w,fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:S.fontWeightBold,allowTransparency:S.allowTransparency,drawBoldTextInBrightColors:S.drawBoldTextInBrightColors,minimumContrastRatio:S.minimumContrastRatio,colors:a}},i.configEquals=function(_,h){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==h.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===h.devicePixelRatio&&_.customGlyphs===h.customGlyphs&&_.lineHeight===h.lineHeight&&_.letterSpacing===h.letterSpacing&&_.fontFamily===h.fontFamily&&_.fontSize===h.fontSize&&_.fontWeight===h.fontWeight&&_.fontWeightBold===h.fontWeightBold&&_.allowTransparency===h.allowTransparency&&_.deviceCharWidth===h.deviceCharWidth&&_.deviceCharHeight===h.deviceCharHeight&&_.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&_.minimumContrastRatio===h.minimumContrastRatio&&_.colors.foreground.rgba===h.colors.foreground.rgba&&_.colors.background.rgba===h.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},1 L${.5-u},.5 L1,.5 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M1,${.5-n} L${.5-u},${.5-n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M${.5+u},1 L${.5+u},.5 L0,.5 M${.5-u},.5 L${.5-u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5+u},${.5-n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(u,n)=>`M1,.5 L${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0 M1,${.5+n} L${.5-u},${.5+n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(u,n)=>`M0,.5 L${.5+u},.5 L${.5+u},0 M${.5-u},.5 L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M0,${.5+n} L${.5+u},${.5+n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1 M${.5+u},.5 L1,.5`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M0,.5 L${.5-u},.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M${.5+u},0 L${.5+u},1 M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},1 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(u,n,a,l,c,m,L,v){const x=i.blockElementDefinitions[n];if(x)return function(M,R,D,T,H,j){for(let N=0;N<R.length;N++){const B=R[N],k=H/8,A=j/8;M.fillRect(D+B.x*k,T+B.y*A,B.w*k,B.h*A)}}(u,x,a,l,c,m),!0;const y=_[n];if(y)return function(M,R,D,T,H,j){let N=h.get(R);N||(N=new Map,h.set(R,N));const B=M.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let k=N.get(B);if(!k){const A=R[0].length,P=R.length,F=M.canvas.ownerDocument.createElement("canvas");F.width=A,F.height=P;const W=(0,f.throwIfFalsy)(F.getContext("2d")),z=new ImageData(A,P);let q,Y,$,O;if(B.startsWith("#"))q=parseInt(B.slice(1,3),16),Y=parseInt(B.slice(3,5),16),$=parseInt(B.slice(5,7),16),O=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[q,Y,$,O]=B.substring(5,B.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<P;U++)for(let G=0;G<A;G++)z.data[4*(U*A+G)]=q,z.data[4*(U*A+G)+1]=Y,z.data[4*(U*A+G)+2]=$,z.data[4*(U*A+G)+3]=R[U][G]*(255*O);W.putImageData(z,0,0),k=(0,f.throwIfFalsy)(M.createPattern(F,null)),N.set(B,k)}M.fillStyle=k,M.fillRect(D,T,H,j)}(u,y,a,l,c,m),!0;const b=i.boxDrawingDefinitions[n];if(b)return function(M,R,D,T,H,j,N){M.strokeStyle=M.fillStyle;for(const[B,k]of Object.entries(R)){let A;M.beginPath(),M.lineWidth=N*Number.parseInt(B),A=typeof k=="function"?k(.15,.15/j*H):k;for(const P of A.split(" ")){const F=P[0],W=w[F];if(!W){console.error(`Could not find drawing instructions for "${F}"`);continue}const z=P.substring(1).split(",");z[0]&&z[1]&&W(M,S(z,H,j,D,T,!0,N))}M.stroke(),M.closePath()}}(u,b,a,l,c,m,v),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(M,R,D,T,H,j,N,B){const k=new Path2D;k.rect(D,T,H,j),M.clip(k),M.beginPath();const A=N/12;M.lineWidth=B*A;for(const P of R.d.split(" ")){const F=P[0],W=w[F];if(!W){console.error(`Could not find drawing instructions for "${F}"`);continue}const z=P.substring(1).split(",");z[0]&&z[1]&&W(M,S(z,H,j,D,T,!1,B,(R.leftPadding??0)*(A/2),(R.rightPadding??0)*(A/2)))}R.type===1?(M.strokeStyle=M.fillStyle,M.stroke()):M.fill(),M.closePath()}(u,E,a,l,c,m,L,v),!0)};const h=new Map;function p(u,n,a=0){return Math.max(Math.min(u,n),a)}const w={C:(u,n)=>u.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(u,n)=>u.lineTo(n[0],n[1]),M:(u,n)=>u.moveTo(n[0],n[1])};function S(u,n,a,l,c,m,L,v=0,x=0){const y=u.map(b=>parseFloat(b)||parseInt(b));if(y.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<y.length;b+=2)y[b]*=n-v*L-x*L,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,n,0)),y[b]+=l+v*L;for(let b=1;b<y.length;b+=2)y[b]*=a,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,a,0)),y[b]+=c;return y}},56:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,h,p){let w=new h.ResizeObserver(S=>{const u=S.find(l=>l.target===_);if(!u)return;if(!("devicePixelContentBoxSize"in u))return w?.disconnect(),void(w=void 0);const n=u.devicePixelContentBoxSize[0].inlineSize,a=u.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{w.observe(_,{box:["device-pixel-content-box"]})}catch{w.disconnect(),w=void 0}return(0,f.toDisposable)(()=>w?.disconnect())}},374:(C,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,h,p,w){return h===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(h){return 9472<=h&&h<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,h,p=0){return(_-(2*Math.round(h)-p))%(2*Math.round(h))}},296:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,h,p,w=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const S=_.buffers.active.ydisp,u=h[1]-S,n=p[1]-S,a=Math.max(u,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=h[0],this.endCol=p[0])}isCellSelected(_,h,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),h=o(374),p=o(160),w=o(345),S=o(485),u=o(385),n=o(147),a=o(855),l={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let c;class m{get pages(){return this._pages}constructor(b,E,M){this._document=b,this._config=E,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new S.FourKeyMap,this._cacheMapCombined=new S.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new w.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new w.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=x(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const b=new u.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const M=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(N=>2*N.canvas.width<=(m.maxTextureSize||4096)).sort((N,B)=>B.canvas.width!==N.canvas.width?B.canvas.width-N.canvas.width:B.percentageUsed-N.percentageUsed);let M=-1,R=0;for(let N=0;N<E.length;N++)if(E[N].canvas.width!==R)M=N,R=E[N].canvas.width;else if(N-M==3)break;const D=E.slice(M,M+4),T=D.map(N=>N.glyphs[0].texturePage).sort((N,B)=>N>B?1:-1),H=this.pages.length-D.length,j=this._mergePages(D,H);j.version++;for(let N=T.length-1;N>=0;N--)this._deletePage(T[N]);this.pages.push(j),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(j.canvas)}const b=new L(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){const M=2*b[0].canvas.width,R=new L(this._document,M,b);for(const[D,T]of b.entries()){const H=D*T.canvas.width%M,j=Math.floor(D/2)*T.canvas.height;R.ctx.drawImage(T.canvas,H,j);for(const B of T.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/M,B.sizeClipSpace.y=B.size.y/M,B.texturePosition.x+=H,B.texturePosition.y+=j,B.texturePositionClipSpace.x=B.texturePosition.x/M,B.texturePositionClipSpace.y=B.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(T.canvas);const N=this._activePages.indexOf(T);N!==-1&&this._activePages.splice(N,1)}return R}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){const M=this._pages[E];for(const R of M.glyphs)R.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(b,E,M,R,D){return this._getFromCacheMap(this._cacheMapCombined,b,E,M,R,D)}getRasterizedGlyph(b,E,M,R,D){return this._getFromCacheMap(this._cacheMap,b,E,M,R,D)}_getFromCacheMap(b,E,M,R,D,T=!1){return c=b.get(E,M,R,D),c||(c=this._drawToCache(E,M,R,D,T),b.set(E,M,R,D,c)),c}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,M,R){if(this._config.allowTransparency)return p.NULL_COLOR;let D;switch(b){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(E);break;case 50331648:const T=n.AttributeData.toColorRGB(E);D=p.channels.toColor(T[0],T[1],T[2]);break;default:D=M?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return D}_getForegroundColor(b,E,M,R,D,T,H,j,N,B){const k=this._getMinimumContrastColor(b,E,M,R,D,T,H,N,j,B);if(k)return k;let A;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&N&&T<8&&(T+=8),A=this._getColorFromAnsiIndex(T);break;case 50331648:const P=n.AttributeData.toColorRGB(T);A=p.channels.toColor(P[0],P[1],P[2]);break;default:A=H?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=p.color.opaque(A)),j&&(A=p.color.multiplyOpacity(A,f.DIM_OPACITY)),A}_resolveBackgroundRgba(b,E,M){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,M,R){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&R&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,M,R,D,T,H,j,N,B){if(this._config.minimumContrastRatio===1||B)return;const k=this._getContrastCache(N),A=k.getColor(b,R);if(A!==void 0)return A||void 0;const P=this._resolveBackgroundRgba(E,M,H),F=this._resolveForegroundRgba(D,T,H,j),W=p.rgba.ensureContrastRatio(P,F,this._config.minimumContrastRatio/(N?2:1));if(!W)return void k.setColor(b,R,null);const z=p.channels.toColor(W>>24&255,W>>16&255,W>>8&255);return k.setColor(b,R,z),z}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,M,R,D=!1){const T=typeof b=="number"?String.fromCharCode(b):b,H=Math.min(this._config.deviceCellWidth*Math.max(T.length,2)+4,this._textureSize);this._tmpCanvas.width<H&&(this._tmpCanvas.width=H);const j=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<j&&(this._tmpCanvas.height=j),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=R,this._workAttributeData.isInvisible())return l;const N=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),k=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),P=!!this._workAttributeData.isUnderline(),F=!!this._workAttributeData.isStrikethrough(),W=!!this._workAttributeData.isOverline();let z=this._workAttributeData.getFgColor(),q=this._workAttributeData.getFgColorMode(),Y=this._workAttributeData.getBgColor(),$=this._workAttributeData.getBgColorMode();if(B){const K=z;z=Y,Y=K;const ie=q;q=$,$=ie}const O=this._getBackgroundColor($,Y,B,k);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const U=N?this._config.fontWeightBold:this._config.fontWeight,G=A?"italic":"";this._tmpCtx.font=`${G} ${U} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const ee=T.length===1&&(0,h.isPowerlineGlyph)(T.charCodeAt(0)),Z=T.length===1&&(0,h.isRestrictedPowerlineGlyph)(T.charCodeAt(0)),ce=this._getForegroundColor(E,$,Y,M,q,z,B,k,N,(0,h.treatGlyphAsBackgroundColor)(T.charCodeAt(0)));this._tmpCtx.fillStyle=ce.css;const Q=Z?0:4;let _e=!1;this._config.customGlyphs!==!1&&(_e=(0,_.tryDrawCustomChar)(this._tmpCtx,T,Q,Q,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Se,oe=!ee;if(Se=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),P){this._tmpCtx.save();const K=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ie=K%2==1?.5:0;if(this._tmpCtx.lineWidth=K,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())oe=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{oe=!1;let de=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&de<8&&(de+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(de).css}this._tmpCtx.beginPath();const pe=Q,he=Math.ceil(Q+this._config.deviceCharHeight)-ie-(D?2*K:0),X=he+K,fe=he+2*K;let ue=this._workAttributeData.getUnderlineVariantOffset();for(let de=0;de<Se;de++){this._tmpCtx.save();const ae=pe+de*this._config.deviceCellWidth,le=pe+(de+1)*this._config.deviceCellWidth,ct=ae+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ae,he),this._tmpCtx.lineTo(le,he),this._tmpCtx.moveTo(ae,fe),this._tmpCtx.lineTo(le,fe);break;case 3:const ht=K<=1?fe:Math.ceil(Q+this._config.deviceCharHeight-K/2)-ie,et=K<=1?he:Math.ceil(Q+this._config.deviceCharHeight+K/2)-ie,Tt=new Path2D;Tt.rect(ae,he,this._config.deviceCellWidth,fe-he),this._tmpCtx.clip(Tt),this._tmpCtx.moveTo(ae-this._config.deviceCellWidth/2,X),this._tmpCtx.bezierCurveTo(ae-this._config.deviceCellWidth/2,et,ae,et,ae,X),this._tmpCtx.bezierCurveTo(ae,ht,ct,ht,ct,X),this._tmpCtx.bezierCurveTo(ct,et,le,et,le,X),this._tmpCtx.bezierCurveTo(le,ht,le+this._config.deviceCellWidth/2,ht,le+this._config.deviceCellWidth/2,X);break;case 4:const tt=ue===0?0:ue>=K?2*K-ue:K-ue;ue>=K||tt===0?(this._tmpCtx.setLineDash([Math.round(K),Math.round(K)]),this._tmpCtx.moveTo(ae+tt,he),this._tmpCtx.lineTo(le,he)):(this._tmpCtx.setLineDash([Math.round(K),Math.round(K)]),this._tmpCtx.moveTo(ae,he),this._tmpCtx.lineTo(ae+tt,he),this._tmpCtx.moveTo(ae+tt+K,he),this._tmpCtx.lineTo(le,he)),ue=(0,h.computeNextVariantOffset)(le-ae,K,ue);break;case 5:const rt=.6,wi=.3,bt=le-ae,er=Math.floor(rt*bt),xi=Math.floor(wi*bt),oo=bt-er-xi;this._tmpCtx.setLineDash([er,xi,oo]),this._tmpCtx.moveTo(ae,he),this._tmpCtx.lineTo(le,he);break;default:this._tmpCtx.moveTo(ae,he),this._tmpCtx.lineTo(le,he)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!_e&&this._config.fontSize>=12&&!this._config.allowTransparency&&T!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const de=this._tmpCtx.measureText(T);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in de&&de.actualBoundingBoxDescent>0){this._tmpCtx.save();const ae=new Path2D;ae.rect(pe,he-Math.ceil(K/2),this._config.deviceCellWidth*Se,fe-he+Math.ceil(K/2)),this._tmpCtx.clip(ae),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=O.css,this._tmpCtx.strokeText(T,Q,Q+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(W){const K=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ie=K%2==1?.5:0;this._tmpCtx.lineWidth=K,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Q,Q+ie),this._tmpCtx.lineTo(Q+this._config.deviceCharWidth*Se,Q+ie),this._tmpCtx.stroke()}if(_e||this._tmpCtx.fillText(T,Q,Q+this._config.deviceCharHeight),T==="_"&&!this._config.allowTransparency){let K=v(this._tmpCtx.getImageData(Q,Q,this._config.deviceCellWidth,this._config.deviceCellHeight),O,ce,oe);if(K)for(let ie=1;ie<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(T,Q,Q+this._config.deviceCharHeight-ie),K=v(this._tmpCtx.getImageData(Q,Q,this._config.deviceCellWidth,this._config.deviceCellHeight),O,ce,oe),K);ie++);}if(F){const K=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),ie=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=K,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Q,Q+Math.floor(this._config.deviceCharHeight/2)-ie),this._tmpCtx.lineTo(Q+this._config.deviceCharWidth*Se,Q+Math.floor(this._config.deviceCharHeight/2)-ie),this._tmpCtx.stroke()}this._tmpCtx.restore();const Ne=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Qe;if(Qe=this._config.allowTransparency?function(K){for(let ie=0;ie<K.data.length;ie+=4)if(K.data[ie+3]>0)return!1;return!0}(Ne):v(Ne,O,ce,oe),Qe)return l;const se=this._findGlyphBoundingBox(Ne,this._workBoundingBox,H,Z,_e,Q);let te,re;for(;;){if(this._activePages.length===0){const K=this._createNewPage();te=K,re=K.currentRow,re.height=se.size.y;break}te=this._activePages[this._activePages.length-1],re=te.currentRow;for(const K of this._activePages)se.size.y<=K.currentRow.height&&(te=K,re=K.currentRow);for(let K=this._activePages.length-1;K>=0;K--)for(const ie of this._activePages[K].fixedRows)ie.height<=re.height&&se.size.y<=ie.height&&(te=this._activePages[K],re=ie);if(re.y+se.size.y>=te.canvas.height||re.height>se.size.y+2){let K=!1;if(te.currentRow.y+te.currentRow.height+se.size.y>=te.canvas.height){let ie;for(const pe of this._activePages)if(pe.currentRow.y+pe.currentRow.height+se.size.y<pe.canvas.height){ie=pe;break}if(ie)te=ie;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&re.y+se.size.y<=te.canvas.height&&re.height>=se.size.y&&re.x+se.size.x<=te.canvas.width)K=!0;else{const pe=this._createNewPage();te=pe,re=pe.currentRow,re.height=se.size.y,K=!0}}K||(te.currentRow.height>0&&te.fixedRows.push(te.currentRow),re={x:0,y:te.currentRow.y+te.currentRow.height,height:se.size.y},te.fixedRows.push(re),te.currentRow={x:0,y:re.y+re.height,height:0})}if(re.x+se.size.x<=te.canvas.width)break;re===te.currentRow?(re.x=0,re.y+=re.height,re.height=0):te.fixedRows.splice(te.fixedRows.indexOf(re),1)}return se.texturePage=this._pages.indexOf(te),se.texturePosition.x=re.x,se.texturePosition.y=re.y,se.texturePositionClipSpace.x=re.x/te.canvas.width,se.texturePositionClipSpace.y=re.y/te.canvas.height,se.sizeClipSpace.x/=te.canvas.width,se.sizeClipSpace.y/=te.canvas.height,re.height=Math.max(re.height,se.size.y),re.x+=se.size.x,te.ctx.putImageData(Ne,se.texturePosition.x-this._workBoundingBox.left,se.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,se.size.x,se.size.y),te.addGlyph(se),te.version++,se}_findGlyphBoundingBox(b,E,M,R,D,T){E.top=0;const H=R?this._config.deviceCellHeight:this._tmpCanvas.height,j=R?this._config.deviceCellWidth:M;let N=!1;for(let B=0;B<H;B++){for(let k=0;k<j;k++){const A=B*this._tmpCanvas.width*4+4*k+3;if(b.data[A]!==0){E.top=B,N=!0;break}}if(N)break}E.left=0,N=!1;for(let B=0;B<T+j;B++){for(let k=0;k<H;k++){const A=k*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.left=B,N=!0;break}}if(N)break}E.right=j,N=!1;for(let B=T+j-1;B>=T;B--){for(let k=0;k<H;k++){const A=k*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.right=B,N=!0;break}}if(N)break}E.bottom=H,N=!1;for(let B=H-1;B>=0;B--){for(let k=0;k<j;k++){const A=B*this._tmpCanvas.width*4+4*k+3;if(b.data[A]!==0){E.bottom=B,N=!0;break}}if(N)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+T+(R||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+T+(R||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(const R of M)this._glyphs.push(...R.glyphs),this._usedPixels+=R._usedPixels;this.canvas=x(b,E,E),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function v(y,b,E,M){const R=b.rgba>>>24,D=b.rgba>>>16&255,T=b.rgba>>>8&255,H=E.rgba>>>24,j=E.rgba>>>16&255,N=E.rgba>>>8&255,B=Math.floor((Math.abs(R-H)+Math.abs(D-j)+Math.abs(T-N))/12);let k=!0;for(let A=0;A<y.data.length;A+=4)y.data[A]===R&&y.data[A+1]===D&&y.data[A+2]===T||M&&Math.abs(y.data[A]-R)+Math.abs(y.data[A+1]-D)+Math.abs(y.data[A+2]-T)<B?y.data[A+3]=0:k=!1;return k}function x(y,b,E){const M=y.createElement("canvas");return M.width=b,M.height=E,M}},160:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,h=0;var p,w,S,u,n;function a(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,L,v,x){return x!==void 0?`#${a(m)}${a(L)}${a(v)}${a(x)}`:`#${a(m)}${a(L)}${a(v)}`},c.toRgba=function(m,L,v,x=255){return(m<<24|L<<16|v<<8|x)>>>0},c.toColor=function(m,L,v,x){return{css:c.toCss(m,L,v,x),rgba:c.toRgba(m,L,v,x)}}}(p||(i.channels=p={})),function(c){function m(L,v){return h=Math.round(255*v),[o,f,_]=n.toChannels(L.rgba),{css:p.toCss(o,f,_,h),rgba:p.toRgba(o,f,_,h)}}c.blend=function(L,v){if(h=(255&v.rgba)/255,h===1)return{css:v.css,rgba:v.rgba};const x=v.rgba>>24&255,y=v.rgba>>16&255,b=v.rgba>>8&255,E=L.rgba>>24&255,M=L.rgba>>16&255,R=L.rgba>>8&255;return o=E+Math.round((x-E)*h),f=M+Math.round((y-M)*h),_=R+Math.round((b-R)*h),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},c.isOpaque=function(L){return(255&L.rgba)==255},c.ensureContrastRatio=function(L,v,x){const y=n.ensureContrastRatio(L.rgba,v.rgba,x);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},c.opaque=function(L){const v=(255|L.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},c.opacity=m,c.multiplyOpacity=function(L,v){return h=255&L.rgba,m(L,h*v/255)},c.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(i.color=w={})),function(c){let m,L;try{const v=document.createElement("canvas");v.width=1,v.height=1;const x=v.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",L=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),h=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,h);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const x=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return o=parseInt(x[1]),f=parseInt(x[2]),_=parseInt(x[3]),h=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),p.toColor(o,f,_,h);if(!m||!L)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=L,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,h]=m.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,h),css:v}}}(S||(i.css=S={})),function(c){function m(L,v,x){const y=L/255,b=v/255,E=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}c.relativeLuminance=function(L){return m(L>>16&255,L>>8&255,255&L)},c.relativeLuminance2=m}(u||(i.rgb=u={})),function(c){function m(v,x,y){const b=v>>24&255,E=v>>16&255,M=v>>8&255;let R=x>>24&255,D=x>>16&255,T=x>>8&255,H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));for(;H<y&&(R>0||D>0||T>0);)R-=Math.max(0,Math.ceil(.1*R)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));return(R<<24|D<<16|T<<8|255)>>>0}function L(v,x,y){const b=v>>24&255,E=v>>16&255,M=v>>8&255;let R=x>>24&255,D=x>>16&255,T=x>>8&255,H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));for(;H<y&&(R<255||D<255||T<255);)R=Math.min(255,R+Math.ceil(.1*(255-R))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));return(R<<24|D<<16|T<<8|255)>>>0}c.blend=function(v,x){if(h=(255&x)/255,h===1)return x;const y=x>>24&255,b=x>>16&255,E=x>>8&255,M=v>>24&255,R=v>>16&255,D=v>>8&255;return o=M+Math.round((y-M)*h),f=R+Math.round((b-R)*h),_=D+Math.round((E-D)*h),p.toRgba(o,f,_)},c.ensureContrastRatio=function(v,x,y){const b=u.relativeLuminance(v>>8),E=u.relativeLuminance(x>>8);if(l(b,E)<y){if(E<b){const D=m(v,x,y),T=l(b,u.relativeLuminance(D>>8));if(T<y){const H=L(v,x,y);return T>l(b,u.relativeLuminance(H>>8))?D:H}return D}const M=L(v,x,y),R=l(b,u.relativeLuminance(M>>8));if(R<y){const D=m(v,x,y);return R>l(b,u.relativeLuminance(D>>8))?M:D}return M}},c.reduceLuminance=m,c.increaseLuminance=L,c.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},345:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(C,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,h,p){this._data[_]||(this._data[_]={}),this._data[_][h]=p}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,h,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(h,p,w)}get(f,_,h,p){return this._data.get(f,_)?.get(h,p)}clear(){this._data.clear()}}},399:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,u=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),u=Math.max(S,u),a=w.timeRemaining(),1.5*u>a)return n-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-S))}ms`),void this._start();n=a}this.clear()}}class h extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new o;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),h=o(147);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const u=new p;return u.setFromCharData(S),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const n=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let h="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let h=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[h++]=1024*(this._interim-55296)+w-56320+65536:(f[h++]=this._interim,f[h++]=w),this._interim=0}for(let w=p;w<_;++w){const S=o.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=_)return this._interim=S,h;const u=o.charCodeAt(w);56320<=u&&u<=57343?f[h++]=1024*(S-55296)+u-56320+65536:(f[h++]=S,f[h++]=u)}else S!==65279&&(f[h++]=S)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let h,p,w,S,u=0,n=0,a=0;if(this.interim[0]){let m=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let v,x=0;for(;(v=63&this.interim[++x])&&x<4;)L<<=6,L|=v;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-x;for(;a<b;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[x++]=v,L<<=6,L|=63&v}m||(y===2?L<128?a--:f[u++]=L:y===3?L<2048||L>=55296&&L<=57343||L===65279||(f[u++]=L):L<65536||L>1114111||(f[u++]=L)),this.interim.fill(0)}const l=_-4;let c=a;for(;c<_;){for(;!(!(c<l)||128&(h=o[c])||128&(p=o[c+1])||128&(w=o[c+2])||128&(S=o[c+3]));)f[u++]=h,f[u++]=p,f[u++]=w,f[u++]=S,c+=4;if(h=o[c++],h<128)f[u++]=h;else if((224&h)==192){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(n=(31&h)<<6|63&p,n<128){c--;continue}f[u++]=n}else if((240&h)==224){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[c++],(192&w)!=128){c--;continue}if(n=(15&h)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&h)==240){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[c++],(192&w)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=w,u;if(S=o[c++],(192&S)!=128){c--;continue}if(n=(7&h)<<18|(63&p)<<12|(63&w)<<6|63&S,n<65536||n>1114111)continue;f[u++]=n}}return u}}},776:function(C,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,L=arguments.length,v=L<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(v=(L<3?m(v):L>3?m(a,l,v):m(a,l))||v);return L>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=o(859),p=o(97),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let S,u=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){S=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(S.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,m);S.trace(`GlyphRenderer#${c.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const L=c.apply(this,m);return S.trace(`GlyphRenderer#${c.name} return`,L),L}}},726:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(p,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(h,p,S)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},97:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(C){var i=s[C];if(i!==void 0)return i.exports;var o=s[C]={exports:{}};return r[C].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var C=g;Object.defineProperty(C,"__esModule",{value:!0}),C.WebglAddon=void 0;const i=d(345),o=d(859),f=d(399),_=d(666),h=d(776);class p extends o.Disposable{constructor(S){if(f.isSafari&&(0,f.getSafariVersion)()<16){const u={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",u))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=S,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(S){const u=S._core;if(!S.element)return void this.register(u.onWillOpen(()=>this.activate(S)));this._terminal=S;const n=u.coreService,a=u.optionsService,l=u,c=l._renderService,m=l._characterJoinerService,L=l._charSizeService,v=l._coreBrowserService,x=l._decorationService,y=l._logService,b=l._themeService;(0,h.setTraceLogger)(y),this._renderer=this.register(new _.WebglRenderer(S,m,L,v,n,x,a,b,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),c.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{const E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(S.cols,S.rows)}))}get textureAtlas(){return this._renderer?.textureAtlas}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}C.WebglAddon=p})(),g})())})(wf);var Om=wf.exports,xf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={903:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(274),_=o(627),h=o(237),p=o(860),w=o(374),S=o(296),u=o(345),n=o(859),a=o(399),l=o(855);class c extends n.Disposable{get canvas(){return this._canvas}get cacheCanvas(){return this._charAtlas?.pages[0].canvas}constructor(v,x,y,b,E,M,R,D,T,H){super(),this._terminal=v,this._container=x,this._alpha=E,this._themeService=M,this._bufferService=R,this._optionsService=D,this._decorationService=T,this._coreBrowserService=H,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,S.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new n.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new f.CellColorResolver(this._terminal,this._optionsService,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${y}-layer`),this._canvas.style.zIndex=b.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(j=>{this._refreshCharAtlas(j),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,n.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,w.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(v,x){}handleSelectionChanged(v,x,y=!1){this._selectionModel.update(this._terminal._core,v,x,y)}_setTransparency(v){if(v===this._alpha)return;const x=this._canvas;this._alpha=v,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,x),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(v){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,_.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,v,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,u.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let x=0;x<this._charAtlas.pages.length;x++)this._bitmapGenerator[x]=new m(this._charAtlas.pages[x].canvas)}}resize(v){this._deviceCellWidth=v.device.cell.width,this._deviceCellHeight=v.device.cell.height,this._deviceCharWidth=v.device.char.width,this._deviceCharHeight=v.device.char.height,this._deviceCharLeft=v.device.char.left,this._deviceCharTop=v.device.char.top,this._canvas.width=v.device.canvas.width,this._canvas.height=v.device.canvas.height,this._canvas.style.width=`${v.css.canvas.width}px`,this._canvas.style.height=`${v.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){this._charAtlas?.clearTexture()}_fillCells(v,x,y,b){this._ctx.fillRect(v*this._deviceCellWidth,x*this._deviceCellHeight,y*this._deviceCellWidth,b*this._deviceCellHeight)}_fillMiddleLineAtCells(v,x,y=1){const b=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(v*this._deviceCellWidth,(x+1)*this._deviceCellHeight-b-this._coreBrowserService.dpr,y*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(v,x,y=1,b=0){this._ctx.fillRect(v*this._deviceCellWidth,(x+1)*this._deviceCellHeight+b-this._coreBrowserService.dpr-1,y*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(v,x,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b;for(let E=0;E<y;E++){const M=(v+E)*this._deviceCellWidth,R=(v+E+.5)*this._deviceCellWidth,D=(v+E+1)*this._deviceCellWidth,T=(x+1)*this._deviceCellHeight-b-1,H=T-b,j=T+b;this._ctx.moveTo(M,T),this._ctx.bezierCurveTo(M,H,R,H,R,T),this._ctx.bezierCurveTo(R,j,D,j,D,T)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(v,x,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b,this._ctx.setLineDash([2*b,b]);const E=v*this._deviceCellWidth,M=(x+1)*this._deviceCellHeight-b-1;this._ctx.moveTo(E,M);for(let R=0;R<y;R++){const D=(v+y+R)*this._deviceCellWidth;this._ctx.lineTo(D,M)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(v,x,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b,this._ctx.setLineDash([4*b,3*b]);const E=v*this._deviceCellWidth,M=(v+y)*this._deviceCellWidth,R=(x+1)*this._deviceCellHeight-b-1;this._ctx.moveTo(E,R),this._ctx.lineTo(M,R),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(v,x,y){this._ctx.fillRect(v*this._deviceCellWidth,x*this._deviceCellHeight,this._coreBrowserService.dpr*y,this._deviceCellHeight)}_strokeRectAtCell(v,x,y,b){const E=this._coreBrowserService.dpr;this._ctx.lineWidth=E,this._ctx.strokeRect(v*this._deviceCellWidth+E/2,x*this._deviceCellHeight+E/2,y*this._deviceCellWidth-E,b*this._deviceCellHeight-E)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(v,x,y,b){this._alpha?this._ctx.clearRect(v*this._deviceCellWidth,x*this._deviceCellHeight,y*this._deviceCellWidth,b*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(v*this._deviceCellWidth,x*this._deviceCellHeight,y*this._deviceCellWidth,b*this._deviceCellHeight))}_fillCharTrueColor(v,x,y){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=h.TEXT_BASELINE,this._clipRow(y);let b=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(b=(0,p.tryDrawCustomChar)(this._ctx,v.getChars(),x*this._deviceCellWidth,y*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),b||this._ctx.fillText(v.getChars(),x*this._deviceCellWidth+this._deviceCharLeft,y*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(v,x,y){const b=v.getChars(),E=v.getCode(),M=v.getWidth();if(this._cellColorResolver.resolve(v,x,this._bufferService.buffer.ydisp+y,this._deviceCellWidth),!this._charAtlas)return;let R;if(R=b&&b.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(b,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(v.getCode()||l.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),!R.size.x||!R.size.y)return;this._ctx.save(),this._clipRow(y),this._bitmapGenerator[R.texturePage]&&this._charAtlas.pages[R.texturePage].canvas!==this._bitmapGenerator[R.texturePage].canvas&&(this._bitmapGenerator[R.texturePage]?.bitmap?.close(),delete this._bitmapGenerator[R.texturePage]),this._charAtlas.pages[R.texturePage].version!==this._bitmapGenerator[R.texturePage]?.version&&(this._bitmapGenerator[R.texturePage]||(this._bitmapGenerator[R.texturePage]=new m(this._charAtlas.pages[R.texturePage].canvas)),this._bitmapGenerator[R.texturePage].refresh(),this._bitmapGenerator[R.texturePage].version=this._charAtlas.pages[R.texturePage].version);let D=R.size.x;this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,w.allowRescaling)(E,M,R.size.x,this._deviceCellWidth)&&(D=this._deviceCellWidth-1),this._ctx.drawImage(this._bitmapGenerator[R.texturePage]?.bitmap||this._charAtlas.pages[R.texturePage].canvas,R.texturePosition.x,R.texturePosition.y,R.size.x,R.size.y,x*this._deviceCellWidth+this._deviceCharLeft-R.offset.x,y*this._deviceCellHeight+this._deviceCharTop-R.offset.y,D,R.size.y),this._ctx.restore()}_clipRow(v){this._ctx.beginPath(),this._ctx.rect(0,v*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(v,x){return`${x?"italic":""} ${v?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}i.BaseRenderLayer=c;class m{get bitmap(){return this._bitmap}constructor(v){this.canvas=v,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){this._bitmap?.close(),this._bitmap=void 0,a.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){this._state===0&&(this._bitmap?.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(v=>{this._state===2?this.refresh():this._bitmap=v,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasRenderer=void 0;const f=o(627),_=o(56),h=o(374),p=o(345),w=o(859),S=o(873),u=o(43),n=o(630),a=o(744);class l extends w.Disposable{constructor(m,L,v,x,y,b,E,M,R,D,T){super(),this._terminal=m,this._screenElement=L,this._bufferService=x,this._charSizeService=y,this._optionsService=b,this._coreBrowserService=R,this._themeService=T,this._observerDisposable=this.register(new w.MutableDisposable),this._onRequestRedraw=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new p.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new p.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const H=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new a.TextRenderLayer(this._terminal,this._screenElement,0,H,this._bufferService,this._optionsService,E,D,this._coreBrowserService,T),new n.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,D,this._optionsService,T),new u.LinkRenderLayer(this._terminal,this._screenElement,2,v,this._bufferService,this._optionsService,D,this._coreBrowserService,T),new S.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,M,this._coreBrowserService,D,T)];for(const j of this._renderLayers)(0,p.forwardEvent)(j.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,h.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(j,N)=>this._setCanvasDevicePixelDimensions(j,N)),this.register(this._coreBrowserService.onWindowChange(j=>{this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,j,(N,B)=>this._setCanvasDevicePixelDimensions(N,B))})),this.register((0,w.toDisposable)(()=>{for(const j of this._renderLayers)j.dispose();(0,f.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(m,L){this._updateDimensions();for(const v of this._renderLayers)v.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(m=>m.handleBlur())}handleFocus(){this._runOperation(m=>m.handleFocus())}handleSelectionChanged(m,L,v=!1){this._runOperation(x=>x.handleSelectionChanged(m,L,v)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(m=>m.handleCursorMove())}clear(){this._runOperation(m=>m.reset())}_runOperation(m){for(const L of this._renderLayers)m(L)}renderRows(m,L){for(const v of this._renderLayers)v.handleGridChanged(m,L)}clearTextureAtlas(){for(const m of this._renderLayers)m.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const m=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*m),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*m),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/m),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/m),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(m,L){this.dimensions.device.canvas.height=L,this.dimensions.device.canvas.width=m;for(const v of this._renderLayers)v.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}i.CanvasRenderer=l},873:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorRenderLayer=void 0;const f=o(457),_=o(859),h=o(399),p=o(782),w=o(903);class S extends w.BaseRenderLayer{constructor(n,a,l,c,m,L,v,x,y,b){super(n,a,"cursor",l,!0,b,m,L,y,x),this._onRequestRedraw=c,this._coreService=v,this._cursorBlinkStateManager=this.register(new _.MutableDisposable),this._cell=new p.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(L.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(n){super.resize(n),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){this._clearCursor(),this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){this._cursorBlinkStateManager.value?.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){this._cursorBlinkStateManager.value?.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){this._cursorBlinkStateManager.value?.restartBlinkAnimation()}handleGridChanged(n,a){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(n){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const a=this._bufferService.buffer.ybase+this._bufferService.buffer.y,l=a-this._bufferService.buffer.ydisp;if(l<0||l>=this._bufferService.rows)return void this._clearCursor();const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(a).loadCell(c,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const m=this._optionsService.rawOptions.cursorStyle,L=this._optionsService.rawOptions.cursorInactiveStyle;return L&&L!=="none"&&this._cursorRenderers[L](c,l,this._cell),this._ctx.restore(),this._state.x=c,this._state.y=l,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===c&&this._state.y===l&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](c,l,this._cell),this._ctx.restore(),this._state.x=c,this._state.y=l,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(h.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(n,a,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(n,a,l.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(l,n,a),this._ctx.restore()}_renderUnderlineCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(n,a),this._ctx.restore()}_renderOutlineCursor(n,a,l){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(n,a,l.getWidth(),1),this._ctx.restore()}}i.CursorRenderLayer=S},574:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GridCache=void 0,i.GridCache=class{constructor(){this.cache=[]}resize(o,f){for(let _=0;_<o;_++){this.cache.length<=_&&this.cache.push([]);for(let h=this.cache[_].length;h<f;h++)this.cache[_].push(void 0);this.cache[_].length=f}this.cache.length=o}clear(){for(let o=0;o<this.cache.length;o++)for(let f=0;f<this.cache[o].length;f++)this.cache[o][f]=void 0}}},43:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),h=o(903);class p extends h.BaseRenderLayer{constructor(S,u,n,a,l,c,m,L,v){super(S,u,"link",n,!0,v,l,c,m,L),this.register(a.onShowLinkUnderline(x=>this._handleShowLinkUnderline(x))),this.register(a.onHideLinkUnderline(x=>this._handleHideLinkUnderline(x)))}resize(S){super.resize(S),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const S=this._state.y2-this._state.y1-1;S>0&&this._clearCells(0,this._state.y1+1,this._state.cols,S),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(S){if(S.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:S.fg&&(0,f.is256Color)(S.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[S.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,S.y1===S.y2)this._fillBottomLineAtCells(S.x1,S.y1,S.x2-S.x1);else{this._fillBottomLineAtCells(S.x1,S.y1,S.cols-S.x1);for(let u=S.y1+1;u<S.y2;u++)this._fillBottomLineAtCells(0,u,S.cols);this._fillBottomLineAtCells(0,S.y2,S.x2)}this._state=S}_handleHideLinkUnderline(S){this._clearCurrentLink()}}i.LinkRenderLayer=p},630:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRenderLayer=void 0;const f=o(903);class _ extends f.BaseRenderLayer{constructor(p,w,S,u,n,a,l,c){super(p,w,"selection",S,!0,c,u,l,a,n),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(p){super.resize(p),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(p,w,S){super.handleSelectionChanged(p,w,S),this._redrawSelection(p,w,S)}_redrawSelection(p,w,S){if(!this._didStateChange(p,w,S,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!p||!w)return void this._clearState();const u=p[1]-this._bufferService.buffer.ydisp,n=w[1]-this._bufferService.buffer.ydisp,a=Math.max(u,0),l=Math.min(n,this._bufferService.rows-1);if(a>=this._bufferService.rows||l<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,S){const c=p[0],m=w[0]-c,L=l-a+1;this._fillCells(c,a,m,L)}else{const c=u===a?p[0]:0,m=a===n?w[0]:this._bufferService.cols;this._fillCells(c,a,m-c,1);const L=Math.max(l-a-1,0);if(this._fillCells(0,a+1,this._bufferService.cols,L),a!==l){const v=n===l?w[0]:this._bufferService.cols;this._fillCells(0,l,v,1)}}this._state.start=[p[0],p[1]],this._state.end=[w[0],w[1]],this._state.columnSelectMode=S,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(p,w,S,u){return!this._areCoordinatesEqual(p,this._state.start)||!this._areCoordinatesEqual(w,this._state.end)||S!==this._state.columnSelectMode||u!==this._state.ydisp}_areCoordinatesEqual(p,w){return!(!p||!w)&&p[0]===w[0]&&p[1]===w[1]}}i.SelectionRenderLayer=_},744:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextRenderLayer=void 0;const f=o(577),_=o(147),h=o(782),p=o(855),w=o(903),S=o(574);class u extends w.BaseRenderLayer{constructor(a,l,c,m,L,v,x,y,b,E){super(a,l,"text",c,m,E,L,v,y,b),this._characterJoinerService=x,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new h.CellData,this._state=new S.GridCache,this.register(v.onSpecificOptionChange("allowTransparency",M=>this._setTransparency(M)))}resize(a){super.resize(a);const l=this._getFont(!1,!1);this._characterWidth===a.device.char.width&&this._characterFont===l||(this._characterWidth=a.device.char.width,this._characterFont=l,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(a,l,c){for(let m=a;m<=l;m++){const L=m+this._bufferService.buffer.ydisp,v=this._bufferService.buffer.lines.get(L),x=this._characterJoinerService.getJoinedCharacters(L);for(let y=0;y<this._bufferService.cols;y++){v.loadCell(y,this._workCell);let b=this._workCell,E=!1,M=y;if(b.getWidth()!==0){if(x.length>0&&y===x[0][0]){E=!0;const R=x.shift();b=new f.JoinedCellData(this._workCell,v.translateToString(!0,R[0],R[1]),R[1]-R[0]),M=R[1]-1}!E&&this._isOverlapping(b)&&M<v.length-1&&v.getCodePoint(M+1)===p.NULL_CELL_CODE&&(b.content&=-12582913,b.content|=8388608),c(b,y,m),y=M}}}}_drawBackground(a,l){const c=this._ctx,m=this._bufferService.cols;let L=0,v=0,x=null;c.save(),this._forEachCell(a,l,(y,b,E)=>{let M=null;y.isInverse()?M=y.isFgDefault()?this._themeService.colors.foreground.css:y.isFgRGB()?`rgb(${_.AttributeData.toColorRGB(y.getFgColor()).join(",")})`:this._themeService.colors.ansi[y.getFgColor()].css:y.isBgRGB()?M=`rgb(${_.AttributeData.toColorRGB(y.getBgColor()).join(",")})`:y.isBgPalette()&&(M=this._themeService.colors.ansi[y.getBgColor()].css);let R=!1;this._decorationService.forEachDecorationAtCell(b,this._bufferService.buffer.ydisp+E,void 0,D=>{D.options.layer!=="top"&&R||(D.backgroundColorRGB&&(M=D.backgroundColorRGB.css),R=D.options.layer==="top")}),x===null&&(L=b,v=E),E!==v?(c.fillStyle=x||"",this._fillCells(L,v,m-L,1),L=b,v=E):x!==M&&(c.fillStyle=x||"",this._fillCells(L,v,b-L,1),L=b,v=E),x=M}),x!==null&&(c.fillStyle=x,this._fillCells(L,v,m-L,1)),c.restore()}_drawForeground(a,l){this._forEachCell(a,l,(c,m,L)=>this._drawChars(c,m,L))}handleGridChanged(a,l){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,a,this._bufferService.cols,l-a+1),this._drawBackground(a,l),this._drawForeground(a,l))}_isOverlapping(a){if(a.getWidth()!==1||a.getCode()<256)return!1;const l=a.getChars();if(this._characterOverlapCache.hasOwnProperty(l))return this._characterOverlapCache[l];this._ctx.save(),this._ctx.font=this._characterFont;const c=Math.floor(this._ctx.measureText(l).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[l]=c,c}}i.TextRenderLayer=u},274:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),h=o(374);let p,w=0,S=0,u=!1,n=!1,a=!1,l=0;i.CellColorResolver=class{constructor(c,m,L,v,x,y){this._terminal=c,this._optionService=m,this._selectionRenderModel=L,this._decorationService=v,this._coreBrowserService=x,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(c,m,L,v){if(this.result.bg=c.bg,this.result.fg=c.fg,this.result.ext=268435456&c.bg?c.extended.ext:0,S=0,w=0,n=!1,u=!1,a=!1,p=this._themeService.colors,l=0,c.getCode()!==f.NULL_CELL_CODE&&c.extended.underlineStyle===4){const x=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));l=m*v%(2*Math.round(x))}if(this._decorationService.forEachDecorationAtCell(m,L,"bottom",x=>{x.backgroundColorRGB&&(S=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,L),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:S=(16777215&this.result.fg)<<8|255;break;default:S=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:S=(16777215&this.result.bg)<<8|255}S=_.rgba.blend(S,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else S=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(w=p.selectionForeground.rgba>>8&16777215,u=!0),(0,h.treatGlyphAsBackgroundColor)(c.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))w=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}w=_.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}u=!0}}this._decorationService.forEachDecorationAtCell(m,L,"top",x=>{x.backgroundColorRGB&&(S=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),n&&(S=a?-16777216&c.bg&-134217729|S|50331648:-16777216&c.bg|S|50331648),u&&(w=-16777216&c.fg&-67108865|w|50331648),67108864&this.result.fg&&(n&&!u&&(w=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,u=!0),!n&&u&&(S=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?S:this.result.bg,this.result.fg=u?w:this.result.fg,this.result.ext&=536870911,this.result.ext|=l<<29&3758096384}}},627:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),h=[];i.acquireTextureAtlas=function(p,w,S,u,n,a,l,c){const m=(0,_.generateConfig)(u,n,a,l,w,S,c);for(let x=0;x<h.length;x++){const y=h[x],b=y.ownedBy.indexOf(p);if(b>=0){if((0,_.configEquals)(y.config,m))return y.atlas;y.ownedBy.length===1?(y.atlas.dispose(),h.splice(x,1)):y.ownedBy.splice(b,1);break}}for(let x=0;x<h.length;x++){const y=h[x];if((0,_.configEquals)(y.config,m))return y.ownedBy.push(p),y.atlas}const L=p._core,v={atlas:new f.TextureAtlas(document,m,L.unicodeService),config:m,ownedBy:[p]};return h.push(v),v.atlas},i.removeTerminalFromCache=function(p){for(let w=0;w<h.length;w++){const S=h[w].ownedBy.indexOf(p);if(S!==-1){h[w].ownedBy.length===1?(h[w].atlas.dispose(),h.splice(w,1)):h[w].ownedBy.splice(S,1);break}}}},197:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,h,p,w,S,u,n){const a={foreground:u.foreground,background:u.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:u.ansi.slice(),contrastCache:u.contrastCache,halfContrastCache:u.halfContrastCache};return{customGlyphs:S.customGlyphs,devicePixelRatio:n,letterSpacing:S.letterSpacing,lineHeight:S.lineHeight,deviceCellWidth:_,deviceCellHeight:h,deviceCharWidth:p,deviceCharHeight:w,fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:S.fontWeightBold,allowTransparency:S.allowTransparency,drawBoldTextInBrightColors:S.drawBoldTextInBrightColors,minimumContrastRatio:S.minimumContrastRatio,colors:a}},i.configEquals=function(_,h){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==h.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===h.devicePixelRatio&&_.customGlyphs===h.customGlyphs&&_.lineHeight===h.lineHeight&&_.letterSpacing===h.letterSpacing&&_.fontFamily===h.fontFamily&&_.fontSize===h.fontSize&&_.fontWeight===h.fontWeight&&_.fontWeightBold===h.fontWeightBold&&_.allowTransparency===h.allowTransparency&&_.deviceCharWidth===h.deviceCharWidth&&_.deviceCharHeight===h.deviceCharHeight&&_.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&_.minimumContrastRatio===h.minimumContrastRatio&&_.colors.foreground.rgba===h.colors.foreground.rgba&&_.colors.background.rgba===h.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},1 L${.5-u},.5 L1,.5 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M1,${.5-n} L${.5-u},${.5-n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M${.5+u},1 L${.5+u},.5 L0,.5 M${.5-u},.5 L${.5-u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5+u},${.5-n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(u,n)=>`M1,.5 L${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0 M1,${.5+n} L${.5-u},${.5+n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(u,n)=>`M0,.5 L${.5+u},.5 L${.5+u},0 M${.5-u},.5 L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M0,${.5+n} L${.5+u},${.5+n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1 M${.5+u},.5 L1,.5`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M0,.5 L${.5-u},.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M${.5+u},0 L${.5+u},1 M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},1 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(u,n,a,l,c,m,L,v){const x=i.blockElementDefinitions[n];if(x)return function(M,R,D,T,H,j){for(let N=0;N<R.length;N++){const B=R[N],k=H/8,A=j/8;M.fillRect(D+B.x*k,T+B.y*A,B.w*k,B.h*A)}}(u,x,a,l,c,m),!0;const y=_[n];if(y)return function(M,R,D,T,H,j){let N=h.get(R);N||(N=new Map,h.set(R,N));const B=M.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let k=N.get(B);if(!k){const A=R[0].length,P=R.length,F=M.canvas.ownerDocument.createElement("canvas");F.width=A,F.height=P;const W=(0,f.throwIfFalsy)(F.getContext("2d")),z=new ImageData(A,P);let q,Y,$,O;if(B.startsWith("#"))q=parseInt(B.slice(1,3),16),Y=parseInt(B.slice(3,5),16),$=parseInt(B.slice(5,7),16),O=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[q,Y,$,O]=B.substring(5,B.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<P;U++)for(let G=0;G<A;G++)z.data[4*(U*A+G)]=q,z.data[4*(U*A+G)+1]=Y,z.data[4*(U*A+G)+2]=$,z.data[4*(U*A+G)+3]=R[U][G]*(255*O);W.putImageData(z,0,0),k=(0,f.throwIfFalsy)(M.createPattern(F,null)),N.set(B,k)}M.fillStyle=k,M.fillRect(D,T,H,j)}(u,y,a,l,c,m),!0;const b=i.boxDrawingDefinitions[n];if(b)return function(M,R,D,T,H,j,N){M.strokeStyle=M.fillStyle;for(const[B,k]of Object.entries(R)){let A;M.beginPath(),M.lineWidth=N*Number.parseInt(B),A=typeof k=="function"?k(.15,.15/j*H):k;for(const P of A.split(" ")){const F=P[0],W=w[F];if(!W){console.error(`Could not find drawing instructions for "${F}"`);continue}const z=P.substring(1).split(",");z[0]&&z[1]&&W(M,S(z,H,j,D,T,!0,N))}M.stroke(),M.closePath()}}(u,b,a,l,c,m,v),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(M,R,D,T,H,j,N,B){const k=new Path2D;k.rect(D,T,H,j),M.clip(k),M.beginPath();const A=N/12;M.lineWidth=B*A;for(const P of R.d.split(" ")){const F=P[0],W=w[F];if(!W){console.error(`Could not find drawing instructions for "${F}"`);continue}const z=P.substring(1).split(",");z[0]&&z[1]&&W(M,S(z,H,j,D,T,!1,B,(R.leftPadding??0)*(A/2),(R.rightPadding??0)*(A/2)))}R.type===1?(M.strokeStyle=M.fillStyle,M.stroke()):M.fill(),M.closePath()}(u,E,a,l,c,m,L,v),!0)};const h=new Map;function p(u,n,a=0){return Math.max(Math.min(u,n),a)}const w={C:(u,n)=>u.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(u,n)=>u.lineTo(n[0],n[1]),M:(u,n)=>u.moveTo(n[0],n[1])};function S(u,n,a,l,c,m,L,v=0,x=0){const y=u.map(b=>parseFloat(b)||parseInt(b));if(y.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<y.length;b+=2)y[b]*=n-v*L-x*L,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,n,0)),y[b]+=l+v*L;for(let b=1;b<y.length;b+=2)y[b]*=a,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,a,0)),y[b]+=c;return y}},56:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,h,p){let w=new h.ResizeObserver(S=>{const u=S.find(l=>l.target===_);if(!u)return;if(!("devicePixelContentBoxSize"in u))return w?.disconnect(),void(w=void 0);const n=u.devicePixelContentBoxSize[0].inlineSize,a=u.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{w.observe(_,{box:["device-pixel-content-box"]})}catch{w.disconnect(),w=void 0}return(0,f.toDisposable)(()=>w?.disconnect())}},374:(C,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,h,p,w){return h===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(h){return 9472<=h&&h<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,h,p=0){return(_-(2*Math.round(h)-p))%(2*Math.round(h))}},296:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,h,p,w=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const S=_.buffers.active.ydisp,u=h[1]-S,n=p[1]-S,a=Math.max(u,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=h[0],this.endCol=p[0])}isCellSelected(_,h,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),h=o(374),p=o(160),w=o(345),S=o(485),u=o(385),n=o(147),a=o(855),l={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let c;class m{get pages(){return this._pages}constructor(b,E,M){this._document=b,this._config=E,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new S.FourKeyMap,this._cacheMapCombined=new S.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new w.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new w.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=x(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const b=new u.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const M=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(N=>2*N.canvas.width<=(m.maxTextureSize||4096)).sort((N,B)=>B.canvas.width!==N.canvas.width?B.canvas.width-N.canvas.width:B.percentageUsed-N.percentageUsed);let M=-1,R=0;for(let N=0;N<E.length;N++)if(E[N].canvas.width!==R)M=N,R=E[N].canvas.width;else if(N-M==3)break;const D=E.slice(M,M+4),T=D.map(N=>N.glyphs[0].texturePage).sort((N,B)=>N>B?1:-1),H=this.pages.length-D.length,j=this._mergePages(D,H);j.version++;for(let N=T.length-1;N>=0;N--)this._deletePage(T[N]);this.pages.push(j),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(j.canvas)}const b=new L(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){const M=2*b[0].canvas.width,R=new L(this._document,M,b);for(const[D,T]of b.entries()){const H=D*T.canvas.width%M,j=Math.floor(D/2)*T.canvas.height;R.ctx.drawImage(T.canvas,H,j);for(const B of T.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/M,B.sizeClipSpace.y=B.size.y/M,B.texturePosition.x+=H,B.texturePosition.y+=j,B.texturePositionClipSpace.x=B.texturePosition.x/M,B.texturePositionClipSpace.y=B.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(T.canvas);const N=this._activePages.indexOf(T);N!==-1&&this._activePages.splice(N,1)}return R}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){const M=this._pages[E];for(const R of M.glyphs)R.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(b,E,M,R,D){return this._getFromCacheMap(this._cacheMapCombined,b,E,M,R,D)}getRasterizedGlyph(b,E,M,R,D){return this._getFromCacheMap(this._cacheMap,b,E,M,R,D)}_getFromCacheMap(b,E,M,R,D,T=!1){return c=b.get(E,M,R,D),c||(c=this._drawToCache(E,M,R,D,T),b.set(E,M,R,D,c)),c}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,M,R){if(this._config.allowTransparency)return p.NULL_COLOR;let D;switch(b){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(E);break;case 50331648:const T=n.AttributeData.toColorRGB(E);D=p.channels.toColor(T[0],T[1],T[2]);break;default:D=M?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return D}_getForegroundColor(b,E,M,R,D,T,H,j,N,B){const k=this._getMinimumContrastColor(b,E,M,R,D,T,H,N,j,B);if(k)return k;let A;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&N&&T<8&&(T+=8),A=this._getColorFromAnsiIndex(T);break;case 50331648:const P=n.AttributeData.toColorRGB(T);A=p.channels.toColor(P[0],P[1],P[2]);break;default:A=H?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=p.color.opaque(A)),j&&(A=p.color.multiplyOpacity(A,f.DIM_OPACITY)),A}_resolveBackgroundRgba(b,E,M){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,M,R){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&R&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,M,R,D,T,H,j,N,B){if(this._config.minimumContrastRatio===1||B)return;const k=this._getContrastCache(N),A=k.getColor(b,R);if(A!==void 0)return A||void 0;const P=this._resolveBackgroundRgba(E,M,H),F=this._resolveForegroundRgba(D,T,H,j),W=p.rgba.ensureContrastRatio(P,F,this._config.minimumContrastRatio/(N?2:1));if(!W)return void k.setColor(b,R,null);const z=p.channels.toColor(W>>24&255,W>>16&255,W>>8&255);return k.setColor(b,R,z),z}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,M,R,D=!1){const T=typeof b=="number"?String.fromCharCode(b):b,H=Math.min(this._config.deviceCellWidth*Math.max(T.length,2)+4,this._textureSize);this._tmpCanvas.width<H&&(this._tmpCanvas.width=H);const j=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<j&&(this._tmpCanvas.height=j),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=R,this._workAttributeData.isInvisible())return l;const N=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),k=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),P=!!this._workAttributeData.isUnderline(),F=!!this._workAttributeData.isStrikethrough(),W=!!this._workAttributeData.isOverline();let z=this._workAttributeData.getFgColor(),q=this._workAttributeData.getFgColorMode(),Y=this._workAttributeData.getBgColor(),$=this._workAttributeData.getBgColorMode();if(B){const K=z;z=Y,Y=K;const ie=q;q=$,$=ie}const O=this._getBackgroundColor($,Y,B,k);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const U=N?this._config.fontWeightBold:this._config.fontWeight,G=A?"italic":"";this._tmpCtx.font=`${G} ${U} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const ee=T.length===1&&(0,h.isPowerlineGlyph)(T.charCodeAt(0)),Z=T.length===1&&(0,h.isRestrictedPowerlineGlyph)(T.charCodeAt(0)),ce=this._getForegroundColor(E,$,Y,M,q,z,B,k,N,(0,h.treatGlyphAsBackgroundColor)(T.charCodeAt(0)));this._tmpCtx.fillStyle=ce.css;const Q=Z?0:4;let _e=!1;this._config.customGlyphs!==!1&&(_e=(0,_.tryDrawCustomChar)(this._tmpCtx,T,Q,Q,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Se,oe=!ee;if(Se=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),P){this._tmpCtx.save();const K=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ie=K%2==1?.5:0;if(this._tmpCtx.lineWidth=K,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())oe=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{oe=!1;let de=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&de<8&&(de+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(de).css}this._tmpCtx.beginPath();const pe=Q,he=Math.ceil(Q+this._config.deviceCharHeight)-ie-(D?2*K:0),X=he+K,fe=he+2*K;let ue=this._workAttributeData.getUnderlineVariantOffset();for(let de=0;de<Se;de++){this._tmpCtx.save();const ae=pe+de*this._config.deviceCellWidth,le=pe+(de+1)*this._config.deviceCellWidth,ct=ae+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ae,he),this._tmpCtx.lineTo(le,he),this._tmpCtx.moveTo(ae,fe),this._tmpCtx.lineTo(le,fe);break;case 3:const ht=K<=1?fe:Math.ceil(Q+this._config.deviceCharHeight-K/2)-ie,et=K<=1?he:Math.ceil(Q+this._config.deviceCharHeight+K/2)-ie,Tt=new Path2D;Tt.rect(ae,he,this._config.deviceCellWidth,fe-he),this._tmpCtx.clip(Tt),this._tmpCtx.moveTo(ae-this._config.deviceCellWidth/2,X),this._tmpCtx.bezierCurveTo(ae-this._config.deviceCellWidth/2,et,ae,et,ae,X),this._tmpCtx.bezierCurveTo(ae,ht,ct,ht,ct,X),this._tmpCtx.bezierCurveTo(ct,et,le,et,le,X),this._tmpCtx.bezierCurveTo(le,ht,le+this._config.deviceCellWidth/2,ht,le+this._config.deviceCellWidth/2,X);break;case 4:const tt=ue===0?0:ue>=K?2*K-ue:K-ue;ue>=K||tt===0?(this._tmpCtx.setLineDash([Math.round(K),Math.round(K)]),this._tmpCtx.moveTo(ae+tt,he),this._tmpCtx.lineTo(le,he)):(this._tmpCtx.setLineDash([Math.round(K),Math.round(K)]),this._tmpCtx.moveTo(ae,he),this._tmpCtx.lineTo(ae+tt,he),this._tmpCtx.moveTo(ae+tt+K,he),this._tmpCtx.lineTo(le,he)),ue=(0,h.computeNextVariantOffset)(le-ae,K,ue);break;case 5:const rt=.6,wi=.3,bt=le-ae,er=Math.floor(rt*bt),xi=Math.floor(wi*bt),oo=bt-er-xi;this._tmpCtx.setLineDash([er,xi,oo]),this._tmpCtx.moveTo(ae,he),this._tmpCtx.lineTo(le,he);break;default:this._tmpCtx.moveTo(ae,he),this._tmpCtx.lineTo(le,he)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!_e&&this._config.fontSize>=12&&!this._config.allowTransparency&&T!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const de=this._tmpCtx.measureText(T);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in de&&de.actualBoundingBoxDescent>0){this._tmpCtx.save();const ae=new Path2D;ae.rect(pe,he-Math.ceil(K/2),this._config.deviceCellWidth*Se,fe-he+Math.ceil(K/2)),this._tmpCtx.clip(ae),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=O.css,this._tmpCtx.strokeText(T,Q,Q+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(W){const K=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ie=K%2==1?.5:0;this._tmpCtx.lineWidth=K,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Q,Q+ie),this._tmpCtx.lineTo(Q+this._config.deviceCharWidth*Se,Q+ie),this._tmpCtx.stroke()}if(_e||this._tmpCtx.fillText(T,Q,Q+this._config.deviceCharHeight),T==="_"&&!this._config.allowTransparency){let K=v(this._tmpCtx.getImageData(Q,Q,this._config.deviceCellWidth,this._config.deviceCellHeight),O,ce,oe);if(K)for(let ie=1;ie<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(T,Q,Q+this._config.deviceCharHeight-ie),K=v(this._tmpCtx.getImageData(Q,Q,this._config.deviceCellWidth,this._config.deviceCellHeight),O,ce,oe),K);ie++);}if(F){const K=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),ie=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=K,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Q,Q+Math.floor(this._config.deviceCharHeight/2)-ie),this._tmpCtx.lineTo(Q+this._config.deviceCharWidth*Se,Q+Math.floor(this._config.deviceCharHeight/2)-ie),this._tmpCtx.stroke()}this._tmpCtx.restore();const Ne=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Qe;if(Qe=this._config.allowTransparency?function(K){for(let ie=0;ie<K.data.length;ie+=4)if(K.data[ie+3]>0)return!1;return!0}(Ne):v(Ne,O,ce,oe),Qe)return l;const se=this._findGlyphBoundingBox(Ne,this._workBoundingBox,H,Z,_e,Q);let te,re;for(;;){if(this._activePages.length===0){const K=this._createNewPage();te=K,re=K.currentRow,re.height=se.size.y;break}te=this._activePages[this._activePages.length-1],re=te.currentRow;for(const K of this._activePages)se.size.y<=K.currentRow.height&&(te=K,re=K.currentRow);for(let K=this._activePages.length-1;K>=0;K--)for(const ie of this._activePages[K].fixedRows)ie.height<=re.height&&se.size.y<=ie.height&&(te=this._activePages[K],re=ie);if(re.y+se.size.y>=te.canvas.height||re.height>se.size.y+2){let K=!1;if(te.currentRow.y+te.currentRow.height+se.size.y>=te.canvas.height){let ie;for(const pe of this._activePages)if(pe.currentRow.y+pe.currentRow.height+se.size.y<pe.canvas.height){ie=pe;break}if(ie)te=ie;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&re.y+se.size.y<=te.canvas.height&&re.height>=se.size.y&&re.x+se.size.x<=te.canvas.width)K=!0;else{const pe=this._createNewPage();te=pe,re=pe.currentRow,re.height=se.size.y,K=!0}}K||(te.currentRow.height>0&&te.fixedRows.push(te.currentRow),re={x:0,y:te.currentRow.y+te.currentRow.height,height:se.size.y},te.fixedRows.push(re),te.currentRow={x:0,y:re.y+re.height,height:0})}if(re.x+se.size.x<=te.canvas.width)break;re===te.currentRow?(re.x=0,re.y+=re.height,re.height=0):te.fixedRows.splice(te.fixedRows.indexOf(re),1)}return se.texturePage=this._pages.indexOf(te),se.texturePosition.x=re.x,se.texturePosition.y=re.y,se.texturePositionClipSpace.x=re.x/te.canvas.width,se.texturePositionClipSpace.y=re.y/te.canvas.height,se.sizeClipSpace.x/=te.canvas.width,se.sizeClipSpace.y/=te.canvas.height,re.height=Math.max(re.height,se.size.y),re.x+=se.size.x,te.ctx.putImageData(Ne,se.texturePosition.x-this._workBoundingBox.left,se.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,se.size.x,se.size.y),te.addGlyph(se),te.version++,se}_findGlyphBoundingBox(b,E,M,R,D,T){E.top=0;const H=R?this._config.deviceCellHeight:this._tmpCanvas.height,j=R?this._config.deviceCellWidth:M;let N=!1;for(let B=0;B<H;B++){for(let k=0;k<j;k++){const A=B*this._tmpCanvas.width*4+4*k+3;if(b.data[A]!==0){E.top=B,N=!0;break}}if(N)break}E.left=0,N=!1;for(let B=0;B<T+j;B++){for(let k=0;k<H;k++){const A=k*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.left=B,N=!0;break}}if(N)break}E.right=j,N=!1;for(let B=T+j-1;B>=T;B--){for(let k=0;k<H;k++){const A=k*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.right=B,N=!0;break}}if(N)break}E.bottom=H,N=!1;for(let B=H-1;B>=0;B--){for(let k=0;k<j;k++){const A=B*this._tmpCanvas.width*4+4*k+3;if(b.data[A]!==0){E.bottom=B,N=!0;break}}if(N)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+T+(R||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+T+(R||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(const R of M)this._glyphs.push(...R.glyphs),this._usedPixels+=R._usedPixels;this.canvas=x(b,E,E),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function v(y,b,E,M){const R=b.rgba>>>24,D=b.rgba>>>16&255,T=b.rgba>>>8&255,H=E.rgba>>>24,j=E.rgba>>>16&255,N=E.rgba>>>8&255,B=Math.floor((Math.abs(R-H)+Math.abs(D-j)+Math.abs(T-N))/12);let k=!0;for(let A=0;A<y.data.length;A+=4)y.data[A]===R&&y.data[A+1]===D&&y.data[A+2]===T||M&&Math.abs(y.data[A]-R)+Math.abs(y.data[A+1]-D)+Math.abs(y.data[A+2]-T)<B?y.data[A+3]=0:k=!1;return k}function x(y,b,E){const M=y.createElement("canvas");return M.width=b,M.height=E,M}},577:function(C,i,o){var f=this&&this.__decorate||function(a,l,c,m){var L,v=arguments.length,x=v<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,l,c,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(v<3?L(x):v>3?L(l,c,x):L(l,c))||x);return v>3&&x&&Object.defineProperty(l,c,x),x},_=this&&this.__param||function(a,l){return function(c,m){l(c,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=o(147),p=o(855),w=o(782),S=o(97);class u extends h.AttributeData{constructor(l,c,m){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=c,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let n=i.CharacterJoinerService=class bf{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(l){const c={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(c),c.id}deregister(l){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===l)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(l);if(!c||c.length===0)return[];const m=[],L=c.translateToString(!0);let v=0,x=0,y=0,b=c.getFg(0),E=c.getBg(0);for(let M=0;M<c.getTrimmedLength();M++)if(c.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==E){if(M-v>1){const R=this._getJoinedRanges(L,y,x,c,v);for(let D=0;D<R.length;D++)m.push(R[D])}v=M,y=x,b=this._workCell.fg,E=this._workCell.bg}x+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const M=this._getJoinedRanges(L,y,x,c,v);for(let R=0;R<M.length;R++)m.push(M[R])}return m}_getJoinedRanges(l,c,m,L,v){const x=l.substring(c,m);let y=[];try{y=this._characterJoiners[0].handler(x)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const E=this._characterJoiners[b].handler(x);for(let M=0;M<E.length;M++)bf._mergeRanges(y,E[M])}catch(E){console.error(E)}return this._stringRangesToCellRanges(y,L,v),y}_stringRangesToCellRanges(l,c,m){let L=0,v=!1,x=0,y=l[L];if(y){for(let b=m;b<this._bufferService.cols;b++){const E=c.getWidth(b),M=c.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!v&&y[0]<=x&&(y[0]=b,v=!0),y[1]<=x){if(y[1]=b,y=l[++L],!y)break;y[0]<=x?(y[0]=b,v=!0):v=!1}x+=M}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(l,c){let m=!1;for(let L=0;L<l.length;L++){const v=l[L];if(m){if(c[1]<=v[0])return l[L-1][1]=c[1],l;if(c[1]<=v[1])return l[L-1][1]=Math.max(c[1],v[1]),l.splice(L,1),l;l.splice(L,1),L--}else{if(c[1]<=v[0])return l.splice(L,0,c),l;if(c[1]<=v[1])return v[0]=Math.min(c[0],v[0]),l;c[0]<v[1]&&(v[0]=Math.min(c[0],v[0]),m=!0)}}return m?l[l.length-1][1]=c[1]:l.push(c),l}};i.CharacterJoinerService=n=f([_(0,S.IBufferService)],n)},160:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,h=0;var p,w,S,u,n;function a(c){const m=c.toString(16);return m.length<2?"0"+m:m}function l(c,m){return c<m?(m+.05)/(c+.05):(c+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(c){c.toCss=function(m,L,v,x){return x!==void 0?`#${a(m)}${a(L)}${a(v)}${a(x)}`:`#${a(m)}${a(L)}${a(v)}`},c.toRgba=function(m,L,v,x=255){return(m<<24|L<<16|v<<8|x)>>>0},c.toColor=function(m,L,v,x){return{css:c.toCss(m,L,v,x),rgba:c.toRgba(m,L,v,x)}}}(p||(i.channels=p={})),function(c){function m(L,v){return h=Math.round(255*v),[o,f,_]=n.toChannels(L.rgba),{css:p.toCss(o,f,_,h),rgba:p.toRgba(o,f,_,h)}}c.blend=function(L,v){if(h=(255&v.rgba)/255,h===1)return{css:v.css,rgba:v.rgba};const x=v.rgba>>24&255,y=v.rgba>>16&255,b=v.rgba>>8&255,E=L.rgba>>24&255,M=L.rgba>>16&255,R=L.rgba>>8&255;return o=E+Math.round((x-E)*h),f=M+Math.round((y-M)*h),_=R+Math.round((b-R)*h),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},c.isOpaque=function(L){return(255&L.rgba)==255},c.ensureContrastRatio=function(L,v,x){const y=n.ensureContrastRatio(L.rgba,v.rgba,x);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},c.opaque=function(L){const v=(255|L.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},c.opacity=m,c.multiplyOpacity=function(L,v){return h=255&L.rgba,m(L,h*v/255)},c.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(i.color=w={})),function(c){let m,L;try{const v=document.createElement("canvas");v.width=1,v.height=1;const x=v.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",L=m.createLinearGradient(0,0,1,1))}catch{}c.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),h=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,h);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const x=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return o=parseInt(x[1]),f=parseInt(x[2]),_=parseInt(x[3]),h=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),p.toColor(o,f,_,h);if(!m||!L)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=L,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,h]=m.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,h),css:v}}}(S||(i.css=S={})),function(c){function m(L,v,x){const y=L/255,b=v/255,E=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}c.relativeLuminance=function(L){return m(L>>16&255,L>>8&255,255&L)},c.relativeLuminance2=m}(u||(i.rgb=u={})),function(c){function m(v,x,y){const b=v>>24&255,E=v>>16&255,M=v>>8&255;let R=x>>24&255,D=x>>16&255,T=x>>8&255,H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));for(;H<y&&(R>0||D>0||T>0);)R-=Math.max(0,Math.ceil(.1*R)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));return(R<<24|D<<16|T<<8|255)>>>0}function L(v,x,y){const b=v>>24&255,E=v>>16&255,M=v>>8&255;let R=x>>24&255,D=x>>16&255,T=x>>8&255,H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));for(;H<y&&(R<255||D<255||T<255);)R=Math.min(255,R+Math.ceil(.1*(255-R))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),H=l(u.relativeLuminance2(R,D,T),u.relativeLuminance2(b,E,M));return(R<<24|D<<16|T<<8|255)>>>0}c.blend=function(v,x){if(h=(255&x)/255,h===1)return x;const y=x>>24&255,b=x>>16&255,E=x>>8&255,M=v>>24&255,R=v>>16&255,D=v>>8&255;return o=M+Math.round((y-M)*h),f=R+Math.round((b-R)*h),_=D+Math.round((E-D)*h),p.toRgba(o,f,_)},c.ensureContrastRatio=function(v,x,y){const b=u.relativeLuminance(v>>8),E=u.relativeLuminance(x>>8);if(l(b,E)<y){if(E<b){const D=m(v,x,y),T=l(b,u.relativeLuminance(D>>8));if(T<y){const H=L(v,x,y);return T>l(b,u.relativeLuminance(H>>8))?D:H}return D}const M=L(v,x,y),R=l(b,u.relativeLuminance(M>>8));if(R<y){const D=m(v,x,y);return R>l(b,u.relativeLuminance(D>>8))?M:D}return M}},c.reduceLuminance=m,c.increaseLuminance=L,c.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},345:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(C,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,h,p){this._data[_]||(this._data[_]={}),this._data[_][h]=p}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,h,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(h,p,w)}get(f,_,h,p){return this._data.get(f,_)?.get(h,p)}clear(){this._data.clear()}}},399:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,u=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),u=Math.max(S,u),a=w.timeRemaining(),1.5*u>a)return n-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-S))}ms`),void this._start();n=a}this.clear()}}class h extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new o;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),h=o(147);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const u=new p;return u.setFromCharData(S),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const n=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let h="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let h=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[h++]=1024*(this._interim-55296)+w-56320+65536:(f[h++]=this._interim,f[h++]=w),this._interim=0}for(let w=p;w<_;++w){const S=o.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=_)return this._interim=S,h;const u=o.charCodeAt(w);56320<=u&&u<=57343?f[h++]=1024*(S-55296)+u-56320+65536:(f[h++]=S,f[h++]=u)}else S!==65279&&(f[h++]=S)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let h,p,w,S,u=0,n=0,a=0;if(this.interim[0]){let m=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let v,x=0;for(;(v=63&this.interim[++x])&&x<4;)L<<=6,L|=v;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-x;for(;a<b;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[x++]=v,L<<=6,L|=63&v}m||(y===2?L<128?a--:f[u++]=L:y===3?L<2048||L>=55296&&L<=57343||L===65279||(f[u++]=L):L<65536||L>1114111||(f[u++]=L)),this.interim.fill(0)}const l=_-4;let c=a;for(;c<_;){for(;!(!(c<l)||128&(h=o[c])||128&(p=o[c+1])||128&(w=o[c+2])||128&(S=o[c+3]));)f[u++]=h,f[u++]=p,f[u++]=w,f[u++]=S,c+=4;if(h=o[c++],h<128)f[u++]=h;else if((224&h)==192){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(n=(31&h)<<6|63&p,n<128){c--;continue}f[u++]=n}else if((240&h)==224){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[c++],(192&w)!=128){c--;continue}if(n=(15&h)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&h)==240){if(c>=_)return this.interim[0]=h,u;if(p=o[c++],(192&p)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[c++],(192&w)!=128){c--;continue}if(c>=_)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=w,u;if(S=o[c++],(192&S)!=128){c--;continue}if(n=(7&h)<<18|(63&p)<<12|(63&w)<<6|63&S,n<65536||n>1114111)continue;f[u++]=n}}return u}}},776:function(C,i,o){var f=this&&this.__decorate||function(n,a,l,c){var m,L=arguments.length,v=L<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,l,c);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(v=(L<3?m(v):L>3?m(a,l,v):m(a,l))||v);return L>3&&v&&Object.defineProperty(a,l,v),v},_=this&&this.__param||function(n,a){return function(l,c){a(l,c,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=o(859),p=o(97),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let S,u=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){S=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const c=l.value;l.value=function(...m){if(S.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,m);S.trace(`GlyphRenderer#${c.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const L=c.apply(this,m);return S.trace(`GlyphRenderer#${c.name} return`,L),L}}},726:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(p,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(h,p,S)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},97:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(C){var i=s[C];if(i!==void 0)return i.exports;var o=s[C]={exports:{}};return r[C].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var C=g;Object.defineProperty(C,"__esModule",{value:!0}),C.CanvasAddon=void 0;const i=d(345),o=d(859),f=d(776),_=d(949);class h extends o.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){return this._renderer?.textureAtlas}activate(w){const S=w._core;if(!w.element)return void this.register(S.onWillOpen(()=>this.activate(w)));this._terminal=w;const u=S.coreService,n=S.optionsService,a=S.screenElement,l=S.linkifier,c=S,m=c._bufferService,L=c._renderService,v=c._characterJoinerService,x=c._charSizeService,y=c._coreBrowserService,b=c._decorationService,E=c._logService,M=c._themeService;(0,f.setTraceLogger)(E),this._renderer=new _.CanvasRenderer(w,a,l,m,x,n,v,u,y,b,M),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),L.setRenderer(this._renderer),L.handleResize(m.cols,m.rows),this.register((0,o.toDisposable)(()=>{L.setRenderer(this._terminal._core._createRenderer()),L.handleResize(w.cols,w.rows),this._renderer?.dispose(),this._renderer=void 0}))}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}C.CanvasAddon=h})(),g})())})(xf);var Ah=xf.exports;const Pm="\x1B[2m",Im="\x1B[22m";function Fm(e){const t=e.charCodeAt(0);return t>=32&&t<=126}class Nm{term;predicted=[];_enabled=!1;altScreen=!1;constructor(t){this.term=t}get enabled(){return this._enabled}set enabled(t){this._enabled=t,t||this.reset()}setAltScreen(t){this.altScreen=t,t&&this.reset()}handleInput(t){if(!(!this._enabled||this.altScreen)){if(t.length>1){this.reset();return}for(const r of t){if(r==="\r"||r===`
`){this.reset();return}if(r===""||r==="\b"){this.predicted.length>0&&(this.predicted.pop(),this.term.write("\b \b"));return}if(!Fm(r)){this.reset();return}this.predicted.push(r),this.term.write(`${Pm}${r}${Im}`)}}}handleOutput(t){if(!this._enabled||this.predicted.length===0)return;const r=new TextDecoder().decode(t);let s=0;for(let d=0;d<r.length&&s<this.predicted.length&&r[d]===this.predicted[s];d++)s++;if(s>0){const d="\b \b".repeat(this.predicted.length);this.term.write(d),this.predicted.splice(0,s)}else if(this.predicted.length>0){const d="\b \b".repeat(this.predicted.length);this.term.write(d),this.predicted=[]}}isActive(){return this.predicted.length>0}reset(){if(this.predicted.length>0){const t="\b \b".repeat(this.predicted.length);this.term.write(t),this.predicted=[]}}}const Hm=6,jm=24,No=12,$m=e=>{const t=document.createElement("textarea");t.value=e,t.style.cssText="position:fixed;left:-9999px;top:-9999px;opacity:0",document.body.appendChild(t),t.focus(),t.select();let r=!1;try{r=document.execCommand("copy")}catch{}return document.body.removeChild(t),r},Wm=()=>{const e=V.useRef(null),t=V.useRef(null),r=V.useRef(null),{subscribeOutput:s,sendInput:d,sendControl:g,resize:C,setClientTty:i}=Zt(),o=V.useRef(i),[f,_]=V.useState(()=>{const k=localStorage.getItem("terminal_font_size");return k?parseInt(k,10):No}),h=V.useRef({initialDistance:0,initialFontSize:No}),p=V.useRef(f),w=V.useRef({lastY:0,accumDelta:0,mode:"none"}),S=V.useRef(null),[u,n]=V.useState(!1),a=V.useRef(null),l=V.useRef(null),c=V.useRef(d),m=V.useRef({mouseTracking:!1,sgrMode:!1}),[L,v]=V.useState(!1),x=V.useRef(null),y=V.useRef(null),b=V.useRef(null),E=V.useRef(null);V.useEffect(()=>{c.current=d},[d]);const M=V.useCallback(()=>{if(r.current&&t.current){r.current.fit();const{cols:k,rows:A}=t.current;C(k,A)}},[C]),R=V.useCallback(()=>{S.current&&clearTimeout(S.current),S.current=window.setTimeout(M,60)},[M]),D=V.useCallback(k=>{const A=Math.max(Hm,Math.min(jm,Math.round(k)));t.current&&A!==t.current.options.fontSize&&(t.current.options.fontSize=A,_(A),p.current=A,b.current&&clearTimeout(b.current),b.current=window.setTimeout(()=>{localStorage.setItem("terminal_font_size",String(A))},500),E.current||(M(),E.current=window.setTimeout(()=>{E.current=null},100)),n(!0),a.current&&clearTimeout(a.current),a.current=window.setTimeout(()=>n(!1),1200))},[M]),T=k=>{if(k.length<2)return 0;const A=k[0].clientX-k[1].clientX,P=k[0].clientY-k[1].clientY;return Math.sqrt(A*A+P*P)},H=V.useCallback(k=>{k.touches.length===2?(w.current.mode="pinch",h.current={initialDistance:T(k.touches),initialFontSize:p.current}):k.touches.length===1&&(w.current={lastY:k.touches[0].clientY,accumDelta:0,mode:"scroll"})},[]),j=V.useCallback(k=>{const A=w.current;if(k.touches.length===2){A.mode="pinch";const P=T(k.touches),{initialDistance:F,initialFontSize:W}=h.current;if(F>0){const z=P/F;D(W*z)}k.preventDefault()}else if(k.touches.length===1&&A.mode==="scroll"){const P=t.current;if(!P)return;const F=P.buffer.active.type==="alternate",W=m.current;if(F&&W.mouseTracking){const z=k.touches[0].clientY,q=A.lastY-z;A.lastY=z,A.accumDelta+=q;const Y=y.current;if(!Y)return;const $=Y.getBoundingClientRect(),O=$.height/P.rows,U=O*.8;for(;Math.abs(A.accumDelta)>=U;){const G=A.accumDelta>0?1:-1;A.accumDelta-=G*U;const ee=$.width/P.cols,Z=Math.max(1,Math.min(P.cols,Math.floor((k.touches[0].clientX-$.left)/ee)+1)),ce=Math.max(1,Math.min(P.rows,Math.floor((k.touches[0].clientY-$.top)/O)+1)),Q=G>0?65:64;W.sgrMode?c.current(`\x1B[<${Q};${Z};${ce}M`):c.current(`\x1B[M${String.fromCharCode(Q+32)}${String.fromCharCode(Z+32)}${String.fromCharCode(ce+32)}`)}k.preventDefault()}}},[D]),N=V.useCallback(()=>{w.current.mode="none"},[]);V.useEffect(()=>{if(!e.current)return;const k=new Tm.Terminal({fontSize:f,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#0d1117",foreground:"#e6edf3",cursor:"#58a6ff",cursorAccent:"#0d1117",selectionBackground:"rgba(163, 113, 247, 0.3)",black:"#484f58",red:"#f85149",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#a371f7",cyan:"#39c5cf",white:"#b1bac4",brightBlack:"#6e7681",brightRed:"#ffa198",brightGreen:"#56d364",brightYellow:"#e3b341",brightBlue:"#79c0ff",brightMagenta:"#d2a8ff",brightCyan:"#56d4dd",brightWhite:"#f0f6fc"},scrollback:5e3,cursorBlink:!0,allowProposedApi:!0,macOptionClickForcesSelection:!0});t.current=k;const A=new Nm(k);A.enabled=localStorage.getItem("terminal_predictive_echo")!=="off",l.current=A;const P=new Bm.FitAddon;r.current=P,k.loadAddon(P);let F="dom";try{const X=new Om.WebglAddon;X.onContextLoss(()=>{console.warn("[Terminal] WebGL context lost, falling back to canvas"),X.dispose();try{k.loadAddon(new Ah.CanvasAddon)}catch{}}),k.loadAddon(X),F="webgl"}catch{try{k.loadAddon(new Ah.CanvasAddon),F="canvas"}catch{F="dom"}}console.log(`[Terminal] Using ${F} renderer`),k.open(e.current);const W=e.current.querySelector(".xterm-screen");y.current=W;let z=null,q=!1;const Y=4,$=new WeakSet,O=/mac/i.test(navigator.platform)||/macintosh/i.test(navigator.userAgent),U=O?{altKey:!0}:{shiftKey:!0},G=(X,fe={})=>{const ue={bubbles:!0,cancelable:!0,view:X.view,detail:X.detail,screenX:X.screenX,screenY:X.screenY,clientX:X.clientX,clientY:X.clientY,button:X.button,buttons:X.buttons,relatedTarget:X.relatedTarget,shiftKey:X.shiftKey,ctrlKey:X.ctrlKey,altKey:X.altKey,metaKey:X.metaKey,...fe},de=new MouseEvent(X.type,ue);return $.add(de),de},ee=X=>{$.has(X)||!m.current.mouseTracking||X.button!==0||(O?X.altKey:X.shiftKey)||(X.stopImmediatePropagation(),X.preventDefault(),z=X,q=!1)},Z=X=>{if(!z||$.has(X))return;if(X.stopImmediatePropagation(),X.preventDefault(),!q){const ue=X.clientX-z.clientX,de=X.clientY-z.clientY;if(ue*ue+de*de<Y*Y)return;q=!0,z.target?.dispatchEvent(G(z,U))}const fe=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,view:X.view,screenX:X.screenX,screenY:X.screenY,clientX:X.clientX,clientY:X.clientY,button:X.button,buttons:X.buttons,ctrlKey:X.ctrlKey,altKey:X.altKey,metaKey:X.metaKey,shiftKey:X.shiftKey,...U});$.add(fe),X.target?.dispatchEvent(fe)},ce=X=>{!z||$.has(X)||(X.stopImmediatePropagation(),X.preventDefault(),q?X.target?.dispatchEvent(G(X,U)):(z.target?.dispatchEvent(G(z)),X.target?.dispatchEvent(G(X))),z=null,q=!1)};W&&(W.addEventListener("mousedown",ee,{capture:!0}),W.addEventListener("mousemove",Z,{capture:!0}),W.addEventListener("mouseup",ce,{capture:!0}));const Q=k.parser.registerOscHandler(7337,X=>(X&&o.current(X),!1)),_e=k.parser.registerCsiHandler({prefix:"?",final:"h"},X=>{for(let fe=0;fe<X.length;fe++){const ue=X[fe];typeof ue=="number"&&((ue===1e3||ue===1002||ue===1003)&&(m.current.mouseTracking=!0),ue===1006&&(m.current.sgrMode=!0),(ue===1049||ue===47)&&l.current?.setAltScreen(!0))}return!1}),Se=k.parser.registerCsiHandler({prefix:"?",final:"l"},X=>{for(let fe=0;fe<X.length;fe++){const ue=X[fe];typeof ue=="number"&&((ue===1e3||ue===1002||ue===1003)&&(m.current.mouseTracking=!1),ue===1006&&(m.current.sgrMode=!1),(ue===1049||ue===47)&&l.current?.setAltScreen(!1))}return!1});setTimeout(()=>{P.fit();const{cols:X,rows:fe}=k;C(X,fe)},0);const oe=k.onData(X=>{A.handleInput(X),d(X)}),Ne=5;let Qe=0,se=!1;const te=s(X=>{X instanceof Uint8Array&&A.handleOutput(X),Qe++,Qe>=Ne&&!se&&(se=!0,g(50)),k.write((X instanceof Uint8Array,X),()=>{Qe--,Qe===0&&se&&(se=!1,g(51))})}),re=X=>{A.enabled=X.detail};window.addEventListener("predictive-echo-changed",re),window.addEventListener("resize",R);const K=window.visualViewport;K?.addEventListener("resize",R);const ie=e.current;ie.addEventListener("touchstart",H,{passive:!0}),ie.addEventListener("touchmove",j,{passive:!1}),ie.addEventListener("touchend",N,{passive:!0});const pe=async X=>{const fe=X.clipboardData?.items;if(fe){for(const ue of Array.from(fe))if(ue.type.startsWith("image/")){X.preventDefault();const de=ue.getAsFile();if(!de)return;try{const ae=await fetch("/api/upload-image",{method:"POST",headers:{"Content-Type":de.type},body:de});if(!ae.ok)throw new Error(`Upload failed: ${ae.status}`);const{path:le}=await ae.json();d(le)}catch(ae){console.error("[Terminal] Image upload failed:",ae)}return}}};ie.addEventListener("paste",pe,!0);const he=()=>{if(document.getElementById("copy-mode-overlay"))return;const X=[],fe=k.buffer.active;for(let bt=0;bt<fe.length;bt++){const er=fe.getLine(bt);er&&X.push(er.translateToString(!0))}const ue=X.join(`
`).replace(/\n+$/,"");if(!ue)return;const de=document.createElement("div");de.id="copy-mode-overlay",de.style.cssText="position:fixed;inset:0;z-index:9999;display:flex;flex-direction:column;background:#0d1117;";const ae=document.createElement("div");ae.style.cssText="display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-bottom:1px solid #30363d;flex-shrink:0;";const le=document.createElement("span");le.textContent="Select text to copy",le.style.cssText="color:#8b949e;font-size:12px;";const ct=document.createElement("div");ct.style.cssText="display:flex;gap:8px;";const ht="padding:4px 10px;border-radius:6px;border:1px solid #30363d;font-size:12px;background:#21262d;color:#e6edf3;-webkit-appearance:none;",et=document.createElement("button");et.textContent="Select All",et.style.cssText=ht;const Tt=document.createElement("button");Tt.textContent="Copy All",Tt.style.cssText=ht+"background:#58a6ff;color:#fff;border-color:#58a6ff;";const tt=document.createElement("button");tt.textContent="",tt.style.cssText=ht+"min-width:32px;",ct.append(et,Tt,tt),ae.append(le,ct);const rt=document.createElement("textarea");rt.readOnly=!0,rt.value=ue,rt.style.cssText='flex:1;margin:0;padding:12px;border:none;resize:none;outline:none;background:#0d1117;color:#e6edf3;font-family:Menlo,Monaco,"Courier New",monospace;font-size:12px;line-height:1.5;-webkit-user-select:text;user-select:text;-webkit-touch-callout:default;',de.append(ae,rt),document.body.appendChild(de),rt.scrollTop=rt.scrollHeight;const wi=()=>{de.remove()};tt.onclick=wi,et.onclick=()=>{rt.focus(),rt.select()},Tt.onclick=()=>{rt.focus(),rt.select(),$m(ue),v(!0),x.current&&clearTimeout(x.current),x.current=window.setTimeout(()=>v(!1),1500)}};return window.addEventListener("terminal-copy-viewport",he),()=>{te(),oe.dispose(),Q.dispose(),_e.dispose(),Se.dispose(),window.removeEventListener("predictive-echo-changed",re),window.removeEventListener("resize",R),K?.removeEventListener("resize",R),window.removeEventListener("terminal-copy-viewport",he),W&&(W.removeEventListener("mousedown",ee,{capture:!0}),W.removeEventListener("mousemove",Z,{capture:!0}),W.removeEventListener("mouseup",ce,{capture:!0})),S.current&&clearTimeout(S.current),x.current&&clearTimeout(x.current),b.current&&clearTimeout(b.current),E.current&&clearTimeout(E.current),ie.removeEventListener("touchstart",H),ie.removeEventListener("touchmove",j),ie.removeEventListener("touchend",N),ie.removeEventListener("paste",pe,!0),k.dispose()}},[s,d,g,C,M,R,H,j,N]);const B=Math.round(f/No*100);return I.jsxs("div",{className:"relative w-full h-full",children:[I.jsx("div",{ref:e,className:"w-full h-full bg-bg-primary overflow-hidden",style:{padding:"4px"}}),u&&I.jsxs("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-black/70 backdrop-blur-sm border border-border-subtle text-text-primary text-sm font-mono pointer-events-none select-none z-10",children:[B,"%  ",f,"px"]}),L&&I.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-accent-green/80 backdrop-blur-sm border border-accent-green/50 text-white text-sm font-mono pointer-events-none select-none z-10",children:"Copied!"})]})};function zm(){return V.useEffect(()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),I.jsx(tg,{children:I.jsx(ig,{children:I.jsx(Am,{children:I.jsx(Wm,{})})})})}Ho.createRoot(document.getElementById("root")).render(I.jsx(jf.StrictMode,{children:I.jsx(zm,{})}));</script>
    <style rel="stylesheet" crossorigin>/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */.xterm{cursor:text;position:relative;-moz-user-select:none;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;inset:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility:not(.debug),.xterm .xterm-message{position:absolute;inset:0;z-index:10;color:transparent;pointer-events:none}.xterm .xterm-accessibility-tree:not(.debug) *::-moz-selection{color:transparent}.xterm .xterm-accessibility-tree:not(.debug) *::selection{color:transparent}.xterm .xterm-accessibility-tree{-webkit-user-select:text;-moz-user-select:text;user-select:text;white-space:pre}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{-webkit-text-decoration:double underline;text-decoration:double underline}.xterm-underline-3{-webkit-text-decoration:wavy underline;text-decoration:wavy underline}.xterm-underline-4{-webkit-text-decoration:dotted underline;text-decoration:dotted underline}.xterm-underline-5{-webkit-text-decoration:dashed underline;text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{-webkit-text-decoration:overline double underline;text-decoration:overline double underline}.xterm-overline.xterm-underline-3{-webkit-text-decoration:overline wavy underline;text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{-webkit-text-decoration:overline dotted underline;text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{-webkit-text-decoration:overline dashed underline;text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}html,body,#root{height:100dvh;width:100%;overflow:hidden;margin:0;padding:0}body{background-color:var(--bg-primary);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0}.left-0{left:0}.left-1\/2{left:50%}.top-0{top:0}.top-3{top:.75rem}.top-full{top:100%}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-3{margin-top:.75rem}.block{display:block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.hidden{display:none}.h-1\.5{height:.375rem}.h-12{height:3rem}.h-2{height:.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-\[40px\]{height:40px}.h-\[50vh\]{height:50vh}.h-\[90vh\]{height:90vh}.h-full{height:100%}.max-h-\[200px\]{max-height:200px}.max-h-\[300px\]{max-height:300px}.max-h-\[400px\]{max-height:400px}.max-h-\[70vh\]{max-height:70vh}.max-h-\[80vh\]{max-height:80vh}.min-h-0{min-height:0px}.min-h-\[36px\]{min-height:36px}.w-1\.5{width:.375rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-2{width:.5rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-full{width:100%}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-\[160px\]{min-width:160px}.min-w-\[32px\]{min-width:32px}.min-w-\[36px\]{min-width:36px}.max-w-\[120px\]{max-width:120px}.max-w-\[200px\]{max-width:200px}.max-w-lg{max-width:32rem}.max-w-sm{max-width:24rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.resize{resize:both}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-border-subtle>:not([hidden])~:not([hidden]){border-color:var(--border-subtle)}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-t-2xl{border-top-left-radius:1rem;border-top-right-radius:1rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.border-accent-blue{border-color:var(--accent-blue)}.border-accent-purple{border-color:var(--accent-purple)}.border-border-subtle{border-color:var(--border-subtle)}.border-t-transparent{border-top-color:transparent}.bg-accent-blue{background-color:var(--accent-blue)}.bg-accent-green{background-color:var(--accent-green)}.bg-accent-purple{background-color:var(--accent-purple)}.bg-accent-red{background-color:var(--accent-red)}.bg-bg-primary{background-color:var(--bg-primary)}.bg-bg-secondary{background-color:var(--bg-secondary)}.bg-bg-tertiary{background-color:var(--bg-tertiary)}.bg-black\/50{background-color:#00000080}.bg-black\/70{background-color:#000000b3}.bg-black\/80{background-color:#000c}.bg-border-subtle{background-color:var(--border-subtle)}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.bg-text-muted{background-color:var(--text-muted)}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\.5{padding-top:.625rem;padding-bottom:.625rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-\[env\(safe-area-inset-bottom\)\]{padding-bottom:env(safe-area-inset-bottom)}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-\[10px\]{font-size:10px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.tracking-wider{letter-spacing:.05em}.text-accent-blue{color:var(--accent-blue)}.text-accent-green{color:var(--accent-green)}.text-accent-purple{color:var(--accent-purple)}.text-accent-red{color:var(--accent-red)}.text-border-subtle{color:var(--border-subtle)}.text-text-muted{color:var(--text-muted)}.text-text-primary{color:var(--text-primary)}.text-text-secondary{color:var(--text-secondary)}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.opacity-50{opacity:.5}.opacity-70{opacity:.7}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-100{transition-duration:.1s}.duration-200{transition-duration:.2s}.no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.mask-gradient-right{mask-image:linear-gradient(to right,black 90%,transparent 100%);-webkit-mask-image:linear-gradient(to right,black 90%,transparent 100%)}.animate-in.fade-in{animation:fadeIn .2s ease-out forwards}:root{--bg-primary: #0d1117;--bg-secondary: #161b22;--bg-tertiary: #21262d;--accent-blue: #58a6ff;--accent-green: #3fb950;--accent-red: #f85149;--accent-purple: #a371f7;--accent-orange: #d29922;--text-primary: #e6edf3;--text-secondary: #8b949e;--text-muted: #6e7681;--border-subtle: #30363d;--glow-ai: rgba(163, 113, 247, .15)}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:var(--bg-secondary)}::-webkit-scrollbar-thumb{background:var(--bg-tertiary);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:var(--border-subtle)}::-moz-selection{background-color:var(--accent-purple);color:#fff}::selection{background-color:var(--accent-purple);color:#fff}.xterm-screen{touch-action:none;contain:strict}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.placeholder\:text-text-muted::-moz-placeholder{color:var(--text-muted)}.placeholder\:text-text-muted::placeholder{color:var(--text-muted)}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:start-\[2px\]:after{content:var(--tw-content);inset-inline-start:2px}.after\:top-\[2px\]:after{content:var(--tw-content);top:2px}.after\:h-5:after{content:var(--tw-content);height:1.25rem}.after\:w-5:after{content:var(--tw-content);width:1.25rem}.after\:rounded-full:after{content:var(--tw-content);border-radius:9999px}.after\:border:after{content:var(--tw-content);border-width:1px}.after\:border-gray-300:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.after\:bg-white:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.after\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.after\:content-\[\'\'\]:after{--tw-content: "";content:var(--tw-content)}.hover\:bg-bg-tertiary:hover{background-color:var(--bg-tertiary)}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:text-accent-red:hover{color:var(--accent-red)}.hover\:text-text-primary:hover{color:var(--text-primary)}.focus\:border-accent-blue:focus{border-color:var(--accent-blue)}.focus\:border-accent-purple:focus{border-color:var(--accent-purple)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:bg-bg-tertiary:active{background-color:var(--bg-tertiary)}.active\:opacity-70:active{opacity:.7}.active\:opacity-80:active{opacity:.8}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-30:disabled{opacity:.3}.disabled\:opacity-50:disabled{opacity:.5}.peer:checked~.peer-checked\:bg-accent-green{background-color:var(--accent-green)}.peer:checked~.peer-checked\:after\:translate-x-full:after{content:var(--tw-content);--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked~.peer-checked\:after\:border-white:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.peer:focus~.peer-focus\:outline-none{outline:2px solid transparent;outline-offset:2px}.peer:checked~.rtl\:peer-checked\:after\:-translate-x-full:where([dir=rtl],[dir=rtl] *):after{content:var(--tw-content);--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
