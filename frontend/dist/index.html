<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>VibeTerm - Mobile Terminal</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const v of d)if(v.type==="childList")for(const S of v.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&s(S)}).observe(document,{childList:!0,subtree:!0});function r(d){const v={};return d.integrity&&(v.integrity=d.integrity),d.referrerPolicy&&(v.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?v.credentials="include":d.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function s(d){if(d.ep)return;d.ep=!0;const v=r(d);fetch(d.href,v)}})();var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ih(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var d=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,d.get?d:{enumerable:!0,get:function(){return e[s]}})}),r}var Fh={exports:{}},Nn={},Nh={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps=Symbol.for("react.element"),Rf=Symbol.for("react.portal"),Mf=Symbol.for("react.fragment"),Df=Symbol.for("react.strict_mode"),Af=Symbol.for("react.profiler"),Tf=Symbol.for("react.provider"),Pf=Symbol.for("react.context"),Bf=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),If=Symbol.for("react.memo"),Ff=Symbol.for("react.lazy"),Xl=Symbol.iterator;function Nf(e){return e===null||typeof e!="object"?null:(e=Xl&&e[Xl]||e["@@iterator"],typeof e=="function"?e:null)}var Hh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$h=Object.assign,jh={};function Si(e,t,r){this.props=e,this.context=t,this.refs=jh,this.updater=r||Hh}Si.prototype.isReactComponent={};Si.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Si.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wh(){}Wh.prototype=Si.prototype;function Wa(e,t,r){this.props=e,this.context=t,this.refs=jh,this.updater=r||Hh}var za=Wa.prototype=new Wh;za.constructor=Wa;$h(za,Si.prototype);za.isPureReactComponent=!0;var Yl=Array.isArray,zh=Object.prototype.hasOwnProperty,Ua={current:null},Uh={key:!0,ref:!0,__self:!0,__source:!0};function Vh(e,t,r){var s,d={},v=null,S=null;if(t!=null)for(s in t.ref!==void 0&&(S=t.ref),t.key!==void 0&&(v=""+t.key),t)zh.call(t,s)&&!Uh.hasOwnProperty(s)&&(d[s]=t[s]);var i=arguments.length-2;if(i===1)d.children=r;else if(1<i){for(var o=Array(i),f=0;f<i;f++)o[f]=arguments[f+2];d.children=o}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)d[s]===void 0&&(d[s]=i[s]);return{$$typeof:ps,type:e,key:v,ref:S,props:d,_owner:Ua.current}}function Hf(e,t){return{$$typeof:ps,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Va(e){return typeof e=="object"&&e!==null&&e.$$typeof===ps}function $f(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Jl=/\/+/g;function ho(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$f(""+e.key):t.toString(36)}function qs(e,t,r,s,d){var v=typeof e;(v==="undefined"||v==="boolean")&&(e=null);var S=!1;if(e===null)S=!0;else switch(v){case"string":case"number":S=!0;break;case"object":switch(e.$$typeof){case ps:case Rf:S=!0}}if(S)return S=e,d=d(S),e=s===""?"."+ho(S,0):s,Yl(d)?(r="",e!=null&&(r=e.replace(Jl,"$&/")+"/"),qs(d,t,r,"",function(f){return f})):d!=null&&(Va(d)&&(d=Hf(d,r+(!d.key||S&&S.key===d.key?"":(""+d.key).replace(Jl,"$&/")+"/")+e)),t.push(d)),1;if(S=0,s=s===""?".":s+":",Yl(e))for(var i=0;i<e.length;i++){v=e[i];var o=s+ho(v,i);S+=qs(v,t,r,o,d)}else if(o=Nf(e),typeof o=="function")for(e=o.call(e),i=0;!(v=e.next()).done;)v=v.value,o=s+ho(v,i++),S+=qs(v,t,r,o,d);else if(v==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return S}function ks(e,t,r){if(e==null)return e;var s=[],d=0;return qs(e,s,"","",function(v){return t.call(r,v,d++)}),s}function jf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},Ks={transition:null},Wf={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:Ks,ReactCurrentOwner:Ua};function Gh(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:ks,forEach:function(e,t,r){ks(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ks(e,function(){t++}),t},toArray:function(e){return ks(e,function(t){return t})||[]},only:function(e){if(!Va(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Component=Si;pe.Fragment=Mf;pe.Profiler=Af;pe.PureComponent=Wa;pe.StrictMode=Df;pe.Suspense=Of;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wf;pe.act=Gh;pe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=$h({},e.props),d=e.key,v=e.ref,S=e._owner;if(t!=null){if(t.ref!==void 0&&(v=t.ref,S=Ua.current),t.key!==void 0&&(d=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(o in t)zh.call(t,o)&&!Uh.hasOwnProperty(o)&&(s[o]=t[o]===void 0&&i!==void 0?i[o]:t[o])}var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){i=Array(o);for(var f=0;f<o;f++)i[f]=arguments[f+2];s.children=i}return{$$typeof:ps,type:e.type,key:d,ref:v,props:s,_owner:S}};pe.createContext=function(e){return e={$$typeof:Pf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Tf,_context:e},e.Consumer=e};pe.createElement=Vh;pe.createFactory=function(e){var t=Vh.bind(null,e);return t.type=e,t};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:Bf,render:e}};pe.isValidElement=Va;pe.lazy=function(e){return{$$typeof:Ff,_payload:{_status:-1,_result:e},_init:jf}};pe.memo=function(e,t){return{$$typeof:If,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=Ks.transition;Ks.transition={};try{e()}finally{Ks.transition=t}};pe.unstable_act=Gh;pe.useCallback=function(e,t){return rt.current.useCallback(e,t)};pe.useContext=function(e){return rt.current.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};pe.useEffect=function(e,t){return rt.current.useEffect(e,t)};pe.useId=function(){return rt.current.useId()};pe.useImperativeHandle=function(e,t,r){return rt.current.useImperativeHandle(e,t,r)};pe.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return rt.current.useMemo(e,t)};pe.useReducer=function(e,t,r){return rt.current.useReducer(e,t,r)};pe.useRef=function(e){return rt.current.useRef(e)};pe.useState=function(e){return rt.current.useState(e)};pe.useSyncExternalStore=function(e,t,r){return rt.current.useSyncExternalStore(e,t,r)};pe.useTransition=function(){return rt.current.useTransition()};pe.version="18.3.1";Nh.exports=pe;var V=Nh.exports;const zf=Oh(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf=V,Vf=Symbol.for("react.element"),Gf=Symbol.for("react.fragment"),qf=Object.prototype.hasOwnProperty,Kf=Uf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xf={key:!0,ref:!0,__self:!0,__source:!0};function qh(e,t,r){var s,d={},v=null,S=null;r!==void 0&&(v=""+r),t.key!==void 0&&(v=""+t.key),t.ref!==void 0&&(S=t.ref);for(s in t)qf.call(t,s)&&!Xf.hasOwnProperty(s)&&(d[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)d[s]===void 0&&(d[s]=t[s]);return{$$typeof:Vf,type:e,key:v,ref:S,props:d,_owner:Kf.current}}Nn.Fragment=Gf;Nn.jsx=qh;Nn.jsxs=qh;Fh.exports=Nn;var F=Fh.exports,Wo={},Kh={exports:{}},pt={},Xh={exports:{}},Yh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,M){var A=B.length;B.push(M);e:for(;0<A;){var O=A-1>>>1,I=B[O];if(0<d(I,M))B[O]=M,B[A]=I,A=O;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var M=B[0],A=B.pop();if(A!==M){B[0]=A;e:for(var O=0,I=B.length,W=I>>>1;O<W;){var z=2*(O+1)-1,X=B[z],K=z+1,$=B[K];if(0>d(X,A))K<I&&0>d($,X)?(B[O]=$,B[K]=A,O=K):(B[O]=X,B[z]=A,O=z);else if(K<I&&0>d($,A))B[O]=$,B[K]=A,O=K;else break e}}return M}function d(B,M){var A=B.sortIndex-M.sortIndex;return A!==0?A:B.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var v=performance;e.unstable_now=function(){return v.now()}}else{var S=Date,i=S.now();e.unstable_now=function(){return S.now()-i}}var o=[],f=[],_=1,c=null,p=3,w=!1,C=!1,u=!1,n=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,l=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(B){for(var M=r(f);M!==null;){if(M.callback===null)s(f);else if(M.startTime<=B)s(f),M.sortIndex=M.expirationTime,t(o,M);else break;M=r(f)}}function m(B){if(u=!1,h(B),!C)if(r(o)!==null)C=!0,j(L);else{var M=r(f);M!==null&&H(m,M.startTime-B)}}function L(B,M){C=!1,u&&(u=!1,a(y),y=-1),w=!0;var A=p;try{for(h(M),c=r(o);c!==null&&(!(c.expirationTime>M)||B&&!R());){var O=c.callback;if(typeof O=="function"){c.callback=null,p=c.priorityLevel;var I=O(c.expirationTime<=M);M=e.unstable_now(),typeof I=="function"?c.callback=I:c===r(o)&&s(o),h(M)}else s(o);c=r(o)}if(c!==null)var W=!0;else{var z=r(f);z!==null&&H(m,z.startTime-M),W=!1}return W}finally{c=null,p=A,w=!1}}var g=!1,x=null,y=-1,b=5,E=-1;function R(){return!(e.unstable_now()-E<b)}function k(){if(x!==null){var B=e.unstable_now();E=B;var M=!0;try{M=x(!0,B)}finally{M?D():(g=!1,x=null)}}else g=!1}var D;if(typeof l=="function")D=function(){l(k)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,N=T.port2;T.port1.onmessage=k,D=function(){N.postMessage(null)}}else D=function(){n(k,0)};function j(B){x=B,g||(g=!0,D())}function H(B,M){y=n(function(){B(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){C||w||(C=!0,j(L))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var A=p;p=M;try{return B()}finally{p=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,M){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var A=p;p=B;try{return M()}finally{p=A}},e.unstable_scheduleCallback=function(B,M,A){var O=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?O+A:O):A=O,B){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=A+I,B={id:_++,callback:M,priorityLevel:B,startTime:A,expirationTime:I,sortIndex:-1},A>O?(B.sortIndex=A,t(f,B),r(o)===null&&B===r(f)&&(u?(a(y),y=-1):u=!0,H(m,A-O))):(B.sortIndex=I,t(o,B),C||w||(C=!0,j(L))),B},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(B){var M=p;return function(){var A=p;p=M;try{return B.apply(this,arguments)}finally{p=A}}}})(Yh);Xh.exports=Yh;var Yf=Xh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=V,_t=Yf;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jh=new Set,Xi={};function Wr(e,t){fi(e,t),fi(e+"Capture",t)}function fi(e,t){for(Xi[e]=t,e=0;e<t.length;e++)Jh.add(t[e])}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zo=Object.prototype.hasOwnProperty,Qf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ql={},Zl={};function Zf(e){return zo.call(Zl,e)?!0:zo.call(Ql,e)?!1:Qf.test(e)?Zl[e]=!0:(Ql[e]=!0,!1)}function e_(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t_(e,t,r,s){if(t===null||typeof t>"u"||e_(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function it(e,t,r,s,d,v,S){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=v,this.removeEmptyString=S}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new it(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new it(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new it(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new it(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new it(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new it(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new it(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new it(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new it(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ga=/[\-:]([a-z])/g;function qa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ga,qa);qe[t]=new it(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ga,qa);qe[t]=new it(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ga,qa);qe[t]=new it(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new it(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new it(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ka(e,t,r,s){var d=qe.hasOwnProperty(t)?qe[t]:null;(d!==null?d.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t_(t,r,d,s)&&(r=null),s||d===null?Zf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,s=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var er=Jf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rs=Symbol.for("react.element"),qr=Symbol.for("react.portal"),Kr=Symbol.for("react.fragment"),Xa=Symbol.for("react.strict_mode"),Uo=Symbol.for("react.profiler"),Qh=Symbol.for("react.provider"),Zh=Symbol.for("react.context"),Ya=Symbol.for("react.forward_ref"),Vo=Symbol.for("react.suspense"),Go=Symbol.for("react.suspense_list"),Ja=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),eu=Symbol.for("react.offscreen"),ec=Symbol.iterator;function ki(e){return e===null||typeof e!="object"?null:(e=ec&&e[ec]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,uo;function Ii(e){if(uo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);uo=t&&t[1]||""}return`
`+uo+e}var fo=!1;function _o(e,t){if(!e||fo)return"";fo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var d=f.stack.split(`
`),v=s.stack.split(`
`),S=d.length-1,i=v.length-1;1<=S&&0<=i&&d[S]!==v[i];)i--;for(;1<=S&&0<=i;S--,i--)if(d[S]!==v[i]){if(S!==1||i!==1)do if(S--,i--,0>i||d[S]!==v[i]){var o=`
`+d[S].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=S&&0<=i);break}}}finally{fo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ii(e):""}function r_(e){switch(e.tag){case 5:return Ii(e.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 2:case 15:return e=_o(e.type,!1),e;case 11:return e=_o(e.type.render,!1),e;case 1:return e=_o(e.type,!0),e;default:return""}}function qo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kr:return"Fragment";case qr:return"Portal";case Uo:return"Profiler";case Xa:return"StrictMode";case Vo:return"Suspense";case Go:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Zh:return(e.displayName||"Context")+".Consumer";case Qh:return(e._context.displayName||"Context")+".Provider";case Ya:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ja:return t=e.displayName||null,t!==null?t:qo(e.type)||"Memo";case sr:t=e._payload,e=e._init;try{return qo(e(t))}catch{}}return null}function i_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qo(t);case 8:return t===Xa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s_(e){var t=tu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,v=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(S){s=""+S,v.call(this,S)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(S){s=""+S},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ms(e){e._valueTracker||(e._valueTracker=s_(e))}function ru(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=tu(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function hn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ko(e,t){var r=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function tc(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Cr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function iu(e,t){t=t.checked,t!=null&&Ka(e,"checked",t,!1)}function Xo(e,t){iu(e,t);var r=Cr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yo(e,t.type,r):t.hasOwnProperty("defaultValue")&&Yo(e,t.type,Cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Yo(e,t,r){(t!=="number"||hn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fi=Array.isArray;function ni(e,t,r,s){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Cr(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,s&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Jo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ic(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Y(92));if(Fi(r)){if(1<r.length)throw Error(Y(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Cr(r)}}function su(e,t){var r=Cr(t.value),s=Cr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function sc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ds,ou=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ds=Ds||document.createElement("div"),Ds.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ds.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var $i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n_=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(e){n_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$i[t]=$i[e]})});function au(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||$i.hasOwnProperty(e)&&$i[e]?(""+t).trim():t+"px"}function lu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,d=au(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,d):e[r]=d}}var o_=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zo(e,t){if(t){if(o_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function ea(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ta=null;function Qa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ra=null,oi=null,ai=null;function nc(e){if(e=ms(e)){if(typeof ra!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=zn(t),ra(e.stateNode,e.type,t))}}function cu(e){oi?ai?ai.push(e):ai=[e]:oi=e}function hu(){if(oi){var e=oi,t=ai;if(ai=oi=null,nc(e),t)for(e=0;e<t.length;e++)nc(t[e])}}function uu(e,t){return e(t)}function du(){}var po=!1;function fu(e,t,r){if(po)return e(t,r);po=!0;try{return uu(e,t,r)}finally{po=!1,(oi!==null||ai!==null)&&(du(),hu())}}function Ji(e,t){var r=e.stateNode;if(r===null)return null;var s=zn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Y(231,t,typeof r));return r}var ia=!1;if(Yt)try{var Ri={};Object.defineProperty(Ri,"passive",{get:function(){ia=!0}}),window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch{ia=!1}function a_(e,t,r,s,d,v,S,i,o){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(_){this.onError(_)}}var ji=!1,un=null,dn=!1,sa=null,l_={onError:function(e){ji=!0,un=e}};function c_(e,t,r,s,d,v,S,i,o){ji=!1,un=null,a_.apply(l_,arguments)}function h_(e,t,r,s,d,v,S,i,o){if(c_.apply(this,arguments),ji){if(ji){var f=un;ji=!1,un=null}else throw Error(Y(198));dn||(dn=!0,sa=f)}}function zr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function _u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oc(e){if(zr(e)!==e)throw Error(Y(188))}function u_(e){var t=e.alternate;if(!t){if(t=zr(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var r=e,s=t;;){var d=r.return;if(d===null)break;var v=d.alternate;if(v===null){if(s=d.return,s!==null){r=s;continue}break}if(d.child===v.child){for(v=d.child;v;){if(v===r)return oc(d),e;if(v===s)return oc(d),t;v=v.sibling}throw Error(Y(188))}if(r.return!==s.return)r=d,s=v;else{for(var S=!1,i=d.child;i;){if(i===r){S=!0,r=d,s=v;break}if(i===s){S=!0,s=d,r=v;break}i=i.sibling}if(!S){for(i=v.child;i;){if(i===r){S=!0,r=v,s=d;break}if(i===s){S=!0,s=v,r=d;break}i=i.sibling}if(!S)throw Error(Y(189))}}if(r.alternate!==s)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?e:t}function pu(e){return e=u_(e),e!==null?gu(e):null}function gu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gu(e);if(t!==null)return t;e=e.sibling}return null}var vu=_t.unstable_scheduleCallback,ac=_t.unstable_cancelCallback,d_=_t.unstable_shouldYield,f_=_t.unstable_requestPaint,Be=_t.unstable_now,__=_t.unstable_getCurrentPriorityLevel,Za=_t.unstable_ImmediatePriority,mu=_t.unstable_UserBlockingPriority,fn=_t.unstable_NormalPriority,p_=_t.unstable_LowPriority,yu=_t.unstable_IdlePriority,Hn=null,$t=null;function g_(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Hn,e,void 0,(e.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:y_,v_=Math.log,m_=Math.LN2;function y_(e){return e>>>=0,e===0?32:31-(v_(e)/m_|0)|0}var As=64,Ts=4194304;function Ni(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _n(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,d=e.suspendedLanes,v=e.pingedLanes,S=r&268435455;if(S!==0){var i=S&~d;i!==0?s=Ni(i):(v&=S,v!==0&&(s=Ni(v)))}else S=r&~d,S!==0?s=Ni(S):v!==0&&(s=Ni(v));if(s===0)return 0;if(t!==0&&t!==s&&!(t&d)&&(d=s&-s,v=t&-t,d>=v||d===16&&(v&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Mt(t),d=1<<r,s|=e[r],t&=~d;return s}function C_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S_(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,d=e.expirationTimes,v=e.pendingLanes;0<v;){var S=31-Mt(v),i=1<<S,o=d[S];o===-1?(!(i&r)||i&s)&&(d[S]=C_(i,t)):o<=t&&(e.expiredLanes|=i),v&=~i}}function na(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cu(){var e=As;return As<<=1,!(As&4194240)&&(As=64),e}function go(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mt(t),e[t]=r}function w_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-Mt(r),v=1<<d;t[d]=0,s[d]=-1,e[d]=-1,r&=~v}}function el(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Mt(r),d=1<<s;d&t|e[s]&t&&(e[s]|=t),r&=~d}}var Se=0;function Su(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wu,tl,xu,bu,Lu,oa=!1,Ps=[],ur=null,dr=null,fr=null,Qi=new Map,Zi=new Map,or=[],x_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lc(e,t){switch(e){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Qi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(t.pointerId)}}function Mi(e,t,r,s,d,v){return e===null||e.nativeEvent!==v?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:v,targetContainers:[d]},t!==null&&(t=ms(t),t!==null&&tl(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function b_(e,t,r,s,d){switch(t){case"focusin":return ur=Mi(ur,e,t,r,s,d),!0;case"dragenter":return dr=Mi(dr,e,t,r,s,d),!0;case"mouseover":return fr=Mi(fr,e,t,r,s,d),!0;case"pointerover":var v=d.pointerId;return Qi.set(v,Mi(Qi.get(v)||null,e,t,r,s,d)),!0;case"gotpointercapture":return v=d.pointerId,Zi.set(v,Mi(Zi.get(v)||null,e,t,r,s,d)),!0}return!1}function Eu(e){var t=Dr(e.target);if(t!==null){var r=zr(t);if(r!==null){if(t=r.tag,t===13){if(t=_u(r),t!==null){e.blockedOn=t,Lu(e.priority,function(){xu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=aa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);ta=s,r.target.dispatchEvent(s),ta=null}else return t=ms(r),t!==null&&tl(t),e.blockedOn=r,!1;t.shift()}return!0}function cc(e,t,r){Xs(e)&&r.delete(t)}function L_(){oa=!1,ur!==null&&Xs(ur)&&(ur=null),dr!==null&&Xs(dr)&&(dr=null),fr!==null&&Xs(fr)&&(fr=null),Qi.forEach(cc),Zi.forEach(cc)}function Di(e,t){e.blockedOn===t&&(e.blockedOn=null,oa||(oa=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,L_)))}function es(e){function t(d){return Di(d,e)}if(0<Ps.length){Di(Ps[0],e);for(var r=1;r<Ps.length;r++){var s=Ps[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ur!==null&&Di(ur,e),dr!==null&&Di(dr,e),fr!==null&&Di(fr,e),Qi.forEach(t),Zi.forEach(t),r=0;r<or.length;r++)s=or[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<or.length&&(r=or[0],r.blockedOn===null);)Eu(r),r.blockedOn===null&&or.shift()}var li=er.ReactCurrentBatchConfig,pn=!0;function E_(e,t,r,s){var d=Se,v=li.transition;li.transition=null;try{Se=1,rl(e,t,r,s)}finally{Se=d,li.transition=v}}function k_(e,t,r,s){var d=Se,v=li.transition;li.transition=null;try{Se=4,rl(e,t,r,s)}finally{Se=d,li.transition=v}}function rl(e,t,r,s){if(pn){var d=aa(e,t,r,s);if(d===null)Eo(e,t,s,gn,r),lc(e,s);else if(b_(d,e,t,r,s))s.stopPropagation();else if(lc(e,s),t&4&&-1<x_.indexOf(e)){for(;d!==null;){var v=ms(d);if(v!==null&&wu(v),v=aa(e,t,r,s),v===null&&Eo(e,t,s,gn,r),v===d)break;d=v}d!==null&&s.stopPropagation()}else Eo(e,t,s,null,r)}}var gn=null;function aa(e,t,r,s){if(gn=null,e=Qa(s),e=Dr(e),e!==null)if(t=zr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=_u(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gn=e,null}function ku(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(__()){case Za:return 1;case mu:return 4;case fn:case p_:return 16;case yu:return 536870912;default:return 16}default:return 16}}var lr=null,il=null,Ys=null;function Ru(){if(Ys)return Ys;var e,t=il,r=t.length,s,d="value"in lr?lr.value:lr.textContent,v=d.length;for(e=0;e<r&&t[e]===d[e];e++);var S=r-e;for(s=1;s<=S&&t[r-s]===d[v-s];s++);return Ys=d.slice(e,1<s?1-s:void 0)}function Js(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bs(){return!0}function hc(){return!1}function gt(e){function t(r,s,d,v,S){this._reactName=r,this._targetInst=d,this.type=s,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(v):v[i]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Bs:hc,this.isPropagationStopped=hc,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),t}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=gt(wi),vs=De({},wi,{view:0,detail:0}),R_=gt(vs),vo,mo,Ai,$n=De({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ai&&(Ai&&e.type==="mousemove"?(vo=e.screenX-Ai.screenX,mo=e.screenY-Ai.screenY):mo=vo=0,Ai=e),vo)},movementY:function(e){return"movementY"in e?e.movementY:mo}}),uc=gt($n),M_=De({},$n,{dataTransfer:0}),D_=gt(M_),A_=De({},vs,{relatedTarget:0}),yo=gt(A_),T_=De({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),P_=gt(T_),B_=De({},wi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),O_=gt(B_),I_=De({},wi,{data:0}),dc=gt(I_),F_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=H_[e])?!!t[e]:!1}function nl(){return $_}var j_=De({},vs,{key:function(e){if(e.key){var t=F_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Js(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nl,charCode:function(e){return e.type==="keypress"?Js(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Js(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),W_=gt(j_),z_=De({},$n,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fc=gt(z_),U_=De({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nl}),V_=gt(U_),G_=De({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),q_=gt(G_),K_=De({},$n,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X_=gt(K_),Y_=[9,13,27,32],ol=Yt&&"CompositionEvent"in window,Wi=null;Yt&&"documentMode"in document&&(Wi=document.documentMode);var J_=Yt&&"TextEvent"in window&&!Wi,Mu=Yt&&(!ol||Wi&&8<Wi&&11>=Wi),_c=" ",pc=!1;function Du(e,t){switch(e){case"keyup":return Y_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Au(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xr=!1;function Q_(e,t){switch(e){case"compositionend":return Au(t);case"keypress":return t.which!==32?null:(pc=!0,_c);case"textInput":return e=t.data,e===_c&&pc?null:e;default:return null}}function Z_(e,t){if(Xr)return e==="compositionend"||!ol&&Du(e,t)?(e=Ru(),Ys=il=lr=null,Xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mu&&t.locale!=="ko"?null:t.data;default:return null}}var ep={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ep[e.type]:t==="textarea"}function Tu(e,t,r,s){cu(s),t=vn(t,"onChange"),0<t.length&&(r=new sl("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var zi=null,ts=null;function tp(e){zu(e,0)}function jn(e){var t=Qr(e);if(ru(t))return e}function rp(e,t){if(e==="change")return t}var Pu=!1;if(Yt){var Co;if(Yt){var So="oninput"in document;if(!So){var vc=document.createElement("div");vc.setAttribute("oninput","return;"),So=typeof vc.oninput=="function"}Co=So}else Co=!1;Pu=Co&&(!document.documentMode||9<document.documentMode)}function mc(){zi&&(zi.detachEvent("onpropertychange",Bu),ts=zi=null)}function Bu(e){if(e.propertyName==="value"&&jn(ts)){var t=[];Tu(t,ts,e,Qa(e)),fu(tp,t)}}function ip(e,t,r){e==="focusin"?(mc(),zi=t,ts=r,zi.attachEvent("onpropertychange",Bu)):e==="focusout"&&mc()}function sp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jn(ts)}function np(e,t){if(e==="click")return jn(t)}function op(e,t){if(e==="input"||e==="change")return jn(t)}function ap(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:ap;function rs(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var d=r[s];if(!zo.call(t,d)||!At(e[d],t[d]))return!1}return!0}function yc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cc(e,t){var r=yc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yc(r)}}function Ou(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ou(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Iu(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=hn(e.document)}return t}function al(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lp(e){var t=Iu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Ou(r.ownerDocument.documentElement,r)){if(s!==null&&al(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,v=Math.min(s.start,d);s=s.end===void 0?v:Math.min(s.end,d),!e.extend&&v>s&&(d=s,s=v,v=d),d=Cc(r,v);var S=Cc(r,s);d&&S&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==S.node||e.focusOffset!==S.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),v>s?(e.addRange(t),e.extend(S.node,S.offset)):(t.setEnd(S.node,S.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cp=Yt&&"documentMode"in document&&11>=document.documentMode,Yr=null,la=null,Ui=null,ca=!1;function Sc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ca||Yr==null||Yr!==hn(s)||(s=Yr,"selectionStart"in s&&al(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ui&&rs(Ui,s)||(Ui=s,s=vn(la,"onSelect"),0<s.length&&(t=new sl("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Yr)))}function Os(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Jr={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionend:Os("Transition","TransitionEnd")},wo={},Fu={};Yt&&(Fu=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function Wn(e){if(wo[e])return wo[e];if(!Jr[e])return e;var t=Jr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Fu)return wo[e]=t[r];return e}var Nu=Wn("animationend"),Hu=Wn("animationiteration"),$u=Wn("animationstart"),ju=Wn("transitionend"),Wu=new Map,wc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){Wu.set(e,t),Wr(t,[e])}for(var xo=0;xo<wc.length;xo++){var bo=wc[xo],hp=bo.toLowerCase(),up=bo[0].toUpperCase()+bo.slice(1);wr(hp,"on"+up)}wr(Nu,"onAnimationEnd");wr(Hu,"onAnimationIteration");wr($u,"onAnimationStart");wr("dblclick","onDoubleClick");wr("focusin","onFocus");wr("focusout","onBlur");wr(ju,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function xc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,h_(s,t,void 0,e),e.currentTarget=null}function zu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],d=s.event;s=s.listeners;e:{var v=void 0;if(t)for(var S=s.length-1;0<=S;S--){var i=s[S],o=i.instance,f=i.currentTarget;if(i=i.listener,o!==v&&d.isPropagationStopped())break e;xc(d,i,f),v=o}else for(S=0;S<s.length;S++){if(i=s[S],o=i.instance,f=i.currentTarget,i=i.listener,o!==v&&d.isPropagationStopped())break e;xc(d,i,f),v=o}}}if(dn)throw e=sa,dn=!1,sa=null,e}function xe(e,t){var r=t[_a];r===void 0&&(r=t[_a]=new Set);var s=e+"__bubble";r.has(s)||(Uu(t,e,2,!1),r.add(s))}function Lo(e,t,r){var s=0;t&&(s|=4),Uu(r,e,s,t)}var Is="_reactListening"+Math.random().toString(36).slice(2);function is(e){if(!e[Is]){e[Is]=!0,Jh.forEach(function(r){r!=="selectionchange"&&(dp.has(r)||Lo(r,!1,e),Lo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Is]||(t[Is]=!0,Lo("selectionchange",!1,t))}}function Uu(e,t,r,s){switch(ku(t)){case 1:var d=E_;break;case 4:d=k_;break;default:d=rl}r=d.bind(null,t,r,e),d=void 0,!ia||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),s?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function Eo(e,t,r,s,d){var v=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var S=s.tag;if(S===3||S===4){var i=s.stateNode.containerInfo;if(i===d||i.nodeType===8&&i.parentNode===d)break;if(S===4)for(S=s.return;S!==null;){var o=S.tag;if((o===3||o===4)&&(o=S.stateNode.containerInfo,o===d||o.nodeType===8&&o.parentNode===d))return;S=S.return}for(;i!==null;){if(S=Dr(i),S===null)return;if(o=S.tag,o===5||o===6){s=v=S;continue e}i=i.parentNode}}s=s.return}fu(function(){var f=v,_=Qa(r),c=[];e:{var p=Wu.get(e);if(p!==void 0){var w=sl,C=e;switch(e){case"keypress":if(Js(r)===0)break e;case"keydown":case"keyup":w=W_;break;case"focusin":C="focus",w=yo;break;case"focusout":C="blur",w=yo;break;case"beforeblur":case"afterblur":w=yo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=D_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=V_;break;case Nu:case Hu:case $u:w=P_;break;case ju:w=q_;break;case"scroll":w=R_;break;case"wheel":w=X_;break;case"copy":case"cut":case"paste":w=O_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=fc}var u=(t&4)!==0,n=!u&&e==="scroll",a=u?p!==null?p+"Capture":null:p;u=[];for(var l=f,h;l!==null;){h=l;var m=h.stateNode;if(h.tag===5&&m!==null&&(h=m,a!==null&&(m=Ji(l,a),m!=null&&u.push(ss(l,m,h)))),n)break;l=l.return}0<u.length&&(p=new w(p,C,null,r,_),c.push({event:p,listeners:u}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",p&&r!==ta&&(C=r.relatedTarget||r.fromElement)&&(Dr(C)||C[Jt]))break e;if((w||p)&&(p=_.window===_?_:(p=_.ownerDocument)?p.defaultView||p.parentWindow:window,w?(C=r.relatedTarget||r.toElement,w=f,C=C?Dr(C):null,C!==null&&(n=zr(C),C!==n||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=f),w!==C)){if(u=uc,m="onMouseLeave",a="onMouseEnter",l="mouse",(e==="pointerout"||e==="pointerover")&&(u=fc,m="onPointerLeave",a="onPointerEnter",l="pointer"),n=w==null?p:Qr(w),h=C==null?p:Qr(C),p=new u(m,l+"leave",w,r,_),p.target=n,p.relatedTarget=h,m=null,Dr(_)===f&&(u=new u(a,l+"enter",C,r,_),u.target=h,u.relatedTarget=n,m=u),n=m,w&&C)t:{for(u=w,a=C,l=0,h=u;h;h=Vr(h))l++;for(h=0,m=a;m;m=Vr(m))h++;for(;0<l-h;)u=Vr(u),l--;for(;0<h-l;)a=Vr(a),h--;for(;l--;){if(u===a||a!==null&&u===a.alternate)break t;u=Vr(u),a=Vr(a)}u=null}else u=null;w!==null&&bc(c,p,w,u,!1),C!==null&&n!==null&&bc(c,n,C,u,!0)}}e:{if(p=f?Qr(f):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var L=rp;else if(gc(p))if(Pu)L=op;else{L=sp;var g=ip}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=np);if(L&&(L=L(e,f))){Tu(c,L,r,_);break e}g&&g(e,p,f),e==="focusout"&&(g=p._wrapperState)&&g.controlled&&p.type==="number"&&Yo(p,"number",p.value)}switch(g=f?Qr(f):window,e){case"focusin":(gc(g)||g.contentEditable==="true")&&(Yr=g,la=f,Ui=null);break;case"focusout":Ui=la=Yr=null;break;case"mousedown":ca=!0;break;case"contextmenu":case"mouseup":case"dragend":ca=!1,Sc(c,r,_);break;case"selectionchange":if(cp)break;case"keydown":case"keyup":Sc(c,r,_)}var x;if(ol)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Xr?Du(e,r)&&(y="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(y="onCompositionStart");y&&(Mu&&r.locale!=="ko"&&(Xr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Xr&&(x=Ru()):(lr=_,il="value"in lr?lr.value:lr.textContent,Xr=!0)),g=vn(f,y),0<g.length&&(y=new dc(y,e,null,r,_),c.push({event:y,listeners:g}),x?y.data=x:(x=Au(r),x!==null&&(y.data=x)))),(x=J_?Q_(e,r):Z_(e,r))&&(f=vn(f,"onBeforeInput"),0<f.length&&(_=new dc("onBeforeInput","beforeinput",null,r,_),c.push({event:_,listeners:f}),_.data=x))}zu(c,t)})}function ss(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vn(e,t){for(var r=t+"Capture",s=[];e!==null;){var d=e,v=d.stateNode;d.tag===5&&v!==null&&(d=v,v=Ji(e,r),v!=null&&s.unshift(ss(e,v,d)),v=Ji(e,t),v!=null&&s.push(ss(e,v,d))),e=e.return}return s}function Vr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bc(e,t,r,s,d){for(var v=t._reactName,S=[];r!==null&&r!==s;){var i=r,o=i.alternate,f=i.stateNode;if(o!==null&&o===s)break;i.tag===5&&f!==null&&(i=f,d?(o=Ji(r,v),o!=null&&S.unshift(ss(r,o,i))):d||(o=Ji(r,v),o!=null&&S.push(ss(r,o,i)))),r=r.return}S.length!==0&&e.push({event:t,listeners:S})}var fp=/\r\n?/g,_p=/\u0000|\uFFFD/g;function Lc(e){return(typeof e=="string"?e:""+e).replace(fp,`
`).replace(_p,"")}function Fs(e,t,r){if(t=Lc(t),Lc(e)!==t&&r)throw Error(Y(425))}function mn(){}var ha=null,ua=null;function da(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fa=typeof setTimeout=="function"?setTimeout:void 0,pp=typeof clearTimeout=="function"?clearTimeout:void 0,Ec=typeof Promise=="function"?Promise:void 0,gp=typeof queueMicrotask=="function"?queueMicrotask:typeof Ec<"u"?function(e){return Ec.resolve(null).then(e).catch(vp)}:fa;function vp(e){setTimeout(function(){throw e})}function ko(e,t){var r=t,s=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(s===0){e.removeChild(d),es(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=d}while(r);es(t)}function _r(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var xi=Math.random().toString(36).slice(2),Ht="__reactFiber$"+xi,ns="__reactProps$"+xi,Jt="__reactContainer$"+xi,_a="__reactEvents$"+xi,mp="__reactListeners$"+xi,yp="__reactHandles$"+xi;function Dr(e){var t=e[Ht];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Jt]||r[Ht]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=kc(e);e!==null;){if(r=e[Ht])return r;e=kc(e)}return t}e=r,r=e.parentNode}return null}function ms(e){return e=e[Ht]||e[Jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function zn(e){return e[ns]||null}var pa=[],Zr=-1;function xr(e){return{current:e}}function be(e){0>Zr||(e.current=pa[Zr],pa[Zr]=null,Zr--)}function we(e,t){Zr++,pa[Zr]=e.current,e.current=t}var Sr={},Ze=xr(Sr),ot=xr(!1),Ir=Sr;function _i(e,t){var r=e.type.contextTypes;if(!r)return Sr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var d={},v;for(v in r)d[v]=t[v];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function at(e){return e=e.childContextTypes,e!=null}function yn(){be(ot),be(Ze)}function Rc(e,t,r){if(Ze.current!==Sr)throw Error(Y(168));we(Ze,t),we(ot,r)}function Vu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var d in s)if(!(d in t))throw Error(Y(108,i_(e)||"Unknown",d));return De({},r,s)}function Cn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,Ir=Ze.current,we(Ze,e),we(ot,ot.current),!0}function Mc(e,t,r){var s=e.stateNode;if(!s)throw Error(Y(169));r?(e=Vu(e,t,Ir),s.__reactInternalMemoizedMergedChildContext=e,be(ot),be(Ze),we(Ze,e)):be(ot),we(ot,r)}var Vt=null,Un=!1,Ro=!1;function Gu(e){Vt===null?Vt=[e]:Vt.push(e)}function Cp(e){Un=!0,Gu(e)}function br(){if(!Ro&&Vt!==null){Ro=!0;var e=0,t=Se;try{var r=Vt;for(Se=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Vt=null,Un=!1}catch(d){throw Vt!==null&&(Vt=Vt.slice(e+1)),vu(Za,br),d}finally{Se=t,Ro=!1}}return null}var ei=[],ti=0,Sn=null,wn=0,mt=[],yt=0,Fr=null,Gt=1,qt="";function Rr(e,t){ei[ti++]=wn,ei[ti++]=Sn,Sn=e,wn=t}function qu(e,t,r){mt[yt++]=Gt,mt[yt++]=qt,mt[yt++]=Fr,Fr=e;var s=Gt;e=qt;var d=32-Mt(s)-1;s&=~(1<<d),r+=1;var v=32-Mt(t)+d;if(30<v){var S=d-d%5;v=(s&(1<<S)-1).toString(32),s>>=S,d-=S,Gt=1<<32-Mt(t)+d|r<<d|s,qt=v+e}else Gt=1<<v|r<<d|s,qt=e}function ll(e){e.return!==null&&(Rr(e,1),qu(e,1,0))}function cl(e){for(;e===Sn;)Sn=ei[--ti],ei[ti]=null,wn=ei[--ti],ei[ti]=null;for(;e===Fr;)Fr=mt[--yt],mt[yt]=null,qt=mt[--yt],mt[yt]=null,Gt=mt[--yt],mt[yt]=null}var dt=null,ut=null,Le=!1,Rt=null;function Ku(e,t){var r=Ct(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Dc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,ut=_r(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Fr!==null?{id:Gt,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ct(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,dt=e,ut=null,!0):!1;default:return!1}}function ga(e){return(e.mode&1)!==0&&(e.flags&128)===0}function va(e){if(Le){var t=ut;if(t){var r=t;if(!Dc(e,t)){if(ga(e))throw Error(Y(418));t=_r(r.nextSibling);var s=dt;t&&Dc(e,t)?Ku(s,r):(e.flags=e.flags&-4097|2,Le=!1,dt=e)}}else{if(ga(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Le=!1,dt=e}}}function Ac(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function Ns(e){if(e!==dt)return!1;if(!Le)return Ac(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!da(e.type,e.memoizedProps)),t&&(t=ut)){if(ga(e))throw Xu(),Error(Y(418));for(;t;)Ku(e,t),t=_r(t.nextSibling)}if(Ac(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ut=_r(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ut=null}}else ut=dt?_r(e.stateNode.nextSibling):null;return!0}function Xu(){for(var e=ut;e;)e=_r(e.nextSibling)}function pi(){ut=dt=null,Le=!1}function hl(e){Rt===null?Rt=[e]:Rt.push(e)}var Sp=er.ReactCurrentBatchConfig;function Ti(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var s=r.stateNode}if(!s)throw Error(Y(147,e));var d=s,v=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===v?t.ref:(t=function(S){var i=d.refs;S===null?delete i[v]:i[v]=S},t._stringRef=v,t)}if(typeof e!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tc(e){var t=e._init;return t(e._payload)}function Yu(e){function t(a,l){if(e){var h=a.deletions;h===null?(a.deletions=[l],a.flags|=16):h.push(l)}}function r(a,l){if(!e)return null;for(;l!==null;)t(a,l),l=l.sibling;return null}function s(a,l){for(a=new Map;l!==null;)l.key!==null?a.set(l.key,l):a.set(l.index,l),l=l.sibling;return a}function d(a,l){return a=mr(a,l),a.index=0,a.sibling=null,a}function v(a,l,h){return a.index=h,e?(h=a.alternate,h!==null?(h=h.index,h<l?(a.flags|=2,l):h):(a.flags|=2,l)):(a.flags|=1048576,l)}function S(a){return e&&a.alternate===null&&(a.flags|=2),a}function i(a,l,h,m){return l===null||l.tag!==6?(l=Oo(h,a.mode,m),l.return=a,l):(l=d(l,h),l.return=a,l)}function o(a,l,h,m){var L=h.type;return L===Kr?_(a,l,h.props.children,m,h.key):l!==null&&(l.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===sr&&Tc(L)===l.type)?(m=d(l,h.props),m.ref=Ti(a,l,h),m.return=a,m):(m=nn(h.type,h.key,h.props,null,a.mode,m),m.ref=Ti(a,l,h),m.return=a,m)}function f(a,l,h,m){return l===null||l.tag!==4||l.stateNode.containerInfo!==h.containerInfo||l.stateNode.implementation!==h.implementation?(l=Io(h,a.mode,m),l.return=a,l):(l=d(l,h.children||[]),l.return=a,l)}function _(a,l,h,m,L){return l===null||l.tag!==7?(l=Or(h,a.mode,m,L),l.return=a,l):(l=d(l,h),l.return=a,l)}function c(a,l,h){if(typeof l=="string"&&l!==""||typeof l=="number")return l=Oo(""+l,a.mode,h),l.return=a,l;if(typeof l=="object"&&l!==null){switch(l.$$typeof){case Rs:return h=nn(l.type,l.key,l.props,null,a.mode,h),h.ref=Ti(a,null,l),h.return=a,h;case qr:return l=Io(l,a.mode,h),l.return=a,l;case sr:var m=l._init;return c(a,m(l._payload),h)}if(Fi(l)||ki(l))return l=Or(l,a.mode,h,null),l.return=a,l;Hs(a,l)}return null}function p(a,l,h,m){var L=l!==null?l.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return L!==null?null:i(a,l,""+h,m);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Rs:return h.key===L?o(a,l,h,m):null;case qr:return h.key===L?f(a,l,h,m):null;case sr:return L=h._init,p(a,l,L(h._payload),m)}if(Fi(h)||ki(h))return L!==null?null:_(a,l,h,m,null);Hs(a,h)}return null}function w(a,l,h,m,L){if(typeof m=="string"&&m!==""||typeof m=="number")return a=a.get(h)||null,i(l,a,""+m,L);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Rs:return a=a.get(m.key===null?h:m.key)||null,o(l,a,m,L);case qr:return a=a.get(m.key===null?h:m.key)||null,f(l,a,m,L);case sr:var g=m._init;return w(a,l,h,g(m._payload),L)}if(Fi(m)||ki(m))return a=a.get(h)||null,_(l,a,m,L,null);Hs(l,m)}return null}function C(a,l,h,m){for(var L=null,g=null,x=l,y=l=0,b=null;x!==null&&y<h.length;y++){x.index>y?(b=x,x=null):b=x.sibling;var E=p(a,x,h[y],m);if(E===null){x===null&&(x=b);break}e&&x&&E.alternate===null&&t(a,x),l=v(E,l,y),g===null?L=E:g.sibling=E,g=E,x=b}if(y===h.length)return r(a,x),Le&&Rr(a,y),L;if(x===null){for(;y<h.length;y++)x=c(a,h[y],m),x!==null&&(l=v(x,l,y),g===null?L=x:g.sibling=x,g=x);return Le&&Rr(a,y),L}for(x=s(a,x);y<h.length;y++)b=w(x,a,y,h[y],m),b!==null&&(e&&b.alternate!==null&&x.delete(b.key===null?y:b.key),l=v(b,l,y),g===null?L=b:g.sibling=b,g=b);return e&&x.forEach(function(R){return t(a,R)}),Le&&Rr(a,y),L}function u(a,l,h,m){var L=ki(h);if(typeof L!="function")throw Error(Y(150));if(h=L.call(h),h==null)throw Error(Y(151));for(var g=L=null,x=l,y=l=0,b=null,E=h.next();x!==null&&!E.done;y++,E=h.next()){x.index>y?(b=x,x=null):b=x.sibling;var R=p(a,x,E.value,m);if(R===null){x===null&&(x=b);break}e&&x&&R.alternate===null&&t(a,x),l=v(R,l,y),g===null?L=R:g.sibling=R,g=R,x=b}if(E.done)return r(a,x),Le&&Rr(a,y),L;if(x===null){for(;!E.done;y++,E=h.next())E=c(a,E.value,m),E!==null&&(l=v(E,l,y),g===null?L=E:g.sibling=E,g=E);return Le&&Rr(a,y),L}for(x=s(a,x);!E.done;y++,E=h.next())E=w(x,a,y,E.value,m),E!==null&&(e&&E.alternate!==null&&x.delete(E.key===null?y:E.key),l=v(E,l,y),g===null?L=E:g.sibling=E,g=E);return e&&x.forEach(function(k){return t(a,k)}),Le&&Rr(a,y),L}function n(a,l,h,m){if(typeof h=="object"&&h!==null&&h.type===Kr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Rs:e:{for(var L=h.key,g=l;g!==null;){if(g.key===L){if(L=h.type,L===Kr){if(g.tag===7){r(a,g.sibling),l=d(g,h.props.children),l.return=a,a=l;break e}}else if(g.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===sr&&Tc(L)===g.type){r(a,g.sibling),l=d(g,h.props),l.ref=Ti(a,g,h),l.return=a,a=l;break e}r(a,g);break}else t(a,g);g=g.sibling}h.type===Kr?(l=Or(h.props.children,a.mode,m,h.key),l.return=a,a=l):(m=nn(h.type,h.key,h.props,null,a.mode,m),m.ref=Ti(a,l,h),m.return=a,a=m)}return S(a);case qr:e:{for(g=h.key;l!==null;){if(l.key===g)if(l.tag===4&&l.stateNode.containerInfo===h.containerInfo&&l.stateNode.implementation===h.implementation){r(a,l.sibling),l=d(l,h.children||[]),l.return=a,a=l;break e}else{r(a,l);break}else t(a,l);l=l.sibling}l=Io(h,a.mode,m),l.return=a,a=l}return S(a);case sr:return g=h._init,n(a,l,g(h._payload),m)}if(Fi(h))return C(a,l,h,m);if(ki(h))return u(a,l,h,m);Hs(a,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,l!==null&&l.tag===6?(r(a,l.sibling),l=d(l,h),l.return=a,a=l):(r(a,l),l=Oo(h,a.mode,m),l.return=a,a=l),S(a)):r(a,l)}return n}var gi=Yu(!0),Ju=Yu(!1),xn=xr(null),bn=null,ri=null,ul=null;function dl(){ul=ri=bn=null}function fl(e){var t=xn.current;be(xn),e._currentValue=t}function ma(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function ci(e,t){bn=e,ul=ri=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nt=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(ul!==e)if(e={context:e,memoizedValue:t,next:null},ri===null){if(bn===null)throw Error(Y(308));ri=e,bn.dependencies={lanes:0,firstContext:e}}else ri=ri.next=e;return t}var Ar=null;function _l(e){Ar===null?Ar=[e]:Ar.push(e)}function Qu(e,t,r,s){var d=t.interleaved;return d===null?(r.next=r,_l(t)):(r.next=d.next,d.next=r),t.interleaved=r,Qt(e,s)}function Qt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var nr=!1;function pl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ve&2){var d=s.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),s.pending=t,Qt(e,r)}return d=s.interleaved,d===null?(t.next=t,_l(s)):(t.next=d.next,d.next=t),s.interleaved=t,Qt(e,r)}function Qs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,el(e,r)}}function Pc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var d=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var S={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};v===null?d=v=S:v=v.next=S,r=r.next}while(r!==null);v===null?d=v=t:v=v.next=t}else d=v=t;r={baseState:s.baseState,firstBaseUpdate:d,lastBaseUpdate:v,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ln(e,t,r,s){var d=e.updateQueue;nr=!1;var v=d.firstBaseUpdate,S=d.lastBaseUpdate,i=d.shared.pending;if(i!==null){d.shared.pending=null;var o=i,f=o.next;o.next=null,S===null?v=f:S.next=f,S=o;var _=e.alternate;_!==null&&(_=_.updateQueue,i=_.lastBaseUpdate,i!==S&&(i===null?_.firstBaseUpdate=f:i.next=f,_.lastBaseUpdate=o))}if(v!==null){var c=d.baseState;S=0,_=f=o=null,i=v;do{var p=i.lane,w=i.eventTime;if((s&p)===p){_!==null&&(_=_.next={eventTime:w,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var C=e,u=i;switch(p=t,w=r,u.tag){case 1:if(C=u.payload,typeof C=="function"){c=C.call(w,c,p);break e}c=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=u.payload,p=typeof C=="function"?C.call(w,c,p):C,p==null)break e;c=De({},c,p);break e;case 2:nr=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=d.effects,p===null?d.effects=[i]:p.push(i))}else w={eventTime:w,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},_===null?(f=_=w,o=c):_=_.next=w,S|=p;if(i=i.next,i===null){if(i=d.shared.pending,i===null)break;p=i,i=p.next,p.next=null,d.lastBaseUpdate=p,d.shared.pending=null}}while(!0);if(_===null&&(o=c),d.baseState=o,d.firstBaseUpdate=f,d.lastBaseUpdate=_,t=d.shared.interleaved,t!==null){d=t;do S|=d.lane,d=d.next;while(d!==t)}else v===null&&(d.shared.lanes=0);Hr|=S,e.lanes=S,e.memoizedState=c}}function Bc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],d=s.callback;if(d!==null){if(s.callback=null,s=r,typeof d!="function")throw Error(Y(191,d));d.call(s)}}}var ys={},jt=xr(ys),os=xr(ys),as=xr(ys);function Tr(e){if(e===ys)throw Error(Y(174));return e}function gl(e,t){switch(we(as,t),we(os,e),we(jt,ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qo(t,e)}be(jt),we(jt,t)}function vi(){be(jt),be(os),be(as)}function ed(e){Tr(as.current);var t=Tr(jt.current),r=Qo(t,e.type);t!==r&&(we(os,e),we(jt,r))}function vl(e){os.current===e&&(be(jt),be(os))}var Re=xr(0);function En(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mo=[];function ml(){for(var e=0;e<Mo.length;e++)Mo[e]._workInProgressVersionPrimary=null;Mo.length=0}var Zs=er.ReactCurrentDispatcher,Do=er.ReactCurrentBatchConfig,Nr=0,Me=null,Ne=null,je=null,kn=!1,Vi=!1,ls=0,wp=0;function Ke(){throw Error(Y(321))}function yl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!At(e[r],t[r]))return!1;return!0}function Cl(e,t,r,s,d,v){if(Nr=v,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zs.current=e===null||e.memoizedState===null?Ep:kp,e=r(s,d),Vi){v=0;do{if(Vi=!1,ls=0,25<=v)throw Error(Y(301));v+=1,je=Ne=null,t.updateQueue=null,Zs.current=Rp,e=r(s,d)}while(Vi)}if(Zs.current=Rn,t=Ne!==null&&Ne.next!==null,Nr=0,je=Ne=Me=null,kn=!1,t)throw Error(Y(300));return e}function Sl(){var e=ls!==0;return ls=0,e}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?Me.memoizedState=je=e:je=je.next=e,je}function xt(){if(Ne===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=je===null?Me.memoizedState:je.next;if(t!==null)je=t,Ne=e;else{if(e===null)throw Error(Y(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},je===null?Me.memoizedState=je=e:je=je.next=e}return je}function cs(e,t){return typeof t=="function"?t(e):t}function Ao(e){var t=xt(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var s=Ne,d=s.baseQueue,v=r.pending;if(v!==null){if(d!==null){var S=d.next;d.next=v.next,v.next=S}s.baseQueue=d=v,r.pending=null}if(d!==null){v=d.next,s=s.baseState;var i=S=null,o=null,f=v;do{var _=f.lane;if((Nr&_)===_)o!==null&&(o=o.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var c={lane:_,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};o===null?(i=o=c,S=s):o=o.next=c,Me.lanes|=_,Hr|=_}f=f.next}while(f!==null&&f!==v);o===null?S=s:o.next=i,At(s,t.memoizedState)||(nt=!0),t.memoizedState=s,t.baseState=S,t.baseQueue=o,r.lastRenderedState=s}if(e=r.interleaved,e!==null){d=e;do v=d.lane,Me.lanes|=v,Hr|=v,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function To(e){var t=xt(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var s=r.dispatch,d=r.pending,v=t.memoizedState;if(d!==null){r.pending=null;var S=d=d.next;do v=e(v,S.action),S=S.next;while(S!==d);At(v,t.memoizedState)||(nt=!0),t.memoizedState=v,t.baseQueue===null&&(t.baseState=v),r.lastRenderedState=v}return[v,s]}function td(){}function rd(e,t){var r=Me,s=xt(),d=t(),v=!At(s.memoizedState,d);if(v&&(s.memoizedState=d,nt=!0),s=s.queue,wl(nd.bind(null,r,s,e),[e]),s.getSnapshot!==t||v||je!==null&&je.memoizedState.tag&1){if(r.flags|=2048,hs(9,sd.bind(null,r,s,d,t),void 0,null),We===null)throw Error(Y(349));Nr&30||id(r,t,d)}return d}function id(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function sd(e,t,r,s){t.value=r,t.getSnapshot=s,od(t)&&ad(e)}function nd(e,t,r){return r(function(){od(t)&&ad(e)})}function od(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!At(e,r)}catch{return!0}}function ad(e){var t=Qt(e,1);t!==null&&Dt(t,e,1,-1)}function Oc(e){var t=Ft();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:e},t.queue=e,e=e.dispatch=Lp.bind(null,Me,e),[t.memoizedState,e]}function hs(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function ld(){return xt().memoizedState}function en(e,t,r,s){var d=Ft();Me.flags|=e,d.memoizedState=hs(1|t,r,void 0,s===void 0?null:s)}function Vn(e,t,r,s){var d=xt();s=s===void 0?null:s;var v=void 0;if(Ne!==null){var S=Ne.memoizedState;if(v=S.destroy,s!==null&&yl(s,S.deps)){d.memoizedState=hs(t,r,v,s);return}}Me.flags|=e,d.memoizedState=hs(1|t,r,v,s)}function Ic(e,t){return en(8390656,8,e,t)}function wl(e,t){return Vn(2048,8,e,t)}function cd(e,t){return Vn(4,2,e,t)}function hd(e,t){return Vn(4,4,e,t)}function ud(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dd(e,t,r){return r=r!=null?r.concat([e]):null,Vn(4,4,ud.bind(null,t,e),r)}function xl(){}function fd(e,t){var r=xt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&yl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function _d(e,t){var r=xt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&yl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function pd(e,t,r){return Nr&21?(At(r,t)||(r=Cu(),Me.lanes|=r,Hr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nt=!0),e.memoizedState=r)}function xp(e,t){var r=Se;Se=r!==0&&4>r?r:4,e(!0);var s=Do.transition;Do.transition={};try{e(!1),t()}finally{Se=r,Do.transition=s}}function gd(){return xt().memoizedState}function bp(e,t,r){var s=vr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},vd(e))md(t,r);else if(r=Qu(e,t,r,s),r!==null){var d=tt();Dt(r,e,s,d),yd(r,t,s)}}function Lp(e,t,r){var s=vr(e),d={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(vd(e))md(t,d);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=t.lastRenderedReducer,v!==null))try{var S=t.lastRenderedState,i=v(S,r);if(d.hasEagerState=!0,d.eagerState=i,At(i,S)){var o=t.interleaved;o===null?(d.next=d,_l(t)):(d.next=o.next,o.next=d),t.interleaved=d;return}}catch{}finally{}r=Qu(e,t,d,s),r!==null&&(d=tt(),Dt(r,e,s,d),yd(r,t,s))}}function vd(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function md(e,t){Vi=kn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function yd(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,el(e,r)}}var Rn={readContext:wt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},Ep={readContext:wt,useCallback:function(e,t){return Ft().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:Ic,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,en(4194308,4,ud.bind(null,t,e),r)},useLayoutEffect:function(e,t){return en(4194308,4,e,t)},useInsertionEffect:function(e,t){return en(4,2,e,t)},useMemo:function(e,t){var r=Ft();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Ft();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=bp.bind(null,Me,e),[s.memoizedState,e]},useRef:function(e){var t=Ft();return e={current:e},t.memoizedState=e},useState:Oc,useDebugValue:xl,useDeferredValue:function(e){return Ft().memoizedState=e},useTransition:function(){var e=Oc(!1),t=e[0];return e=xp.bind(null,e[1]),Ft().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Me,d=Ft();if(Le){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=t(),We===null)throw Error(Y(349));Nr&30||id(s,t,r)}d.memoizedState=r;var v={value:r,getSnapshot:t};return d.queue=v,Ic(nd.bind(null,s,v,e),[e]),s.flags|=2048,hs(9,sd.bind(null,s,v,r,t),void 0,null),r},useId:function(){var e=Ft(),t=We.identifierPrefix;if(Le){var r=qt,s=Gt;r=(s&~(1<<32-Mt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ls++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=wp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kp={readContext:wt,useCallback:fd,useContext:wt,useEffect:wl,useImperativeHandle:dd,useInsertionEffect:cd,useLayoutEffect:hd,useMemo:_d,useReducer:Ao,useRef:ld,useState:function(){return Ao(cs)},useDebugValue:xl,useDeferredValue:function(e){var t=xt();return pd(t,Ne.memoizedState,e)},useTransition:function(){var e=Ao(cs)[0],t=xt().memoizedState;return[e,t]},useMutableSource:td,useSyncExternalStore:rd,useId:gd,unstable_isNewReconciler:!1},Rp={readContext:wt,useCallback:fd,useContext:wt,useEffect:wl,useImperativeHandle:dd,useInsertionEffect:cd,useLayoutEffect:hd,useMemo:_d,useReducer:To,useRef:ld,useState:function(){return To(cs)},useDebugValue:xl,useDeferredValue:function(e){var t=xt();return Ne===null?t.memoizedState=e:pd(t,Ne.memoizedState,e)},useTransition:function(){var e=To(cs)[0],t=xt().memoizedState;return[e,t]},useMutableSource:td,useSyncExternalStore:rd,useId:gd,unstable_isNewReconciler:!1};function Et(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ya(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:De({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Gn={isMounted:function(e){return(e=e._reactInternals)?zr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=tt(),d=vr(e),v=Xt(s,d);v.payload=t,r!=null&&(v.callback=r),t=pr(e,v,d),t!==null&&(Dt(t,e,d,s),Qs(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=tt(),d=vr(e),v=Xt(s,d);v.tag=1,v.payload=t,r!=null&&(v.callback=r),t=pr(e,v,d),t!==null&&(Dt(t,e,d,s),Qs(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tt(),s=vr(e),d=Xt(r,s);d.tag=2,t!=null&&(d.callback=t),t=pr(e,d,s),t!==null&&(Dt(t,e,s,r),Qs(t,e,s))}};function Fc(e,t,r,s,d,v,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,v,S):t.prototype&&t.prototype.isPureReactComponent?!rs(r,s)||!rs(d,v):!0}function Cd(e,t,r){var s=!1,d=Sr,v=t.contextType;return typeof v=="object"&&v!==null?v=wt(v):(d=at(t)?Ir:Ze.current,s=t.contextTypes,v=(s=s!=null)?_i(e,d):Sr),t=new t(r,v),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gn,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=v),t}function Nc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Gn.enqueueReplaceState(t,t.state,null)}function Ca(e,t,r,s){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},pl(e);var v=t.contextType;typeof v=="object"&&v!==null?d.context=wt(v):(v=at(t)?Ir:Ze.current,d.context=_i(e,v)),d.state=e.memoizedState,v=t.getDerivedStateFromProps,typeof v=="function"&&(ya(e,t,v,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Gn.enqueueReplaceState(d,d.state,null),Ln(e,r,d,s),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function mi(e,t){try{var r="",s=t;do r+=r_(s),s=s.return;while(s);var d=r}catch(v){d=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:t,stack:d,digest:null}}function Po(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Sa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Mp=typeof WeakMap=="function"?WeakMap:Map;function Sd(e,t,r){r=Xt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Dn||(Dn=!0,Aa=s),Sa(e,t)},r}function wd(e,t,r){r=Xt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var d=t.value;r.payload=function(){return s(d)},r.callback=function(){Sa(e,t)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){Sa(e,t),typeof s!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var S=t.stack;this.componentDidCatch(t.value,{componentStack:S!==null?S:""})}),r}function Hc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Mp;var d=new Set;s.set(t,d)}else d=s.get(t),d===void 0&&(d=new Set,s.set(t,d));d.has(r)||(d.add(r),e=zp.bind(null,e,t,r),t.then(e,e))}function $c(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function jc(e,t,r,s,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Xt(-1,1),t.tag=2,pr(r,t,1))),r.lanes|=1),e)}var Dp=er.ReactCurrentOwner,nt=!1;function et(e,t,r,s){t.child=e===null?Ju(t,null,r,s):gi(t,e.child,r,s)}function Wc(e,t,r,s,d){r=r.render;var v=t.ref;return ci(t,d),s=Cl(e,t,r,s,v,d),r=Sl(),e!==null&&!nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Zt(e,t,d)):(Le&&r&&ll(t),t.flags|=1,et(e,t,s,d),t.child)}function zc(e,t,r,s,d){if(e===null){var v=r.type;return typeof v=="function"&&!Al(v)&&v.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=v,xd(e,t,v,s,d)):(e=nn(r.type,null,s,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(v=e.child,!(e.lanes&d)){var S=v.memoizedProps;if(r=r.compare,r=r!==null?r:rs,r(S,s)&&e.ref===t.ref)return Zt(e,t,d)}return t.flags|=1,e=mr(v,s),e.ref=t.ref,e.return=t,t.child=e}function xd(e,t,r,s,d){if(e!==null){var v=e.memoizedProps;if(rs(v,s)&&e.ref===t.ref)if(nt=!1,t.pendingProps=s=v,(e.lanes&d)!==0)e.flags&131072&&(nt=!0);else return t.lanes=e.lanes,Zt(e,t,d)}return wa(e,t,r,s,d)}function bd(e,t,r){var s=t.pendingProps,d=s.children,v=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(si,ht),ht|=r;else{if(!(r&1073741824))return e=v!==null?v.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(si,ht),ht|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=v!==null?v.baseLanes:r,we(si,ht),ht|=s}else v!==null?(s=v.baseLanes|r,t.memoizedState=null):s=r,we(si,ht),ht|=s;return et(e,t,d,r),t.child}function Ld(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function wa(e,t,r,s,d){var v=at(r)?Ir:Ze.current;return v=_i(t,v),ci(t,d),r=Cl(e,t,r,s,v,d),s=Sl(),e!==null&&!nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Zt(e,t,d)):(Le&&s&&ll(t),t.flags|=1,et(e,t,r,d),t.child)}function Uc(e,t,r,s,d){if(at(r)){var v=!0;Cn(t)}else v=!1;if(ci(t,d),t.stateNode===null)tn(e,t),Cd(t,r,s),Ca(t,r,s,d),s=!0;else if(e===null){var S=t.stateNode,i=t.memoizedProps;S.props=i;var o=S.context,f=r.contextType;typeof f=="object"&&f!==null?f=wt(f):(f=at(r)?Ir:Ze.current,f=_i(t,f));var _=r.getDerivedStateFromProps,c=typeof _=="function"||typeof S.getSnapshotBeforeUpdate=="function";c||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(i!==s||o!==f)&&Nc(t,S,s,f),nr=!1;var p=t.memoizedState;S.state=p,Ln(t,s,S,d),o=t.memoizedState,i!==s||p!==o||ot.current||nr?(typeof _=="function"&&(ya(t,r,_,s),o=t.memoizedState),(i=nr||Fc(t,r,i,s,p,o,f))?(c||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(t.flags|=4194308)):(typeof S.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=o),S.props=s,S.state=o,S.context=f,s=i):(typeof S.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{S=t.stateNode,Zu(e,t),i=t.memoizedProps,f=t.type===t.elementType?i:Et(t.type,i),S.props=f,c=t.pendingProps,p=S.context,o=r.contextType,typeof o=="object"&&o!==null?o=wt(o):(o=at(r)?Ir:Ze.current,o=_i(t,o));var w=r.getDerivedStateFromProps;(_=typeof w=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(i!==c||p!==o)&&Nc(t,S,s,o),nr=!1,p=t.memoizedState,S.state=p,Ln(t,s,S,d);var C=t.memoizedState;i!==c||p!==C||ot.current||nr?(typeof w=="function"&&(ya(t,r,w,s),C=t.memoizedState),(f=nr||Fc(t,r,f,s,p,C,o)||!1)?(_||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(s,C,o),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(s,C,o)),typeof S.componentDidUpdate=="function"&&(t.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof S.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=C),S.props=s,S.state=C,S.context=o,s=f):(typeof S.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return xa(e,t,r,s,v,d)}function xa(e,t,r,s,d,v){Ld(e,t);var S=(t.flags&128)!==0;if(!s&&!S)return d&&Mc(t,r,!1),Zt(e,t,v);s=t.stateNode,Dp.current=t;var i=S&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&S?(t.child=gi(t,e.child,null,v),t.child=gi(t,null,i,v)):et(e,t,i,v),t.memoizedState=s.state,d&&Mc(t,r,!0),t.child}function Ed(e){var t=e.stateNode;t.pendingContext?Rc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rc(e,t.context,!1),gl(e,t.containerInfo)}function Vc(e,t,r,s,d){return pi(),hl(d),t.flags|=256,et(e,t,r,s),t.child}var ba={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function kd(e,t,r){var s=t.pendingProps,d=Re.current,v=!1,S=(t.flags&128)!==0,i;if((i=S)||(i=e!==null&&e.memoizedState===null?!1:(d&2)!==0),i?(v=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),we(Re,d&1),e===null)return va(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(S=s.children,e=s.fallback,v?(s=t.mode,v=t.child,S={mode:"hidden",children:S},!(s&1)&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Xn(S,s,0,null),e=Or(e,s,r,null),v.return=t,e.return=t,v.sibling=e,t.child=v,t.child.memoizedState=La(r),t.memoizedState=ba,e):bl(t,S));if(d=e.memoizedState,d!==null&&(i=d.dehydrated,i!==null))return Ap(e,t,S,s,i,d,r);if(v){v=s.fallback,S=t.mode,d=e.child,i=d.sibling;var o={mode:"hidden",children:s.children};return!(S&1)&&t.child!==d?(s=t.child,s.childLanes=0,s.pendingProps=o,t.deletions=null):(s=mr(d,o),s.subtreeFlags=d.subtreeFlags&14680064),i!==null?v=mr(i,v):(v=Or(v,S,r,null),v.flags|=2),v.return=t,s.return=t,s.sibling=v,t.child=s,s=v,v=t.child,S=e.child.memoizedState,S=S===null?La(r):{baseLanes:S.baseLanes|r,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=e.childLanes&~r,t.memoizedState=ba,s}return v=e.child,e=v.sibling,s=mr(v,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function bl(e,t){return t=Xn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $s(e,t,r,s){return s!==null&&hl(s),gi(t,e.child,null,r),e=bl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ap(e,t,r,s,d,v,S){if(r)return t.flags&256?(t.flags&=-257,s=Po(Error(Y(422))),$s(e,t,S,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(v=s.fallback,d=t.mode,s=Xn({mode:"visible",children:s.children},d,0,null),v=Or(v,d,S,null),v.flags|=2,s.return=t,v.return=t,s.sibling=v,t.child=s,t.mode&1&&gi(t,e.child,null,S),t.child.memoizedState=La(S),t.memoizedState=ba,v);if(!(t.mode&1))return $s(e,t,S,null);if(d.data==="$!"){if(s=d.nextSibling&&d.nextSibling.dataset,s)var i=s.dgst;return s=i,v=Error(Y(419)),s=Po(v,s,void 0),$s(e,t,S,s)}if(i=(S&e.childLanes)!==0,nt||i){if(s=We,s!==null){switch(S&-S){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(s.suspendedLanes|S)?0:d,d!==0&&d!==v.retryLane&&(v.retryLane=d,Qt(e,d),Dt(s,e,d,-1))}return Dl(),s=Po(Error(Y(421))),$s(e,t,S,s)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Up.bind(null,e),d._reactRetry=t,null):(e=v.treeContext,ut=_r(d.nextSibling),dt=t,Le=!0,Rt=null,e!==null&&(mt[yt++]=Gt,mt[yt++]=qt,mt[yt++]=Fr,Gt=e.id,qt=e.overflow,Fr=t),t=bl(t,s.children),t.flags|=4096,t)}function Gc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ma(e.return,t,r)}function Bo(e,t,r,s,d){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:d}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=s,v.tail=r,v.tailMode=d)}function Rd(e,t,r){var s=t.pendingProps,d=s.revealOrder,v=s.tail;if(et(e,t,s.children,r),s=Re.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gc(e,r,t);else if(e.tag===19)Gc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(we(Re,s),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&En(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Bo(t,!1,d,r,v);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&En(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Bo(t,!0,r,null,v);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function tn(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Hr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,r=mr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=mr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Tp(e,t,r){switch(t.tag){case 3:Ed(t),pi();break;case 5:ed(t);break;case 1:at(t.type)&&Cn(t);break;case 4:gl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,d=t.memoizedProps.value;we(xn,s._currentValue),s._currentValue=d;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(we(Re,Re.current&1),t.flags|=128,null):r&t.child.childLanes?kd(e,t,r):(we(Re,Re.current&1),e=Zt(e,t,r),e!==null?e.sibling:null);we(Re,Re.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Rd(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),we(Re,Re.current),s)break;return null;case 22:case 23:return t.lanes=0,bd(e,t,r)}return Zt(e,t,r)}var Md,Ea,Dd,Ad;Md=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ea=function(){};Dd=function(e,t,r,s){var d=e.memoizedProps;if(d!==s){e=t.stateNode,Tr(jt.current);var v=null;switch(r){case"input":d=Ko(e,d),s=Ko(e,s),v=[];break;case"select":d=De({},d,{value:void 0}),s=De({},s,{value:void 0}),v=[];break;case"textarea":d=Jo(e,d),s=Jo(e,s),v=[];break;default:typeof d.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=mn)}Zo(r,s);var S;r=null;for(f in d)if(!s.hasOwnProperty(f)&&d.hasOwnProperty(f)&&d[f]!=null)if(f==="style"){var i=d[f];for(S in i)i.hasOwnProperty(S)&&(r||(r={}),r[S]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Xi.hasOwnProperty(f)?v||(v=[]):(v=v||[]).push(f,null));for(f in s){var o=s[f];if(i=d?.[f],s.hasOwnProperty(f)&&o!==i&&(o!=null||i!=null))if(f==="style")if(i){for(S in i)!i.hasOwnProperty(S)||o&&o.hasOwnProperty(S)||(r||(r={}),r[S]="");for(S in o)o.hasOwnProperty(S)&&i[S]!==o[S]&&(r||(r={}),r[S]=o[S])}else r||(v||(v=[]),v.push(f,r)),r=o;else f==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,i=i?i.__html:void 0,o!=null&&i!==o&&(v=v||[]).push(f,o)):f==="children"?typeof o!="string"&&typeof o!="number"||(v=v||[]).push(f,""+o):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Xi.hasOwnProperty(f)?(o!=null&&f==="onScroll"&&xe("scroll",e),v||i===o||(v=[])):(v=v||[]).push(f,o))}r&&(v=v||[]).push("style",r);var f=v;(t.updateQueue=f)&&(t.flags|=4)}};Ad=function(e,t,r,s){r!==s&&(t.flags|=4)};function Pi(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags&14680064,s|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags,s|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Pp(e,t,r){var s=t.pendingProps;switch(cl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return at(t.type)&&yn(),Xe(t),null;case 3:return s=t.stateNode,vi(),be(ot),be(Ze),ml(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ns(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rt!==null&&(Ba(Rt),Rt=null))),Ea(e,t),Xe(t),null;case 5:vl(t);var d=Tr(as.current);if(r=t.type,e!==null&&t.stateNode!=null)Dd(e,t,r,s,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Y(166));return Xe(t),null}if(e=Tr(jt.current),Ns(t)){s=t.stateNode,r=t.type;var v=t.memoizedProps;switch(s[Ht]=t,s[ns]=v,e=(t.mode&1)!==0,r){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(d=0;d<Hi.length;d++)xe(Hi[d],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":tc(s,v),xe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!v.multiple},xe("invalid",s);break;case"textarea":ic(s,v),xe("invalid",s)}Zo(r,v),d=null;for(var S in v)if(v.hasOwnProperty(S)){var i=v[S];S==="children"?typeof i=="string"?s.textContent!==i&&(v.suppressHydrationWarning!==!0&&Fs(s.textContent,i,e),d=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(v.suppressHydrationWarning!==!0&&Fs(s.textContent,i,e),d=["children",""+i]):Xi.hasOwnProperty(S)&&i!=null&&S==="onScroll"&&xe("scroll",s)}switch(r){case"input":Ms(s),rc(s,v,!0);break;case"textarea":Ms(s),sc(s);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(s.onclick=mn)}s=d,t.updateQueue=s,s!==null&&(t.flags|=4)}else{S=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=S.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=S.createElement(r,{is:s.is}):(e=S.createElement(r),r==="select"&&(S=e,s.multiple?S.multiple=!0:s.size&&(S.size=s.size))):e=S.createElementNS(e,r),e[Ht]=t,e[ns]=s,Md(e,t,!1,!1),t.stateNode=e;e:{switch(S=ea(r,s),r){case"dialog":xe("cancel",e),xe("close",e),d=s;break;case"iframe":case"object":case"embed":xe("load",e),d=s;break;case"video":case"audio":for(d=0;d<Hi.length;d++)xe(Hi[d],e);d=s;break;case"source":xe("error",e),d=s;break;case"img":case"image":case"link":xe("error",e),xe("load",e),d=s;break;case"details":xe("toggle",e),d=s;break;case"input":tc(e,s),d=Ko(e,s),xe("invalid",e);break;case"option":d=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},d=De({},s,{value:void 0}),xe("invalid",e);break;case"textarea":ic(e,s),d=Jo(e,s),xe("invalid",e);break;default:d=s}Zo(r,d),i=d;for(v in i)if(i.hasOwnProperty(v)){var o=i[v];v==="style"?lu(e,o):v==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&ou(e,o)):v==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Yi(e,o):typeof o=="number"&&Yi(e,""+o):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Xi.hasOwnProperty(v)?o!=null&&v==="onScroll"&&xe("scroll",e):o!=null&&Ka(e,v,o,S))}switch(r){case"input":Ms(e),rc(e,s,!1);break;case"textarea":Ms(e),sc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Cr(s.value));break;case"select":e.multiple=!!s.multiple,v=s.value,v!=null?ni(e,!!s.multiple,v,!1):s.defaultValue!=null&&ni(e,!!s.multiple,s.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=mn)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)Ad(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Y(166));if(r=Tr(as.current),Tr(jt.current),Ns(t)){if(s=t.stateNode,r=t.memoizedProps,s[Ht]=t,(v=s.nodeValue!==r)&&(e=dt,e!==null))switch(e.tag){case 3:Fs(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fs(s.nodeValue,r,(e.mode&1)!==0)}v&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ht]=t,t.stateNode=s}return Xe(t),null;case 13:if(be(Re),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&ut!==null&&t.mode&1&&!(t.flags&128))Xu(),pi(),t.flags|=98560,v=!1;else if(v=Ns(t),s!==null&&s.dehydrated!==null){if(e===null){if(!v)throw Error(Y(318));if(v=t.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(Y(317));v[Ht]=t}else pi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),v=!1}else Rt!==null&&(Ba(Rt),Rt=null),v=!0;if(!v)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Re.current&1?He===0&&(He=3):Dl())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return vi(),Ea(e,t),e===null&&is(t.stateNode.containerInfo),Xe(t),null;case 10:return fl(t.type._context),Xe(t),null;case 17:return at(t.type)&&yn(),Xe(t),null;case 19:if(be(Re),v=t.memoizedState,v===null)return Xe(t),null;if(s=(t.flags&128)!==0,S=v.rendering,S===null)if(s)Pi(v,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(S=En(e),S!==null){for(t.flags|=128,Pi(v,!1),s=S.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)v=r,e=s,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,e=S.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return we(Re,Re.current&1|2),t.child}e=e.sibling}v.tail!==null&&Be()>yi&&(t.flags|=128,s=!0,Pi(v,!1),t.lanes=4194304)}else{if(!s)if(e=En(S),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Pi(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Le)return Xe(t),null}else 2*Be()-v.renderingStartTime>yi&&r!==1073741824&&(t.flags|=128,s=!0,Pi(v,!1),t.lanes=4194304);v.isBackwards?(S.sibling=t.child,t.child=S):(r=v.last,r!==null?r.sibling=S:t.child=S,v.last=S)}return v.tail!==null?(t=v.tail,v.rendering=t,v.tail=t.sibling,v.renderingStartTime=Be(),t.sibling=null,r=Re.current,we(Re,s?r&1|2:r&1),t):(Xe(t),null);case 22:case 23:return Ml(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ht&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function Bp(e,t){switch(cl(t),t.tag){case 1:return at(t.type)&&yn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vi(),be(ot),be(Ze),ml(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return vl(t),null;case 13:if(be(Re),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));pi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Re),null;case 4:return vi(),null;case 10:return fl(t.type._context),null;case 22:case 23:return Ml(),null;case 24:return null;default:return null}}var js=!1,Qe=!1,Op=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ii(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ae(e,t,s)}else r.current=null}function ka(e,t,r){try{r()}catch(s){Ae(e,t,s)}}var qc=!1;function Ip(e,t){if(ha=pn,e=Iu(),al(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var d=s.anchorOffset,v=s.focusNode;s=s.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break e}var S=0,i=-1,o=-1,f=0,_=0,c=e,p=null;t:for(;;){for(var w;c!==r||d!==0&&c.nodeType!==3||(i=S+d),c!==v||s!==0&&c.nodeType!==3||(o=S+s),c.nodeType===3&&(S+=c.nodeValue.length),(w=c.firstChild)!==null;)p=c,c=w;for(;;){if(c===e)break t;if(p===r&&++f===d&&(i=S),p===v&&++_===s&&(o=S),(w=c.nextSibling)!==null)break;c=p,p=c.parentNode}c=w}r=i===-1||o===-1?null:{start:i,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(ua={focusedElem:e,selectionRange:r},pn=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var u=C.memoizedProps,n=C.memoizedState,a=t.stateNode,l=a.getSnapshotBeforeUpdate(t.elementType===t.type?u:Et(t.type,u),n);a.__reactInternalSnapshotBeforeUpdate=l}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(m){Ae(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return C=qc,qc=!1,C}function Gi(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&e)===e){var v=d.destroy;d.destroy=void 0,v!==void 0&&ka(t,r,v)}d=d.next}while(d!==s)}}function qn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Ra(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Td(e){var t=e.alternate;t!==null&&(e.alternate=null,Td(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[ns],delete t[_a],delete t[mp],delete t[yp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Pd(e){return e.tag===5||e.tag===3||e.tag===4}function Kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ma(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=mn));else if(s!==4&&(e=e.child,e!==null))for(Ma(e,t,r),e=e.sibling;e!==null;)Ma(e,t,r),e=e.sibling}function Da(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Da(e,t,r),e=e.sibling;e!==null;)Da(e,t,r),e=e.sibling}var Ue=null,kt=!1;function ir(e,t,r){for(r=r.child;r!==null;)Bd(e,t,r),r=r.sibling}function Bd(e,t,r){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Hn,r)}catch{}switch(r.tag){case 5:Qe||ii(r,t);case 6:var s=Ue,d=kt;Ue=null,ir(e,t,r),Ue=s,kt=d,Ue!==null&&(kt?(e=Ue,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ue.removeChild(r.stateNode));break;case 18:Ue!==null&&(kt?(e=Ue,r=r.stateNode,e.nodeType===8?ko(e.parentNode,r):e.nodeType===1&&ko(e,r),es(e)):ko(Ue,r.stateNode));break;case 4:s=Ue,d=kt,Ue=r.stateNode.containerInfo,kt=!0,ir(e,t,r),Ue=s,kt=d;break;case 0:case 11:case 14:case 15:if(!Qe&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){d=s=s.next;do{var v=d,S=v.destroy;v=v.tag,S!==void 0&&(v&2||v&4)&&ka(r,t,S),d=d.next}while(d!==s)}ir(e,t,r);break;case 1:if(!Qe&&(ii(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(i){Ae(r,t,i)}ir(e,t,r);break;case 21:ir(e,t,r);break;case 22:r.mode&1?(Qe=(s=Qe)||r.memoizedState!==null,ir(e,t,r),Qe=s):ir(e,t,r);break;default:ir(e,t,r)}}function Xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Op),t.forEach(function(s){var d=Vp.bind(null,e,s);r.has(s)||(r.add(s),s.then(d,d))})}}function Lt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var d=r[s];try{var v=e,S=t,i=S;e:for(;i!==null;){switch(i.tag){case 5:Ue=i.stateNode,kt=!1;break e;case 3:Ue=i.stateNode.containerInfo,kt=!0;break e;case 4:Ue=i.stateNode.containerInfo,kt=!0;break e}i=i.return}if(Ue===null)throw Error(Y(160));Bd(v,S,d),Ue=null,kt=!1;var o=d.alternate;o!==null&&(o.return=null),d.return=null}catch(f){Ae(d,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Od(t,e),t=t.sibling}function Od(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(t,e),Ot(e),s&4){try{Gi(3,e,e.return),qn(3,e)}catch(u){Ae(e,e.return,u)}try{Gi(5,e,e.return)}catch(u){Ae(e,e.return,u)}}break;case 1:Lt(t,e),Ot(e),s&512&&r!==null&&ii(r,r.return);break;case 5:if(Lt(t,e),Ot(e),s&512&&r!==null&&ii(r,r.return),e.flags&32){var d=e.stateNode;try{Yi(d,"")}catch(u){Ae(e,e.return,u)}}if(s&4&&(d=e.stateNode,d!=null)){var v=e.memoizedProps,S=r!==null?r.memoizedProps:v,i=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{i==="input"&&v.type==="radio"&&v.name!=null&&iu(d,v),ea(i,S);var f=ea(i,v);for(S=0;S<o.length;S+=2){var _=o[S],c=o[S+1];_==="style"?lu(d,c):_==="dangerouslySetInnerHTML"?ou(d,c):_==="children"?Yi(d,c):Ka(d,_,c,f)}switch(i){case"input":Xo(d,v);break;case"textarea":su(d,v);break;case"select":var p=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!v.multiple;var w=v.value;w!=null?ni(d,!!v.multiple,w,!1):p!==!!v.multiple&&(v.defaultValue!=null?ni(d,!!v.multiple,v.defaultValue,!0):ni(d,!!v.multiple,v.multiple?[]:"",!1))}d[ns]=v}catch(u){Ae(e,e.return,u)}}break;case 6:if(Lt(t,e),Ot(e),s&4){if(e.stateNode===null)throw Error(Y(162));d=e.stateNode,v=e.memoizedProps;try{d.nodeValue=v}catch(u){Ae(e,e.return,u)}}break;case 3:if(Lt(t,e),Ot(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{es(t.containerInfo)}catch(u){Ae(e,e.return,u)}break;case 4:Lt(t,e),Ot(e);break;case 13:Lt(t,e),Ot(e),d=e.child,d.flags&8192&&(v=d.memoizedState!==null,d.stateNode.isHidden=v,!v||d.alternate!==null&&d.alternate.memoizedState!==null||(kl=Be())),s&4&&Xc(e);break;case 22:if(_=r!==null&&r.memoizedState!==null,e.mode&1?(Qe=(f=Qe)||_,Lt(t,e),Qe=f):Lt(t,e),Ot(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!_&&e.mode&1)for(ie=e,_=e.child;_!==null;){for(c=ie=_;ie!==null;){switch(p=ie,w=p.child,p.tag){case 0:case 11:case 14:case 15:Gi(4,p,p.return);break;case 1:ii(p,p.return);var C=p.stateNode;if(typeof C.componentWillUnmount=="function"){s=p,r=p.return;try{t=s,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(u){Ae(s,r,u)}}break;case 5:ii(p,p.return);break;case 22:if(p.memoizedState!==null){Jc(c);continue}}w!==null?(w.return=p,ie=w):Jc(c)}_=_.sibling}e:for(_=null,c=e;;){if(c.tag===5){if(_===null){_=c;try{d=c.stateNode,f?(v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(i=c.stateNode,o=c.memoizedProps.style,S=o!=null&&o.hasOwnProperty("display")?o.display:null,i.style.display=au("display",S))}catch(u){Ae(e,e.return,u)}}}else if(c.tag===6){if(_===null)try{c.stateNode.nodeValue=f?"":c.memoizedProps}catch(u){Ae(e,e.return,u)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;_===c&&(_=null),c=c.return}_===c&&(_=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Lt(t,e),Ot(e),s&4&&Xc(e);break;case 21:break;default:Lt(t,e),Ot(e)}}function Ot(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Pd(r)){var s=r;break e}r=r.return}throw Error(Y(160))}switch(s.tag){case 5:var d=s.stateNode;s.flags&32&&(Yi(d,""),s.flags&=-33);var v=Kc(e);Da(e,v,d);break;case 3:case 4:var S=s.stateNode.containerInfo,i=Kc(e);Ma(e,i,S);break;default:throw Error(Y(161))}}catch(o){Ae(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fp(e,t,r){ie=e,Id(e)}function Id(e,t,r){for(var s=(e.mode&1)!==0;ie!==null;){var d=ie,v=d.child;if(d.tag===22&&s){var S=d.memoizedState!==null||js;if(!S){var i=d.alternate,o=i!==null&&i.memoizedState!==null||Qe;i=js;var f=Qe;if(js=S,(Qe=o)&&!f)for(ie=d;ie!==null;)S=ie,o=S.child,S.tag===22&&S.memoizedState!==null?Qc(d):o!==null?(o.return=S,ie=o):Qc(d);for(;v!==null;)ie=v,Id(v),v=v.sibling;ie=d,js=i,Qe=f}Yc(e)}else d.subtreeFlags&8772&&v!==null?(v.return=d,ie=v):Yc(e)}}function Yc(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Qe||qn(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Qe)if(r===null)s.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:Et(t.type,r.memoizedProps);s.componentDidUpdate(d,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var v=t.updateQueue;v!==null&&Bc(t,v,s);break;case 3:var S=t.updateQueue;if(S!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Bc(t,S,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var _=f.memoizedState;if(_!==null){var c=_.dehydrated;c!==null&&es(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Qe||t.flags&512&&Ra(t)}catch(p){Ae(t,t.return,p)}}if(t===e){ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Jc(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Qc(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{qn(4,t)}catch(o){Ae(t,r,o)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var d=t.return;try{s.componentDidMount()}catch(o){Ae(t,d,o)}}var v=t.return;try{Ra(t)}catch(o){Ae(t,v,o)}break;case 5:var S=t.return;try{Ra(t)}catch(o){Ae(t,S,o)}}}catch(o){Ae(t,t.return,o)}if(t===e){ie=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ie=i;break}ie=t.return}}var Np=Math.ceil,Mn=er.ReactCurrentDispatcher,Ll=er.ReactCurrentOwner,St=er.ReactCurrentBatchConfig,ve=0,We=null,Ie=null,Ge=0,ht=0,si=xr(0),He=0,us=null,Hr=0,Kn=0,El=0,qi=null,st=null,kl=0,yi=1/0,Ut=null,Dn=!1,Aa=null,gr=null,Ws=!1,cr=null,An=0,Ki=0,Ta=null,rn=-1,sn=0;function tt(){return ve&6?Be():rn!==-1?rn:rn=Be()}function vr(e){return e.mode&1?ve&2&&Ge!==0?Ge&-Ge:Sp.transition!==null?(sn===0&&(sn=Cu()),sn):(e=Se,e!==0||(e=window.event,e=e===void 0?16:ku(e.type)),e):1}function Dt(e,t,r,s){if(50<Ki)throw Ki=0,Ta=null,Error(Y(185));gs(e,r,s),(!(ve&2)||e!==We)&&(e===We&&(!(ve&2)&&(Kn|=r),He===4&&ar(e,Ge)),lt(e,s),r===1&&ve===0&&!(t.mode&1)&&(yi=Be()+500,Un&&br()))}function lt(e,t){var r=e.callbackNode;S_(e,t);var s=_n(e,e===We?Ge:0);if(s===0)r!==null&&ac(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&ac(r),t===1)e.tag===0?Cp(Zc.bind(null,e)):Gu(Zc.bind(null,e)),gp(function(){!(ve&6)&&br()}),r=null;else{switch(Su(s)){case 1:r=Za;break;case 4:r=mu;break;case 16:r=fn;break;case 536870912:r=yu;break;default:r=fn}r=Ud(r,Fd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Fd(e,t){if(rn=-1,sn=0,ve&6)throw Error(Y(327));var r=e.callbackNode;if(hi()&&e.callbackNode!==r)return null;var s=_n(e,e===We?Ge:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Tn(e,s);else{t=s;var d=ve;ve|=2;var v=Hd();(We!==e||Ge!==t)&&(Ut=null,yi=Be()+500,Br(e,t));do try{jp();break}catch(i){Nd(e,i)}while(!0);dl(),Mn.current=v,ve=d,Ie!==null?t=0:(We=null,Ge=0,t=He)}if(t!==0){if(t===2&&(d=na(e),d!==0&&(s=d,t=Pa(e,d))),t===1)throw r=us,Br(e,0),ar(e,s),lt(e,Be()),r;if(t===6)ar(e,s);else{if(d=e.current.alternate,!(s&30)&&!Hp(d)&&(t=Tn(e,s),t===2&&(v=na(e),v!==0&&(s=v,t=Pa(e,v))),t===1))throw r=us,Br(e,0),ar(e,s),lt(e,Be()),r;switch(e.finishedWork=d,e.finishedLanes=s,t){case 0:case 1:throw Error(Y(345));case 2:Mr(e,st,Ut);break;case 3:if(ar(e,s),(s&130023424)===s&&(t=kl+500-Be(),10<t)){if(_n(e,0)!==0)break;if(d=e.suspendedLanes,(d&s)!==s){tt(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=fa(Mr.bind(null,e,st,Ut),t);break}Mr(e,st,Ut);break;case 4:if(ar(e,s),(s&4194240)===s)break;for(t=e.eventTimes,d=-1;0<s;){var S=31-Mt(s);v=1<<S,S=t[S],S>d&&(d=S),s&=~v}if(s=d,s=Be()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Np(s/1960))-s,10<s){e.timeoutHandle=fa(Mr.bind(null,e,st,Ut),s);break}Mr(e,st,Ut);break;case 5:Mr(e,st,Ut);break;default:throw Error(Y(329))}}}return lt(e,Be()),e.callbackNode===r?Fd.bind(null,e):null}function Pa(e,t){var r=qi;return e.current.memoizedState.isDehydrated&&(Br(e,t).flags|=256),e=Tn(e,t),e!==2&&(t=st,st=r,t!==null&&Ba(t)),e}function Ba(e){st===null?st=e:st.push.apply(st,e)}function Hp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var d=r[s],v=d.getSnapshot;d=d.value;try{if(!At(v(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ar(e,t){for(t&=~El,t&=~Kn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Mt(t),s=1<<r;e[r]=-1,t&=~s}}function Zc(e){if(ve&6)throw Error(Y(327));hi();var t=_n(e,0);if(!(t&1))return lt(e,Be()),null;var r=Tn(e,t);if(e.tag!==0&&r===2){var s=na(e);s!==0&&(t=s,r=Pa(e,s))}if(r===1)throw r=us,Br(e,0),ar(e,t),lt(e,Be()),r;if(r===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mr(e,st,Ut),lt(e,Be()),null}function Rl(e,t){var r=ve;ve|=1;try{return e(t)}finally{ve=r,ve===0&&(yi=Be()+500,Un&&br())}}function $r(e){cr!==null&&cr.tag===0&&!(ve&6)&&hi();var t=ve;ve|=1;var r=St.transition,s=Se;try{if(St.transition=null,Se=1,e)return e()}finally{Se=s,St.transition=r,ve=t,!(ve&6)&&br()}}function Ml(){ht=si.current,be(si)}function Br(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,pp(r)),Ie!==null)for(r=Ie.return;r!==null;){var s=r;switch(cl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&yn();break;case 3:vi(),be(ot),be(Ze),ml();break;case 5:vl(s);break;case 4:vi();break;case 13:be(Re);break;case 19:be(Re);break;case 10:fl(s.type._context);break;case 22:case 23:Ml()}r=r.return}if(We=e,Ie=e=mr(e.current,null),Ge=ht=t,He=0,us=null,El=Kn=Hr=0,st=qi=null,Ar!==null){for(t=0;t<Ar.length;t++)if(r=Ar[t],s=r.interleaved,s!==null){r.interleaved=null;var d=s.next,v=r.pending;if(v!==null){var S=v.next;v.next=d,s.next=S}r.pending=s}Ar=null}return e}function Nd(e,t){do{var r=Ie;try{if(dl(),Zs.current=Rn,kn){for(var s=Me.memoizedState;s!==null;){var d=s.queue;d!==null&&(d.pending=null),s=s.next}kn=!1}if(Nr=0,je=Ne=Me=null,Vi=!1,ls=0,Ll.current=null,r===null||r.return===null){He=1,us=t,Ie=null;break}e:{var v=e,S=r.return,i=r,o=t;if(t=Ge,i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var f=o,_=i,c=_.tag;if(!(_.mode&1)&&(c===0||c===11||c===15)){var p=_.alternate;p?(_.updateQueue=p.updateQueue,_.memoizedState=p.memoizedState,_.lanes=p.lanes):(_.updateQueue=null,_.memoizedState=null)}var w=$c(S);if(w!==null){w.flags&=-257,jc(w,S,i,v,t),w.mode&1&&Hc(v,f,t),t=w,o=f;var C=t.updateQueue;if(C===null){var u=new Set;u.add(o),t.updateQueue=u}else C.add(o);break e}else{if(!(t&1)){Hc(v,f,t),Dl();break e}o=Error(Y(426))}}else if(Le&&i.mode&1){var n=$c(S);if(n!==null){!(n.flags&65536)&&(n.flags|=256),jc(n,S,i,v,t),hl(mi(o,i));break e}}v=o=mi(o,i),He!==4&&(He=2),qi===null?qi=[v]:qi.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,t&=-t,v.lanes|=t;var a=Sd(v,o,t);Pc(v,a);break e;case 1:i=o;var l=v.type,h=v.stateNode;if(!(v.flags&128)&&(typeof l.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(gr===null||!gr.has(h)))){v.flags|=65536,t&=-t,v.lanes|=t;var m=wd(v,i,t);Pc(v,m);break e}}v=v.return}while(v!==null)}jd(r)}catch(L){t=L,Ie===r&&r!==null&&(Ie=r=r.return);continue}break}while(!0)}function Hd(){var e=Mn.current;return Mn.current=Rn,e===null?Rn:e}function Dl(){(He===0||He===3||He===2)&&(He=4),We===null||!(Hr&268435455)&&!(Kn&268435455)||ar(We,Ge)}function Tn(e,t){var r=ve;ve|=2;var s=Hd();(We!==e||Ge!==t)&&(Ut=null,Br(e,t));do try{$p();break}catch(d){Nd(e,d)}while(!0);if(dl(),ve=r,Mn.current=s,Ie!==null)throw Error(Y(261));return We=null,Ge=0,He}function $p(){for(;Ie!==null;)$d(Ie)}function jp(){for(;Ie!==null&&!d_();)$d(Ie)}function $d(e){var t=zd(e.alternate,e,ht);e.memoizedProps=e.pendingProps,t===null?jd(e):Ie=t,Ll.current=null}function jd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Bp(r,t),r!==null){r.flags&=32767,Ie=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,Ie=null;return}}else if(r=Pp(r,t,ht),r!==null){Ie=r;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);He===0&&(He=5)}function Mr(e,t,r){var s=Se,d=St.transition;try{St.transition=null,Se=1,Wp(e,t,r,s)}finally{St.transition=d,Se=s}return null}function Wp(e,t,r,s){do hi();while(cr!==null);if(ve&6)throw Error(Y(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var v=r.lanes|r.childLanes;if(w_(e,v),e===We&&(Ie=We=null,Ge=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ws||(Ws=!0,Ud(fn,function(){return hi(),null})),v=(r.flags&15990)!==0,r.subtreeFlags&15990||v){v=St.transition,St.transition=null;var S=Se;Se=1;var i=ve;ve|=4,Ll.current=null,Ip(e,r),Od(r,e),lp(ua),pn=!!ha,ua=ha=null,e.current=r,Fp(r),f_(),ve=i,Se=S,St.transition=v}else e.current=r;if(Ws&&(Ws=!1,cr=e,An=d),v=e.pendingLanes,v===0&&(gr=null),g_(r.stateNode),lt(e,Be()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],s(d.value,{componentStack:d.stack,digest:d.digest});if(Dn)throw Dn=!1,e=Aa,Aa=null,e;return An&1&&e.tag!==0&&hi(),v=e.pendingLanes,v&1?e===Ta?Ki++:(Ki=0,Ta=e):Ki=0,br(),null}function hi(){if(cr!==null){var e=Su(An),t=St.transition,r=Se;try{if(St.transition=null,Se=16>e?16:e,cr===null)var s=!1;else{if(e=cr,cr=null,An=0,ve&6)throw Error(Y(331));var d=ve;for(ve|=4,ie=e.current;ie!==null;){var v=ie,S=v.child;if(ie.flags&16){var i=v.deletions;if(i!==null){for(var o=0;o<i.length;o++){var f=i[o];for(ie=f;ie!==null;){var _=ie;switch(_.tag){case 0:case 11:case 15:Gi(8,_,v)}var c=_.child;if(c!==null)c.return=_,ie=c;else for(;ie!==null;){_=ie;var p=_.sibling,w=_.return;if(Td(_),_===f){ie=null;break}if(p!==null){p.return=w,ie=p;break}ie=w}}}var C=v.alternate;if(C!==null){var u=C.child;if(u!==null){C.child=null;do{var n=u.sibling;u.sibling=null,u=n}while(u!==null)}}ie=v}}if(v.subtreeFlags&2064&&S!==null)S.return=v,ie=S;else e:for(;ie!==null;){if(v=ie,v.flags&2048)switch(v.tag){case 0:case 11:case 15:Gi(9,v,v.return)}var a=v.sibling;if(a!==null){a.return=v.return,ie=a;break e}ie=v.return}}var l=e.current;for(ie=l;ie!==null;){S=ie;var h=S.child;if(S.subtreeFlags&2064&&h!==null)h.return=S,ie=h;else e:for(S=l;ie!==null;){if(i=ie,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:qn(9,i)}}catch(L){Ae(i,i.return,L)}if(i===S){ie=null;break e}var m=i.sibling;if(m!==null){m.return=i.return,ie=m;break e}ie=i.return}}if(ve=d,br(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Hn,e)}catch{}s=!0}return s}finally{Se=r,St.transition=t}}return!1}function eh(e,t,r){t=mi(r,t),t=Sd(e,t,1),e=pr(e,t,1),t=tt(),e!==null&&(gs(e,1,t),lt(e,t))}function Ae(e,t,r){if(e.tag===3)eh(e,e,r);else for(;t!==null;){if(t.tag===3){eh(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(gr===null||!gr.has(s))){e=mi(r,e),e=wd(t,e,1),t=pr(t,e,1),e=tt(),t!==null&&(gs(t,1,e),lt(t,e));break}}t=t.return}}function zp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=tt(),e.pingedLanes|=e.suspendedLanes&r,We===e&&(Ge&r)===r&&(He===4||He===3&&(Ge&130023424)===Ge&&500>Be()-kl?Br(e,0):El|=r),lt(e,t)}function Wd(e,t){t===0&&(e.mode&1?(t=Ts,Ts<<=1,!(Ts&130023424)&&(Ts=4194304)):t=1);var r=tt();e=Qt(e,t),e!==null&&(gs(e,t,r),lt(e,r))}function Up(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Wd(e,r)}function Vp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Y(314))}s!==null&&s.delete(t),Wd(e,r)}var zd;zd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)nt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return nt=!1,Tp(e,t,r);nt=!!(e.flags&131072)}else nt=!1,Le&&t.flags&1048576&&qu(t,wn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;tn(e,t),e=t.pendingProps;var d=_i(t,Ze.current);ci(t,r),d=Cl(null,t,s,e,d,r);var v=Sl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(s)?(v=!0,Cn(t)):v=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,pl(t),d.updater=Gn,t.stateNode=d,d._reactInternals=t,Ca(t,s,e,r),t=xa(null,t,s,!0,v,r)):(t.tag=0,Le&&v&&ll(t),et(null,t,d,r),t=t.child),t;case 16:s=t.elementType;e:{switch(tn(e,t),e=t.pendingProps,d=s._init,s=d(s._payload),t.type=s,d=t.tag=qp(s),e=Et(s,e),d){case 0:t=wa(null,t,s,e,r);break e;case 1:t=Uc(null,t,s,e,r);break e;case 11:t=Wc(null,t,s,e,r);break e;case 14:t=zc(null,t,s,Et(s.type,e),r);break e}throw Error(Y(306,s,""))}return t;case 0:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Et(s,d),wa(e,t,s,d,r);case 1:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Et(s,d),Uc(e,t,s,d,r);case 3:e:{if(Ed(t),e===null)throw Error(Y(387));s=t.pendingProps,v=t.memoizedState,d=v.element,Zu(e,t),Ln(t,s,null,r);var S=t.memoizedState;if(s=S.element,v.isDehydrated)if(v={element:s,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},t.updateQueue.baseState=v,t.memoizedState=v,t.flags&256){d=mi(Error(Y(423)),t),t=Vc(e,t,s,r,d);break e}else if(s!==d){d=mi(Error(Y(424)),t),t=Vc(e,t,s,r,d);break e}else for(ut=_r(t.stateNode.containerInfo.firstChild),dt=t,Le=!0,Rt=null,r=Ju(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pi(),s===d){t=Zt(e,t,r);break e}et(e,t,s,r)}t=t.child}return t;case 5:return ed(t),e===null&&va(t),s=t.type,d=t.pendingProps,v=e!==null?e.memoizedProps:null,S=d.children,da(s,d)?S=null:v!==null&&da(s,v)&&(t.flags|=32),Ld(e,t),et(e,t,S,r),t.child;case 6:return e===null&&va(t),null;case 13:return kd(e,t,r);case 4:return gl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=gi(t,null,s,r):et(e,t,s,r),t.child;case 11:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Et(s,d),Wc(e,t,s,d,r);case 7:return et(e,t,t.pendingProps,r),t.child;case 8:return et(e,t,t.pendingProps.children,r),t.child;case 12:return et(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,d=t.pendingProps,v=t.memoizedProps,S=d.value,we(xn,s._currentValue),s._currentValue=S,v!==null)if(At(v.value,S)){if(v.children===d.children&&!ot.current){t=Zt(e,t,r);break e}}else for(v=t.child,v!==null&&(v.return=t);v!==null;){var i=v.dependencies;if(i!==null){S=v.child;for(var o=i.firstContext;o!==null;){if(o.context===s){if(v.tag===1){o=Xt(-1,r&-r),o.tag=2;var f=v.updateQueue;if(f!==null){f=f.shared;var _=f.pending;_===null?o.next=o:(o.next=_.next,_.next=o),f.pending=o}}v.lanes|=r,o=v.alternate,o!==null&&(o.lanes|=r),ma(v.return,r,t),i.lanes|=r;break}o=o.next}}else if(v.tag===10)S=v.type===t.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(Y(341));S.lanes|=r,i=S.alternate,i!==null&&(i.lanes|=r),ma(S,r,t),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===t){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}et(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,s=t.pendingProps.children,ci(t,r),d=wt(d),s=s(d),t.flags|=1,et(e,t,s,r),t.child;case 14:return s=t.type,d=Et(s,t.pendingProps),d=Et(s.type,d),zc(e,t,s,d,r);case 15:return xd(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Et(s,d),tn(e,t),t.tag=1,at(s)?(e=!0,Cn(t)):e=!1,ci(t,r),Cd(t,s,d),Ca(t,s,d,r),xa(null,t,s,!0,e,r);case 19:return Rd(e,t,r);case 22:return bd(e,t,r)}throw Error(Y(156,t.tag))};function Ud(e,t){return vu(e,t)}function Gp(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,r,s){return new Gp(e,t,r,s)}function Al(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qp(e){if(typeof e=="function")return Al(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ya)return 11;if(e===Ja)return 14}return 2}function mr(e,t){var r=e.alternate;return r===null?(r=Ct(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function nn(e,t,r,s,d,v){var S=2;if(s=e,typeof e=="function")Al(e)&&(S=1);else if(typeof e=="string")S=5;else e:switch(e){case Kr:return Or(r.children,d,v,t);case Xa:S=8,d|=8;break;case Uo:return e=Ct(12,r,t,d|2),e.elementType=Uo,e.lanes=v,e;case Vo:return e=Ct(13,r,t,d),e.elementType=Vo,e.lanes=v,e;case Go:return e=Ct(19,r,t,d),e.elementType=Go,e.lanes=v,e;case eu:return Xn(r,d,v,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qh:S=10;break e;case Zh:S=9;break e;case Ya:S=11;break e;case Ja:S=14;break e;case sr:S=16,s=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Ct(S,r,t,d),t.elementType=e,t.type=s,t.lanes=v,t}function Or(e,t,r,s){return e=Ct(7,e,s,t),e.lanes=r,e}function Xn(e,t,r,s){return e=Ct(22,e,s,t),e.elementType=eu,e.lanes=r,e.stateNode={isHidden:!1},e}function Oo(e,t,r){return e=Ct(6,e,null,t),e.lanes=r,e}function Io(e,t,r){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kp(e,t,r,s,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=go(0),this.expirationTimes=go(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=go(0),this.identifierPrefix=s,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Tl(e,t,r,s,d,v,S,i,o){return e=new Kp(e,t,r,i,o),t===1?(t=1,v===!0&&(t|=8)):t=0,v=Ct(3,null,null,t),e.current=v,v.stateNode=e,v.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pl(v),e}function Xp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Vd(e){if(!e)return Sr;e=e._reactInternals;e:{if(zr(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var r=e.type;if(at(r))return Vu(e,r,t)}return t}function Gd(e,t,r,s,d,v,S,i,o){return e=Tl(r,s,!0,e,d,v,S,i,o),e.context=Vd(null),r=e.current,s=tt(),d=vr(r),v=Xt(s,d),v.callback=t??null,pr(r,v,d),e.current.lanes=d,gs(e,d,s),lt(e,s),e}function Yn(e,t,r,s){var d=t.current,v=tt(),S=vr(d);return r=Vd(r),t.context===null?t.context=r:t.pendingContext=r,t=Xt(v,S),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=pr(d,t,S),e!==null&&(Dt(e,d,S,v),Qs(e,d,S)),S}function Pn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function th(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Pl(e,t){th(e,t),(e=e.alternate)&&th(e,t)}function Yp(){return null}var qd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bl(e){this._internalRoot=e}Jn.prototype.render=Bl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Yn(e,t,null,null)};Jn.prototype.unmount=Bl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$r(function(){Yn(null,e,null,null)}),t[Jt]=null}};function Jn(e){this._internalRoot=e}Jn.prototype.unstable_scheduleHydration=function(e){if(e){var t=bu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<or.length&&t!==0&&t<or[r].priority;r++);or.splice(r,0,e),r===0&&Eu(e)}};function Ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rh(){}function Jp(e,t,r,s,d){if(d){if(typeof s=="function"){var v=s;s=function(){var f=Pn(S);v.call(f)}}var S=Gd(t,s,e,0,null,!1,!1,"",rh);return e._reactRootContainer=S,e[Jt]=S.current,is(e.nodeType===8?e.parentNode:e),$r(),S}for(;d=e.lastChild;)e.removeChild(d);if(typeof s=="function"){var i=s;s=function(){var f=Pn(o);i.call(f)}}var o=Tl(e,0,!1,null,null,!1,!1,"",rh);return e._reactRootContainer=o,e[Jt]=o.current,is(e.nodeType===8?e.parentNode:e),$r(function(){Yn(t,o,r,s)}),o}function Zn(e,t,r,s,d){var v=r._reactRootContainer;if(v){var S=v;if(typeof d=="function"){var i=d;d=function(){var o=Pn(S);i.call(o)}}Yn(t,S,e,d)}else S=Jp(r,t,e,d,s);return Pn(S)}wu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ni(t.pendingLanes);r!==0&&(el(t,r|1),lt(t,Be()),!(ve&6)&&(yi=Be()+500,br()))}break;case 13:$r(function(){var s=Qt(e,1);if(s!==null){var d=tt();Dt(s,e,1,d)}}),Pl(e,1)}};tl=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var r=tt();Dt(t,e,134217728,r)}Pl(e,134217728)}};xu=function(e){if(e.tag===13){var t=vr(e),r=Qt(e,t);if(r!==null){var s=tt();Dt(r,e,t,s)}Pl(e,t)}};bu=function(){return Se};Lu=function(e,t){var r=Se;try{return Se=e,t()}finally{Se=r}};ra=function(e,t,r){switch(t){case"input":if(Xo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var d=zn(s);if(!d)throw Error(Y(90));ru(s),Xo(s,d)}}}break;case"textarea":su(e,r);break;case"select":t=r.value,t!=null&&ni(e,!!r.multiple,t,!1)}};uu=Rl;du=$r;var Qp={usingClientEntryPoint:!1,Events:[ms,Qr,zn,cu,hu,Rl]},Bi={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zp={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pu(e),e===null?null:e.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||Yp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zs.isDisabled&&zs.supportsFiber)try{Hn=zs.inject(Zp),$t=zs}catch{}}pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qp;pt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ol(t))throw Error(Y(200));return Xp(e,t,null,r)};pt.createRoot=function(e,t){if(!Ol(e))throw Error(Y(299));var r=!1,s="",d=qd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Tl(e,1,!1,null,null,r,!1,s,d),e[Jt]=t.current,is(e.nodeType===8?e.parentNode:e),new Bl(t)};pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=pu(t),e=e===null?null:e.stateNode,e};pt.flushSync=function(e){return $r(e)};pt.hydrate=function(e,t,r){if(!Qn(t))throw Error(Y(200));return Zn(null,e,t,!0,r)};pt.hydrateRoot=function(e,t,r){if(!Ol(e))throw Error(Y(405));var s=r!=null&&r.hydratedSources||null,d=!1,v="",S=qd;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(v=r.identifierPrefix),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),t=Gd(t,null,e,1,r??null,d,!1,v,S),e[Jt]=t.current,is(e),s)for(e=0;e<s.length;e++)r=s[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new Jn(t)};pt.render=function(e,t,r){if(!Qn(t))throw Error(Y(200));return Zn(null,e,t,!1,r)};pt.unmountComponentAtNode=function(e){if(!Qn(e))throw Error(Y(40));return e._reactRootContainer?($r(function(){Zn(null,null,e,!1,function(){e._reactRootContainer=null,e[Jt]=null})}),!0):!1};pt.unstable_batchedUpdates=Rl;pt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Qn(r))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Zn(e,t,r,!1,s)};pt.version="18.3.1-next-f1338f8080-20240426";function Kd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kd)}catch(e){console.error(e)}}Kd(),Kh.exports=pt;var eg=Kh.exports,ih=eg;Wo.createRoot=ih.createRoot,Wo.hydrateRoot=ih.hydrateRoot;const Xd=V.createContext(null),Lr=()=>{const e=V.useContext(Xd);if(!e)throw new Error("useTerminal must be used within a TerminalProvider");return e},tg={ESC:"\x1B",TAB:"	",ENTER:"\r",CTRL_C:"",ARROW_UP:"\x1B[A",ARROW_DOWN:"\x1B[B",ARROW_RIGHT:"\x1B[C",ARROW_LEFT:"\x1B[D",PAGE_UP:"\x1B[5~",PAGE_DOWN:"\x1B[6~",CTRL_L:"\f"},rg=10,ig=[500,1e3,2e3,3e3,5e3,5e3,1e4,1e4,15e3,3e4],sh="ttyd_last_tmux_session",sg=({children:e})=>{const t=V.useRef(null),r=V.useRef(null),s=V.useRef(new Set),[d,v]=V.useState("connecting"),[S,i]=V.useState(0),o=V.useRef(null),f=V.useRef(!1),_=V.useRef(!1),c=V.useRef(0),[p,w]=V.useState(null),C=V.useRef(null),u=V.useRef({cols:80,rows:24}),n="ontouchstart"in window||navigator.maxTouchPoints>0,[a,l]=V.useState(n),h=V.useCallback(O=>{l(O)},[]),m=V.useRef([]),L=V.useRef(!1),g=V.useRef([]),x=V.useRef(0),y=V.useRef(null),b=V.useCallback(()=>{const O=g.current;if(O.length===0)return;y.current=null;let I;if(O.length===1)I=O[0];else{I=new Uint8Array(x.current);let W=0;for(const z of O)I.set(z,W),W+=z.length}if(g.current=[],x.current=0,!L.current){m.current.push(I);return}s.current.forEach(W=>W(I))},[]),E=V.useCallback(async(O=3e3)=>{const I=Date.now();for(;Date.now()-I<O;){if(C.current)return C.current;await new Promise(W=>setTimeout(W,100))}return C.current},[]),R=V.useCallback(async O=>{const I=sessionStorage.getItem(sh);if(!I)return;console.log(`[Terminal] Restoring tmux session: ${I}`);const W=await E(3e3);if(W)for(let z=0;z<10;z++){try{const X=`/api/tmux/list?client_tty=${encodeURIComponent(W)}`,K=await fetch(X,{signal:AbortSignal.timeout(3e3)});if(!K.ok)break;const $=await K.json();if(!($.sessions||[]).some(U=>U.name===I)){console.log(`[Terminal] Saved session "${I}" no longer exists`),sessionStorage.removeItem(sh);return}if($.currentSession){if($.currentSession===I){console.log(`[Terminal] Already on correct session: ${I}`);return}const U=`/api/tmux/switch?session=${encodeURIComponent(I)}&client_tty=${encodeURIComponent(W)}`;if((await fetch(U,{signal:AbortSignal.timeout(3e3)})).ok){console.log(`[Terminal] Restored tmux session via API: ${I}`);return}}}catch{}await new Promise(X=>setTimeout(X,500))}},[E]),k=V.useCallback(()=>{if(r.current?.readyState===WebSocket.OPEN)return;const O=_.current;v(O?"reconnecting":"connecting");const I=window.location.protocol==="https:"?"wss:":"ws:",W=window.location.host,z=window.location.pathname.replace(/\/$/,""),X=`${I}//${W}${z}/ws`,K=new WebSocket(X,["tty"]);K.binaryType="arraybuffer",r.current=K,K.onopen=()=>{console.log("[Terminal] WebSocket connected"),v("connected"),i(0),c.current=Date.now(),C.current=null,w(null);const{cols:$,rows:P}=u.current,U=JSON.stringify({AuthToken:"",columns:$,rows:P});K.send(new TextEncoder().encode(U)),O&&(_.current=!1),R(K)},K.onmessage=$=>{const P=new Uint8Array($.data);if(P.length===0)return;const U=String.fromCharCode(P[0]);if(U==="0"){const G=P.subarray(1);if(!C.current){const ae=new TextDecoder().decode(G).match(/\]7337;(\/dev\/pts\/\d+)/);ae&&(C.current=ae[1],w(ae[1]))}g.current.push(G),x.current+=G.length;const Z=512*1024;x.current>Z?b():y.current===null&&(y.current=requestAnimationFrame(b))}else if(U==="1"){const G=new TextDecoder().decode(P.subarray(1));document.title=G}},K.onclose=()=>{if(console.log("[Terminal] WebSocket closed"),r.current=null,b(),y.current!==null&&(cancelAnimationFrame(y.current),y.current=null),f.current){f.current=!1,v("disconnected");return}v("disconnected"),_.current=!0,i($=>{const P=$+1;if(P<=rg){const U=ig[$]||3e4;console.log(`[Terminal] Reconnecting in ${U}ms (attempt ${P})`),o.current=window.setTimeout(()=>{k()},U)}return P})},K.onerror=$=>{console.error("[Terminal] WebSocket error",$)}},[R,b]),D=V.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null),_.current=!0,i(0),k()},[k]);V.useEffect(()=>{const O=()=>{if(document.visibilityState==="visible"){const I=r.current;if(!I||I.readyState===WebSocket.CLOSED||I.readyState===WebSocket.CLOSING)console.log("[Terminal] Page became visible, connection lost  reconnecting immediately"),o.current&&(clearTimeout(o.current),o.current=null),_.current=!0,i(0),k();else if(I&&I.readyState===WebSocket.OPEN&&Date.now()-c.current>3e4){const{cols:X,rows:K}=u.current,$=JSON.stringify({AuthToken:"",columns:X,rows:K}),P=new TextEncoder().encode($),U=new Uint8Array(P.length+1);U[0]=49,U.set(P,1);try{I.send(U)}catch{console.log("[Terminal] Connection stale on visibility change  forcing reconnect"),I.close()}}}};return document.addEventListener("visibilitychange",O),()=>document.removeEventListener("visibilitychange",O)},[k]),V.useEffect(()=>(k(),()=>{f.current=!0,o.current&&clearTimeout(o.current),y.current!==null&&(cancelAnimationFrame(y.current),y.current=null),r.current&&r.current.close()}),[k]);const T=V.useCallback(O=>{if(r.current&&r.current.readyState===WebSocket.OPEN){const I=new TextEncoder().encode(O),W=new Uint8Array(I.length+1);W[0]=48,W.set(I,1),r.current.send(W)}},[]),N=V.useCallback(O=>{const I=tg[O];I&&T(I)},[T]),j=V.useCallback(O=>{if(s.current.add(O),!L.current){L.current=!0;const I=m.current;m.current=[];for(const W of I)O(W)}return()=>{s.current.delete(O)}},[]),H=V.useCallback(O=>{r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(new Uint8Array([O]))},[]),B=V.useCallback(O=>{C.current=O,w(O)},[]),M=V.useCallback((O,I)=>{if(u.current={cols:O,rows:I},r.current&&r.current.readyState===WebSocket.OPEN){const W=JSON.stringify({AuthToken:"",columns:O,rows:I}),z=new TextEncoder().encode(W),X=new Uint8Array(z.length+1);X[0]=49,X.set(z,1),r.current.send(X)}},[]),A=V.useMemo(()=>({connectionState:d,sendInput:T,sendKey:N,subscribeOutput:j,sendControl:H,terminalRef:t,resize:M,reconnect:D,reconnectAttempt:S,clientTty:p,setClientTty:B,mobileKeyboardLocked:a,setMobileKeyboardLocked:h}),[d,T,N,j,H,t,M,D,S,p,B,a,h]);return F.jsx(Xd.Provider,{value:A,children:e})},ng=5e3,Yd=V.createContext(null),Jd=()=>{const e=V.useContext(Yd);if(!e)throw new Error("useServerEvents must be used within a ServerEventsProvider");return e},og=({children:e})=>{const{clientTty:t}=Lr(),r=V.useRef(null),[s,d]=V.useState(""),[v,S]=V.useState(""),[i,o]=V.useState([]),[f,_]=V.useState(null),[c,p]=V.useState(!1),[w,C]=V.useState(!1),u=V.useRef(null),n=V.useRef(null),a=V.useRef(!0),l=V.useCallback(y=>{d(y.branch||""),S(y.path||""),o(y.tmux?.sessions||[]),_(y.tmux?.currentSession||null),p(!1),C(!0)},[]),h=V.useCallback(async()=>{try{const y=r.current?`?client_tty=${encodeURIComponent(r.current)}`:"",[b,E]=await Promise.all([fetch("/api/diff",{signal:AbortSignal.timeout(3e3)}),fetch(`/api/tmux/list${y}`,{signal:AbortSignal.timeout(3e3)})]);let R="",k="";if(b.ok){const N=await b.json();R=N.branch||"",k=N.git_root||N.cwd||""}let D=[],T=null;if(E.ok){const N=await E.json();D=N.sessions||[],T=N.currentSession||null}d(R),S(k),o(D),_(T),p(!1),C(!0)}catch{p(!0)}},[]),m=V.useCallback(()=>{n.current||(h(),n.current=window.setInterval(h,ng))},[h]),L=V.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]),g=V.useCallback(()=>{h()},[h]);V.useEffect(()=>{r.current=t},[t]),V.useEffect(()=>{let y=!1;return(async()=>{try{const E=await fetch("/api/tmux/list",{signal:AbortSignal.timeout(3e3)});if(E.ok&&!y){const R=await E.json();o(R.sessions||[]),_(R.currentSession||null),C(!0)}}catch{}})(),()=>{y=!0}},[]),V.useEffect(()=>{if(!t)return;const b=`/api/events${`?client_tty=${encodeURIComponent(t)}`}`,E=new EventSource(b);return u.current=E,E.onmessage=R=>{try{const k=JSON.parse(R.data);l(k)}catch{}},E.onerror=()=>{E.close(),u.current=null,a.current=!1,m()},()=>{E.close(),u.current=null,L()}},[t,l,m,L]);const x=V.useMemo(()=>({branch:s,path:v,tmuxSessions:i,currentTmuxSession:f,isOffline:c,clientTty:t,sessionsLoaded:w,refresh:g}),[s,v,i,f,c,t,w,g]);return F.jsx(Yd.Provider,{value:x,children:e})},nh={defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]},ag=({isOpen:e,onClose:t,onConfigChange:r})=>{const[s,d]=V.useState(nh),[v,S]=V.useState(""),[i,o]=V.useState(""),[f,_]=V.useState(()=>localStorage.getItem("terminal_predictive_echo")==="on");V.useEffect(()=>{if(e){const u=localStorage.getItem("ttyd_commands");if(u)try{d(JSON.parse(u))}catch(n){console.error("Failed to parse ttyd_commands",n)}else d(nh)}},[e]);const c=u=>{d(u),localStorage.setItem("ttyd_commands",JSON.stringify(u)),r()},p=u=>{const n=[...s.defaultCommands];n[u].visible=!n[u].visible,c({...s,defaultCommands:n})},w=u=>{const n=s.customCommands.filter((a,l)=>l!==u);c({...s,customCommands:n})},C=u=>{if(u.preventDefault(),!v.trim()||!i.trim())return;const n=[...s.customCommands,{name:v.trim(),cmd:i.trim()}];c({...s,customCommands:n}),S(""),o("")};return e?F.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:F.jsxs("div",{className:"bg-bg-secondary w-full max-w-sm mx-4 rounded-xl shadow-2xl border border-border-subtle flex flex-col max-h-[80vh]",onClick:u=>u.stopPropagation(),children:[F.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[F.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Command Settings"}),F.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:""})]}),F.jsxs("div",{className:"overflow-y-auto p-4 space-y-6",children:[F.jsxs("section",{children:[F.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Built-in Commands"}),F.jsx("div",{className:"space-y-2",children:s.defaultCommands.map((u,n)=>F.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[F.jsx("span",{className:"font-mono text-sm text-text-primary",children:u.name}),F.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[F.jsx("input",{type:"checkbox",className:"sr-only peer",checked:u.visible,onChange:()=>p(n)}),F.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-green"})]})]},u.name))})]}),F.jsxs("section",{children:[F.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Custom Commands"}),s.customCommands.length===0?F.jsx("p",{className:"text-sm text-text-muted italic",children:"No custom commands added"}):F.jsx("div",{className:"space-y-2",children:s.customCommands.map((u,n)=>F.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[F.jsxs("div",{className:"flex flex-col min-w-0 mr-2",children:[F.jsx("span",{className:"font-mono text-sm text-text-primary truncate",children:u.name}),F.jsx("span",{className:"font-mono text-xs text-text-muted truncate",children:u.cmd})]}),F.jsx("button",{onClick:()=>w(n),className:"p-2 text-text-secondary hover:text-accent-red transition-colors",children:""})]},n))})]}),F.jsxs("section",{children:[F.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Performance"}),F.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[F.jsxs("div",{className:"flex flex-col",children:[F.jsx("span",{className:"text-sm text-text-primary",children:"Predictive Echo"}),F.jsx("span",{className:"text-xs text-text-muted",children:"Show keystrokes before server confirms"})]}),F.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[F.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f,onChange:()=>{const u=!f;_(u),localStorage.setItem("terminal_predictive_echo",u?"on":"off"),window.dispatchEvent(new CustomEvent("predictive-echo-changed",{detail:u}))}}),F.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-green"})]})]})]}),F.jsxs("section",{children:[F.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Add New Command"}),F.jsxs("form",{onSubmit:C,className:"space-y-3",children:[F.jsx("div",{children:F.jsx("input",{type:"text",placeholder:"Button Name (e.g. ls -la)",value:v,onChange:u=>S(u.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),F.jsx("div",{children:F.jsx("input",{type:"text",placeholder:"Command (e.g. ls -la\\r)",value:i,onChange:u=>o(u.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),F.jsx("button",{type:"submit",disabled:!v.trim()||!i.trim(),className:"w-full py-2 bg-accent-blue/10 text-accent-blue border border-accent-blue/30 rounded font-medium hover:bg-accent-blue/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Command"})]})]})]})]})}):null},Us="ttyd_text_input_draft",lg=20,cg=12,oh=lg+cg,hg=.4,ug=({isOpen:e,onClose:t,onSend:r})=>{const[s,d]=V.useState(()=>sessionStorage.getItem(Us)||""),v=V.useRef(null),S=typeof window<"u"?(window.visualViewport?.height||window.innerHeight)*hg:200,i=V.useCallback(()=>{const c=v.current;if(!c)return;c.style.height=`${oh}px`;const p=c.scrollHeight;c.style.height=`${Math.min(p,S)}px`,c.style.overflowY=p>S?"auto":"hidden"},[S]);V.useEffect(()=>{if(e){const c=sessionStorage.getItem(Us);c&&d(c),setTimeout(()=>{v.current?.focus(),i()},50)}},[e,i]),V.useEffect(()=>{i()},[s,i]);const o=V.useCallback(c=>{d(c),sessionStorage.setItem(Us,c)},[]),f=V.useCallback(()=>{s&&(r(s),d(""),sessionStorage.removeItem(Us),t())},[s,r,t]),_=c=>{c.key==="Enter"&&(c.metaKey||c.ctrlKey)&&(c.preventDefault(),f())};return e?F.jsxs("div",{className:"shrink-0 bg-bg-secondary border-t border-border-subtle flex items-end gap-1.5 px-2 py-1.5",children:[F.jsx("button",{onClick:t,className:"shrink-0 w-8 h-8 flex items-center justify-center text-text-secondary active:bg-bg-tertiary rounded-lg text-sm mb-[1px]",children:""}),F.jsx("textarea",{ref:v,value:s,onChange:c=>o(c.target.value),onKeyDown:_,placeholder:"Type or paste text...",rows:1,className:"flex-1 bg-bg-primary border border-border-subtle rounded-lg px-3 py-1.5 font-mono text-sm text-text-primary leading-5 focus:outline-none focus:border-accent-blue resize-none min-w-0",style:{height:`${oh}px`,overflowY:"hidden"}}),F.jsx("button",{onClick:f,disabled:!s,className:"shrink-0 px-3 h-8 bg-accent-blue text-white text-sm rounded-lg font-medium active:opacity-80 disabled:opacity-40 mb-[1px]",children:"Send"})]}):null};var Qd={},Zd={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var v="",S=0;S<arguments.length;S++){var i=arguments[S];i&&(v=d(v,s(i)))}return v}function s(v){if(typeof v=="string"||typeof v=="number")return v;if(typeof v!="object")return"";if(Array.isArray(v))return r.apply(null,v);if(v.toString!==Object.prototype.toString&&!v.toString.toString().includes("[native code]"))return v.toString();var S="";for(var i in v)t.call(v,i)&&v[i]&&(S=d(S,i));return S}function d(v,S){return S?v?v+" "+S:v+S:v}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Zd);var dg=Zd.exports,yr={},ef={},tr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){}t.prototype={diff:function(d,v){var S,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var f=this;function _(x){return o?(setTimeout(function(){o(void 0,x)},0),!0):x}d=this.castInput(d),v=this.castInput(v),d=this.removeEmpty(this.tokenize(d)),v=this.removeEmpty(this.tokenize(v));var c=v.length,p=d.length,w=1,C=c+p;i.maxEditLength&&(C=Math.min(C,i.maxEditLength));var u=(S=i.timeout)!==null&&S!==void 0?S:1/0,n=Date.now()+u,a=[{oldPos:-1,lastComponent:void 0}],l=this.extractCommon(a[0],v,d,0);if(a[0].oldPos+1>=p&&l+1>=c)return _([{value:this.join(v),count:v.length}]);var h=-1/0,m=1/0;function L(){for(var x=Math.max(h,-w);x<=Math.min(m,w);x+=2){var y=void 0,b=a[x-1],E=a[x+1];b&&(a[x-1]=void 0);var R=!1;if(E){var k=E.oldPos-x;R=E&&0<=k&&k<c}var D=b&&b.oldPos+1<p;if(!R&&!D){a[x]=void 0;continue}if(!D||R&&b.oldPos+1<E.oldPos?y=f.addToPath(E,!0,void 0,0):y=f.addToPath(b,void 0,!0,1),l=f.extractCommon(y,v,d,x),y.oldPos+1>=p&&l+1>=c)return _(r(f,y.lastComponent,v,d,f.useLongestToken));a[x]=y,y.oldPos+1>=p&&(m=Math.min(m,x-1)),l+1>=c&&(h=Math.max(h,x+1))}w++}if(o)(function x(){setTimeout(function(){if(w>C||Date.now()>n)return o();L()||x()},0)})();else for(;w<=C&&Date.now()<=n;){var g=L();if(g)return g}},addToPath:function(d,v,S,i){var o=d.lastComponent;return o&&o.added===v&&o.removed===S?{oldPos:d.oldPos+i,lastComponent:{count:o.count+1,added:v,removed:S,previousComponent:o.previousComponent}}:{oldPos:d.oldPos+i,lastComponent:{count:1,added:v,removed:S,previousComponent:o}}},extractCommon:function(d,v,S,i){for(var o=v.length,f=S.length,_=d.oldPos,c=_-i,p=0;c+1<o&&_+1<f&&this.equals(v[c+1],S[_+1]);)c++,_++,p++;return p&&(d.lastComponent={count:p,previousComponent:d.lastComponent}),d.oldPos=_,c},equals:function(d,v){return this.options.comparator?this.options.comparator(d,v):d===v||this.options.ignoreCase&&d.toLowerCase()===v.toLowerCase()},removeEmpty:function(d){for(var v=[],S=0;S<d.length;S++)d[S]&&v.push(d[S]);return v},castInput:function(d){return d},tokenize:function(d){return d.split("")},join:function(d){return d.join("")}};function r(s,d,v,S,i){for(var o=[],f;d;)o.push(d),f=d.previousComponent,delete d.previousComponent,d=f;o.reverse();for(var _=0,c=o.length,p=0,w=0;_<c;_++){var C=o[_];if(C.removed){if(C.value=s.join(S.slice(w,w+C.count)),w+=C.count,_&&o[_-1].added){var n=o[_-1];o[_-1]=o[_],o[_]=n}}else{if(!C.added&&i){var u=v.slice(p,p+C.count);u=u.map(function(l,h){var m=S[w+h];return m.length>l.length?m:l}),C.value=s.join(u)}else C.value=s.join(v.slice(p,p+C.count));p+=C.count,C.added||(w+=C.count)}}var a=o[c-1];return c>1&&typeof a.value=="string"&&(a.added||a.removed)&&s.equals("",a.value)&&(o[c-2].value+=a.value,o.pop()),o}})(tr);var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.diffChars=pg;Cs.characterDiff=void 0;var fg=_g(tr);function _g(e){return e&&e.__esModule?e:{default:e}}var tf=new fg.default;Cs.characterDiff=tf;function pg(e,t,r){return tf.diff(e,t,r)}var bi={},eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.generateOptions=gg;function gg(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}Object.defineProperty(bi,"__esModule",{value:!0});bi.diffWords=Cg;bi.diffWordsWithSpace=Sg;bi.wordDiff=void 0;var vg=yg(tr),mg=eo;function yg(e){return e&&e.__esModule?e:{default:e}}var ah=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,lh=/\S/,Ss=new vg.default;bi.wordDiff=Ss;Ss.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!lh.test(e)&&!lh.test(t)};Ss.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&ah.test(t[r])&&ah.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};function Cg(e,t,r){return r=(0,mg.generateOptions)(r,{ignoreWhitespace:!0}),Ss.diff(e,t,r)}function Sg(e,t,r){return Ss.diff(e,t,r)}var Er={};Object.defineProperty(Er,"__esModule",{value:!0});Er.diffLines=Lg;Er.diffTrimmedLines=Eg;Er.lineDiff=void 0;var wg=bg(tr),xg=eo;function bg(e){return e&&e.__esModule?e:{default:e}}var to=new wg.default;Er.lineDiff=to;to.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var s=0;s<r.length;s++){var d=r[s];s%2&&!this.options.newlineIsToken?t[t.length-1]+=d:(this.options.ignoreWhitespace&&(d=d.trim()),t.push(d))}return t};function Lg(e,t,r){return to.diff(e,t,r)}function Eg(e,t,r){var s=(0,xg.generateOptions)(r,{ignoreWhitespace:!0});return to.diff(e,t,s)}var ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.diffSentences=Mg;ws.sentenceDiff=void 0;var kg=Rg(tr);function Rg(e){return e&&e.__esModule?e:{default:e}}var Il=new kg.default;ws.sentenceDiff=Il;Il.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function Mg(e,t,r){return Il.diff(e,t,r)}var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.diffCss=Tg;xs.cssDiff=void 0;var Dg=Ag(tr);function Ag(e){return e&&e.__esModule?e:{default:e}}var Fl=new Dg.default;xs.cssDiff=Fl;Fl.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Tg(e,t,r){return Fl.diff(e,t,r)}var Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.diffJson=Ig;Li.canonicalize=Bn;Li.jsonDiff=void 0;var rf=Bg(tr),Pg=Er;function Bg(e){return e&&e.__esModule?e:{default:e}}function on(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?on=function(r){return typeof r}:on=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},on(e)}var Og=Object.prototype.toString,jr=new rf.default;Li.jsonDiff=jr;jr.useLongestToken=!0;jr.tokenize=Pg.lineDiff.tokenize;jr.castInput=function(e){var t=this.options,r=t.undefinedReplacement,s=t.stringifyReplacer,d=s===void 0?function(v,S){return typeof S>"u"?r:S}:s;return typeof e=="string"?e:JSON.stringify(Bn(e,null,null,d),d,"  ")};jr.equals=function(e,t){return rf.default.prototype.equals.call(jr,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Ig(e,t,r){return jr.diff(e,t,r)}function Bn(e,t,r,s,d){t=t||[],r=r||[],s&&(e=s(d,e));var v;for(v=0;v<t.length;v+=1)if(t[v]===e)return r[v];var S;if(Og.call(e)==="[object Array]"){for(t.push(e),S=new Array(e.length),r.push(S),v=0;v<e.length;v+=1)S[v]=Bn(e[v],t,r,s,d);return t.pop(),r.pop(),S}if(e&&e.toJSON&&(e=e.toJSON()),on(e)==="object"&&e!==null){t.push(e),S={},r.push(S);var i=[],o;for(o in e)e.hasOwnProperty(o)&&i.push(o);for(i.sort(),v=0;v<i.length;v+=1)o=i[v],S[o]=Bn(e[o],t,r,s,o);t.pop(),r.pop()}else S=e;return S}var bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.diffArrays=Hg;bs.arrayDiff=void 0;var Fg=Ng(tr);function Ng(e){return e&&e.__esModule?e:{default:e}}var ds=new Fg.default;bs.arrayDiff=ds;ds.tokenize=function(e){return e.slice()};ds.join=ds.removeEmpty=function(e){return e};function Hg(e,t,r){return ds.diff(e,t,r)}var ro={},Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.parsePatch=$g;function $g(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.split(/\r\n|[\n\v\f\r\x85]/),s=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],d=[],v=0;function S(){var f={};for(d.push(f);v<r.length;){var _=r[v];if(/^(\-\-\-|\+\+\+|@@)\s/.test(_))break;var c=/^(?:Index:|diff(?: -r \w+)+)\s+/.exec(_);c&&(f.index=_.substring(c[0].length).trim()),v++}for(i(f),i(f),f.hunks=[];v<r.length;){var p=r[v];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))f.hunks.push(o());else{if(p&&t.strict)throw new Error("Unknown line "+(v+1)+" "+JSON.stringify(p));v++}}}function i(f){var _=/^(---|\+\+\+)\s+/.exec(r[v]);if(_){var c=_[1]==="---"?"old":"new",p=r[v].substring(3).trim().split("	",2),w=p[0].replace(/\\\\/g,"\\");w.startsWith('"')&&w.endsWith('"')&&(w=w.substr(1,w.length-2)),f[c+"FileName"]=w,f[c+"Header"]=(p[1]||"").trim(),v++}}function o(){var f=v,_=r[v++],c=_.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+c[1],oldLines:typeof c[2]>"u"?1:+c[2],newStart:+c[3],newLines:typeof c[4]>"u"?1:+c[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var w=0,C=0;v<r.length&&!(r[v].indexOf("--- ")===0&&v+2<r.length&&r[v+1].indexOf("+++ ")===0&&r[v+2].indexOf("@@")===0);v++){var u=r[v].length==0&&v!=r.length-1?" ":r[v][0];if(u==="+"||u==="-"||u===" "||u==="\\")p.lines.push(r[v]),p.linedelimiters.push(s[v]||`
`),u==="+"?w++:u==="-"?C++:u===" "&&(w++,C++);else break}if(!w&&p.newLines===1&&(p.newLines=0),!C&&p.oldLines===1&&(p.oldLines=0),t.strict){if(w!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(f+1));if(C!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(f+1))}return p}for(;v<r.length;)S();return d}var sf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r,s,d){var v=!0,S=!1,i=!1,o=1;return function f(){if(v&&!i){if(S?o++:v=!1,r+o<=d)return o;i=!0}if(!S)return i||(v=!0),s<=r-o?-o++:(S=!0,f())}}})(sf);Object.defineProperty(ro,"__esModule",{value:!0});ro.applyPatch=of;ro.applyPatches=zg;var nf=Ls,jg=Wg(sf);function Wg(e){return e&&e.__esModule?e:{default:e}}function of(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=(0,nf.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var s=e.split(/\r\n|[\n\v\f\r\x85]/),d=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],v=t.hunks,S=r.compareLine||function(N,j,H,B){return j===B},i=0,o=r.fuzzFactor||0,f=0,_=0,c,p;function w(N,j){for(var H=0;H<N.lines.length;H++){var B=N.lines[H],M=B.length>0?B[0]:" ",A=B.length>0?B.substr(1):B;if(M===" "||M==="-"){if(!S(j+1,s[j],M,A)&&(i++,i>o))return!1;j++}}return!0}for(var C=0;C<v.length;C++){for(var u=v[C],n=s.length-u.oldLines,a=0,l=_+u.oldStart-1,h=(0,jg.default)(l,f,n);a!==void 0;a=h())if(w(u,l+a)){u.offset=_+=a;break}if(a===void 0)return!1;f=u.offset+u.oldStart+u.oldLines}for(var m=0,L=0;L<v.length;L++){var g=v[L],x=g.oldStart+g.offset+m-1;m+=g.newLines-g.oldLines;for(var y=0;y<g.lines.length;y++){var b=g.lines[y],E=b.length>0?b[0]:" ",R=b.length>0?b.substr(1):b,k=g.linedelimiters&&g.linedelimiters[y]||`
`;if(E===" ")x++;else if(E==="-")s.splice(x,1),d.splice(x,1);else if(E==="+")s.splice(x,0,R),d.splice(x,0,k),x++;else if(E==="\\"){var D=g.lines[y-1]?g.lines[y-1][0]:null;D==="+"?c=!0:D==="-"&&(p=!0)}}}if(c)for(;!s[s.length-1];)s.pop(),d.pop();else p&&(s.push(""),d.push(`
`));for(var T=0;T<s.length-1;T++)s[T]=s[T]+d[T];return s.join("")}function zg(e,t){typeof e=="string"&&(e=(0,nf.parsePatch)(e));var r=0;function s(){var d=e[r++];if(!d)return t.complete();t.loadFile(d,function(v,S){if(v)return t.complete(v);var i=of(S,d,t);t.patched(d,i,function(o){if(o)return t.complete(o);s()})})}s()}var io={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.structuredPatch=af;Ur.formatPatch=Nl;Ur.createTwoFilesPatch=lf;Ur.createPatch=Xg;var Ug=Er;function Fo(e){return Kg(e)||qg(e)||Gg(e)||Vg()}function Vg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gg(e,t){if(e){if(typeof e=="string")return Oa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oa(e,t)}}function qg(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Kg(e){if(Array.isArray(e))return Oa(e)}function Oa(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function af(e,t,r,s,d,v,S){S||(S={}),typeof S.context>"u"&&(S.context=4);var i=(0,Ug.diffLines)(r,s,S);if(!i)return;i.push({value:"",lines:[]});function o(a){return a.map(function(l){return" "+l})}for(var f=[],_=0,c=0,p=[],w=1,C=1,u=function(l){var h=i[l],m=h.lines||h.value.replace(/\n$/,"").split(`
`);if(h.lines=m,h.added||h.removed){var L;if(!_){var g=i[l-1];_=w,c=C,g&&(p=S.context>0?o(g.lines.slice(-S.context)):[],_-=p.length,c-=p.length)}(L=p).push.apply(L,Fo(m.map(function(T){return(h.added?"+":"-")+T}))),h.added?C+=m.length:w+=m.length}else{if(_)if(m.length<=S.context*2&&l<i.length-2){var x;(x=p).push.apply(x,Fo(o(m)))}else{var y,b=Math.min(m.length,S.context);(y=p).push.apply(y,Fo(o(m.slice(0,b))));var E={oldStart:_,oldLines:w-_+b,newStart:c,newLines:C-c+b,lines:p};if(l>=i.length-2&&m.length<=S.context){var R=/\n$/.test(r),k=/\n$/.test(s),D=m.length==0&&p.length>E.oldLines;!R&&D&&r.length>0&&p.splice(E.oldLines,0,"\\ No newline at end of file"),(!R&&!D||!k)&&p.push("\\ No newline at end of file")}f.push(E),_=0,c=0,p=[]}w+=m.length,C+=m.length}},n=0;n<i.length;n++)u(n);return{oldFileName:e,newFileName:t,oldHeader:d,newHeader:v,hunks:f}}function Nl(e){if(Array.isArray(e))return e.map(Nl).join(`
`);var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader>"u"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader>"u"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var s=e.hunks[r];s.oldLines===0&&(s.oldStart-=1),s.newLines===0&&(s.newStart-=1),t.push("@@ -"+s.oldStart+","+s.oldLines+" +"+s.newStart+","+s.newLines+" @@"),t.push.apply(t,s.lines)}return t.join(`
`)+`
`}function lf(e,t,r,s,d,v,S){return Nl(af(e,t,r,s,d,v,S))}function Xg(e,t,r,s,d,v){return lf(e,e,t,r,s,d,v)}var so={};Object.defineProperty(so,"__esModule",{value:!0});so.arrayEqual=Yg;so.arrayStartsWith=cf;function Yg(e,t){return e.length!==t.length?!1:cf(e,t)}function cf(e,t){if(t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}Object.defineProperty(io,"__esModule",{value:!0});io.calcLineCount=hf;io.merge=iv;var Jg=Ur,Qg=Ls,No=so;function ui(e){return rv(e)||tv(e)||ev(e)||Zg()}function Zg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ev(e,t){if(e){if(typeof e=="string")return Ia(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ia(e,t)}}function tv(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function rv(e){if(Array.isArray(e))return Ia(e)}function Ia(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function hf(e){var t=Fa(e.lines),r=t.oldLines,s=t.newLines;r!==void 0?e.oldLines=r:delete e.oldLines,s!==void 0?e.newLines=s:delete e.newLines}function iv(e,t,r){e=ch(e,r),t=ch(t,r);var s={};(e.index||t.index)&&(s.index=e.index||t.index),(e.newFileName||t.newFileName)&&(hh(e)?hh(t)?(s.oldFileName=Vs(s,e.oldFileName,t.oldFileName),s.newFileName=Vs(s,e.newFileName,t.newFileName),s.oldHeader=Vs(s,e.oldHeader,t.oldHeader),s.newHeader=Vs(s,e.newHeader,t.newHeader)):(s.oldFileName=e.oldFileName,s.newFileName=e.newFileName,s.oldHeader=e.oldHeader,s.newHeader=e.newHeader):(s.oldFileName=t.oldFileName||e.oldFileName,s.newFileName=t.newFileName||e.newFileName,s.oldHeader=t.oldHeader||e.oldHeader,s.newHeader=t.newHeader||e.newHeader)),s.hunks=[];for(var d=0,v=0,S=0,i=0;d<e.hunks.length||v<t.hunks.length;){var o=e.hunks[d]||{oldStart:1/0},f=t.hunks[v]||{oldStart:1/0};if(uh(o,f))s.hunks.push(dh(o,S)),d++,i+=o.newLines-o.oldLines;else if(uh(f,o))s.hunks.push(dh(f,i)),v++,S+=f.newLines-f.oldLines;else{var _={oldStart:Math.min(o.oldStart,f.oldStart),oldLines:0,newStart:Math.min(o.newStart+S,f.oldStart+i),newLines:0,lines:[]};sv(_,o.oldStart,o.lines,f.oldStart,f.lines),v++,d++,s.hunks.push(_)}}return s}function ch(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,Qg.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,Jg.structuredPatch)(void 0,void 0,t,e)}return e}function hh(e){return e.newFileName&&e.newFileName!==e.oldFileName}function Vs(e,t,r){return t===r?t:(e.conflict=!0,{mine:t,theirs:r})}function uh(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function dh(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function sv(e,t,r,s,d){var v={offset:t,lines:r,index:0},S={offset:s,lines:d,index:0};for(_h(e,v,S),_h(e,S,v);v.index<v.lines.length&&S.index<S.lines.length;){var i=v.lines[v.index],o=S.lines[S.index];if((i[0]==="-"||i[0]==="+")&&(o[0]==="-"||o[0]==="+"))nv(e,v,S);else if(i[0]==="+"&&o[0]===" "){var f;(f=e.lines).push.apply(f,ui(Pr(v)))}else if(o[0]==="+"&&i[0]===" "){var _;(_=e.lines).push.apply(_,ui(Pr(S)))}else i[0]==="-"&&o[0]===" "?fh(e,v,S):o[0]==="-"&&i[0]===" "?fh(e,S,v,!0):i===o?(e.lines.push(i),v.index++,S.index++):Hl(e,Pr(v),Pr(S))}ph(e,v),ph(e,S),hf(e)}function nv(e,t,r){var s=Pr(t),d=Pr(r);if(gh(s)&&gh(d)){if((0,No.arrayStartsWith)(s,d)&&vh(r,s,s.length-d.length)){var v;(v=e.lines).push.apply(v,ui(s));return}else if((0,No.arrayStartsWith)(d,s)&&vh(t,d,d.length-s.length)){var S;(S=e.lines).push.apply(S,ui(d));return}}else if((0,No.arrayEqual)(s,d)){var i;(i=e.lines).push.apply(i,ui(s));return}Hl(e,s,d)}function fh(e,t,r,s){var d=Pr(t),v=ov(r,d);if(v.merged){var S;(S=e.lines).push.apply(S,ui(v.merged))}else Hl(e,s?v:d,s?d:v)}function Hl(e,t,r){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:r})}function _h(e,t,r){for(;t.offset<r.offset&&t.index<t.lines.length;){var s=t.lines[t.index++];e.lines.push(s),t.offset++}}function ph(e,t){for(;t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r)}}function Pr(e){for(var t=[],r=e.lines[e.index][0];e.index<e.lines.length;){var s=e.lines[e.index];if(r==="-"&&s[0]==="+"&&(r="+"),r===s[0])t.push(s),e.index++;else break}return t}function ov(e,t){for(var r=[],s=[],d=0,v=!1,S=!1;d<t.length&&e.index<e.lines.length;){var i=e.lines[e.index],o=t[d];if(o[0]==="+")break;if(v=v||i[0]!==" ",s.push(o),d++,i[0]==="+")for(S=!0;i[0]==="+";)r.push(i),i=e.lines[++e.index];o.substr(1)===i.substr(1)?(r.push(i),e.index++):S=!0}if((t[d]||"")[0]==="+"&&v&&(S=!0),S)return r;for(;d<t.length;)s.push(t[d++]);return{merged:s,changes:r}}function gh(e){return e.reduce(function(t,r){return t&&r[0]==="-"},!0)}function vh(e,t,r){for(var s=0;s<r;s++){var d=t[t.length-r+s].substr(1);if(e.lines[e.index+s]!==" "+d)return!1}return e.index+=r,!0}function Fa(e){var t=0,r=0;return e.forEach(function(s){if(typeof s!="string"){var d=Fa(s.mine),v=Fa(s.theirs);t!==void 0&&(d.oldLines===v.oldLines?t+=d.oldLines:t=void 0),r!==void 0&&(d.newLines===v.newLines?r+=d.newLines:r=void 0)}else r!==void 0&&(s[0]==="+"||s[0]===" ")&&r++,t!==void 0&&(s[0]==="-"||s[0]===" ")&&t++}),{oldLines:t,newLines:r}}var $l={};Object.defineProperty($l,"__esModule",{value:!0});$l.reversePatch=uf;function mh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,s)}return r}function yh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mh(Object(r),!0).forEach(function(s){av(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mh(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function av(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uf(e){return Array.isArray(e)?e.map(uf).reverse():yh(yh({},e),{},{oldFileName:e.newFileName,oldHeader:e.newHeader,newFileName:e.oldFileName,newHeader:e.oldHeader,hunks:e.hunks.map(function(t){return{oldLines:t.newLines,oldStart:t.newStart,newLines:t.oldLines,newStart:t.oldStart,linedelimiters:t.linedelimiters,lines:t.lines.map(function(r){return r.startsWith("-")?"+".concat(r.slice(1)):r.startsWith("+")?"-".concat(r.slice(1)):r})}})})}var jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.convertChangesToDMP=lv;function lv(e){for(var t=[],r,s,d=0;d<e.length;d++)r=e[d],r.added?s=1:r.removed?s=-1:s=0,t.push([s,r.value]);return t}var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.convertChangesToXML=cv;function cv(e){for(var t=[],r=0;r<e.length;r++){var s=e[r];s.added?t.push("<ins>"):s.removed&&t.push("<del>"),t.push(hv(s.value)),s.added?t.push("</ins>"):s.removed&&t.push("</del>")}return t.join("")}function hv(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Diff",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"diffChars",{enumerable:!0,get:function(){return r.diffChars}}),Object.defineProperty(e,"diffWords",{enumerable:!0,get:function(){return s.diffWords}}),Object.defineProperty(e,"diffWordsWithSpace",{enumerable:!0,get:function(){return s.diffWordsWithSpace}}),Object.defineProperty(e,"diffLines",{enumerable:!0,get:function(){return d.diffLines}}),Object.defineProperty(e,"diffTrimmedLines",{enumerable:!0,get:function(){return d.diffTrimmedLines}}),Object.defineProperty(e,"diffSentences",{enumerable:!0,get:function(){return v.diffSentences}}),Object.defineProperty(e,"diffCss",{enumerable:!0,get:function(){return S.diffCss}}),Object.defineProperty(e,"diffJson",{enumerable:!0,get:function(){return i.diffJson}}),Object.defineProperty(e,"canonicalize",{enumerable:!0,get:function(){return i.canonicalize}}),Object.defineProperty(e,"diffArrays",{enumerable:!0,get:function(){return o.diffArrays}}),Object.defineProperty(e,"applyPatch",{enumerable:!0,get:function(){return f.applyPatch}}),Object.defineProperty(e,"applyPatches",{enumerable:!0,get:function(){return f.applyPatches}}),Object.defineProperty(e,"parsePatch",{enumerable:!0,get:function(){return _.parsePatch}}),Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return c.merge}}),Object.defineProperty(e,"reversePatch",{enumerable:!0,get:function(){return p.reversePatch}}),Object.defineProperty(e,"structuredPatch",{enumerable:!0,get:function(){return w.structuredPatch}}),Object.defineProperty(e,"createTwoFilesPatch",{enumerable:!0,get:function(){return w.createTwoFilesPatch}}),Object.defineProperty(e,"createPatch",{enumerable:!0,get:function(){return w.createPatch}}),Object.defineProperty(e,"formatPatch",{enumerable:!0,get:function(){return w.formatPatch}}),Object.defineProperty(e,"convertChangesToDMP",{enumerable:!0,get:function(){return C.convertChangesToDMP}}),Object.defineProperty(e,"convertChangesToXML",{enumerable:!0,get:function(){return u.convertChangesToXML}});var t=n(tr),r=Cs,s=bi,d=Er,v=ws,S=xs,i=Li,o=bs,f=ro,_=Ls,c=io,p=$l,w=Ur,C=jl,u=Wl;function n(a){return a&&a.__esModule?a:{default:a}}})(ef);var uv=$e&&$e.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r);var d=Object.getOwnPropertyDescriptor(t,r);(!d||("get"in d?!t.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,d)}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),dv=$e&&$e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),fv=$e&&$e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&uv(t,e,r);return dv(t,e),t};Object.defineProperty(yr,"__esModule",{value:!0});yr.computeLineInformation=yr.DiffMethod=yr.DiffType=void 0;const Na=fv(ef),_v=Na;var Kt;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ADDED=1]="ADDED",e[e.REMOVED=2]="REMOVED",e[e.CHANGED=3]="CHANGED"})(Kt||(yr.DiffType=Kt={}));var On;(function(e){e.CHARS="diffChars",e.WORDS="diffWords",e.WORDS_WITH_SPACE="diffWordsWithSpace",e.LINES="diffLines",e.TRIMMED_LINES="diffTrimmedLines",e.SENTENCES="diffSentences",e.CSS="diffCss",e.JSON="diffJson"})(On||(yr.DiffMethod=On={}));const Ch=e=>e===""?[]:e.replace(/\n$/,"").split(`
`),pv=(e,t,r=On.CHARS)=>{const s=_v[r](e,t),d={left:[],right:[]};return s.forEach(({added:v,removed:S,value:i})=>{const o={};return v&&(o.type=Kt.ADDED,o.value=i,d.right.push(o)),S&&(o.type=Kt.REMOVED,o.value=i,d.left.push(o)),!S&&!v&&(o.type=Kt.DEFAULT,o.value=i,d.right.push(o),d.left.push(o)),o}),d},gv=(e,t,r=!1,s=On.CHARS,d=0,v=[])=>{let S=[];typeof e=="string"&&typeof t=="string"?S=Na.diffLines(e.trimRight(),t.trimRight(),{newlineIsToken:!1,ignoreWhitespace:!1,ignoreCase:!1}):S=Na.diffJson(e,t);let i=d,o=d,f=[],_=0;const c=[],p=[],w=(C,u,n,a,l)=>Ch(C).map((m,L)=>{const g={},x={};if(!(p.includes(`${u}-${L}`)||l&&L!==0)){if(n||a){let y=!0;if(a){o+=1,g.lineNumber=o,g.type=Kt.REMOVED,g.value=m||" ";const b=S[u+1];if(b&&b.added){const E=Ch(b.value)[L];if(E){const R=w(E,u,!0,!1,!0),{value:k,lineNumber:D,type:T}=R[0].right;if(p.push(`${u+1}-${L}`),x.lineNumber=D,g.value===k)y=!1,x.type=0,g.type=0,x.value=k;else if(x.type=T,r)x.value=k;else{const N=pv(m,k,s);x.value=N.right,g.value=N.left}}}}else i+=1,x.lineNumber=i,x.type=Kt.ADDED,x.value=m;y&&!l&&(c.includes(_)||c.push(_))}else o+=1,i+=1,g.lineNumber=o,g.type=Kt.DEFAULT,g.value=m,x.lineNumber=i,x.type=Kt.DEFAULT,x.value=m;return(v?.includes(`L-${g.lineNumber}`)||v?.includes(`R-${x.lineNumber}`)&&!c.includes(_))&&c.push(_),l||(_+=1),{right:x,left:g}}}).filter(Boolean);return S.forEach(({added:C,removed:u,value:n},a)=>{f=[...f,...w(n,a,C,u)]}),{lineInformation:f,diffLines:c}};yr.computeLineInformation=gv;var zl={};function vv(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function mv(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var yv=function(){function e(r){var s=this;this._insertTag=function(d){var v;s.tags.length===0?s.insertionPoint?v=s.insertionPoint.nextSibling:s.prepend?v=s.container.firstChild:v=s.before:v=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(d,v),s.tags.push(d)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(mv(this));var d=this.tags[this.tags.length-1];if(this.isSpeedy){var v=vv(d);try{v.insertRule(s,v.cssRules.length)}catch{}}else d.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var d;return(d=s.parentNode)==null?void 0:d.removeChild(s)}),this.tags=[],this.ctr=0},e}(),Je="-ms-",In="-moz-",ye="-webkit-",df="comm",Ul="rule",Vl="decl",Cv="@import",ff="@keyframes",Sv="@layer",wv=Math.abs,no=String.fromCharCode,xv=Object.assign;function bv(e,t){return Ve(e,0)^45?(((t<<2^Ve(e,0))<<2^Ve(e,1))<<2^Ve(e,2))<<2^Ve(e,3):0}function _f(e){return e.trim()}function Lv(e,t){return(e=t.exec(e))?e[0]:e}function Ce(e,t,r){return e.replace(t,r)}function Ha(e,t){return e.indexOf(t)}function Ve(e,t){return e.charCodeAt(t)|0}function fs(e,t,r){return e.slice(t,r)}function Nt(e){return e.length}function Gl(e){return e.length}function Gs(e,t){return t.push(e),e}function Ev(e,t){return e.map(t).join("")}var oo=1,Ci=1,pf=0,ct=0,Oe=0,Ei="";function ao(e,t,r,s,d,v,S){return{value:e,root:t,parent:r,type:s,props:d,children:v,line:oo,column:Ci,length:S,return:""}}function Oi(e,t){return xv(ao("",null,null,"",null,null,0),e,{length:-e.length},t)}function kv(){return Oe}function Rv(){return Oe=ct>0?Ve(Ei,--ct):0,Ci--,Oe===10&&(Ci=1,oo--),Oe}function ft(){return Oe=ct<pf?Ve(Ei,ct++):0,Ci++,Oe===10&&(Ci=1,oo++),Oe}function Wt(){return Ve(Ei,ct)}function an(){return ct}function Es(e,t){return fs(Ei,e,t)}function _s(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gf(e){return oo=Ci=1,pf=Nt(Ei=e),ct=0,[]}function vf(e){return Ei="",e}function ln(e){return _f(Es(ct-1,$a(e===91?e+2:e===40?e+1:e)))}function Mv(e){for(;(Oe=Wt())&&Oe<33;)ft();return _s(e)>2||_s(Oe)>3?"":" "}function Dv(e,t){for(;--t&&ft()&&!(Oe<48||Oe>102||Oe>57&&Oe<65||Oe>70&&Oe<97););return Es(e,an()+(t<6&&Wt()==32&&ft()==32))}function $a(e){for(;ft();)switch(Oe){case e:return ct;case 34:case 39:e!==34&&e!==39&&$a(Oe);break;case 40:e===41&&$a(e);break;case 92:ft();break}return ct}function Av(e,t){for(;ft()&&e+Oe!==57;)if(e+Oe===84&&Wt()===47)break;return"/*"+Es(t,ct-1)+"*"+no(e===47?e:ft())}function Tv(e){for(;!_s(Wt());)ft();return Es(e,ct)}function Pv(e){return vf(cn("",null,null,null,[""],e=gf(e),0,[0],e))}function cn(e,t,r,s,d,v,S,i,o){for(var f=0,_=0,c=S,p=0,w=0,C=0,u=1,n=1,a=1,l=0,h="",m=d,L=v,g=s,x=h;n;)switch(C=l,l=ft()){case 40:if(C!=108&&Ve(x,c-1)==58){Ha(x+=Ce(ln(l),"&","&\f"),"&\f")!=-1&&(a=-1);break}case 34:case 39:case 91:x+=ln(l);break;case 9:case 10:case 13:case 32:x+=Mv(C);break;case 92:x+=Dv(an()-1,7);continue;case 47:switch(Wt()){case 42:case 47:Gs(Bv(Av(ft(),an()),t,r),o);break;default:x+="/"}break;case 123*u:i[f++]=Nt(x)*a;case 125*u:case 59:case 0:switch(l){case 0:case 125:n=0;case 59+_:a==-1&&(x=Ce(x,/\f/g,"")),w>0&&Nt(x)-c&&Gs(w>32?wh(x+";",s,r,c-1):wh(Ce(x," ","")+";",s,r,c-2),o);break;case 59:x+=";";default:if(Gs(g=Sh(x,t,r,f,_,d,i,h,m=[],L=[],c),v),l===123)if(_===0)cn(x,t,g,g,m,v,c,i,L);else switch(p===99&&Ve(x,3)===110?100:p){case 100:case 108:case 109:case 115:cn(e,g,g,s&&Gs(Sh(e,g,g,0,0,d,i,h,d,m=[],c),L),d,L,c,i,s?m:L);break;default:cn(x,g,g,g,[""],L,0,i,L)}}f=_=w=0,u=a=1,h=x="",c=S;break;case 58:c=1+Nt(x),w=C;default:if(u<1){if(l==123)--u;else if(l==125&&u++==0&&Rv()==125)continue}switch(x+=no(l),l*u){case 38:a=_>0?1:(x+="\f",-1);break;case 44:i[f++]=(Nt(x)-1)*a,a=1;break;case 64:Wt()===45&&(x+=ln(ft())),p=Wt(),_=c=Nt(h=x+=Tv(an())),l++;break;case 45:C===45&&Nt(x)==2&&(u=0)}}return v}function Sh(e,t,r,s,d,v,S,i,o,f,_){for(var c=d-1,p=d===0?v:[""],w=Gl(p),C=0,u=0,n=0;C<s;++C)for(var a=0,l=fs(e,c+1,c=wv(u=S[C])),h=e;a<w;++a)(h=_f(u>0?p[a]+" "+l:Ce(l,/&\f/g,p[a])))&&(o[n++]=h);return ao(e,t,r,d===0?Ul:i,o,f,_)}function Bv(e,t,r){return ao(e,t,r,df,no(kv()),fs(e,2,-2),0)}function wh(e,t,r,s){return ao(e,t,r,Vl,fs(e,0,s),fs(e,s+1,-1),s)}function di(e,t){for(var r="",s=Gl(e),d=0;d<s;d++)r+=t(e[d],d,e,t)||"";return r}function Ov(e,t,r,s){switch(e.type){case Sv:if(e.children.length)break;case Cv:case Vl:return e.return=e.return||e.value;case df:return"";case ff:return e.return=e.value+"{"+di(e.children,s)+"}";case Ul:e.value=e.props.join(",")}return Nt(r=di(e.children,s))?e.return=e.value+"{"+r+"}":""}function Iv(e){var t=Gl(e);return function(r,s,d,v){for(var S="",i=0;i<t;i++)S+=e[i](r,s,d,v)||"";return S}}function Fv(e){return function(t){t.root||(t=t.return)&&e(t)}}function Nv(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Hv=function(t,r,s){for(var d=0,v=0;d=v,v=Wt(),d===38&&v===12&&(r[s]=1),!_s(v);)ft();return Es(t,ct)},$v=function(t,r){var s=-1,d=44;do switch(_s(d)){case 0:d===38&&Wt()===12&&(r[s]=1),t[s]+=Hv(ct-1,r,s);break;case 2:t[s]+=ln(d);break;case 4:if(d===44){t[++s]=Wt()===58?"&\f":"",r[s]=t[s].length;break}default:t[s]+=no(d)}while(d=ft());return t},jv=function(t,r){return vf($v(gf(t),r))},xh=new WeakMap,Wv=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,s=t.parent,d=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!xh.get(s))&&!d){xh.set(t,!0);for(var v=[],S=jv(r,v),i=s.props,o=0,f=0;o<S.length;o++)for(var _=0;_<i.length;_++,f++)t.props[f]=v[o]?S[o].replace(/&\f/g,i[_]):i[_]+" "+S[o]}}},zv=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function mf(e,t){switch(bv(e,t)){case 5103:return ye+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ye+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ye+e+In+e+Je+e+e;case 6828:case 4268:return ye+e+Je+e+e;case 6165:return ye+e+Je+"flex-"+e+e;case 5187:return ye+e+Ce(e,/(\w+).+(:[^]+)/,ye+"box-$1$2"+Je+"flex-$1$2")+e;case 5443:return ye+e+Je+"flex-item-"+Ce(e,/flex-|-self/,"")+e;case 4675:return ye+e+Je+"flex-line-pack"+Ce(e,/align-content|flex-|-self/,"")+e;case 5548:return ye+e+Je+Ce(e,"shrink","negative")+e;case 5292:return ye+e+Je+Ce(e,"basis","preferred-size")+e;case 6060:return ye+"box-"+Ce(e,"-grow","")+ye+e+Je+Ce(e,"grow","positive")+e;case 4554:return ye+Ce(e,/([^-])(transform)/g,"$1"+ye+"$2")+e;case 6187:return Ce(Ce(Ce(e,/(zoom-|grab)/,ye+"$1"),/(image-set)/,ye+"$1"),e,"")+e;case 5495:case 3959:return Ce(e,/(image-set\([^]*)/,ye+"$1$`$1");case 4968:return Ce(Ce(e,/(.+:)(flex-)?(.*)/,ye+"box-pack:$3"+Je+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ye+e+e;case 4095:case 3583:case 4068:case 2532:return Ce(e,/(.+)-inline(.+)/,ye+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Nt(e)-1-t>6)switch(Ve(e,t+1)){case 109:if(Ve(e,t+4)!==45)break;case 102:return Ce(e,/(.+:)(.+)-([^]+)/,"$1"+ye+"$2-$3$1"+In+(Ve(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Ha(e,"stretch")?mf(Ce(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ve(e,t+1)!==115)break;case 6444:switch(Ve(e,Nt(e)-3-(~Ha(e,"!important")&&10))){case 107:return Ce(e,":",":"+ye)+e;case 101:return Ce(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ye+(Ve(e,14)===45?"inline-":"")+"box$3$1"+ye+"$2$3$1"+Je+"$2box$3")+e}break;case 5936:switch(Ve(e,t+11)){case 114:return ye+e+Je+Ce(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ye+e+Je+Ce(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ye+e+Je+Ce(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ye+e+Je+e+e}return e}var Uv=function(t,r,s,d){if(t.length>-1&&!t.return)switch(t.type){case Vl:t.return=mf(t.value,t.length);break;case ff:return di([Oi(t,{value:Ce(t.value,"@","@"+ye)})],d);case Ul:if(t.length)return Ev(t.props,function(v){switch(Lv(v,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return di([Oi(t,{props:[Ce(v,/:(read-\w+)/,":"+In+"$1")]})],d);case"::placeholder":return di([Oi(t,{props:[Ce(v,/:(plac\w+)/,":"+ye+"input-$1")]}),Oi(t,{props:[Ce(v,/:(plac\w+)/,":"+In+"$1")]}),Oi(t,{props:[Ce(v,/:(plac\w+)/,Je+"input-$1")]})],d)}return""})}},Vv=[Uv],Gv=function(t){var r=t.key;if(r==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(u){var n=u.getAttribute("data-emotion");n.indexOf(" ")!==-1&&(document.head.appendChild(u),u.setAttribute("data-s",""))})}var d=t.stylisPlugins||Vv,v={},S,i=[];S=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(u){for(var n=u.getAttribute("data-emotion").split(" "),a=1;a<n.length;a++)v[n[a]]=!0;i.push(u)});var o,f=[Wv,zv];{var _,c=[Ov,Fv(function(u){_.insert(u)})],p=Iv(f.concat(d,c)),w=function(n){return di(Pv(n),p)};o=function(n,a,l,h){_=l,w(n?n+"{"+a.styles+"}":a.styles),h&&(C.inserted[a.name]=!0)}}var C={key:r,sheet:new yv({key:r,container:S,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:v,registered:{},insert:o};return C.sheet.hydrate(i),C};function qv(e){for(var t=0,r,s=0,d=e.length;d>=4;++s,d-=4)r=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(d){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Kv={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Xv=/[A-Z]|^ms/g,Yv=/_EMO_([^_]+?)_([^]*?)_EMO_/g,yf=function(t){return t.charCodeAt(1)===45},bh=function(t){return t!=null&&typeof t!="boolean"},Ho=Nv(function(e){return yf(e)?e:e.replace(Xv,"-$&").toLowerCase()}),Lh=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(Yv,function(s,d,v){return hr={name:d,styles:v,next:hr},d})}return Kv[t]!==1&&!yf(t)&&typeof r=="number"&&r!==0?r+"px":r};function Fn(e,t,r){if(r==null)return"";var s=r;if(s.__emotion_styles!==void 0)return s;switch(typeof r){case"boolean":return"";case"object":{var d=r;if(d.anim===1)return hr={name:d.name,styles:d.styles,next:hr},d.name;var v=r;if(v.styles!==void 0){var S=v.next;if(S!==void 0)for(;S!==void 0;)hr={name:S.name,styles:S.styles,next:hr},S=S.next;var i=v.styles+";";return i}return Jv(e,t,r)}}var o=r;if(t==null)return o;var f=t[o];return f!==void 0?f:o}function Jv(e,t,r){var s="";if(Array.isArray(r))for(var d=0;d<r.length;d++)s+=Fn(e,t,r[d])+";";else for(var v in r){var S=r[v];if(typeof S!="object"){var i=S;t!=null&&t[i]!==void 0?s+=v+"{"+t[i]+"}":bh(i)&&(s+=Ho(v)+":"+Lh(v,i)+";")}else if(Array.isArray(S)&&typeof S[0]=="string"&&(t==null||t[S[0]]===void 0))for(var o=0;o<S.length;o++)bh(S[o])&&(s+=Ho(v)+":"+Lh(v,S[o])+";");else{var f=Fn(e,t,S);switch(v){case"animation":case"animationName":{s+=Ho(v)+":"+f+";";break}default:s+=v+"{"+f+"}"}}}return s}var Eh=/label:\s*([^\s;{]+)\s*(;|$)/g,hr;function $o(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,d="";hr=void 0;var v=e[0];if(v==null||v.raw===void 0)s=!1,d+=Fn(r,t,v);else{var S=v;d+=S[0]}for(var i=1;i<e.length;i++)if(d+=Fn(r,t,e[i]),s){var o=v;d+=o[i]}Eh.lastIndex=0;for(var f="",_;(_=Eh.exec(d))!==null;)f+="-"+_[1];var c=qv(d)+f;return{name:c,styles:d,next:hr}}function Cf(e,t,r){var s="";return r.split(" ").forEach(function(d){e[d]!==void 0?t.push(e[d]+";"):d&&(s+=d+" ")}),s}var Qv=function(t,r,s){var d=t.key+"-"+r.name;t.registered[d]===void 0&&(t.registered[d]=r.styles)},Zv=function(t,r,s){Qv(t,r);var d=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var v=r;do t.insert(r===v?"."+d:"",v,t.sheet,!0),v=v.next;while(v!==void 0)}};function kh(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function Rh(e,t,r){var s=[],d=Cf(e,s,r);return s.length<2?r:d+t(s)}var em=function(t){var r=Gv(t);r.sheet.speedy=function(i){this.isSpeedy=i},r.compat=!0;var s=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var c=$o(f,r.registered,void 0);return Zv(r,c),r.key+"-"+c.name},d=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var c=$o(f,r.registered),p="animation-"+c.name;return kh(r,{name:c.name,styles:"@keyframes "+p+"{"+c.styles+"}"}),p},v=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var c=$o(f,r.registered);kh(r,c)},S=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];return Rh(r.registered,s,tm(f))};return{css:s,cx:S,injectGlobal:v,keyframes:d,hydrate:function(o){o.forEach(function(f){r.inserted[f]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:Cf.bind(null,r.registered),merge:Rh.bind(null,r.registered,s)}},tm=function e(t){for(var r="",s=0;s<t.length;s++){var d=t[s];if(d!=null){var v=void 0;switch(typeof d){case"boolean":break;case"object":{if(Array.isArray(d))v=e(d);else{v="";for(var S in d)d[S]&&S&&(v&&(v+=" "),v+=S)}break}default:v=d}v&&(r&&(r+=" "),r+=v)}}return r};const rm=Object.freeze(Object.defineProperty({__proto__:null,default:em},Symbol.toStringTag,{value:"Module"})),im=Ih(rm);var sm=$e&&$e.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)t.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(r[s[d]]=e[s[d]]);return r},nm=$e&&$e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zl,"__esModule",{value:!0});const om=nm(im);zl.default=(e,t=!1,r="")=>{const{variables:s={}}=e,d=sm(e,["variables"]),v={light:Object.assign({diffViewerBackground:"#fff",diffViewerColor:"#212529",addedBackground:"#e6ffed",addedColor:"#24292e",removedBackground:"#ffeef0",removedColor:"#24292e",changedBackground:"#fffbdd",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0",addedGutterBackground:"#cdffd8",removedGutterBackground:"#ffdce0",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",codeFoldGutterBackground:"#dbedff",codeFoldBackground:"#f1f8ff",emptyLineBackground:"#fafbfc",gutterColor:"#212529",addedGutterColor:"#212529",removedGutterColor:"#212529",codeFoldContentColor:"#212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleColor:"#212529",diffViewerTitleBorderColor:"#eee"},s.light||{}),dark:Object.assign({diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",addedBackground:"#044B53",addedColor:"white",removedBackground:"#632F34",removedColor:"white",changedBackground:"#3e302c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f",addedGutterBackground:"#034148",removedGutterBackground:"#632b30",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",codeFoldGutterBackground:"#21232b",codeFoldBackground:"#262831",emptyLineBackground:"#363946",gutterColor:"#666c87",addedGutterColor:"#8c8c8c",removedGutterColor:"#8c8c8c",codeFoldContentColor:"#656a8b",diffViewerTitleBackground:"#2f323e",diffViewerTitleColor:"#555a7b",diffViewerTitleBorderColor:"#353846"},s.dark||{})},S=t?v.dark:v.light,{css:i,cx:o}=(0,om.default)({key:"react-diff",nonce:r}),f=i({width:"100%",label:"content"}),_=i({[`.${f}`]:{width:"50%"},label:"split-view"}),c=i({width:"100%",background:S.diffViewerBackground,pre:{margin:0,whiteSpace:"pre-wrap",lineHeight:"25px"},label:"diff-container",borderCollapse:"collapse"}),p=i({color:S.codeFoldContentColor,label:"code-fold-content"}),w=i({color:S.diffViewerColor,label:"content-text"}),C=i({background:S.diffViewerTitleBackground,padding:10,borderBottom:`1px solid ${S.diffViewerTitleBorderColor}`,label:"title-block",":last-child":{borderLeft:`1px solid ${S.diffViewerTitleBorderColor}`},[`.${w}`]:{color:S.diffViewerTitleColor}}),u=i({color:S.gutterColor,label:"line-number"}),n=i({background:S.removedBackground,color:S.removedColor,pre:{color:S.removedColor},[`.${u}`]:{color:S.removedGutterColor},label:"diff-removed"}),a=i({background:S.addedBackground,color:S.addedColor,pre:{color:S.addedColor},[`.${u}`]:{color:S.addedGutterColor},label:"diff-added"}),l=i({background:S.changedBackground,[`.${u}`]:{color:S.gutterColor},label:"diff-changed"}),h=i({padding:2,display:"inline-flex",borderRadius:4,wordBreak:"break-all",label:"word-diff"}),m=i({background:S.wordAddedBackground,label:"word-added"}),L=i({background:S.wordRemovedBackground,label:"word-removed"}),g=i({backgroundColor:S.codeFoldGutterBackground,label:"code-fold-gutter"}),x=i({backgroundColor:S.codeFoldBackground,height:40,fontSize:14,fontWeight:700,label:"code-fold",a:{textDecoration:"underline !important",cursor:"pointer",pre:{display:"inline"}}}),y=i({backgroundColor:S.emptyLineBackground,label:"empty-line"}),b=i({width:25,paddingLeft:10,paddingRight:10,userSelect:"none",label:"marker",[`&.${a}`]:{pre:{color:S.addedColor}},[`&.${n}`]:{pre:{color:S.removedColor}}}),E=i({background:S.highlightBackground,label:"highlighted-line",[`.${m}, .${L}`]:{backgroundColor:"initial"}}),R=i({label:"highlighted-gutter"}),k=i({userSelect:"none",minWidth:50,padding:"0 10px",whiteSpace:"nowrap",label:"gutter",textAlign:"right",background:S.gutterBackground,"&:hover":{cursor:"pointer",background:S.gutterBackgroundDark,pre:{opacity:1}},pre:{opacity:.5},[`&.${a}`]:{background:S.addedGutterBackground},[`&.${n}`]:{background:S.removedGutterBackground},[`&.${R}`]:{background:S.highlightGutterBackground,"&:hover":{background:S.highlightGutterBackground}}}),D=i({"&:hover":{background:S.gutterBackground,cursor:"initial"},label:"empty-gutter"}),T=i({verticalAlign:"baseline",label:"line"}),N={diffContainer:c,diffRemoved:n,diffAdded:a,diffChanged:l,splitView:_,marker:b,highlightedGutter:R,highlightedLine:E,gutter:k,line:T,wordDiff:h,wordAdded:m,wordRemoved:L,codeFoldGutter:g,codeFold:x,emptyGutter:D,emptyLine:y,lineNumber:u,contentText:w,content:f,codeFoldContent:p,titleBlock:C},j=Object.keys(d).reduce((H,B)=>Object.assign(Object.assign({},H),{[B]:i(d[B])}),{});return Object.keys(N).reduce((H,B)=>Object.assign(Object.assign({},H),{[B]:j[B]?o(N[B],j[B]):N[B]}),{})};var lo={};Object.defineProperty(lo,"__esModule",{value:!0});lo.computeHiddenBlocks=void 0;function am(e,t,r){let s=0,d,v={},S=[];return e.forEach((i,o)=>{const f=t.some(_=>_>=o-r&&_<=o+r);!f&&d==null?(d={index:s,startLine:o,endLine:o,lines:1},S.push(d),v[o]=d.index,s++):f?d=void 0:(d.endLine=o,d.lines++,v[o]=d.index)}),{lineBlocks:v,blocks:S}}lo.computeHiddenBlocks=am;var Mh=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function lm(e,t){return!!(e===t||Mh(e)&&Mh(t))}function cm(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!lm(e[r],t[r]))return!1;return!0}function hm(e,t){t===void 0&&(t=cm);var r=null;function s(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];if(r&&r.lastThis===this&&t(d,r.lastArgs))return r.lastResult;var S=e.apply(this,d);return r={lastResult:S,lastArgs:d,lastThis:this},S}return s.clear=function(){r=null},s}const um=Object.freeze(Object.defineProperty({__proto__:null,default:hm},Symbol.toStringTag,{value:"Module"})),dm=Ih(um);(function(e){var t=$e&&$e.__createBinding||(Object.create?function(u,n,a,l){l===void 0&&(l=a);var h=Object.getOwnPropertyDescriptor(n,a);(!h||("get"in h?!n.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(u,l,h)}:function(u,n,a,l){l===void 0&&(l=a),u[l]=n[a]}),r=$e&&$e.__setModuleDefault||(Object.create?function(u,n){Object.defineProperty(u,"default",{enumerable:!0,value:n})}:function(u,n){u.default=n}),s=$e&&$e.__importStar||function(u){if(u&&u.__esModule)return u;var n={};if(u!=null)for(var a in u)a!=="default"&&Object.prototype.hasOwnProperty.call(u,a)&&t(n,u,a);return r(n,u),n},d=$e&&$e.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.DiffMethod=e.LineNumberPrefix=void 0;const v=F,S=s(V),i=d(dg),o=yr;Object.defineProperty(e,"DiffMethod",{enumerable:!0,get:function(){return o.DiffMethod}});const f=d(zl),_=lo,c=dm,p=c.default||c;var w;(function(u){u.LEFT="L",u.RIGHT="R"})(w||(e.LineNumberPrefix=w={}));class C extends S.Component{constructor(n){super(n),this.resetCodeBlocks=()=>this.state.expandedBlocks.length>0?(this.setState({expandedBlocks:[]}),!0):!1,this.onBlockExpand=a=>{const l=this.state.expandedBlocks.slice();l.push(a),this.setState({expandedBlocks:l})},this.computeStyles=p(f.default),this.onLineNumberClickProxy=a=>this.props.onLineNumberClick?l=>this.props.onLineNumberClick(a,l):()=>{},this.renderWordDiff=(a,l)=>a.map((h,m)=>(0,v.jsx)("span",{className:(0,i.default)(this.styles.wordDiff,{[this.styles.wordAdded]:h.type===o.DiffType.ADDED,[this.styles.wordRemoved]:h.type===o.DiffType.REMOVED}),children:l?l(h.value):h.value},m)),this.renderLine=(a,l,h,m,L,g)=>{const x=`${h}-${a}`,y=`${g}-${L}`,b=this.props.highlightLines.includes(x)||this.props.highlightLines.includes(y),E=l===o.DiffType.ADDED,R=l===o.DiffType.REMOVED,k=l===o.DiffType.CHANGED;let D;return Array.isArray(m)?D=this.renderWordDiff(m,this.props.renderContent):this.props.renderContent?D=this.props.renderContent(m):D=m,(0,v.jsxs)(S.Fragment,{children:[!this.props.hideLineNumbers&&(0,v.jsx)("td",{onClick:a&&this.onLineNumberClickProxy(x),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!a,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedGutter]:b}),children:(0,v.jsx)("pre",{className:this.styles.lineNumber,children:a})}),!this.props.splitView&&!this.props.hideLineNumbers&&(0,v.jsx)("td",{onClick:L&&this.onLineNumberClickProxy(y),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!L,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedGutter]:b}),children:(0,v.jsx)("pre",{className:this.styles.lineNumber,children:L})}),this.props.renderGutter?this.props.renderGutter({lineNumber:a,type:l,prefix:h,value:m,additionalLineNumber:L,additionalPrefix:g,styles:this.styles}):null,!this.props.hideMarkers&&(0,v.jsx)("td",{className:(0,i.default)(this.styles.marker,{[this.styles.emptyLine]:!D,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedLine]:b}),children:(0,v.jsxs)("pre",{children:[E&&"+",R&&"-"]})}),(0,v.jsx)("td",{className:(0,i.default)(this.styles.content,{[this.styles.emptyLine]:!D,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedLine]:b}),children:(0,v.jsx)("pre",{className:this.styles.contentText,children:D})})]})},this.renderSplitView=({left:a,right:l},h)=>(0,v.jsxs)("tr",{className:this.styles.line,children:[this.renderLine(a.lineNumber,a.type,w.LEFT,a.value),this.renderLine(l.lineNumber,l.type,w.RIGHT,l.value)]},h),this.renderInlineView=({left:a,right:l},h)=>{let m;return a.type===o.DiffType.REMOVED&&l.type===o.DiffType.ADDED?(0,v.jsxs)(S.Fragment,{children:[(0,v.jsx)("tr",{className:this.styles.line,children:this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,null)}),(0,v.jsx)("tr",{className:this.styles.line,children:this.renderLine(null,l.type,w.RIGHT,l.value,l.lineNumber)})]},h):(a.type===o.DiffType.REMOVED&&(m=this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,null)),a.type===o.DiffType.DEFAULT&&(m=this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,l.lineNumber,w.RIGHT)),l.type===o.DiffType.ADDED&&(m=this.renderLine(null,l.type,w.RIGHT,l.value,l.lineNumber)),(0,v.jsx)("tr",{className:this.styles.line,children:m},h))},this.onBlockClickProxy=a=>()=>this.onBlockExpand(a),this.renderSkippedLineIndicator=(a,l,h,m)=>{const{hideLineNumbers:L,splitView:g}=this.props,x=this.props.codeFoldMessageRenderer?this.props.codeFoldMessageRenderer(a,h,m):(0,v.jsxs)("pre",{className:this.styles.codeFoldContent,children:["Expand ",a," lines ..."]}),y=(0,v.jsx)("td",{children:(0,v.jsx)("a",{onClick:this.onBlockClickProxy(l),tabIndex:0,children:x})}),b=!g&&!L;return(0,v.jsxs)("tr",{className:this.styles.codeFold,children:[!L&&(0,v.jsx)("td",{className:this.styles.codeFoldGutter}),this.props.renderGutter?(0,v.jsx)("td",{className:this.styles.codeFoldGutter}):null,(0,v.jsx)("td",{className:(0,i.default)({[this.styles.codeFoldGutter]:b})}),b?(0,v.jsxs)(S.Fragment,{children:[(0,v.jsx)("td",{}),y]}):(0,v.jsxs)(S.Fragment,{children:[y,this.props.renderGutter?(0,v.jsx)("td",{}):null,(0,v.jsx)("td",{})]}),(0,v.jsx)("td",{}),(0,v.jsx)("td",{})]},`${h}-${m}`)},this.renderDiff=()=>{const{oldValue:a,newValue:l,splitView:h,disableWordDiff:m,compareMethod:L,linesOffset:g}=this.props,{lineInformation:x,diffLines:y}=(0,o.computeLineInformation)(a,l,m,L,g,this.props.alwaysShowLines),b=this.props.extraLinesSurroundingDiff<0?0:Math.round(this.props.extraLinesSurroundingDiff),{lineBlocks:E,blocks:R}=(0,_.computeHiddenBlocks)(x,y,b);return x.map((k,D)=>{if(this.props.showDiffOnly){const N=E[D];if(N!==void 0){const j=R[N].endLine===D;if(!this.state.expandedBlocks.includes(N)&&j)return(0,v.jsx)(S.Fragment,{children:this.renderSkippedLineIndicator(R[N].lines,N,k.left.lineNumber,k.right.lineNumber)},D);if(!this.state.expandedBlocks.includes(N))return null}}return h?this.renderSplitView(k,D):this.renderInlineView(k,D)})},this.render=()=>{const{oldValue:a,newValue:l,useDarkTheme:h,leftTitle:m,rightTitle:L,splitView:g,hideLineNumbers:x,hideMarkers:y,nonce:b}=this.props;if(this.props.compareMethod!==o.DiffMethod.JSON&&(typeof a!="string"||typeof l!="string"))throw Error('"oldValue" and "newValue" should be strings');this.styles=this.computeStyles(this.props.styles,h,b);const E=this.renderDiff();let R=x?2:3,k=x?2:4;y&&(R-=1,k-=1);const D=this.props.renderGutter?1:0,T=(m||L)&&(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{colSpan:(g?R:k)+D,className:this.styles.titleBlock,children:(0,v.jsx)("pre",{className:this.styles.contentText,children:m})}),g&&(0,v.jsx)("td",{colSpan:R+D,className:this.styles.titleBlock,children:(0,v.jsx)("pre",{className:this.styles.contentText,children:L})})]});return(0,v.jsx)("table",{className:(0,i.default)(this.styles.diffContainer,{[this.styles.splitView]:g}),children:(0,v.jsxs)("tbody",{children:[T,E]})})},this.state={expandedBlocks:[]}}}C.defaultProps={oldValue:"",newValue:"",splitView:!0,highlightLines:[],disableWordDiff:!1,compareMethod:o.DiffMethod.CHARS,styles:{},hideLineNumbers:!1,hideMarkers:!1,extraLinesSurroundingDiff:3,showDiffOnly:!0,useDarkTheme:!1,linesOffset:0,nonce:""},e.default=C})(Qd);const fm=Oh(Qd),_m={variables:{dark:{diffViewerBackground:"#0d1117",diffViewerColor:"#e6edf3",addedBackground:"rgba(63, 185, 80, 0.15)",addedColor:"#e6edf3",removedBackground:"rgba(248, 81, 73, 0.15)",removedColor:"#e6edf3",wordAddedBackground:"rgba(63, 185, 80, 0.4)",wordRemovedBackground:"rgba(248, 81, 73, 0.4)",addedGutterBackground:"#1a4d2e",removedGutterBackground:"#4d1a1a",gutterBackground:"#161b22",gutterBackgroundDark:"#0d1117",highlightBackground:"#21262d",highlightGutterBackground:"#21262d",codeFoldGutterBackground:"#161b22",codeFoldBackground:"#161b22",emptyLineBackground:"#161b22",gutterColor:"#6e7681",addedGutterColor:"#3fb950",removedGutterColor:"#f85149",codeFoldContentColor:"#8b949e",diffViewerTitleBackground:"#161b22",diffViewerTitleColor:"#e6edf3",diffViewerTitleBorderColor:"#30363d"}}},pm={A:"Added",M:"Modified",D:"Deleted"},gm={A:"bg-accent-green text-white",M:"bg-accent-blue text-white",D:"bg-accent-red text-white"};function vm(e){const t=e.querySelectorAll("td");for(const r of t){const s=r.querySelector("pre");if(s){const d=s.textContent?.trim();if(d==="+"||d==="-")return!0}}return!1}function mm(e){return e.textContent?.includes("hidden lines")||!1}function ym(e){const t=[],r=Array.from(e.querySelectorAll("tr"));let s=!1;for(const d of r){if(mm(d)){s=!1;continue}const v=vm(d);v&&!s&&t.push(d),s=v}return t}function Cm({file:e,defaultExpanded:t}){const[r,s]=V.useState(t),[d,v]=V.useState(-1),[S,i]=V.useState(0),o=V.useRef(null),f=V.useRef([]);V.useEffect(()=>{if(r&&o.current){const c=setTimeout(()=>{o.current&&(f.current=ym(o.current),i(f.current.length),v(f.current.length>0?0:-1))},200);return()=>clearTimeout(c)}else f.current=[],i(0),v(-1)},[r]);const _=c=>{if(f.current.length===0)return;let p;c==="prev"?p=Math.max(0,d-1):p=Math.min(f.current.length-1,d+1),p!==d&&(v(p),f.current[p]?.scrollIntoView({behavior:"smooth",block:"center"}))};return F.jsxs("div",{className:"border border-border-subtle rounded-lg overflow-hidden mb-3",children:[F.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-bg-tertiary",children:[F.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>s(!r),children:[F.jsx("span",{className:"text-text-secondary shrink-0",children:r?"":""}),F.jsx("span",{className:"text-sm truncate",children:e.filename}),F.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded shrink-0 ${gm[e.status]||"bg-bg-secondary"}`,children:pm[e.status]||e.status})]}),F.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[F.jsxs("span",{className:"text-xs text-text-secondary",children:[e.additions>0&&F.jsxs("span",{className:"text-accent-green mr-1",children:["+",e.additions]}),e.deletions>0&&F.jsxs("span",{className:"text-accent-red",children:["-",e.deletions]})]}),r&&S>0&&F.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[F.jsx("button",{onClick:c=>{c.stopPropagation(),_("prev")},disabled:d<=0,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""}),F.jsxs("span",{className:"text-xs text-text-muted min-w-[32px] text-center",children:[d+1,"/",S]}),F.jsx("button",{onClick:c=>{c.stopPropagation(),_("next")},disabled:d>=S-1,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]})]}),r&&F.jsx("div",{ref:o,className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:e.binary?F.jsx("div",{className:"p-4 text-center text-text-muted",children:"Binary file"}):F.jsx(fm,{oldValue:e.oldValue||"",newValue:e.newValue||"",splitView:!1,useDarkTheme:!0,styles:_m,showDiffOnly:!0,extraLinesSurroundingDiff:3,codeFoldMessageRenderer:c=>F.jsxs("span",{children:[c," hidden lines"]})})})]})}const Sm=({isOpen:e,onClose:t})=>{const[r,s]=V.useState(null),[d,v]=V.useState(!1),S=V.useCallback(async()=>{v(!0);try{const c=await fetch("/api/diff",{signal:AbortSignal.timeout(5e3)});if(!c.ok)throw new Error(`HTTP ${c.status}`);const p=await c.json();s(p)}catch(c){s({error:"connection_failed",message:c instanceof Error?c.message:"Cannot connect to diff server"})}finally{v(!1)}},[]);if(V.useEffect(()=>{e&&S()},[e,S]),V.useEffect(()=>{const c=p=>{e&&p.key==="Escape"&&(t(),p.preventDefault())};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[e,t]),!e)return null;const i=r?.files||[],o=i.length,f=r?.summary?.totalAdditions||0,_=r?.summary?.totalDeletions||0;return F.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-end justify-center",onClick:c=>c.target===c.currentTarget&&t(),children:F.jsxs("div",{className:"w-full h-[90vh] bg-bg-primary rounded-t-2xl flex flex-col overflow-hidden",children:[F.jsxs("div",{className:"shrink-0 px-4 py-3 border-b border-border-subtle flex items-center justify-between",children:[F.jsxs("div",{className:"flex items-center gap-3",children:[F.jsx("h2",{className:"text-lg font-semibold",children:"Git Diff"}),r?.branch&&F.jsx("span",{className:"text-sm text-accent-purple",children:r.branch})]}),F.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-bg-tertiary text-text-secondary",children:""})]}),F.jsxs("div",{className:"shrink-0 px-4 py-2 border-b border-border-subtle flex items-center justify-between text-xs text-text-secondary",children:[F.jsxs("div",{className:"flex items-center gap-3",children:[r?.git_root&&F.jsx("span",{className:"truncate max-w-[200px]",title:r.git_root,children:r.git_root}),F.jsxs("span",{children:[o," file",o!==1?"s":""]})]}),F.jsxs("div",{className:"flex items-center gap-2",children:[F.jsxs("span",{className:"text-accent-green",children:["+",f]}),F.jsxs("span",{className:"text-accent-red",children:["-",_]})]})]}),F.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d?F.jsx("div",{className:"flex items-center justify-center h-full",children:F.jsx("div",{className:"text-text-muted",children:"Loading..."})}):r?.error?F.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[F.jsx("span",{className:"text-2xl",children:""}),F.jsx("span",{className:"text-text-muted",children:r.message||"Error loading diff"})]}):i.length===0?F.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[F.jsx("span",{className:"text-2xl text-accent-green",children:""}),F.jsx("span",{className:"text-text-muted",children:"No changes"})]}):i.map((c,p)=>F.jsx(Cm,{file:c,defaultExpanded:p===0},c.filename))})]})})},Gr=()=>{try{navigator.vibrate?.(8)}catch{}},wm=()=>{const{sendKey:e,sendInput:t,mobileKeyboardLocked:r,setMobileKeyboardLocked:s}=Lr(),d="ontouchstart"in window||navigator.maxTouchPoints>0,[v,S]=V.useState(null),[i,o]=V.useState(!1),[f,_]=V.useState(!1),[c,p]=V.useState(!1),[w,C]=V.useState(()=>localStorage.getItem("ttyd_toolbar_expanded")!=="false"),u=()=>{C(g=>(localStorage.setItem("ttyd_toolbar_expanded",String(!g)),!g))},n=()=>{const g=localStorage.getItem("ttyd_commands");if(g)try{S(JSON.parse(g))}catch(x){console.error("Failed to parse ttyd_commands",x)}else S({defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]})};V.useEffect(()=>{n()},[]);const a=g=>{t(g+"\r")},l=g=>{Gr(),e(g)},h=g=>{Gr(),a(g)},m=V.useRef(null),L=async g=>{try{const x=await fetch("/api/upload-image",{method:"POST",headers:{"Content-Type":g.type},body:g});if(!x.ok)throw new Error(`Upload failed: ${x.status}`);const{path:y}=await x.json();t(y)}catch(x){console.error("[Toolbar] Image upload failed:",x)}};return F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:"shrink-0 flex flex-col",children:[F.jsx(ug,{isOpen:f,onClose:()=>_(!1),onSend:g=>t(g)}),F.jsx("div",{className:"bg-bg-secondary border-t border-border-subtle pb-[env(safe-area-inset-bottom)]",children:F.jsx("div",{className:"flex flex-col gap-1.5 px-2 py-1.5",children:w?F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar",children:[F.jsx(Dh,{expanded:!0,onClick:u}),d&&F.jsx(Ah,{locked:r,onClick:()=>{Gr(),s(!r)}}),F.jsx(Ye,{label:"ESC",onClick:()=>l("ESC")}),F.jsx(Ye,{label:"^C",onClick:()=>l("CTRL_C"),className:"text-accent-red"}),F.jsx(Ye,{label:"^L",onClick:()=>l("CTRL_L")}),F.jsx(ja,{}),F.jsx(Th,{config:v,onCmd:h}),F.jsx(It,{label:"",onClick:()=>_(!0),"aria-label":"Text input"}),F.jsx(It,{label:"",onClick:()=>m.current?.click(),"aria-label":"Upload image"}),F.jsx(It,{label:"Sel",onClick:()=>{Gr(),window.dispatchEvent(new Event("terminal-copy-viewport"))},className:"text-accent-purple","aria-label":"Copy viewport"}),F.jsx(It,{label:"Diff",onClick:()=>p(!0),className:"text-accent-green"}),F.jsx(It,{label:"",onClick:()=>o(!0),"aria-label":"Settings"})]}),F.jsxs("div",{className:"flex items-center gap-1.5",children:[F.jsx(Ye,{label:"Tab",onClick:()=>l("TAB"),wide:!0}),F.jsx(Ye,{label:"Enter",onClick:()=>l("ENTER"),wide:!0}),F.jsx("div",{className:"flex-1"}),F.jsx(Ye,{label:"",onClick:()=>l("ARROW_UP")})]}),F.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[F.jsx(Ye,{label:"",onClick:()=>l("ARROW_LEFT")}),F.jsx(Ye,{label:"",onClick:()=>l("ARROW_DOWN")}),F.jsx(Ye,{label:"",onClick:()=>l("ARROW_RIGHT")})]})]}):F.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar mask-gradient-right",children:[F.jsx(Dh,{expanded:!1,onClick:u}),d&&F.jsx(Ah,{locked:r,onClick:()=>{Gr(),s(!r)}}),F.jsx(Ye,{label:"ESC",onClick:()=>l("ESC")}),F.jsx(Ye,{label:"Tab",onClick:()=>l("TAB")}),F.jsx(Ye,{label:"^C",onClick:()=>l("CTRL_C"),className:"text-accent-red"}),F.jsx(Ye,{label:"",onClick:()=>l("ARROW_UP")}),F.jsx(Ye,{label:"",onClick:()=>l("ARROW_DOWN")}),F.jsx(Ye,{label:"",onClick:()=>l("ARROW_LEFT")}),F.jsx(Ye,{label:"",onClick:()=>l("ARROW_RIGHT")}),F.jsx(ja,{}),F.jsx(Th,{config:v,onCmd:h}),F.jsx(It,{label:"",onClick:()=>_(!0),"aria-label":"Text input"}),F.jsx(It,{label:"",onClick:()=>m.current?.click(),"aria-label":"Upload image"}),F.jsx(It,{label:"Sel",onClick:()=>{Gr(),window.dispatchEvent(new Event("terminal-copy-viewport"))},className:"text-accent-purple","aria-label":"Copy viewport"}),F.jsx(It,{label:"Diff",onClick:()=>p(!0),className:"text-accent-green"}),F.jsx(It,{label:"",onClick:()=>o(!0),"aria-label":"Settings"})]})})})]}),F.jsx(ag,{isOpen:i,onClose:()=>o(!1),onConfigChange:n}),F.jsx("input",{ref:m,type:"file",accept:"image/*",className:"hidden",onChange:g=>{const x=g.target.files?.[0];x&&L(x),g.target.value=""}}),F.jsx(Sm,{isOpen:c,onClose:()=>p(!1)})]})},ql="min-h-[36px] flex items-center justify-center rounded-lg shadow-sm border border-border-subtle text-sm font-mono active:scale-95 active:bg-accent-blue/20 transition-transform duration-100 whitespace-nowrap select-none",Dh=({expanded:e,onClick:t})=>F.jsx("button",{onClick:t,className:`min-w-[36px] min-h-[36px] flex items-center justify-center rounded-lg shadow-sm border text-sm active:scale-95 transition-transform duration-100 shrink-0 select-none ${e?"bg-accent-blue/20 border-accent-blue text-accent-blue":"bg-bg-tertiary/50 border-border-subtle text-text-secondary"}`,"aria-label":e?"Collapse toolbar":"Expand toolbar",children:e?"":""}),Ah=({locked:e,onClick:t})=>F.jsx("button",{onClick:t,className:`min-w-[36px] min-h-[36px] flex items-center justify-center rounded-lg shadow-sm border text-xs font-semibold active:scale-95 transition-transform duration-100 shrink-0 select-none ${e?"bg-bg-tertiary/50 border-border-subtle text-text-secondary":"bg-accent-blue/20 border-accent-blue text-accent-blue"}`,"aria-label":e?"Show system keyboard":"Hide system keyboard",children:"Kb"}),ja=()=>F.jsx("div",{className:"w-px h-5 bg-border-subtle shrink-0"}),Th=({config:e,onCmd:t})=>{if(!e)return null;const r=[...e.defaultCommands.filter(s=>s.visible),...e.customCommands];return r.length===0?null:F.jsxs(F.Fragment,{children:[r.map(s=>F.jsx(xm,{label:s.name,onClick:()=>t(s.cmd)},s.name)),F.jsx(ja,{})]})},Ye=({label:e,onClick:t,className:r="",wide:s})=>F.jsx("button",{onClick:t,className:`${ql} bg-bg-tertiary text-text-primary ${s?"px-4":"min-w-[36px] px-2"} ${r}`,children:e}),xm=({label:e,onClick:t})=>F.jsx("button",{onClick:t,className:`${ql} bg-bg-tertiary text-accent-blue px-3`,children:e}),It=({label:e,onClick:t,className:r="",...s})=>F.jsx("button",{onClick:t,"aria-label":s["aria-label"],className:`${ql} bg-bg-tertiary/50 text-text-secondary min-w-[36px] px-2 ${r}`,children:e}),Ph=({isOpen:e,onClose:t})=>{const{sendInput:r,clientTty:s}=Lr(),[d,v]=V.useState(""),S=V.useRef(null);V.useEffect(()=>{e&&(v(""),setTimeout(()=>S.current?.focus(),100))},[e]);const i=async()=>{const f=d.trim();if(f){t();try{if(s){const _=`/api/tmux/create?name=${encodeURIComponent(f)}&client_tty=${encodeURIComponent(s)}`;if((await fetch(_,{signal:AbortSignal.timeout(3e3)})).ok){sessionStorage.setItem("ttyd_last_tmux_session",f);return}}}catch{}r(` tmux new-session -d -s ${f} 2>/dev/null; tmux attach -t ${f}\r`),sessionStorage.setItem("ttyd_last_tmux_session",f)}},o=f=>{f.key==="Enter"?(f.preventDefault(),i()):f.key==="Escape"&&t()};return e?F.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:f=>f.target===f.currentTarget&&t(),children:F.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[F.jsx("h3",{className:"text-lg font-semibold mb-4",children:"New Tmux Session"}),F.jsx("input",{ref:S,type:"text",value:d,onChange:f=>v(f.target.value),onKeyDown:o,placeholder:"Session name (e.g. work, claude)",className:"w-full px-3 py-2 bg-bg-tertiary border border-border-subtle rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-purple mb-4"}),F.jsxs("div",{className:"flex gap-2 justify-end",children:[F.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),F.jsx("button",{onClick:i,disabled:!d.trim(),className:"px-4 py-2 rounded-lg bg-accent-purple text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Create & Attach"})]})]})}):null},bm=1500,Lm=({sessionName:e,onConfirm:t,onCancel:r})=>F.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:s=>s.target===s.currentTarget&&r(),children:F.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[F.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Kill Session?"}),F.jsxs("p",{className:"text-text-secondary text-sm mb-4",children:["Are you sure you want to kill session ",F.jsxs("span",{className:"text-accent-red font-mono",children:['"',e,'"']}),"? This action cannot be undone."]}),F.jsxs("div",{className:"flex gap-2 justify-end",children:[F.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),F.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-accent-red text-white",children:"Kill Session"})]})]})}),Em=()=>{const{sendInput:e}=Lr(),{tmuxSessions:t,currentTmuxSession:r,clientTty:s,sessionsLoaded:d,refresh:v}=Jd(),[S,i]=V.useState(!1),[o,f]=V.useState(!1),[_,c]=V.useState(null),p=V.useRef(null),w=V.useRef(null),C=V.useRef(!1);V.useEffect(()=>{const y=b=>{p.current&&!p.current.contains(b.target)&&i(!1)};if(S)return document.addEventListener("mousedown",y),document.addEventListener("touchstart",y,{passive:!0}),()=>{document.removeEventListener("mousedown",y),document.removeEventListener("touchstart",y)}},[S]);const u=async y=>{i(!1);try{const b=s;if(b){const E=`/api/tmux/switch?session=${encodeURIComponent(y)}&client_tty=${encodeURIComponent(b)}`;if((await fetch(E,{signal:AbortSignal.timeout(3e3)})).ok){sessionStorage.setItem("ttyd_last_tmux_session",y),setTimeout(v,300);return}}}catch{}e(` tmux attach -t ${y}\r`),sessionStorage.setItem("ttyd_last_tmux_session",y),setTimeout(v,500)},n=async y=>{try{const b=`/api/tmux/kill?name=${encodeURIComponent(y)}`;await fetch(b,{signal:AbortSignal.timeout(5e3)}),v()}catch{}c(null)},a=y=>{C.current=!1,w.current=window.setTimeout(()=>{C.current=!0,c(y),i(!1)},bm)},l=()=>{w.current&&(clearTimeout(w.current),w.current=null)},h=y=>{C.current||u(y)},m=async()=>{i(!1);try{const y=s;if(y){const b=`/api/tmux/detach?client_tty=${encodeURIComponent(y)}`;await fetch(b,{signal:AbortSignal.timeout(3e3)}),setTimeout(v,500);return}}catch{}e(" tmux detach\r"),setTimeout(v,500)},L=()=>{i(!1),f(!0)};if(t.length===0)return d?F.jsxs(F.Fragment,{children:[F.jsx("button",{onTouchEnd:y=>{y.preventDefault(),L()},onClick:L,className:"flex items-center gap-1.5 px-2.5 py-1 text-accent-purple text-xs font-medium active:opacity-70",children:"+ New Session"}),F.jsx(Ph,{isOpen:o,onClose:()=>f(!1)})]}):null;const g=r?t.find(y=>y.name===r):null,x=g?.name||(r??"Sessions");return F.jsxs(F.Fragment,{children:[F.jsxs("div",{ref:p,className:"relative",children:[F.jsxs("button",{onClick:()=>i(!S),className:"flex items-center gap-1.5 px-2.5 py-1 bg-accent-purple rounded-md text-white text-xs font-medium whitespace-nowrap",children:[F.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${g?"bg-accent-green":"bg-text-muted opacity-50"}`}),x,F.jsx("span",{className:"ml-1 text-[10px] opacity-70",children:S?"":""})]}),S&&F.jsxs("div",{className:"absolute top-full left-0 mt-1 min-w-[160px] bg-bg-secondary border border-border-subtle rounded-lg shadow-lg z-50 overflow-hidden",children:[F.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:t.map(y=>F.jsxs("button",{onClick:()=>h(y.name),onTouchStart:()=>a(y.name),onTouchEnd:l,onMouseDown:()=>a(y.name),onMouseUp:l,onMouseLeave:l,className:`w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm transition-colors ${y.name===r?"bg-accent-purple/20 text-accent-purple":"text-text-primary hover:bg-bg-tertiary"}`,children:[F.jsx("span",{className:`w-2 h-2 rounded-full ${y.attached?"bg-accent-green":"bg-text-muted opacity-50"}`}),F.jsx("span",{className:"flex-1 truncate",children:y.name}),F.jsxs("span",{className:"text-xs text-text-muted",children:[y.windows,"w"]})]},y.name))}),F.jsxs("div",{className:"border-t border-border-subtle",children:[F.jsxs("button",{onTouchEnd:y=>{y.preventDefault(),L()},onClick:L,className:"w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm text-accent-purple hover:bg-bg-tertiary active:bg-bg-tertiary",children:[F.jsx("span",{className:"w-2 h-2 flex items-center justify-center text-xs",children:"+"}),F.jsx("span",{children:"New Session"})]}),F.jsxs("button",{onTouchEnd:y=>{y.preventDefault(),m()},onClick:m,className:"w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm text-text-secondary hover:bg-bg-tertiary active:bg-bg-tertiary",children:[F.jsx("span",{className:"w-2 h-2 flex items-center justify-center text-xs",children:""}),F.jsx("span",{children:"Shell"})]})]})]})]}),F.jsx(Ph,{isOpen:o,onClose:()=>f(!1)}),_&&F.jsx(Lm,{sessionName:_,onConfirm:()=>n(_),onCancel:()=>c(null)})]})},km=({currentBranch:e,onBranchChange:t})=>{const[r,s]=V.useState(!1),[d,v]=V.useState({local:[],remote:[],current:""}),[S,i]=V.useState(""),[o,f]=V.useState(!1),_=V.useRef(null),c=V.useRef(null),p=V.useCallback(async()=>{f(!0);try{const a=await fetch("/api/git/branches",{signal:AbortSignal.timeout(5e3)});if(a.ok){const l=await a.json();v(l)}}catch{v({local:[],remote:[],current:""})}finally{f(!1)}},[]);V.useEffect(()=>{r?(p(),setTimeout(()=>c.current?.focus(),100)):i("")},[r,p]),V.useEffect(()=>{const a=l=>{_.current&&!_.current.contains(l.target)&&s(!1)};if(r)return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a,{passive:!0}),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[r]);const w=async a=>{s(!1);try{const l=`/api/git/checkout?branch=${encodeURIComponent(a)}`;(await fetch(l,{signal:AbortSignal.timeout(1e4)})).ok&&t?.()}catch{}},C=a=>{if(!S)return a;const l=S.toLowerCase();return a.filter(h=>h.toLowerCase().includes(l))},u=C(d.local),n=C(d.remote);return e?F.jsxs("div",{ref:_,className:"relative",children:[F.jsxs("button",{onClick:()=>s(!r),className:"text-accent-purple hover:text-accent-purple/80 text-xs font-mono flex items-center gap-1",children:[F.jsx("span",{children:e}),F.jsx("span",{className:"text-[10px] opacity-70",children:r?"":""})]}),r&&F.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-bg-secondary border border-border-subtle rounded-lg shadow-lg z-50 overflow-hidden",children:[F.jsx("div",{className:"p-2 border-b border-border-subtle",children:F.jsx("input",{ref:c,type:"text",value:S,onChange:a=>i(a.target.value),placeholder:"Search branches...",className:"w-full px-2 py-1.5 bg-bg-tertiary border border-border-subtle rounded text-sm text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-purple"})}),F.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:o?F.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:"Loading..."}):F.jsxs(F.Fragment,{children:[u.length>0&&F.jsxs("div",{children:[F.jsx("div",{className:"px-3 py-1.5 text-xs text-text-muted bg-bg-tertiary",children:"Local"}),u.map(a=>F.jsxs("button",{onClick:()=>w(a),className:`w-full px-3 py-2 text-left text-sm truncate ${a===d.current?"bg-accent-purple/20 text-accent-purple":"text-text-primary hover:bg-bg-tertiary"}`,children:[a===d.current&&F.jsx("span",{className:"mr-1",children:""}),a]},a))]}),n.length>0&&F.jsxs("div",{children:[F.jsx("div",{className:"px-3 py-1.5 text-xs text-text-muted bg-bg-tertiary",children:"Remote"}),n.map(a=>F.jsx("button",{onClick:()=>w(a),className:"w-full px-3 py-2 text-left text-sm text-text-secondary hover:bg-bg-tertiary truncate",children:a},a))]}),u.length===0&&n.length===0&&F.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:"No branches found"})]})})]})]}):null};function Rm(e,t=20){if(e.length<=t)return e;const r=e.split("/");return r.length<=2?"..."+e.slice(-t+3):"~/"+r.slice(-2).join("/")}const Mm=()=>{const{connectionState:e}=Lr(),{branch:t,path:r,isOffline:s,refresh:d}=Jd(),v=V.useCallback(()=>{setTimeout(()=>d(),500)},[d]),S=e==="connected";return F.jsx("div",{className:"h-[40px] shrink-0 border-b border-border-subtle flex items-center px-3 bg-bg-secondary overflow-visible",children:F.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary font-mono w-full",children:[F.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${S?"bg-accent-green":"bg-accent-red"}`,title:S?"Connected":"Disconnected"}),F.jsx(Em,{}),F.jsx("span",{className:"text-border-subtle shrink-0",children:""}),s?F.jsx("span",{className:"text-text-muted",children:"(offline)"}):F.jsxs(F.Fragment,{children:[F.jsx(km,{currentBranch:t||"-",onBranchChange:v}),F.jsx("span",{className:"text-border-subtle shrink-0",children:""}),F.jsx("span",{className:"truncate",title:r,children:Rm(r)})]})]})})},Dm=()=>{const{connectionState:e,reconnect:t,reconnectAttempt:r}=Lr(),s=V.useCallback(i=>{i.key==="Enter"&&e==="disconnected"&&t()},[e,t]);if(V.useEffect(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)),[s]),e==="connected")return null;const d=e==="reconnecting",v=e==="connecting",S=e==="disconnected";return F.jsx("div",{className:"fixed inset-0 z-40 bg-black/70 flex items-center justify-center pointer-events-auto",children:F.jsxs("div",{className:"bg-bg-secondary rounded-xl p-6 max-w-xs w-full mx-4 text-center shadow-xl border border-border-subtle",children:[(v||d)&&F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"w-8 h-8 border-2 border-accent-purple border-t-transparent rounded-full animate-spin mx-auto mb-4"}),F.jsx("h3",{className:"text-lg font-semibold mb-2",children:d?"Reconnecting...":"Connecting..."}),d&&F.jsxs("p",{className:"text-sm text-text-secondary",children:["Attempt ",r," of 10"]})]}),S&&r>=10&&F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-red/20 flex items-center justify-center mx-auto mb-4",children:F.jsx("span",{className:"text-2xl",children:""})}),F.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connection Failed"}),F.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Could not connect after 10 attempts"}),F.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Try Again"})]}),S&&r<10&&r>0&&F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:F.jsx("span",{className:"text-2xl",children:""})}),F.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),F.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Reconnecting automatically..."}),F.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect Now"}),F.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]}),S&&r===0&&F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:F.jsx("span",{className:"text-2xl",children:""})}),F.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),F.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Connection lost"}),F.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect"}),F.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]})]})})},Am=({children:e})=>{const{terminalRef:t}=Lr(),[r,s]=V.useState(null),d=V.useCallback(()=>{const S=window.visualViewport;S&&s(S.height)},[]);V.useEffect(()=>{const S=window.visualViewport;if(S)return S.addEventListener("resize",d),S.addEventListener("scroll",d),d(),()=>{S.removeEventListener("resize",d),S.removeEventListener("scroll",d)}},[d]);const v=r?{height:`${r}px`}:{height:"100dvh"};return F.jsxs("div",{className:"flex flex-col bg-bg-primary overflow-hidden text-text-primary font-sans selection:bg-accent-blue/30",style:v,children:[F.jsx(Mm,{}),F.jsx("div",{ref:t,className:"flex-1 min-h-0 relative bg-bg-primary overflow-hidden",children:e}),F.jsx(wm,{}),F.jsx(Dm,{})]})};var Sf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(globalThis,()=>(()=>{var r={4567:function(S,i,o){var f=this&&this.__decorate||function(l,h,m,L){var g,x=arguments.length,y=x<3?h:L===null?L=Object.getOwnPropertyDescriptor(h,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,h,m,L);else for(var b=l.length-1;b>=0;b--)(g=l[b])&&(y=(x<3?g(y):x>3?g(h,m,y):g(h,m))||y);return x>3&&y&&Object.defineProperty(h,m,y),y},_=this&&this.__param||function(l,h){return function(m,L){h(m,L,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const c=o(9042),p=o(9924),w=o(844),C=o(4725),u=o(2585),n=o(3656);let a=i.AccessibilityManager=class extends w.Disposable{constructor(l,h,m,L){super(),this._terminal=l,this._coreBrowserService=m,this._renderService=L,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let g=0;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);if(this._topBoundaryFocusListener=g=>this._handleBoundaryFocus(g,0),this._bottomBoundaryFocusListener=g=>this._handleBoundaryFocus(g,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(g=>this._handleResize(g.rows))),this.register(this._terminal.onRender(g=>this._refreshRows(g.start,g.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(g=>this._handleChar(g))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(g=>this._handleTab(g))),this.register(this._terminal.onKey(g=>this._handleKey(g.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,n.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(l){for(let h=0;h<l;h++)this._handleChar(" ")}_handleChar(l){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,l===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(l){this._clearLiveRegion(),/\p{Control}/u.test(l)||this._charsToConsume.push(l)}_refreshRows(l,h){this._liveRegionDebouncer.refresh(l,h,this._terminal.rows)}_renderRows(l,h){const m=this._terminal.buffer,L=m.lines.length.toString();for(let g=l;g<=h;g++){const x=m.lines.get(m.ydisp+g),y=[],b=x?.translateToString(!0,void 0,void 0,y)||"",E=(m.ydisp+g+1).toString(),R=this._rowElements[g];R&&(b.length===0?(R.innerText="",this._rowColumns.set(R,[0,1])):(R.textContent=b,this._rowColumns.set(R,y)),R.setAttribute("aria-posinset",E),R.setAttribute("aria-setsize",L))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(l,h){const m=l.target,L=this._rowElements[h===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||l.relatedTarget!==L)return;let g,x;if(h===0?(g=m,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(g=this._rowElements.shift(),x=m,this._rowContainer.removeChild(g)),g.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const l=document.getSelection();if(!l)return;if(l.isCollapsed)return void(this._rowContainer.contains(l.anchorNode)&&this._terminal.clearSelection());if(!l.anchorNode||!l.focusNode)return void console.error("anchorNode and/or focusNode are null");let h={node:l.anchorNode,offset:l.anchorOffset},m={node:l.focusNode,offset:l.focusOffset};if((h.node.compareDocumentPosition(m.node)&Node.DOCUMENT_POSITION_PRECEDING||h.node===m.node&&h.offset>m.offset)&&([h,m]=[m,h]),h.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(h={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(h.node))return;const L=this._rowElements.slice(-1)[0];if(m.node.compareDocumentPosition(L)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(m={node:L,offset:L.textContent?.length??0}),!this._rowContainer.contains(m.node))return;const g=({node:b,offset:E})=>{const R=b instanceof Text?b.parentNode:b;let k=parseInt(R?.getAttribute("aria-posinset"),10)-1;if(isNaN(k))return console.warn("row is invalid. Race condition?"),null;const D=this._rowColumns.get(R);if(!D)return console.warn("columns is null. Race condition?"),null;let T=E<D.length?D[E]:D.slice(-1)[0]+1;return T>=this._terminal.cols&&(++k,T=0),{row:k,column:T}},x=g(h),y=g(m);if(x&&y){if(x.row>y.row||x.row===y.row&&x.column>=y.column)throw new Error("invalid range");this._terminal.select(x.column,x.row,(y.row-x.row)*this._terminal.cols-x.column+y.column)}}_handleResize(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const l=this._coreBrowserService.mainDocument.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}}_refreshRowDimensions(l){l.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=a=f([_(1,u.IInstantiationService),_(2,C.ICoreBrowserService),_(3,C.IRenderService)],a)},3614:(S,i)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function f(p,w){return w?"\x1B[200~"+p+"\x1B[201~":p}function _(p,w,C,u){p=f(p=o(p),C.decPrivateModes.bracketedPasteMode&&u.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(p,!0),w.value=""}function c(p,w,C){const u=C.getBoundingClientRect(),n=p.clientX-u.left-10,a=p.clientY-u.top-10;w.style.width="20px",w.style.height="20px",w.style.left=`${n}px`,w.style.top=`${a}px`,w.style.zIndex="1000",w.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=f,i.copyHandler=function(p,w){p.clipboardData&&p.clipboardData.setData("text/plain",w.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,w,C,u){p.stopPropagation(),p.clipboardData&&_(p.clipboardData.getData("text/plain"),w,C,u)},i.paste=_,i.moveTextAreaUnderMouseCursor=c,i.rightClickHandler=function(p,w,C,u,n){c(p,w,C),n&&u.rightClickSelect(p),w.value=u.selectionText,w.select()}},7239:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=o(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(_,c,p){this._css.set(_,c,p)}getCss(_,c){return this._css.get(_,c)}setColor(_,c,p){this._color.set(_,c,p)}getColor(_,c){return this._color.get(_,c)}clear(){this._color.clear(),this._css.clear()}}},3656:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,c){o.addEventListener(f,_,c);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,c))}}}},3551:function(S,i,o){var f=this&&this.__decorate||function(a,l,h,m){var L,g=arguments.length,x=g<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,l,h,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(g<3?L(x):g>3?L(l,h,x):L(l,h))||x);return g>3&&x&&Object.defineProperty(l,h,x),x},_=this&&this.__param||function(a,l){return function(h,m){l(h,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const c=o(3656),p=o(8460),w=o(844),C=o(2585),u=o(4725);let n=i.Linkifier=class extends w.Disposable{get currentLink(){return this._currentLink}constructor(a,l,h,m,L){super(),this._element=a,this._mouseService=l,this._renderService=h,this._bufferService=m,this._linkProviderService=L,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,w.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,w.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,c.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,c.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){this._lastMouseEvent=a;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const h=a.composedPath();for(let m=0;m<h.length;m++){const L=h[m];if(L.classList.contains("xterm"))break;if(L.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,l){this._activeProviderReplies&&l||(this._activeProviderReplies?.forEach(m=>{m?.forEach(L=>{L.link.dispose&&L.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let h=!1;for(const[m,L]of this._linkProviderService.linkProviders.entries())l?this._activeProviderReplies?.get(m)&&(h=this._checkLinkProviderResult(m,a,h)):L.provideLinks(a.y,g=>{if(this._isMouseOut)return;const x=g?.map(y=>({link:y}));this._activeProviderReplies?.set(m,x),h=this._checkLinkProviderResult(m,a,h),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,l){const h=new Set;for(let m=0;m<l.size;m++){const L=l.get(m);if(L)for(let g=0;g<L.length;g++){const x=L[g],y=x.link.range.start.y<a?0:x.link.range.start.x,b=x.link.range.end.y>a?this._bufferService.cols:x.link.range.end.x;for(let E=y;E<=b;E++){if(h.has(E)){L.splice(g--,1);break}h.add(E)}}}}_checkLinkProviderResult(a,l,h){if(!this._activeProviderReplies)return h;const m=this._activeProviderReplies.get(a);let L=!1;for(let g=0;g<a;g++)this._activeProviderReplies.has(g)&&!this._activeProviderReplies.get(g)||(L=!0);if(!L&&m){const g=m.find(x=>this._linkAtPosition(x.link,l));g&&(h=!0,this._handleNewLink(g))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!h)for(let g=0;g<this._activeProviderReplies.size;g++){const x=this._activeProviderReplies.get(g)?.find(y=>this._linkAtPosition(y.link,l));if(x){h=!0,this._handleNewLink(x);break}}return h}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._currentLink)return;const l=this._positionFromMouseEvent(a,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,l){this._currentLink&&this._lastMouseEvent&&(!a||!l||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,w.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._lastMouseEvent)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(a.link,l)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:h=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==h&&(this._currentLink.state.decorations.pointerCursor=h,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",h))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:h=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==h&&(this._currentLink.state.decorations.underline=h,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,h))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(h=>{if(!this._currentLink)return;const m=h.start===0?0:h.start+1+this._bufferService.buffer.ydisp,L=this._bufferService.buffer.ydisp+1+h.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=L&&(this._clearCurrentLink(m,L),this._lastMouseEvent)){const g=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);g&&this._askForLink(g,!1)}})))}_linkHover(a,l,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(h,l.text)}_fireUnderlineEvent(a,l){const h=a.range,m=this._bufferService.buffer.ydisp,L=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-m-1,h.end.x,h.end.y-m-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(L)}_linkLeave(a,l,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(h,l.text)}_linkAtPosition(a,l){const h=a.range.start.y*this._bufferService.cols+a.range.start.x,m=a.range.end.y*this._bufferService.cols+a.range.end.x,L=l.y*this._bufferService.cols+l.x;return h<=L&&L<=m}_positionFromMouseEvent(a,l,h){const m=h.getCoords(a,l,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,l,h,m,L){return{x1:a,y1:l,x2:h,y2:m,cols:this._bufferService.cols,fg:L}}};i.Linkifier=n=f([_(1,u.IMouseService),_(2,u.IRenderService),_(3,C.IBufferService),_(4,u.ILinkProviderService)],n)},9042:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(S,i,o){var f=this&&this.__decorate||function(u,n,a,l){var h,m=arguments.length,L=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,n,a,l);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(L=(m<3?h(L):m>3?h(n,a,L):h(n,a))||L);return m>3&&L&&Object.defineProperty(n,a,L),L},_=this&&this.__param||function(u,n){return function(a,l){n(a,l,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const c=o(511),p=o(2585);let w=i.OscLinkProvider=class{constructor(u,n,a){this._bufferService=u,this._optionsService=n,this._oscLinkService=a}provideLinks(u,n){const a=this._bufferService.buffer.lines.get(u-1);if(!a)return void n(void 0);const l=[],h=this._optionsService.rawOptions.linkHandler,m=new c.CellData,L=a.getTrimmedLength();let g=-1,x=-1,y=!1;for(let b=0;b<L;b++)if(x!==-1||a.hasContent(b)){if(a.loadCell(b,m),m.hasExtendedAttrs()&&m.extended.urlId){if(x===-1){x=b,g=m.extended.urlId;continue}y=m.extended.urlId!==g}else x!==-1&&(y=!0);if(y||x!==-1&&b===L-1){const E=this._oscLinkService.getLinkData(g)?.uri;if(E){const R={start:{x:x+1,y:u},end:{x:b+(y||b!==L-1?0:1),y:u}};let k=!1;if(!h?.allowNonHttpProtocols)try{const D=new URL(E);["http:","https:"].includes(D.protocol)||(k=!0)}catch{k=!0}k||l.push({text:E,range:R,activate:(D,T)=>h?h.activate(D,T,R):C(0,T),hover:(D,T)=>h?.hover?.(D,T,R),leave:(D,T)=>h?.leave?.(D,T,R)})}y=!1,m.hasExtendedAttrs()&&m.extended.urlId?(x=b,g=m.extended.urlId):(x=-1,g=-1)}}n(l)}};function C(u,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=w=f([_(0,p.IBufferService),_(1,p.IOptionsService),_(2,p.IOscLinkService)],w)},6193:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=o(3614),_=o(3656),c=o(3551),p=o(9042),w=o(3730),C=o(1680),u=o(3107),n=o(5744),a=o(2950),l=o(1296),h=o(428),m=o(4269),L=o(5114),g=o(8934),x=o(3230),y=o(9312),b=o(4725),E=o(6731),R=o(8055),k=o(8969),D=o(8460),T=o(844),N=o(6114),j=o(8437),H=o(2584),B=o(7399),M=o(5941),A=o(9074),O=o(2585),I=o(5435),W=o(4567),z=o(779);class X extends k.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor($={}){super($),this.browser=N,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new T.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(O.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(z.LinkProviderService),this._instantiationService.setService(b.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(w.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((P,U)=>this.refresh(P,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(P=>this._reportWindowsOptions(P))),this.register(this._inputHandler.onColor(P=>this._handleColorEvent(P))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(P=>this._afterResize(P.cols,P.rows))),this.register((0,T.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent($){if(this._themeService)for(const P of $){let U,G="";switch(P.index){case 256:U="foreground",G="10";break;case 257:U="background",G="11";break;case 258:U="cursor",G="12";break;default:U="ansi",G="4;"+P.index}switch(P.type){case 0:const Z=R.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[P.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${H.C0.ESC}]${G};${(0,M.toRgbString)(Z)}${H.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(J=>J.ansi[P.index]=R.channels.toColor(...P.color));else{const J=U;this._themeService.modifyColors(ae=>ae[J]=R.channels.toColor(...P.color))}break;case 2:this._themeService.restoreColor(P.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange($){$?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus($){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const $=this.buffer.ybase+this.buffer.y,P=this.buffer.lines.get($);if(!P)return;const U=Math.min(this.buffer.x,this.cols-1),G=this._renderService.dimensions.css.cell.height,Z=P.getWidth(U),J=this._renderService.dimensions.css.cell.width*Z,ae=this.buffer.y*this._renderService.dimensions.css.cell.height,ee=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ee+"px",this.textarea.style.top=ae+"px",this.textarea.style.width=J+"px",this.textarea.style.height=G+"px",this.textarea.style.lineHeight=G+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",P=>{this.hasSelection()&&(0,f.copyHandler)(P,this._selectionService)}));const $=P=>(0,f.handlePasteEvent)(P,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",$)),this.register((0,_.addDisposableDomListener)(this.element,"paste",$)),N.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",P=>{P.button===2&&(0,f.rightClickHandler)(P,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",P=>{(0,f.rightClickHandler)(P,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),N.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",P=>{P.button===1&&(0,f.moveTextAreaUnderMouseCursor)(P,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",$=>this._keyUp($),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",$=>this._keyDown($),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",$=>this._keyPress($),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",$=>this._compositionHelper.compositionupdate($))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",$=>this._inputEvent($),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open($){if(!$)throw new Error("Terminal requires a parent element.");if($.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=$.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),$.appendChild(this.element);const P=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),P.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,_.addDisposableDomListener)(this.screenElement,"mousemove",U=>this.updateCursorStyle(U))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),P.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),N.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(L.CoreBrowserService,this.textarea,$.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(g.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(c.Linkifier,this.screenElement)),this.element.appendChild(P);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(u.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const $=this,P=this.element;function U(J){const ae=$._mouseService.getMouseReportCoords(J,$.screenElement);if(!ae)return!1;let ee,ue;switch(J.overrideType||J.type){case"mousemove":ue=32,J.buttons===void 0?(ee=3,J.button!==void 0&&(ee=J.button<3?J.button:3)):ee=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":ue=0,ee=J.button<3?J.button:3;break;case"mousedown":ue=1,ee=J.button<3?J.button:3;break;case"wheel":if($._customWheelEventHandler&&$._customWheelEventHandler(J)===!1||$.viewport.getLinesScrolled(J)===0)return!1;ue=J.deltaY<0?0:1,ee=4;break;default:return!1}return!(ue===void 0||ee===void 0||ee>4)&&$.coreMouseService.triggerMouseEvent({col:ae.col,row:ae.row,x:ae.x,y:ae.y,button:ee,action:ue,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}const G={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Z={mouseup:J=>(U(J),J.buttons||(this._document.removeEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.removeEventListener("mousemove",G.mousedrag)),this.cancel(J)),wheel:J=>(U(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&U(J)},mousemove:J=>{J.buttons||U(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?G.mousemove||(P.addEventListener("mousemove",Z.mousemove),G.mousemove=Z.mousemove):(P.removeEventListener("mousemove",G.mousemove),G.mousemove=null),16&J?G.wheel||(P.addEventListener("wheel",Z.wheel,{passive:!1}),G.wheel=Z.wheel):(P.removeEventListener("wheel",G.wheel),G.wheel=null),2&J?G.mouseup||(G.mouseup=Z.mouseup):(this._document.removeEventListener("mouseup",G.mouseup),G.mouseup=null),4&J?G.mousedrag||(G.mousedrag=Z.mousedrag):(this._document.removeEventListener("mousemove",G.mousedrag),G.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(P,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return U(J),G.mouseup&&this._document.addEventListener("mouseup",G.mouseup),G.mousedrag&&this._document.addEventListener("mousemove",G.mousedrag),this.cancel(J)})),this.register((0,_.addDisposableDomListener)(P,"wheel",J=>{if(!G.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(J)===!1)return!1;if(!this.buffer.hasScrollback){const ae=this.viewport.getLinesScrolled(J);if(ae===0)return;const ee=H.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B");let ue="";for(let ge=0;ge<Math.abs(ae);ge++)ue+=ee;return this.coreService.triggerDataEvent(ue,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(P,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,_.addDisposableDomListener)(P,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh($,P){this._renderService?.refreshRows($,P)}updateCursorStyle($){this._selectionService?.shouldColumnSelect($)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines($,P,U=0){U===1?(super.scrollLines($,P,U),this.refresh(0,this.rows-1)):this.viewport?.scrollLines($)}paste($){(0,f.paste)($,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler($){this._customKeyEventHandler=$}attachCustomWheelEventHandler($){this._customWheelEventHandler=$}registerLinkProvider($){return this._linkProviderService.registerLinkProvider($)}registerCharacterJoiner($){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const P=this._characterJoinerService.register($);return this.refresh(0,this.rows-1),P}deregisterCharacterJoiner($){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister($)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker($){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+$)}registerDecoration($){return this._decorationService.registerDecoration($)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select($,P,U){this._selectionService.setSelection($,P,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines($,P){this._selectionService?.selectLines($,P)}_keyDown($){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler($)===!1)return!1;const P=this.browser.isMac&&this.options.macOptionIsMeta&&$.altKey;if(!P&&!this._compositionHelper.keydown($))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;P||$.key!=="Dead"&&$.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const U=(0,B.evaluateKeyboardEvent)($,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle($),U.type===3||U.type===2){const G=this.rows-1;return this.scrollLines(U.type===2?-G:G),this.cancel($,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,$)||(U.cancel&&this.cancel($,!0),!U.key||!!($.key&&!$.ctrlKey&&!$.altKey&&!$.metaKey&&$.key.length===1&&$.key.charCodeAt(0)>=65&&$.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==H.C0.ETX&&U.key!==H.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:$}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||$.altKey||$.ctrlKey?this.cancel($,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift($,P){const U=$.isMac&&!this.options.macOptionIsMeta&&P.altKey&&!P.ctrlKey&&!P.metaKey||$.isWindows&&P.altKey&&P.ctrlKey&&!P.metaKey||$.isWindows&&P.getModifierState("AltGraph");return P.type==="keypress"?U:U&&(!P.keyCode||P.keyCode>47)}_keyUp($){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler($)===!1||(function(P){return P.keyCode===16||P.keyCode===17||P.keyCode===18}($)||this.focus(),this.updateCursorStyle($),this._keyPressHandled=!1)}_keyPress($){let P;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler($)===!1)return!1;if(this.cancel($),$.charCode)P=$.charCode;else if($.which===null||$.which===void 0)P=$.keyCode;else{if($.which===0||$.charCode===0)return!1;P=$.which}return!(!P||($.altKey||$.ctrlKey||$.metaKey)&&!this._isThirdLevelShift(this.browser,$)||(P=String.fromCharCode(P),this._onKey.fire({key:P,domEvent:$}),this._showCursor(),this.coreService.triggerDataEvent(P,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent($){if($.data&&$.inputType==="insertText"&&(!$.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const P=$.data;return this.coreService.triggerDataEvent(P,!0),this.cancel($),!0}return!1}resize($,P){$!==this.cols||P!==this.rows?super.resize($,P):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize($,P){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let $=1;$<this.rows;$++)this.buffer.lines.push(this.buffer.getBlankLine(j.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const $=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=$,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(H.C0.ESC+"[I"):this.coreService.triggerDataEvent(H.C0.ESC+"[O")}_reportWindowsOptions($){if(this._renderService)switch($){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const P=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${H.C0.ESC}[4;${U};${P}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const G=this._renderService.dimensions.css.cell.width.toFixed(0),Z=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${H.C0.ESC}[6;${Z};${G}t`)}}cancel($,P){if(this.options.cancelEvents||P)return $.preventDefault(),$.stopPropagation(),!1}}i.Terminal=X},9924:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,f=1e3){this._renderCallback=o,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const c=Date.now();if(c-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=c,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=c-this._lastRefreshMs,w=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},w)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f)}}},1680:function(S,i,o){var f=this&&this.__decorate||function(a,l,h,m){var L,g=arguments.length,x=g<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,l,h,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(g<3?L(x):g>3?L(l,h,x):L(l,h))||x);return g>3&&x&&Object.defineProperty(l,h,x),x},_=this&&this.__param||function(a,l){return function(h,m){l(h,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const c=o(3656),p=o(4725),w=o(8460),C=o(844),u=o(2585);let n=i.Viewport=class extends C.Disposable{constructor(a,l,h,m,L,g,x,y){super(),this._viewportElement=a,this._scrollArea=l,this._bufferService=h,this._optionsService=m,this._charSizeService=L,this._renderService=g,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,l){const h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&h<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const l=this._getPixelsScrolled(a);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(a,l){let h,m="";const L=[],g=l??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let y=a;y<g;y++){const b=x.get(y);if(!b)continue;const E=x.get(y+1)?.isWrapped;if(m+=b.translateToString(!E),!E||y===x.length-1){const R=document.createElement("div");R.textContent=m,L.push(R),m.length>0&&(h=R),m=""}}return{bufferElements:L,cursorElement:h}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(a,l){const h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&l.altKey||h==="ctrl"&&l.ctrlKey||h==="shift"&&l.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const l=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))}};i.Viewport=n=f([_(2,u.IBufferService),_(3,u.IOptionsService),_(4,p.ICharSizeService),_(5,p.IRenderService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],n)},3107:function(S,i,o){var f=this&&this.__decorate||function(u,n,a,l){var h,m=arguments.length,L=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,n,a,l);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(L=(m<3?h(L):m>3?h(n,a,L):h(n,a))||L);return m>3&&L&&Object.defineProperty(n,a,L),L},_=this&&this.__param||function(u,n){return function(a,l){n(a,l,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const c=o(4725),p=o(844),w=o(2585);let C=i.BufferDecorationRenderer=class extends p.Disposable{constructor(u,n,a,l,h){super(),this._screenElement=u,this._bufferService=n,this._coreBrowserService=a,this._decorationService=l,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",u?.options?.layer==="top"),n.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const a=u.options.x??0;return a&&a>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(u,n),n}_refreshStyle(u){const n=u.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let a=this._decorationElements.get(u);a||(a=this._createElement(u),u.element=a,this._decorationElements.set(u,a),this._container.appendChild(a),u.onDispose(()=>{this._decorationElements.delete(u),a.remove()})),a.style.top=n*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(a)}}_refreshXPosition(u,n=u.element){if(!n)return;const a=u.options.x??0;(u.options.anchor||"left")==="right"?n.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){this._decorationElements.get(u)?.remove(),this._decorationElements.delete(u),u.dispose()}};i.BufferDecorationRenderer=C=f([_(1,w.IBufferService),_(2,c.ICoreBrowserService),_(3,w.IDecorationService),_(4,c.IRenderService)],C)},5871:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const f of this._zones)if(f.color===o.options.overviewRulerOptions.color&&f.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,o.marker.line))return;if(this._lineAdjacentToZone(f,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(f,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,f){return f>=o.startBufferLine&&f<=o.endBufferLine}_lineAdjacentToZone(o,f,_){return f>=o.startBufferLine-this._linePadding[_||"full"]&&f<=o.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(o,f){o.startBufferLine=Math.min(o.startBufferLine,f),o.endBufferLine=Math.max(o.endBufferLine,f)}}},5744:function(S,i,o){var f=this&&this.__decorate||function(h,m,L,g){var x,y=arguments.length,b=y<3?m:g===null?g=Object.getOwnPropertyDescriptor(m,L):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(h,m,L,g);else for(var E=h.length-1;E>=0;E--)(x=h[E])&&(b=(y<3?x(b):y>3?x(m,L,b):x(m,L))||b);return y>3&&b&&Object.defineProperty(m,L,b),b},_=this&&this.__param||function(h,m){return function(L,g){m(L,g,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const c=o(5871),p=o(4725),w=o(844),C=o(2585),u={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let l=i.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(h,m,L,g,x,y,b){super(),this._viewportElement=h,this._screenElement=m,this._bufferService=L,this._decorationService=g,this._renderService=x,this._optionsService=y,this._coreBrowserService=b,this._colorZoneStore=new c.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const E=this._canvas.getContext("2d");if(!E)throw new Error("Ctx cannot be null");this._ctx=E,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const h=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=h,n.center=m,n.right=h,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=n.left,a.right=n.left+n.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowserService.dpr);const h=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(h,12),6)*this._coreBrowserService.dpr);u.left=m,u.center=m,u.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const h=this._colorZoneStore.zones;for(const m of h)m.position!=="full"&&this._renderColorZone(m);for(const m of h)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(h){this._ctx.fillStyle=h.color,this._ctx.fillRect(a[h.position||"full"],Math.round((this._canvas.height-1)*(h.startBufferLine/this._bufferService.buffers.active.lines.length)-u[h.position||"full"]/2),n[h.position||"full"],Math.round((this._canvas.height-1)*((h.endBufferLine-h.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[h.position||"full"]))}_queueRefresh(h,m){this._shouldUpdateDimensions=h||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=l=f([_(2,C.IBufferService),_(3,C.IDecorationService),_(4,p.IRenderService),_(5,C.IOptionsService),_(6,p.ICoreBrowserService)],l)},2950:function(S,i,o){var f=this&&this.__decorate||function(u,n,a,l){var h,m=arguments.length,L=m<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,n,a,l);else for(var g=u.length-1;g>=0;g--)(h=u[g])&&(L=(m<3?h(L):m>3?h(n,a,L):h(n,a))||L);return m>3&&L&&Object.defineProperty(n,a,L),L},_=this&&this.__param||function(u,n){return function(a,l){n(a,l,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const c=o(4725),p=o(2585),w=o(2584);let C=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(u,n,a,l,h,m){this._textarea=u,this._compositionView=n,this._bufferService=a,this._optionsService=l,this._coreService=h,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(u){this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(u){if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const u=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,a=n.replace(u,"");this._dataAlreadySent=a,n.length>u.length?this._coreService.triggerDataEvent(a,!0):n.length<u.length?this._coreService.triggerDataEvent(`${w.C0.DEL}`,!0):n.length===u.length&&n!==u&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(u){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}u||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=C=f([_(2,p.IBufferService),_(3,p.IOptionsService),_(4,p.ICoreService),_(5,c.IRenderService)],C)},9806:(S,i)=>{function o(f,_,c){const p=c.getBoundingClientRect(),w=f.getComputedStyle(c),C=parseInt(w.getPropertyValue("padding-left")),u=parseInt(w.getPropertyValue("padding-top"));return[_.clientX-p.left-C,_.clientY-p.top-u]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(f,_,c,p,w,C,u,n,a){if(!C)return;const l=o(f,_,c);return l?(l[0]=Math.ceil((l[0]+(a?u/2:0))/u),l[1]=Math.ceil(l[1]/n),l[0]=Math.min(Math.max(l[0],1),p+(a?1:0)),l[1]=Math.min(Math.max(l[1],1),w),l):void 0}},9504:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=o(2584);function _(n,a,l,h){const m=n-c(n,l),L=a-c(a,l),g=Math.abs(m-L)-function(x,y,b){let E=0;const R=x-c(x,b),k=y-c(y,b);for(let D=0;D<Math.abs(R-k);D++){const T=p(x,y)==="A"?-1:1;b.buffer.lines.get(R+T*D)?.isWrapped&&E++}return E}(n,a,l);return u(g,C(p(n,a),h))}function c(n,a){let l=0,h=a.buffer.lines.get(n),m=h?.isWrapped;for(;m&&n>=0&&n<a.rows;)l++,h=a.buffer.lines.get(--n),m=h?.isWrapped;return l}function p(n,a){return n>a?"A":"B"}function w(n,a,l,h,m,L){let g=n,x=a,y="";for(;g!==l||x!==h;)g+=m?1:-1,m&&g>L.cols-1?(y+=L.buffer.translateBufferLineToString(x,!1,n,g),g=0,n=0,x++):!m&&g<0&&(y+=L.buffer.translateBufferLineToString(x,!1,0,n+1),g=L.cols-1,n=g,x--);return y+L.buffer.translateBufferLineToString(x,!1,n,g)}function C(n,a){const l=a?"O":"[";return f.C0.ESC+l+n}function u(n,a){n=Math.floor(n);let l="";for(let h=0;h<n;h++)l+=a;return l}i.moveToCellSequence=function(n,a,l,h){const m=l.buffer.x,L=l.buffer.y;if(!l.buffer.hasScrollback)return function(y,b,E,R,k,D){return _(b,R,k,D).length===0?"":u(w(y,b,y,b-c(b,k),!1,k).length,C("D",D))}(m,L,0,a,l,h)+_(L,a,l,h)+function(y,b,E,R,k,D){let T;T=_(b,R,k,D).length>0?R-c(R,k):b;const N=R,j=function(H,B,M,A,O,I){let W;return W=_(M,A,O,I).length>0?A-c(A,O):B,H<M&&W<=A||H>=M&&W<A?"C":"D"}(y,b,E,R,k,D);return u(w(y,T,E,N,j==="C",k).length,C(j,D))}(m,L,n,a,l,h);let g;if(L===a)return g=m>n?"D":"C",u(Math.abs(m-n),C(g,h));g=L>a?"D":"C";const x=Math.abs(L-a);return u(function(y,b){return b.cols-y}(L>a?n:m,l)+(x-1)*l.cols+1+((L>a?m:n)-1),C(g,h))}},1296:function(S,i,o){var f=this&&this.__decorate||function(D,T,N,j){var H,B=arguments.length,M=B<3?T:j===null?j=Object.getOwnPropertyDescriptor(T,N):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,T,N,j);else for(var A=D.length-1;A>=0;A--)(H=D[A])&&(M=(B<3?H(M):B>3?H(T,N,M):H(T,N))||M);return B>3&&M&&Object.defineProperty(T,N,M),M},_=this&&this.__param||function(D,T){return function(N,j){T(N,j,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const c=o(3787),p=o(2550),w=o(2223),C=o(6171),u=o(6052),n=o(4725),a=o(8055),l=o(8460),h=o(844),m=o(2585),L="xterm-dom-renderer-owner-",g="xterm-rows",x="xterm-fg-",y="xterm-bg-",b="xterm-focus",E="xterm-selection";let R=1,k=i.DomRenderer=class extends h.Disposable{constructor(D,T,N,j,H,B,M,A,O,I,W,z,X){super(),this._terminal=D,this._document=T,this._element=N,this._screenElement=j,this._viewportElement=H,this._helperContainer=B,this._linkifier2=M,this._charSizeService=O,this._optionsService=I,this._bufferService=W,this._coreBrowserService=z,this._themeService=X,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,u.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(g),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(K=>this._injectCss(K))),this._injectCss(this._themeService.colors),this._rowFactory=A.createInstance(c.DomRendererRowFactory,document),this._element.classList.add(L+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(K=>this._handleLinkHover(K))),this.register(this._linkifier2.onHideLinkUnderline(K=>this._handleLinkLeave(K))),this.register((0,h.toDisposable)(()=>{this._element.classList.remove(L+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const N of this._rowElements)N.style.width=`${this.dimensions.css.canvas.width}px`,N.style.height=`${this.dimensions.css.cell.height}px`,N.style.lineHeight=`${this.dimensions.css.cell.height}px`,N.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${g} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${g} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${g} .xterm-dim { color: ${a.color.multiplyOpacity(D.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const N=`blink_underline_${this._terminalClass}`,j=`blink_bar_${this._terminalClass}`,H=`blink_block_${this._terminalClass}`;T+=`@keyframes ${N} { 50% {  border-bottom-style: hidden; }}`,T+=`@keyframes ${j} { 50% {  box-shadow: none; }}`,T+=`@keyframes ${H} { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,T+=`${this._terminalSelector} .${g}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${N} 1s step-end infinite;}${this._terminalSelector} .${g}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${j} 1s step-end infinite;}${this._terminalSelector} .${g}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${H} 1s step-end infinite;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${D.cursor.css} !important; color: ${D.cursorAccent.css} !important;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[B,M]of D.ansi.entries())T+=`${this._terminalSelector} .${x}${B} { color: ${M.css}; }${this._terminalSelector} .${x}${B}.xterm-dim { color: ${a.color.multiplyOpacity(M,.5).css}; }${this._terminalSelector} .${y}${B} { background-color: ${M.css}; }`;T+=`${this._terminalSelector} .${x}${w.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(D.background).css}; }${this._terminalSelector} .${x}${w.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${y}${w.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,T){for(let N=this._rowElements.length;N<=T;N++){const j=this._document.createElement("div");this._rowContainer.appendChild(j),this._rowElements.push(j)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,T){this._refreshRowElements(D,T),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,T,N){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,T,N),this.renderRows(0,this._bufferService.rows-1),!D||!T)return;this._selectionRenderModel.update(this._terminal,D,T,N);const j=this._selectionRenderModel.viewportStartRow,H=this._selectionRenderModel.viewportEndRow,B=this._selectionRenderModel.viewportCappedStartRow,M=this._selectionRenderModel.viewportCappedEndRow;if(B>=this._bufferService.rows||M<0)return;const A=this._document.createDocumentFragment();if(N){const O=D[0]>T[0];A.appendChild(this._createSelectionElement(B,O?T[0]:D[0],O?D[0]:T[0],M-B+1))}else{const O=j===B?D[0]:0,I=B===H?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(B,O,I));const W=M-B-1;if(A.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,W)),B!==M){const z=H===M?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(M,0,z))}}this._selectionContainer.appendChild(A)}_createSelectionElement(D,T,N,j=1){const H=this._document.createElement("div"),B=T*this.dimensions.css.cell.width;let M=this.dimensions.css.cell.width*(N-T);return B+M>this.dimensions.css.canvas.width&&(M=this.dimensions.css.canvas.width-B),H.style.height=j*this.dimensions.css.cell.height+"px",H.style.top=D*this.dimensions.css.cell.height+"px",H.style.left=`${B}px`,H.style.width=`${M}px`,H}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,T){const N=this._bufferService.buffer,j=N.ybase+N.y,H=Math.min(N.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let O=D;O<=T;O++){const I=O+N.ydisp,W=this._rowElements[O],z=N.lines.get(I);if(!W||!z)break;W.replaceChildren(...this._rowFactory.createRow(z,I,I===j,M,A,H,B,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${L}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,T,N,j,H,B){N<0&&(D=0),j<0&&(T=0);const M=this._bufferService.rows-1;N=Math.max(Math.min(N,M),0),j=Math.max(Math.min(j,M),0),H=Math.min(H,this._bufferService.cols);const A=this._bufferService.buffer,O=A.ybase+A.y,I=Math.min(A.x,H-1),W=this._optionsService.rawOptions.cursorBlink,z=this._optionsService.rawOptions.cursorStyle,X=this._optionsService.rawOptions.cursorInactiveStyle;for(let K=N;K<=j;++K){const $=K+A.ydisp,P=this._rowElements[K],U=A.lines.get($);if(!P||!U)break;P.replaceChildren(...this._rowFactory.createRow(U,$,$===O,z,X,I,W,this.dimensions.css.cell.width,this._widthCache,B?K===N?D:0:-1,B?(K===j?T:H)-1:-1))}}};i.DomRenderer=k=f([_(7,m.IInstantiationService),_(8,n.ICharSizeService),_(9,m.IOptionsService),_(10,m.IBufferService),_(11,n.ICoreBrowserService),_(12,n.IThemeService)],k)},3787:function(S,i,o){var f=this&&this.__decorate||function(g,x,y,b){var E,R=arguments.length,k=R<3?x:b===null?b=Object.getOwnPropertyDescriptor(x,y):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(g,x,y,b);else for(var D=g.length-1;D>=0;D--)(E=g[D])&&(k=(R<3?E(k):R>3?E(x,y,k):E(x,y))||k);return R>3&&k&&Object.defineProperty(x,y,k),k},_=this&&this.__param||function(g,x){return function(y,b){x(y,b,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const c=o(2223),p=o(643),w=o(511),C=o(2585),u=o(8055),n=o(4725),a=o(4269),l=o(6171),h=o(3734);let m=i.DomRendererRowFactory=class{constructor(g,x,y,b,E,R,k){this._document=g,this._characterJoinerService=x,this._optionsService=y,this._coreBrowserService=b,this._coreService=E,this._decorationService=R,this._themeService=k,this._workCell=new w.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(g,x,y){this._selectionStart=g,this._selectionEnd=x,this._columnSelectMode=y}createRow(g,x,y,b,E,R,k,D,T,N,j){const H=[],B=this._characterJoinerService.getJoinedCharacters(x),M=this._themeService.colors;let A,O=g.getNoBgTrimmedLength();y&&O<R+1&&(O=R+1);let I=0,W="",z=0,X=0,K=0,$=!1,P=0,U=!1,G=0;const Z=[],J=N!==-1&&j!==-1;for(let ae=0;ae<O;ae++){g.loadCell(ae,this._workCell);let ee=this._workCell.getWidth();if(ee===0)continue;let ue=!1,ge=ae,oe=this._workCell;if(B.length>0&&ae===B[0][0]){ue=!0;const le=B.shift();oe=new a.JoinedCellData(this._workCell,g.translateToString(!0,le[0],le[1]),le[1]-le[0]),ge=le[1]-1,ee=oe.getWidth()}const Te=this._isCellInSelection(ae,x),vt=y&&ae===R,se=J&&ae>=N&&ae<=j;let te=!1;this._decorationService.forEachDecorationAtCell(ae,x,void 0,le=>{te=!0});let re=oe.getChars()||p.WHITESPACE_CELL_CHAR;if(re===" "&&(oe.isUnderline()||oe.isOverline())&&(re=""),G=ee*D-T.get(re,oe.isBold(),oe.isItalic()),A){if(I&&(Te&&U||!Te&&!U&&oe.bg===z)&&(Te&&U&&M.selectionForeground||oe.fg===X)&&oe.extended.ext===K&&se===$&&G===P&&!vt&&!ue&&!te){oe.isInvisible()?W+=p.WHITESPACE_CELL_CHAR:W+=re,I++;continue}I&&(A.textContent=W),A=this._document.createElement("span"),I=0,W=""}else A=this._document.createElement("span");if(z=oe.bg,X=oe.fg,K=oe.extended.ext,$=se,P=G,U=Te,ue&&R>=ae&&R<=ge&&(R=ae),!this._coreService.isCursorHidden&&vt&&this._coreService.isCursorInitialized){if(Z.push("xterm-cursor"),this._coreBrowserService.isFocused)k&&Z.push("xterm-cursor-blink"),Z.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":Z.push("xterm-cursor-outline");break;case"block":Z.push("xterm-cursor-block");break;case"bar":Z.push("xterm-cursor-bar");break;case"underline":Z.push("xterm-cursor-underline")}}if(oe.isBold()&&Z.push("xterm-bold"),oe.isItalic()&&Z.push("xterm-italic"),oe.isDim()&&Z.push("xterm-dim"),W=oe.isInvisible()?p.WHITESPACE_CELL_CHAR:oe.getChars()||p.WHITESPACE_CELL_CHAR,oe.isUnderline()&&(Z.push(`xterm-underline-${oe.extended.underlineStyle}`),W===" "&&(W=""),!oe.isUnderlineColorDefault()))if(oe.isUnderlineColorRGB())A.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(oe.getUnderlineColor()).join(",")})`;else{let le=oe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&oe.isBold()&&le<8&&(le+=8),A.style.textDecorationColor=M.ansi[le].css}oe.isOverline()&&(Z.push("xterm-overline"),W===" "&&(W="")),oe.isStrikethrough()&&Z.push("xterm-strikethrough"),se&&(A.style.textDecoration="underline");let q=oe.getFgColor(),ne=oe.getFgColorMode(),fe=oe.getBgColor(),ce=oe.getBgColorMode();const ze=!!oe.isInverse();if(ze){const le=q;q=fe,fe=le;const Q=ne;ne=ce,ce=Q}let Ee,ke,de,he=!1;switch(this._decorationService.forEachDecorationAtCell(ae,x,void 0,le=>{le.options.layer!=="top"&&he||(le.backgroundColorRGB&&(ce=50331648,fe=le.backgroundColorRGB.rgba>>8&16777215,Ee=le.backgroundColorRGB),le.foregroundColorRGB&&(ne=50331648,q=le.foregroundColorRGB.rgba>>8&16777215,ke=le.foregroundColorRGB),he=le.options.layer==="top")}),!he&&Te&&(Ee=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,fe=Ee.rgba>>8&16777215,ce=50331648,he=!0,M.selectionForeground&&(ne=50331648,q=M.selectionForeground.rgba>>8&16777215,ke=M.selectionForeground)),he&&Z.push("xterm-decoration-top"),ce){case 16777216:case 33554432:de=M.ansi[fe],Z.push(`xterm-bg-${fe}`);break;case 50331648:de=u.channels.toColor(fe>>16,fe>>8&255,255&fe),this._addStyle(A,`background-color:#${L((fe>>>0).toString(16),"0",6)}`);break;default:ze?(de=M.foreground,Z.push(`xterm-bg-${c.INVERTED_DEFAULT_COLOR}`)):de=M.background}switch(Ee||oe.isDim()&&(Ee=u.color.multiplyOpacity(de,.5)),ne){case 16777216:case 33554432:oe.isBold()&&q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(q+=8),this._applyMinimumContrast(A,de,M.ansi[q],oe,Ee,void 0)||Z.push(`xterm-fg-${q}`);break;case 50331648:const le=u.channels.toColor(q>>16&255,q>>8&255,255&q);this._applyMinimumContrast(A,de,le,oe,Ee,ke)||this._addStyle(A,`color:#${L(q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(A,de,M.foreground,oe,Ee,ke)||ze&&Z.push(`xterm-fg-${c.INVERTED_DEFAULT_COLOR}`)}Z.length&&(A.className=Z.join(" "),Z.length=0),vt||ue||te?A.textContent=W:I++,G!==this.defaultSpacing&&(A.style.letterSpacing=`${G}px`),H.push(A),ae=ge}return A&&I&&(A.textContent=W),H}_applyMinimumContrast(g,x,y,b,E,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.treatGlyphAsBackgroundColor)(b.getCode()))return!1;const k=this._getContrastCache(b);let D;if(E||R||(D=k.getColor(x.rgba,y.rgba)),D===void 0){const T=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);D=u.color.ensureContrastRatio(E||x,R||y,T),k.setColor((E||x).rgba,(R||y).rgba,D??null)}return!!D&&(this._addStyle(g,`color:${D.css}`),!0)}_getContrastCache(g){return g.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(g,x){g.setAttribute("style",`${g.getAttribute("style")||""}${x};`)}_isCellInSelection(g,x){const y=this._selectionStart,b=this._selectionEnd;return!(!y||!b)&&(this._columnSelectMode?y[0]<=b[0]?g>=y[0]&&x>=y[1]&&g<b[0]&&x<=b[1]:g<y[0]&&x>=y[1]&&g>=b[0]&&x<=b[1]:x>y[1]&&x<b[1]||y[1]===b[1]&&x===y[1]&&g>=y[0]&&g<b[0]||y[1]<b[1]&&x===b[1]&&g<b[0]||y[1]<b[1]&&x===y[1]&&g>=y[0])}};function L(g,x,y){for(;g.length<y;)g=x+g;return g}i.DomRendererRowFactory=m=f([_(1,n.ICharacterJoinerService),_(2,C.IOptionsService),_(3,n.ICoreBrowserService),_(4,C.ICoreService),_(5,C.IDecorationService),_(6,n.IThemeService)],m)},2550:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=o.createElement("span");_.classList.add("xterm-char-measure-element");const c=o.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontWeight="bold";const p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";const w=o.createElement("span");w.classList.add("xterm-char-measure-element"),w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[_,c,p,w],this._container.appendChild(_),this._container.appendChild(c),this._container.appendChild(p),this._container.appendChild(w),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,f,_,c){o===this._font&&f===this._fontSize&&_===this._weight&&c===this._weightBold||(this._font=o,this._fontSize=f,this._weight=_,this._weightBold=c,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${c}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${c}`,this.clear())}get(o,f,_){let c=0;if(!f&&!_&&o.length===1&&(c=o.charCodeAt(0))<256){if(this._flat[c]!==-9999)return this._flat[c];const C=this._measure(o,0);return C>0&&(this._flat[c]=C),C}let p=o;f&&(p+="B"),_&&(p+="I");let w=this._holey.get(p);if(w===void 0){let C=0;f&&(C|=1),_&&(C|=2),w=this._measure(o,C),w>0&&this._holey.set(p,w)}return w}_measure(o,f){const _=this._measureElements[f];return _.textContent=o.repeat(32),_.offsetWidth/32}}},2223:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(S,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,c,p,w){return c===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(C){return 57344<=C&&C<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(c){return 9472<=c&&c<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,c,p=0){return(_-(2*Math.round(c)-p))%(2*Math.round(c))}},6052:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,c,p,w=!1){if(this.selectionStart=c,this.selectionEnd=p,!c||!p||c[0]===p[0]&&c[1]===p[1])return void this.clear();const C=_.buffers.active.ydisp,u=c[1]-C,n=p[1]-C,a=Math.max(u,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=c[0],this.endCol=p[0])}isCellSelected(_,c,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?c>=this.startCol&&p>=this.viewportCappedStartRow&&c<this.endCol&&p<=this.viewportCappedEndRow:c<this.startCol&&p>=this.viewportCappedStartRow&&c>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,f=this.selectionEnd;return!(!o||!f)&&(o[1]>f[1]||o[1]===f[1]&&o[0]>f[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(S,i,o){var f=this&&this.__decorate||function(l,h,m,L){var g,x=arguments.length,y=x<3?h:L===null?L=Object.getOwnPropertyDescriptor(h,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,h,m,L);else for(var b=l.length-1;b>=0;b--)(g=l[b])&&(y=(x<3?g(y):x>3?g(h,m,y):g(h,m))||y);return x>3&&y&&Object.defineProperty(h,m,y),y},_=this&&this.__param||function(l,h){return function(m,L){h(m,L,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const c=o(2585),p=o(8460),w=o(844);let C=i.CharSizeService=class extends w.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,h,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new a(this._optionsService))}catch{this._measureStrategy=this.register(new n(l,h,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};i.CharSizeService=C=f([_(2,c.IOptionsService)],C);class u extends w.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(h,m){h!==void 0&&h>0&&m!==void 0&&m>0&&(this._result.width=h,this._result.height=m)}}class n extends u{constructor(h,m,L){super(),this._document=h,this._parentElement=m,this._optionsService=L,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class a extends u{constructor(h){super(),this._optionsService=h,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const m=this._ctx.measureText("W");if(!("width"in m&&"fontBoundingBoxAscent"in m&&"fontBoundingBoxDescent"in m))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const h=this._ctx.measureText("W");return this._validateAndSet(h.width,h.fontBoundingBoxAscent+h.fontBoundingBoxDescent),this._result}}},4269:function(S,i,o){var f=this&&this.__decorate||function(a,l,h,m){var L,g=arguments.length,x=g<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,l,h,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(g<3?L(x):g>3?L(l,h,x):L(l,h))||x);return g>3&&x&&Object.defineProperty(l,h,x),x},_=this&&this.__param||function(a,l){return function(h,m){l(h,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const c=o(3734),p=o(643),w=o(511),C=o(2585);class u extends c.AttributeData{constructor(l,h,m){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=h,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let n=i.CharacterJoinerService=class wf{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(l){const h={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(h),h.id}deregister(l){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===l)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(l);if(!h||h.length===0)return[];const m=[],L=h.translateToString(!0);let g=0,x=0,y=0,b=h.getFg(0),E=h.getBg(0);for(let R=0;R<h.getTrimmedLength();R++)if(h.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==E){if(R-g>1){const k=this._getJoinedRanges(L,y,x,h,g);for(let D=0;D<k.length;D++)m.push(k[D])}g=R,y=x,b=this._workCell.fg,E=this._workCell.bg}x+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-g>1){const R=this._getJoinedRanges(L,y,x,h,g);for(let k=0;k<R.length;k++)m.push(R[k])}return m}_getJoinedRanges(l,h,m,L,g){const x=l.substring(h,m);let y=[];try{y=this._characterJoiners[0].handler(x)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const E=this._characterJoiners[b].handler(x);for(let R=0;R<E.length;R++)wf._mergeRanges(y,E[R])}catch(E){console.error(E)}return this._stringRangesToCellRanges(y,L,g),y}_stringRangesToCellRanges(l,h,m){let L=0,g=!1,x=0,y=l[L];if(y){for(let b=m;b<this._bufferService.cols;b++){const E=h.getWidth(b),R=h.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!g&&y[0]<=x&&(y[0]=b,g=!0),y[1]<=x){if(y[1]=b,y=l[++L],!y)break;y[0]<=x?(y[0]=b,g=!0):g=!1}x+=R}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(l,h){let m=!1;for(let L=0;L<l.length;L++){const g=l[L];if(m){if(h[1]<=g[0])return l[L-1][1]=h[1],l;if(h[1]<=g[1])return l[L-1][1]=Math.max(h[1],g[1]),l.splice(L,1),l;l.splice(L,1),L--}else{if(h[1]<=g[0])return l.splice(L,0,h),l;if(h[1]<=g[1])return g[0]=Math.min(h[0],g[0]),l;h[0]<g[1]&&(g[0]=Math.min(h[0],g[0]),m=!0)}}return m?l[l.length-1][1]=h[1]:l.push(h),l}};i.CharacterJoinerService=n=f([_(0,C.IBufferService)],n)},5114:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=o(844),_=o(8460),c=o(3656);class p extends f.Disposable{constructor(u,n,a){super(),this._textarea=u,this._window=n,this.mainDocument=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new w(this._window),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new _.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(l=>this._screenDprMonitor.setWindow(l))),this.register((0,_.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(u){this._window!==u&&(this._window=u,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=p;class w extends f.Disposable{constructor(u){super(),this._parentWindow=u,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(u){this._parentWindow=u,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,c.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=o(844);class _ extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{const w=this.linkProviders.indexOf(p);w!==-1&&this.linkProviders.splice(w,1)}}}}i.LinkProviderService=_},8934:function(S,i,o){var f=this&&this.__decorate||function(C,u,n,a){var l,h=arguments.length,m=h<3?u:a===null?a=Object.getOwnPropertyDescriptor(u,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(C,u,n,a);else for(var L=C.length-1;L>=0;L--)(l=C[L])&&(m=(h<3?l(m):h>3?l(u,n,m):l(u,n))||m);return h>3&&m&&Object.defineProperty(u,n,m),m},_=this&&this.__param||function(C,u){return function(n,a){u(n,a,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const c=o(4725),p=o(9806);let w=i.MouseService=class{constructor(C,u){this._renderService=C,this._charSizeService=u}getCoords(C,u,n,a,l){return(0,p.getCoords)(window,C,u,n,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(C,u){const n=(0,p.getCoordsRelativeToElement)(window,C,u);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};i.MouseService=w=f([_(0,c.IRenderService),_(1,c.ICharSizeService)],w)},3230:function(S,i,o){var f=this&&this.__decorate||function(l,h,m,L){var g,x=arguments.length,y=x<3?h:L===null?L=Object.getOwnPropertyDescriptor(h,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,h,m,L);else for(var b=l.length-1;b>=0;b--)(g=l[b])&&(y=(x<3?g(y):x>3?g(h,m,y):g(h,m))||y);return x>3&&y&&Object.defineProperty(h,m,y),y},_=this&&this.__param||function(l,h){return function(m,L){h(m,L,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const c=o(6193),p=o(4725),w=o(8460),C=o(844),u=o(7226),n=o(2585);let a=i.RenderService=class extends C.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(l,h,m,L,g,x,y,b){super(),this._rowCount=l,this._charSizeService=L,this._renderer=this.register(new C.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._observerDisposable=this.register(new C.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new c.RenderDebouncer((E,R)=>this._renderRows(E,R),y),this.register(this._renderDebouncer),this.register(y.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(x.onResize(()=>this._fullRefresh())),this.register(x.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(m.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(m.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(x.cols,x.rows),this._fullRefresh()})),this.register(m.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(x.buffer.y,x.buffer.y,!0))),this.register(b.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(y.window,h),this.register(y.onWindowChange(E=>this._registerIntersectionObserver(E,h)))}_registerIntersectionObserver(l,h){if("IntersectionObserver"in l){const m=new l.IntersectionObserver(L=>this._handleIntersectionChange(L[L.length-1]),{threshold:0});m.observe(h),this._observerDisposable.value=(0,C.toDisposable)(()=>m.disconnect())}}_handleIntersectionChange(l){this._isPaused=l.isIntersecting===void 0?l.intersectionRatio===0:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(l,h,m=!1){this._isPaused?this._needsFullRefresh=!0:(m||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,h,this._rowCount))}_renderRows(l,h){this._renderer.value&&(l=Math.min(l,this._rowCount-1),h=Math.min(h,this._rowCount-1),this._renderer.value.renderRows(l,h),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:l,end:h}),this._onRender.fire({start:l,end:h}),this._isNextRenderRedrawOnly=!0)}resize(l,h){this._rowCount=h,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(l){this._renderer.value=l,this._renderer.value&&(this._renderer.value.onRequestRedraw(h=>this.refreshRows(h.start,h.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(l){return this._renderDebouncer.addRefreshCallback(l)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(l,h){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(l,h)):this._renderer.value.handleResize(l,h),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(l,h,m){this._selectionState.start=l,this._selectionState.end=h,this._selectionState.columnSelectMode=m,this._renderer.value?.handleSelectionChanged(l,h,m)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};i.RenderService=a=f([_(2,n.IOptionsService),_(3,p.ICharSizeService),_(4,n.IDecorationService),_(5,n.IBufferService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],a)},9312:function(S,i,o){var f=this&&this.__decorate||function(y,b,E,R){var k,D=arguments.length,T=D<3?b:R===null?R=Object.getOwnPropertyDescriptor(b,E):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(y,b,E,R);else for(var N=y.length-1;N>=0;N--)(k=y[N])&&(T=(D<3?k(T):D>3?k(b,E,T):k(b,E))||T);return D>3&&T&&Object.defineProperty(b,E,T),T},_=this&&this.__param||function(y,b){return function(E,R){b(E,R,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const c=o(9806),p=o(9504),w=o(456),C=o(4725),u=o(8460),n=o(844),a=o(6114),l=o(4841),h=o(511),m=o(2585),L="",g=new RegExp(L,"g");let x=i.SelectionService=class extends n.Disposable{constructor(y,b,E,R,k,D,T,N,j){super(),this._element=y,this._screenElement=b,this._linkifier=E,this._bufferService=R,this._coreService=k,this._mouseService=D,this._optionsService=T,this._renderService=N,this._coreBrowserService=j,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new u.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new u.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new u.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=H=>this._handleMouseMove(H),this._mouseUpListener=H=>this._handleMouseUp(H),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(H=>this._handleTrim(H)),this.register(this._bufferService.buffers.onBufferActivate(H=>this._handleBufferActivate(H))),this.enable(),this._model=new w.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!y||!b||y[0]===b[0]&&y[1]===b[1])}get selectionText(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!y||!b)return"";const E=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(y[0]===b[0])return"";const k=y[0]<b[0]?y[0]:b[0],D=y[0]<b[0]?b[0]:y[0];for(let T=y[1];T<=b[1];T++){const N=E.translateBufferLineToString(T,!0,k,D);R.push(N)}}else{const k=y[1]===b[1]?b[0]:void 0;R.push(E.translateBufferLineToString(y[1],!0,y[0],k));for(let D=y[1]+1;D<=b[1]-1;D++){const T=E.lines.get(D),N=E.translateBufferLineToString(D,!0);T?.isWrapped?R[R.length-1]+=N:R.push(N)}if(y[1]!==b[1]){const D=E.lines.get(b[1]),T=E.translateBufferLineToString(b[1],!0,0,b[0]);D&&D.isWrapped?R[R.length-1]+=T:R.push(T)}}return R.map(k=>k.replace(g," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const b=this._getMouseBufferCoords(y),E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(E&&R&&b)&&this._areCoordsInSelection(b,E,R)}isCellInSelection(y,b){const E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!E||!R)&&this._areCoordsInSelection([y,b],E,R)}_areCoordsInSelection(y,b,E){return y[1]>b[1]&&y[1]<E[1]||b[1]===E[1]&&y[1]===b[1]&&y[0]>=b[0]&&y[0]<E[0]||b[1]<E[1]&&y[1]===E[1]&&y[0]<E[0]||b[1]<E[1]&&y[1]===b[1]&&y[0]>=b[0]}_selectWordAtCursor(y,b){const E=this._linkifier.currentLink?.link?.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(y);return!!R&&(this._selectWordAt(R,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,b){this._model.clearSelection(),y=Math.max(y,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const b=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(y){let b=(0,c.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const E=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=E?0:(b>E&&(b-=E),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(y){return a.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const b=this._getMouseBufferCoords(y);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(y){return y.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){const R=E.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const b=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const E=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){const R=(0,p.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,E=!(!y||!b||y[0]===b[0]&&y[1]===b[1]);E?y&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,b,E)):this._oldHasSelection&&this._fireOnSelectionChange(y,b,E)}_fireOnSelectionChange(y,b,E){this._oldSelectionStart=y,this._oldSelectionEnd=b,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(y,b){let E=b;for(let R=0;b>=R;R++){const k=y.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:k>1&&b!==R&&(E+=k-1)}return E}setSelection(y,b,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,b],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,b,E=!0,R=!0){if(y[0]>=this._bufferService.cols)return;const k=this._bufferService.buffer,D=k.lines.get(y[1]);if(!D)return;const T=k.translateBufferLineToString(y[1],!1);let N=this._convertViewportColToCharacterIndex(D,y[0]),j=N;const H=y[0]-N;let B=0,M=0,A=0,O=0;if(T.charAt(N)===" "){for(;N>0&&T.charAt(N-1)===" ";)N--;for(;j<T.length&&T.charAt(j+1)===" ";)j++}else{let z=y[0],X=y[0];D.getWidth(z)===0&&(B++,z--),D.getWidth(X)===2&&(M++,X++);const K=D.getString(X).length;for(K>1&&(O+=K-1,j+=K-1);z>0&&N>0&&!this._isCharWordSeparator(D.loadCell(z-1,this._workCell));){D.loadCell(z-1,this._workCell);const $=this._workCell.getChars().length;this._workCell.getWidth()===0?(B++,z--):$>1&&(A+=$-1,N-=$-1),N--,z--}for(;X<D.length&&j+1<T.length&&!this._isCharWordSeparator(D.loadCell(X+1,this._workCell));){D.loadCell(X+1,this._workCell);const $=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,X++):$>1&&(O+=$-1,j+=$-1),j++,X++}}j++;let I=N+H-B+A,W=Math.min(this._bufferService.cols,j-N+B+M-A-O);if(b||T.slice(N,j).trim()!==""){if(E&&I===0&&D.getCodePoint(0)!==32){const z=k.lines.get(y[1]-1);if(z&&D.isWrapped&&z.getCodePoint(this._bufferService.cols-1)!==32){const X=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(X){const K=this._bufferService.cols-X.start;I-=K,W+=K}}}if(R&&I+W===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const z=k.lines.get(y[1]+1);if(z?.isWrapped&&z.getCodePoint(0)!==32){const X=this._getWordAt([0,y[1]+1],!1,!1,!0);X&&(W+=X.length)}}return{start:I,length:W}}}_selectWordAt(y,b){const E=this._getWordAt(y,b);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[E.start,y[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(y){const b=this._getWordAt(y,!0);if(b){let E=y[1];for(;b.start<0;)b.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,E]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const b=this._bufferService.buffer.getWrappedRangeForLine(y),E={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(E,this._bufferService.cols)}};i.SelectionService=x=f([_(3,m.IBufferService),_(4,m.ICoreService),_(5,C.IMouseService),_(6,m.IOptionsService),_(7,C.IRenderService),_(8,C.ICoreBrowserService)],x)},4725:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=o(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(S,i,o){var f=this&&this.__decorate||function(x,y,b,E){var R,k=arguments.length,D=k<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(x,y,b,E);else for(var T=x.length-1;T>=0;T--)(R=x[T])&&(D=(k<3?R(D):k>3?R(y,b,D):R(y,b))||D);return k>3&&D&&Object.defineProperty(y,b,D),D},_=this&&this.__param||function(x,y){return function(b,E){y(b,E,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const c=o(7239),p=o(8055),w=o(8460),C=o(844),u=o(2585),n=p.css.toColor("#ffffff"),a=p.css.toColor("#000000"),l=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let b=0;b<216;b++){const E=y[b/36%6|0],R=y[b/6%6|0],k=y[b%6];x.push({css:p.channels.toCss(E,R,k),rgba:p.channels.toRgba(E,R,k)})}for(let b=0;b<24;b++){const E=8+10*b;x.push({css:p.channels.toCss(E,E,E),rgba:p.channels.toRgba(E,E,E)})}return x})());let L=i.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new c.ColorContrastCache,this._halfContrastCache=new c.ColorContrastCache,this._onChangeColors=this.register(new w.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:a,cursor:l,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:p.color.blend(a,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:p.color.blend(a,m),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(x={}){const y=this._colors;if(y.foreground=g(x.foreground,n),y.background=g(x.background,a),y.cursor=g(x.cursor,l),y.cursorAccent=g(x.cursorAccent,h),y.selectionBackgroundTransparent=g(x.selectionBackground,m),y.selectionBackgroundOpaque=p.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=g(x.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=p.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=x.selectionForeground?g(x.selectionForeground,p.NULL_COLOR):void 0,y.selectionForeground===p.NULL_COLOR&&(y.selectionForeground=void 0),p.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=p.color.opacity(y.selectionBackgroundTransparent,.3)),p.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=p.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=i.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=g(x.black,i.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=g(x.red,i.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=g(x.green,i.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=g(x.yellow,i.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=g(x.blue,i.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=g(x.magenta,i.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=g(x.cyan,i.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=g(x.white,i.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=g(x.brightBlack,i.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=g(x.brightRed,i.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=g(x.brightGreen,i.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=g(x.brightYellow,i.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=g(x.brightBlue,i.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=g(x.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=g(x.brightCyan,i.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=g(x.brightWhite,i.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const b=Math.min(y.ansi.length-16,x.extendedAnsi.length);for(let E=0;E<b;E++)y.ansi[E+16]=g(x.extendedAnsi[E],i.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function g(x,y){if(x!==void 0)try{return p.css.toColor(x)}catch{}return y}i.ThemeService=L=f([_(0,u.IOptionsService)],L)},6349:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=o(8460),_=o(844);class c extends _.Disposable{constructor(w){super(),this._maxLength=w,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(w){if(this._maxLength===w)return;const C=new Array(w);for(let u=0;u<Math.min(w,this.length);u++)C[u]=this._array[this._getCyclicIndex(u)];this._array=C,this._maxLength=w,this._startIndex=0}get length(){return this._length}set length(w){if(w>this._length)for(let C=this._length;C<w;C++)this._array[C]=void 0;this._length=w}get(w){return this._array[this._getCyclicIndex(w)]}set(w,C){this._array[this._getCyclicIndex(w)]=C}push(w){this._array[this._getCyclicIndex(this._length)]=w,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(w,C,...u){if(C){for(let n=w;n<this._length-C;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+C)];this._length-=C,this.onDeleteEmitter.fire({index:w,amount:C})}for(let n=this._length-1;n>=w;n--)this._array[this._getCyclicIndex(n+u.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<u.length;n++)this._array[this._getCyclicIndex(w+n)]=u[n];if(u.length&&this.onInsertEmitter.fire({index:w,amount:u.length}),this._length+u.length>this._maxLength){const n=this._length+u.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=u.length}trimStart(w){w>this._length&&(w=this._length),this._startIndex+=w,this._length-=w,this.onTrimEmitter.fire(w)}shiftElements(w,C,u){if(!(C<=0)){if(w<0||w>=this._length)throw new Error("start argument out of range");if(w+u<0)throw new Error("Cannot shift elements in list beyond index 0");if(u>0){for(let a=C-1;a>=0;a--)this.set(w+a+u,this.get(w+a));const n=w+C+u-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<C;n++)this.set(w+n+u,this.get(w+n))}}_getCyclicIndex(w){return(this._startIndex+w)%this._maxLength}}i.CircularList=c},1439:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(f,_=5){if(typeof f!="object")return f;const c=Array.isArray(f)?[]:{};for(const p in f)c[p]=_<=1?f[p]:f[p]&&o(f[p],_-1);return c}},8055:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,c=0;var p,w,C,u,n;function a(h){const m=h.toString(16);return m.length<2?"0"+m:m}function l(h,m){return h<m?(m+.05)/(h+.05):(h+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(m,L,g,x){return x!==void 0?`#${a(m)}${a(L)}${a(g)}${a(x)}`:`#${a(m)}${a(L)}${a(g)}`},h.toRgba=function(m,L,g,x=255){return(m<<24|L<<16|g<<8|x)>>>0},h.toColor=function(m,L,g,x){return{css:h.toCss(m,L,g,x),rgba:h.toRgba(m,L,g,x)}}}(p||(i.channels=p={})),function(h){function m(L,g){return c=Math.round(255*g),[o,f,_]=n.toChannels(L.rgba),{css:p.toCss(o,f,_,c),rgba:p.toRgba(o,f,_,c)}}h.blend=function(L,g){if(c=(255&g.rgba)/255,c===1)return{css:g.css,rgba:g.rgba};const x=g.rgba>>24&255,y=g.rgba>>16&255,b=g.rgba>>8&255,E=L.rgba>>24&255,R=L.rgba>>16&255,k=L.rgba>>8&255;return o=E+Math.round((x-E)*c),f=R+Math.round((y-R)*c),_=k+Math.round((b-k)*c),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},h.isOpaque=function(L){return(255&L.rgba)==255},h.ensureContrastRatio=function(L,g,x){const y=n.ensureContrastRatio(L.rgba,g.rgba,x);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},h.opaque=function(L){const g=(255|L.rgba)>>>0;return[o,f,_]=n.toChannels(g),{css:p.toCss(o,f,_),rgba:g}},h.opacity=m,h.multiplyOpacity=function(L,g){return c=255&L.rgba,m(L,c*g/255)},h.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(i.color=w={})),function(h){let m,L;try{const g=document.createElement("canvas");g.width=1,g.height=1;const x=g.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",L=m.createLinearGradient(0,0,1,1))}catch{}h.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return o=parseInt(g.slice(1,2).repeat(2),16),f=parseInt(g.slice(2,3).repeat(2),16),_=parseInt(g.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(g.slice(1,2).repeat(2),16),f=parseInt(g.slice(2,3).repeat(2),16),_=parseInt(g.slice(3,4).repeat(2),16),c=parseInt(g.slice(4,5).repeat(2),16),p.toColor(o,f,_,c);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const x=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return o=parseInt(x[1]),f=parseInt(x[2]),_=parseInt(x[3]),c=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),p.toColor(o,f,_,c);if(!m||!L)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=L,m.fillStyle=g,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,c]=m.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,c),css:g}}}(C||(i.css=C={})),function(h){function m(L,g,x){const y=L/255,b=g/255,E=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}h.relativeLuminance=function(L){return m(L>>16&255,L>>8&255,255&L)},h.relativeLuminance2=m}(u||(i.rgb=u={})),function(h){function m(g,x,y){const b=g>>24&255,E=g>>16&255,R=g>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;N<y&&(k>0||D>0||T>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}function L(g,x,y){const b=g>>24&255,E=g>>16&255,R=g>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;N<y&&(k<255||D<255||T<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}h.blend=function(g,x){if(c=(255&x)/255,c===1)return x;const y=x>>24&255,b=x>>16&255,E=x>>8&255,R=g>>24&255,k=g>>16&255,D=g>>8&255;return o=R+Math.round((y-R)*c),f=k+Math.round((b-k)*c),_=D+Math.round((E-D)*c),p.toRgba(o,f,_)},h.ensureContrastRatio=function(g,x,y){const b=u.relativeLuminance(g>>8),E=u.relativeLuminance(x>>8);if(l(b,E)<y){if(E<b){const D=m(g,x,y),T=l(b,u.relativeLuminance(D>>8));if(T<y){const N=L(g,x,y);return T>l(b,u.relativeLuminance(N>>8))?D:N}return D}const R=L(g,x,y),k=l(b,u.relativeLuminance(R>>8));if(k<y){const D=m(g,x,y);return k>l(b,u.relativeLuminance(D>>8))?R:D}return R}},h.reduceLuminance=m,h.increaseLuminance=L,h.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},8969:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=o(844),_=o(2585),c=o(4348),p=o(7866),w=o(744),C=o(7302),u=o(6975),n=o(8460),a=o(1753),l=o(1480),h=o(7994),m=o(9282),L=o(5435),g=o(5981),x=o(2660);let y=!1;class b extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(R=>{this._onScrollApi?.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const k in R)this.optionsService.options[k]=R[k]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new c.InstantiationService,this.optionsService=this.register(new C.OptionsService(R)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(w.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(u.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new L.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new g.WriteBuffer((k,D)=>this._inputHandler.parse(k,D))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,k){this._writeBuffer.write(R,k)}writeSync(R,k){this._logService.logLevel<=_.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(R,k)}input(R,k=!0){this.coreService.triggerDataEvent(R,k)}resize(R,k){isNaN(R)||isNaN(k)||(R=Math.max(R,w.MINIMUM_COLS),k=Math.max(k,w.MINIMUM_ROWS),this._bufferService.resize(R,k))}scroll(R,k=!1){this._bufferService.scroll(R,k)}scrollLines(R,k,D){this._bufferService.scrollLines(R,k,D)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const k=R-this._bufferService.buffer.ydisp;k!==0&&this.scrollLines(k)}registerEscHandler(R,k){return this._inputHandler.registerEscHandler(R,k)}registerDcsHandler(R,k){return this._inputHandler.registerDcsHandler(R,k)}registerCsiHandler(R,k){return this._inputHandler.registerCsiHandler(R,k)}registerOscHandler(R,k){return this._inputHandler.registerOscHandler(R,k)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const k=this.optionsService.rawOptions.windowsPty;k&&k.buildNumber!==void 0&&k.buildNumber!==void 0?R=k.backend==="conpty"&&k.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const k of R)k.dispose()})}}}i.CoreTerminal=b},8460:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let c=0;c<this._listeners.length;c++)_.push(this._listeners[c]);for(let c=0;c<_.length;c++)_[c].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},5435:function(S,i,o){var f=this&&this.__decorate||function(B,M,A,O){var I,W=arguments.length,z=W<3?M:O===null?O=Object.getOwnPropertyDescriptor(M,A):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(B,M,A,O);else for(var X=B.length-1;X>=0;X--)(I=B[X])&&(z=(W<3?I(z):W>3?I(M,A,z):I(M,A))||z);return W>3&&z&&Object.defineProperty(M,A,z),z},_=this&&this.__param||function(B,M){return function(A,O){M(A,O,B)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const c=o(2584),p=o(7116),w=o(2015),C=o(844),u=o(482),n=o(8437),a=o(8460),l=o(643),h=o(511),m=o(3734),L=o(2585),g=o(1480),x=o(6242),y=o(6351),b=o(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function k(B,M){if(B>24)return M.setWinLines||!1;switch(B){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var D;(function(B){B[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(i.WindowsOptionsReportType=D={}));let T=0;class N extends C.Disposable{getAttrData(){return this._curAttrData}constructor(M,A,O,I,W,z,X,K,$=new w.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=A,this._coreService=O,this._logService=I,this._optionsService=W,this._oscLinkService=z,this._coreMouseService=X,this._unicodeService=K,this._parser=$,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new u.StringToUtf32,this._utf8Decoder=new u.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new j(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(P=>this._activeBuffer=P.activeBuffer)),this._parser.setCsiHandlerFallback((P,U)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(P),params:U.toArray()})}),this._parser.setEscHandlerFallback(P=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(P)})}),this._parser.setExecuteHandlerFallback(P=>{this._logService.debug("Unknown EXECUTE code: ",{code:P})}),this._parser.setOscHandlerFallback((P,U,G)=>{this._logService.debug("Unknown OSC code: ",{identifier:P,action:U,data:G})}),this._parser.setDcsHandlerFallback((P,U,G)=>{U==="HOOK"&&(G=G.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(P),action:U,payload:G})}),this._parser.setPrintHandler((P,U,G)=>this.print(P,U,G)),this._parser.registerCsiHandler({final:"@"},P=>this.insertChars(P)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},P=>this.scrollLeft(P)),this._parser.registerCsiHandler({final:"A"},P=>this.cursorUp(P)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},P=>this.scrollRight(P)),this._parser.registerCsiHandler({final:"B"},P=>this.cursorDown(P)),this._parser.registerCsiHandler({final:"C"},P=>this.cursorForward(P)),this._parser.registerCsiHandler({final:"D"},P=>this.cursorBackward(P)),this._parser.registerCsiHandler({final:"E"},P=>this.cursorNextLine(P)),this._parser.registerCsiHandler({final:"F"},P=>this.cursorPrecedingLine(P)),this._parser.registerCsiHandler({final:"G"},P=>this.cursorCharAbsolute(P)),this._parser.registerCsiHandler({final:"H"},P=>this.cursorPosition(P)),this._parser.registerCsiHandler({final:"I"},P=>this.cursorForwardTab(P)),this._parser.registerCsiHandler({final:"J"},P=>this.eraseInDisplay(P,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},P=>this.eraseInDisplay(P,!0)),this._parser.registerCsiHandler({final:"K"},P=>this.eraseInLine(P,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},P=>this.eraseInLine(P,!0)),this._parser.registerCsiHandler({final:"L"},P=>this.insertLines(P)),this._parser.registerCsiHandler({final:"M"},P=>this.deleteLines(P)),this._parser.registerCsiHandler({final:"P"},P=>this.deleteChars(P)),this._parser.registerCsiHandler({final:"S"},P=>this.scrollUp(P)),this._parser.registerCsiHandler({final:"T"},P=>this.scrollDown(P)),this._parser.registerCsiHandler({final:"X"},P=>this.eraseChars(P)),this._parser.registerCsiHandler({final:"Z"},P=>this.cursorBackwardTab(P)),this._parser.registerCsiHandler({final:"`"},P=>this.charPosAbsolute(P)),this._parser.registerCsiHandler({final:"a"},P=>this.hPositionRelative(P)),this._parser.registerCsiHandler({final:"b"},P=>this.repeatPrecedingCharacter(P)),this._parser.registerCsiHandler({final:"c"},P=>this.sendDeviceAttributesPrimary(P)),this._parser.registerCsiHandler({prefix:">",final:"c"},P=>this.sendDeviceAttributesSecondary(P)),this._parser.registerCsiHandler({final:"d"},P=>this.linePosAbsolute(P)),this._parser.registerCsiHandler({final:"e"},P=>this.vPositionRelative(P)),this._parser.registerCsiHandler({final:"f"},P=>this.hVPosition(P)),this._parser.registerCsiHandler({final:"g"},P=>this.tabClear(P)),this._parser.registerCsiHandler({final:"h"},P=>this.setMode(P)),this._parser.registerCsiHandler({prefix:"?",final:"h"},P=>this.setModePrivate(P)),this._parser.registerCsiHandler({final:"l"},P=>this.resetMode(P)),this._parser.registerCsiHandler({prefix:"?",final:"l"},P=>this.resetModePrivate(P)),this._parser.registerCsiHandler({final:"m"},P=>this.charAttributes(P)),this._parser.registerCsiHandler({final:"n"},P=>this.deviceStatus(P)),this._parser.registerCsiHandler({prefix:"?",final:"n"},P=>this.deviceStatusPrivate(P)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},P=>this.softReset(P)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},P=>this.setCursorStyle(P)),this._parser.registerCsiHandler({final:"r"},P=>this.setScrollRegion(P)),this._parser.registerCsiHandler({final:"s"},P=>this.saveCursor(P)),this._parser.registerCsiHandler({final:"t"},P=>this.windowOptions(P)),this._parser.registerCsiHandler({final:"u"},P=>this.restoreCursor(P)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},P=>this.insertColumns(P)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},P=>this.deleteColumns(P)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},P=>this.selectProtected(P)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},P=>this.requestMode(P,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},P=>this.requestMode(P,!1)),this._parser.setExecuteHandler(c.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(c.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(c.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(c.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(c.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(c.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(c.C1.IND,()=>this.index()),this._parser.setExecuteHandler(c.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(c.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(P=>(this.setTitle(P),this.setIconName(P),!0))),this._parser.registerOscHandler(1,new x.OscHandler(P=>this.setIconName(P))),this._parser.registerOscHandler(2,new x.OscHandler(P=>this.setTitle(P))),this._parser.registerOscHandler(4,new x.OscHandler(P=>this.setOrReportIndexedColor(P))),this._parser.registerOscHandler(8,new x.OscHandler(P=>this.setHyperlink(P))),this._parser.registerOscHandler(10,new x.OscHandler(P=>this.setOrReportFgColor(P))),this._parser.registerOscHandler(11,new x.OscHandler(P=>this.setOrReportBgColor(P))),this._parser.registerOscHandler(12,new x.OscHandler(P=>this.setOrReportCursorColor(P))),this._parser.registerOscHandler(104,new x.OscHandler(P=>this.restoreIndexedColor(P))),this._parser.registerOscHandler(110,new x.OscHandler(P=>this.restoreFgColor(P))),this._parser.registerOscHandler(111,new x.OscHandler(P=>this.restoreBgColor(P))),this._parser.registerOscHandler(112,new x.OscHandler(P=>this.restoreCursorColor(P))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const P in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:P},()=>this.selectCharset("("+P)),this._parser.registerEscHandler({intermediates:")",final:P},()=>this.selectCharset(")"+P)),this._parser.registerEscHandler({intermediates:"*",final:P},()=>this.selectCharset("*"+P)),this._parser.registerEscHandler({intermediates:"+",final:P},()=>this.selectCharset("+"+P)),this._parser.registerEscHandler({intermediates:"-",final:P},()=>this.selectCharset("-"+P)),this._parser.registerEscHandler({intermediates:".",final:P},()=>this.selectCharset("."+P)),this._parser.registerEscHandler({intermediates:"/",final:P},()=>this.selectCharset("/"+P));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(P=>(this._logService.error("Parsing error: ",P),P)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new y.DcsHandler((P,U)=>this.requestStatusString(P,U)))}_preserveStack(M,A,O,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=O,this._parseStack.position=I}_logSlowResolvingAsync(M){this._logService.logLevel<=L.LogLevelEnum.WARN&&Promise.race([M,new Promise((A,O)=>setTimeout(()=>O("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,A){let O,I=this._activeBuffer.x,W=this._activeBuffer.y,z=0;const X=this._parseStack.paused;if(X){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(O),O;I=this._parseStack.cursorStartX,W=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>R&&(z=this._parseStack.position+R)}if(this._logService.logLevel<=L.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,P=>String.fromCharCode(P)).join("")}"`),typeof M=="string"?M.split("").map(P=>P.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(M.length,R))),X||this._dirtyRowTracker.clearRange(),M.length>R)for(let P=z;P<M.length;P+=R){const U=P+R<M.length?P+R:M.length,G=typeof M=="string"?this._stringDecoder.decode(M.substring(P,U),this._parseBuffer):this._utf8Decoder.decode(M.subarray(P,U),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,G))return this._preserveStack(I,W,G,P),this._logSlowResolvingAsync(O),O}else if(!X){const P=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,P))return this._preserveStack(I,W,P,0),this._logSlowResolvingAsync(O),O}this._activeBuffer.x===I&&this._activeBuffer.y===W||this._onCursorMove.fire();const K=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),$=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);$<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min($,this._bufferService.rows-1),Math.min(K,this._bufferService.rows-1))}print(M,A,O){let I,W;const z=this._charsetService.charset,X=this._optionsService.rawOptions.screenReaderMode,K=this._bufferService.cols,$=this._coreService.decPrivateModes.wraparound,P=this._coreService.modes.insertMode,U=this._curAttrData;let G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-A>0&&G.getWidth(this._activeBuffer.x-1)===2&&G.setCellFromCodepoint(this._activeBuffer.x-1,0,1,U);let Z=this._parser.precedingJoinState;for(let J=A;J<O;++J){if(I=M[J],I<127&&z){const ge=z[String.fromCharCode(I)];ge&&(I=ge.charCodeAt(0))}const ae=this._unicodeService.charProperties(I,Z);W=g.UnicodeService.extractWidth(ae);const ee=g.UnicodeService.extractShouldJoin(ae),ue=ee?g.UnicodeService.extractWidth(Z):0;if(Z=ae,X&&this._onA11yChar.fire((0,u.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+W-ue>K){if($){const ge=G;let oe=this._activeBuffer.x-ue;for(this._activeBuffer.x=ue,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ue>0&&G instanceof n.BufferLine&&G.copyCellsFrom(ge,oe,0,ue,!1);oe<K;)ge.setCellFromCodepoint(oe++,0,1,U)}else if(this._activeBuffer.x=K-1,W===2)continue}if(ee&&this._activeBuffer.x){const ge=G.getWidth(this._activeBuffer.x-1)?1:2;G.addCodepointToCell(this._activeBuffer.x-ge,I,W);for(let oe=W-ue;--oe>=0;)G.setCellFromCodepoint(this._activeBuffer.x++,0,0,U)}else if(P&&(G.insertCells(this._activeBuffer.x,W-ue,this._activeBuffer.getNullCell(U)),G.getWidth(K-1)===2&&G.setCellFromCodepoint(K-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,U)),G.setCellFromCodepoint(this._activeBuffer.x++,I,W,U),W>0)for(;--W;)G.setCellFromCodepoint(this._activeBuffer.x++,0,0,U)}this._parser.precedingJoinState=Z,this._activeBuffer.x<K&&O-A>0&&G.getWidth(this._activeBuffer.x)===0&&!G.hasContent(this._activeBuffer.x)&&G.setCellFromCodepoint(this._activeBuffer.x,0,1,U),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,A){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,A):this._parser.registerCsiHandler(M,O=>!k(O.params[0],this._optionsService.rawOptions.windowOptions)||A(O))}registerDcsHandler(M,A){return this._parser.registerDcsHandler(M,new y.DcsHandler(A))}registerEscHandler(M,A){return this._parser.registerEscHandler(M,A)}registerOscHandler(M,A){return this._parser.registerOscHandler(M,new x.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);M.hasWidth(this._activeBuffer.x)&&!M.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=M,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+A)}cursorUp(M){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const A=M.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=M.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=M.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const A=M.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,A,O,I=!1,W=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);z.replaceCells(A,O,this._activeBuffer.getNullCell(this._eraseAttrData()),W),I&&(z.isWrapped=!1)}_resetBufferLine(M,A=!1){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O&&(O.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),O.isWrapped=!1)}eraseInDisplay(M,A=!1){let O;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);O<this._bufferService.rows;O++)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowTracker.markDirty(O-1);O--;)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(M,A=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let A=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;A--;)this._activeBuffer.lines.splice(W-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let A=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;A--;)this._activeBuffer.lines.splice(O,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let A=M.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let A=M.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);I.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);I.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);I.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);I.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){const A=this._parser.precedingJoinState;if(!A)return!0;const O=M.params[0]||1,I=g.UnicodeService.extractWidth(A),W=this._activeBuffer.x-I,z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(W),X=new Uint32Array(z.length*O);let K=0;for(let P=0;P<z.length;){const U=z.codePointAt(P)||0;X[K++]=U,P+=U>65535?2:1}let $=K;for(let P=1;P<O;++P)X.copyWithin($,0,K),$+=K;return this.print(X,0,$),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,A){const O=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:W}=this._coreMouseService,z=this._coreService,{buffers:X,cols:K}=this._bufferService,{active:$,alt:P}=X,U=this._optionsService.rawOptions,G=ee=>ee?1:2,Z=M.params[0];return J=Z,ae=A?Z===2?4:Z===4?G(z.modes.insertMode):Z===12?3:Z===20?G(U.convertEol):0:Z===1?G(O.applicationCursorKeys):Z===3?U.windowOptions.setWinLines?K===80?2:K===132?1:0:0:Z===6?G(O.origin):Z===7?G(O.wraparound):Z===8?3:Z===9?G(I==="X10"):Z===12?G(U.cursorBlink):Z===25?G(!z.isCursorHidden):Z===45?G(O.reverseWraparound):Z===66?G(O.applicationKeypad):Z===67?4:Z===1e3?G(I==="VT200"):Z===1002?G(I==="DRAG"):Z===1003?G(I==="ANY"):Z===1004?G(O.sendFocus):Z===1005?4:Z===1006?G(W==="SGR"):Z===1015?4:Z===1016?G(W==="SGR_PIXELS"):Z===1048?1:Z===47||Z===1047||Z===1049?G($===P):Z===2004?G(O.bracketedPasteMode):0,z.triggerDataEvent(`${c.C0.ESC}[${A?"":"?"}${J};${ae}$y`),!0;var J,ae}_updateAttrColor(M,A,O,I,W){return A===2?(M|=50331648,M&=-16777216,M|=m.AttributeData.fromColorRGB([O,I,W])):A===5&&(M&=-50331904,M|=33554432|255&O),M}_extractColor(M,A,O){const I=[0,0,-1,0,0,0];let W=0,z=0;do{if(I[z+W]=M.params[A+z],M.hasSubParams(A+z)){const X=M.getSubParams(A+z);let K=0;do I[1]===5&&(W=1),I[z+K+1+W]=X[K];while(++K<X.length&&K+z+1+W<I.length);break}if(I[1]===5&&z+W>=2||I[1]===2&&z+W>=5)break;I[1]&&(W=1)}while(++z+A<M.length&&z+W<I.length);for(let X=2;X<I.length;++X)I[X]===-1&&(I[X]=0);switch(I[0]){case 38:O.fg=this._updateAttrColor(O.fg,I[1],I[3],I[4],I[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,I[1],I[3],I[4],I[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,I[1],I[3],I[4],I[5])}return z}_processUnderline(M,A){A.extended=A.extended.clone(),(!~M||M>5)&&(M=1),A.extended.underlineStyle=M,A.fg|=268435456,M===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(M){M.fg=n.DEFAULT_ATTR_DATA.fg,M.bg=n.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=M.length;let O;const I=this._curAttrData;for(let W=0;W<A;W++)O=M.params[W],O>=30&&O<=37?(I.fg&=-50331904,I.fg|=16777216|O-30):O>=40&&O<=47?(I.bg&=-50331904,I.bg|=16777216|O-40):O>=90&&O<=97?(I.fg&=-50331904,I.fg|=16777224|O-90):O>=100&&O<=107?(I.bg&=-50331904,I.bg|=16777224|O-100):O===0?this._processSGR0(I):O===1?I.fg|=134217728:O===3?I.bg|=67108864:O===4?(I.fg|=268435456,this._processUnderline(M.hasSubParams(W)?M.getSubParams(W)[0]:1,I)):O===5?I.fg|=536870912:O===7?I.fg|=67108864:O===8?I.fg|=1073741824:O===9?I.fg|=2147483648:O===2?I.bg|=134217728:O===21?this._processUnderline(2,I):O===22?(I.fg&=-134217729,I.bg&=-134217729):O===23?I.bg&=-67108865:O===24?(I.fg&=-268435457,this._processUnderline(0,I)):O===25?I.fg&=-536870913:O===27?I.fg&=-67108865:O===28?I.fg&=-1073741825:O===29?I.fg&=2147483647:O===39?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):O===49?(I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?W+=this._extractColor(M,W,I):O===53?I.bg|=1073741824:O===55?I.bg&=-1073741825:O===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):O===100?(I.fg&=-67108864,I.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${c.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[${A};${O}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const A=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[?${A};${O}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const A=M.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const O=A%2==1;return this._optionsService.options.cursorBlink=O,!0}setScrollRegion(M){const A=M.params[0]||1;let O;return(M.length<2||(O=M.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0}windowOptions(M){if(!k(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${c.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const A=[],O=M.split(";");for(;O.length>1;){const I=O.shift(),W=O.shift();if(/^\d+$/.exec(I)){const z=parseInt(I);if(H(z))if(W==="?")A.push({type:0,index:z});else{const X=(0,b.parseColor)(W);X&&A.push({type:1,index:z,color:X})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(M){const A=M.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(M,A){this._getCurrentLinkId()&&this._finishHyperlink();const O=M.split(":");let I;const W=O.findIndex(z=>z.startsWith("id="));return W!==-1&&(I=O[W].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,A){const O=M.split(";");for(let I=0;I<O.length&&!(A>=this._specialColors.length);++I,++A)if(O[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const W=(0,b.parseColor)(O[I]);W&&this._onColor.fire([{type:1,index:this._specialColors[A],color:W}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const A=[],O=M.split(";");for(let I=0;I<O.length;++I)if(/^\d+$/.exec(O[I])){const W=parseInt(O[I]);H(W)&&A.push({type:2,index:W})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(E[M[0]],p.CHARSETS[M[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new h.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const O=this._activeBuffer.ybase+this._activeBuffer.y+A,I=this._activeBuffer.lines.get(O);I&&(I.fill(M),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,A){const O=this._bufferService.buffer,I=this._optionsService.rawOptions;return(W=>(this._coreService.triggerDataEvent(`${c.C0.ESC}${W}${c.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${O.scrollTop+1};${O.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,A){this._dirtyRowTracker.markRangeDirty(M,A)}}i.InputHandler=N;let j=class{constructor(B){this._bufferService=B,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(B){B<this.start?this.start=B:B>this.end&&(this.end=B)}markRangeDirty(B,M){B>M&&(T=B,B=M,M=T),B<this.start&&(this.start=B),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function H(B){return 0<=B&&B<256}j=f([_(0,L.IBufferService)],j)},844:(S,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},1505:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,c,p){this._data[_]||(this._data[_]={}),this._data[_][c]=p}get(_,c){return this._data[_]?this._data[_][c]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,c,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(c,p,w)}get(f,_,c,p){return this._data.get(f,_)?.get(c,p)}clear(){this._data.clear()}}},6114:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(o=this._search(this._getKey(f)),this._array.splice(o,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const _=this._getKey(f);if(_===void 0||(o=this._search(_),o===-1)||this._getKey(this._array[o])!==_)return!1;do if(this._array[o]===f)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===_);return!1}*getKeyIterator(f){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===f)}forEachByKey(f,_){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do _(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===f)}values(){return[...this._array].values()}_search(f){let _=0,c=this._array.length-1;for(;c>=_;){let p=_+c>>1;const w=this._getKey(this._array[p]);if(w>f)c=p-1;else{if(!(w<f)){for(;p>0&&this._getKey(this._array[p-1])===f;)p--;return p}_=p+1}}return _}}},7226:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let C=0,u=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),u=Math.max(C,u),a=w.timeRemaining(),1.5*u>a)return n-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-C))}ms`),void this._start();n=a}this.clear()}}class c extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const C=Date.now()+w;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}i.PriorityTaskQueue=c,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:c,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=o(643);i.updateWindowsModeWrappedState=function(_){const c=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),p=c?.get(_.cols-1),w=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);w&&p&&(w.isWrapped=p[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&p[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){const c=new o;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}get underlineVariantOffset(){const c=(3758096384&this._ext)>>29;return c<0?4294967288^c:c}set underlineVariantOffset(c){this._ext&=536870911,this._ext|=c<<29&3758096384}constructor(c=0,p=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=o(6349),_=o(7226),c=o(3734),p=o(8437),w=o(4634),C=o(511),u=o(643),n=o(4863),a=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(l,h,m){this._hasScrollback=l,this._optionsService=h,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,h){return new p.BufferLine(this._bufferService.cols,this.getNullCell(l),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const h=l+this._optionsService.rawOptions.scrollback;return h>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:h}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=p.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,h){const m=this.getNullCell(p.DEFAULT_ATTR_DATA);let L=0;const g=this._getCorrectBufferLength(h);if(g>this.lines.maxLength&&(this.lines.maxLength=g),this.lines.length>0){if(this._cols<l)for(let y=0;y<this.lines.length;y++)L+=+this.lines.get(y).resize(l,m);let x=0;if(this._rows<h)for(let y=this._rows;y<h;y++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(l,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(l,m)));else for(let y=this._rows;y>h;y--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(g<this.lines.maxLength){const y=this.lines.length-g;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=g}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,h-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(l,h),this._cols>l))for(let x=0;x<this.lines.length;x++)L+=+this.lines.get(x).resize(l,m);this._cols=l,this._rows=h,this._memoryCleanupQueue.clear(),L>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,h){this._cols!==l&&(l>this._cols?this._reflowLarger(l,h):this._reflowSmaller(l,h))}_reflowLarger(l,h){const m=(0,w.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(m.length>0){const L=(0,w.reflowLargerCreateNewLayout)(this.lines,m);(0,w.reflowLargerApplyNewLayout)(this.lines,L.layout),this._reflowLargerAdjustViewport(l,h,L.countRemoved)}}_reflowLargerAdjustViewport(l,h,m){const L=this.getNullCell(p.DEFAULT_ATTR_DATA);let g=m;for(;g-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new p.BufferLine(l,L))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(l,h){const m=this.getNullCell(p.DEFAULT_ATTR_DATA),L=[];let g=0;for(let x=this.lines.length-1;x>=0;x--){let y=this.lines.get(x);if(!y||!y.isWrapped&&y.getTrimmedLength()<=l)continue;const b=[y];for(;y.isWrapped&&x>0;)y=this.lines.get(--x),b.unshift(y);const E=this.ybase+this.y;if(E>=x&&E<x+b.length)continue;const R=b[b.length-1].getTrimmedLength(),k=(0,w.reflowSmallerGetNewLineLengths)(b,this._cols,l),D=k.length-b.length;let T;T=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const N=[];for(let O=0;O<D;O++){const I=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);N.push(I)}N.length>0&&(L.push({start:x+b.length+g,newLines:N}),g+=N.length),b.push(...N);let j=k.length-1,H=k[j];H===0&&(j--,H=k[j]);let B=b.length-D-1,M=R;for(;B>=0;){const O=Math.min(M,H);if(b[j]===void 0)break;if(b[j].copyCellsFrom(b[B],M-O,H-O,O,!0),H-=O,H===0&&(j--,H=k[j]),M-=O,M===0){B--;const I=Math.max(B,0);M=(0,w.getWrappedLineTrimmedLength)(b,I,this._cols)}}for(let O=0;O<b.length;O++)k[O]<l&&b[O].setCell(k[O],m);let A=D-T;for(;A-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+g)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+h-1)}if(L.length>0){const x=[],y=[];for(let j=0;j<this.lines.length;j++)y.push(this.lines.get(j));const b=this.lines.length;let E=b-1,R=0,k=L[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+g);let D=0;for(let j=Math.min(this.lines.maxLength-1,b+g-1);j>=0;j--)if(k&&k.start>E+D){for(let H=k.newLines.length-1;H>=0;H--)this.lines.set(j--,k.newLines[H]);j++,x.push({index:E+1,amount:k.newLines.length}),D+=k.newLines.length,k=L[++R]}else this.lines.set(j,y[E--]);let T=0;for(let j=x.length-1;j>=0;j--)x[j].index+=T,this.lines.onInsertEmitter.fire(x[j]),T+=x[j].amount;const N=Math.max(0,b+g-this.lines.maxLength);N>0&&this.lines.onTrimEmitter.fire(N)}}translateBufferLineToString(l,h,m=0,L){const g=this.lines.get(l);return g?g.translateToString(h,m,L):""}getWrappedRangeForLine(l){let h=l,m=l;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:h,last:m}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===l&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const h=new n.Marker(l);return this.markers.push(h),h.register(this.lines.onTrim(m=>{h.line-=m,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(m=>{h.line>=m.index&&(h.line+=m.amount)})),h.register(this.lines.onDelete(m=>{h.line>=m.index&&h.line<m.index+m.amount&&h.dispose(),h.line>m.index&&(h.line-=m.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=o(3734),_=o(511),c=o(643),p=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let w=0;class C{constructor(n,a,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const h=a||_.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]);for(let m=0;m<n;++m)this.setCell(m,h);this.length=n}get(n){const a=this._data[3*n+0],l=2097151&a;return[this._data[3*n+1],2097152&a?this._combined[n]:l?(0,p.stringFromCodePoint)(l):"",a>>22,2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):l]}set(n,a){this._data[3*n+1]=a[c.CHAR_DATA_ATTR_INDEX],a[c.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=a[1],this._data[3*n+0]=2097152|n|a[c.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=a[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[c.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&a}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n]:2097151&a?(0,p.stringFromCodePoint)(2097151&a):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,a){return w=3*n,a.content=this._data[w+0],a.fg=this._data[w+1],a.bg=this._data[w+2],2097152&a.content&&(a.combinedData=this._combined[n]),268435456&a.bg&&(a.extended=this._extendedAttrs[n]),a}setCell(n,a){2097152&a.content&&(this._combined[n]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[n]=a.extended),this._data[3*n+0]=a.content,this._data[3*n+1]=a.fg,this._data[3*n+2]=a.bg}setCellFromCodepoint(n,a,l,h){268435456&h.bg&&(this._extendedAttrs[n]=h.extended),this._data[3*n+0]=a|l<<22,this._data[3*n+1]=h.fg,this._data[3*n+2]=h.bg}addCodepointToCell(n,a,l){let h=this._data[3*n+0];2097152&h?this._combined[n]+=(0,p.stringFromCodePoint)(a):2097151&h?(this._combined[n]=(0,p.stringFromCodePoint)(2097151&h)+(0,p.stringFromCodePoint)(a),h&=-2097152,h|=2097152):h=a|4194304,l&&(h&=-12582913,h|=l<<22),this._data[3*n+0]=h}insertCells(n,a,l){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length-n){const h=new _.CellData;for(let m=this.length-n-a-1;m>=0;--m)this.setCell(n+a+m,this.loadCell(n+m,h));for(let m=0;m<a;++m)this.setCell(n+m,l)}else for(let h=n;h<this.length;++h)this.setCell(h,l);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,l)}deleteCells(n,a,l){if(n%=this.length,a<this.length-n){const h=new _.CellData;for(let m=0;m<this.length-n-a;++m)this.setCell(n+m,this.loadCell(n+a+m,h));for(let m=this.length-a;m<this.length;++m)this.setCell(m,l)}else for(let h=n;h<this.length;++h)this.setCell(h,l);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,l)}replaceCells(n,a,l,h=!1){if(h)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodepoint(a,0,1,l);n<a&&n<this.length;)this.isProtected(n)||this.setCell(n,l),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,l),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a,0,1,l);n<a&&n<this.length;)this.setCell(n++,l)}resize(n,a){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const h=new Uint32Array(l);h.set(this._data),this._data=h}for(let h=this.length;h<n;++h)this.setCell(h,a)}else{this._data=this._data.subarray(0,l);const h=Object.keys(this._combined);for(let L=0;L<h.length;L++){const g=parseInt(h[L],10);g>=n&&delete this._combined[g]}const m=Object.keys(this._extendedAttrs);for(let L=0;L<m.length;L++){const g=parseInt(m[L],10);g>=n&&delete this._extendedAttrs[g]}}return this.length=n,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,a=!1){if(a)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,n);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const a in n._combined)this._combined[a]=n._combined[a];this._extendedAttrs={};for(const a in n._extendedAttrs)this._extendedAttrs[a]=n._extendedAttrs[a];this.isWrapped=n.isWrapped}clone(){const n=new C(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const a in this._combined)n._combined[a]=this._combined[a];for(const a in this._extendedAttrs)n._extendedAttrs[a]=this._extendedAttrs[a];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,a,l,h,m){const L=n._data;if(m)for(let x=h-1;x>=0;x--){for(let y=0;y<3;y++)this._data[3*(l+x)+y]=L[3*(a+x)+y];268435456&L[3*(a+x)+2]&&(this._extendedAttrs[l+x]=n._extendedAttrs[a+x])}else for(let x=0;x<h;x++){for(let y=0;y<3;y++)this._data[3*(l+x)+y]=L[3*(a+x)+y];268435456&L[3*(a+x)+2]&&(this._extendedAttrs[l+x]=n._extendedAttrs[a+x])}const g=Object.keys(n._combined);for(let x=0;x<g.length;x++){const y=parseInt(g[x],10);y>=a&&(this._combined[y-a+l]=n._combined[y])}}translateToString(n,a,l,h){a=a??0,l=l??this.length,n&&(l=Math.min(l,this.getTrimmedLength())),h&&(h.length=0);let m="";for(;a<l;){const L=this._data[3*a+0],g=2097151&L,x=2097152&L?this._combined[a]:g?(0,p.stringFromCodePoint)(g):c.WHITESPACE_CELL_CHAR;if(m+=x,h)for(let y=0;y<x.length;++y)h.push(a);a+=L>>22||1}return h&&h.push(a),m}}i.BufferLine=C},4841:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,f){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return f*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(S,i)=>{function o(f,_,c){if(_===f.length-1)return f[_].getTrimmedLength();const p=!f[_].hasContent(c-1)&&f[_].getWidth(c-1)===1,w=f[_+1].getWidth(0)===2;return p&&w?c-1:c}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,_,c,p,w){const C=[];for(let u=0;u<f.length-1;u++){let n=u,a=f.get(++n);if(!a.isWrapped)continue;const l=[f.get(u)];for(;n<f.length&&a.isWrapped;)l.push(a),a=f.get(++n);if(p>=u&&p<n){u+=l.length-1;continue}let h=0,m=o(l,h,_),L=1,g=0;for(;L<l.length;){const y=o(l,L,_),b=y-g,E=c-m,R=Math.min(b,E);l[h].copyCellsFrom(l[L],g,m,R,!1),m+=R,m===c&&(h++,m=0),g+=R,g===y&&(L++,g=0),m===0&&h!==0&&l[h-1].getWidth(c-1)===2&&(l[h].copyCellsFrom(l[h-1],c-1,m++,1,!1),l[h-1].setCell(c-1,w))}l[h].replaceCells(m,c,w);let x=0;for(let y=l.length-1;y>0&&(y>h||l[y].getTrimmedLength()===0);y--)x++;x>0&&(C.push(u+l.length-x),C.push(x)),u+=l.length-1}return C},i.reflowLargerCreateNewLayout=function(f,_){const c=[];let p=0,w=_[p],C=0;for(let u=0;u<f.length;u++)if(w===u){const n=_[++p];f.onDeleteEmitter.fire({index:u-C,amount:n}),u+=n-1,C+=n,w=_[++p]}else c.push(u);return{layout:c,countRemoved:C}},i.reflowLargerApplyNewLayout=function(f,_){const c=[];for(let p=0;p<_.length;p++)c.push(f.get(_[p]));for(let p=0;p<c.length;p++)f.set(p,c[p]);f.length=_.length},i.reflowSmallerGetNewLineLengths=function(f,_,c){const p=[],w=f.map((a,l)=>o(f,l,_)).reduce((a,l)=>a+l);let C=0,u=0,n=0;for(;n<w;){if(w-n<c){p.push(w-n);break}C+=c;const a=o(f,u,_);C>a&&(C-=a,u++);const l=f[u].getWidth(C-1)===2;l&&C--;const h=l?c-1:c;p.push(h),n+=h}return p},i.getWrappedLineTrimmedLength=o},5295:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=o(8460),_=o(844),c=o(9092);class p extends _.Disposable{constructor(C,u){super(),this._optionsService=C,this._bufferService=u,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new c.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new c.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,u){this._normal.resize(C,u),this._alt.resize(C,u),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}i.BufferSet=p},511:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(482),_=o(643),c=o(3734);class p extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const u=new p;return u.setFromCharData(C),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(C[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(C[_.CHAR_DATA_CHAR_INDEX].length===2){const n=C[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=C[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|C[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=C[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=C[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=o(8460),_=o(844);class c{get id(){return this._id}constructor(w){this.line=w,this.isDisposed=!1,this._disposables=[],this._id=c._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(w){return this._disposables.push(w),w}}i.Marker=c,c._nextId=1},7116:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(S,i)=>{var o,f,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(c){c.NUL="\0",c.SOH="",c.STX="",c.ETX="",c.EOT="",c.ENQ="",c.ACK="",c.BEL="\x07",c.BS="\b",c.HT="	",c.LF=`
`,c.VT="\v",c.FF="\f",c.CR="\r",c.SO="",c.SI="",c.DLE="",c.DC1="",c.DC2="",c.DC3="",c.DC4="",c.NAK="",c.SYN="",c.ETB="",c.CAN="",c.EM="",c.SUB="",c.ESC="\x1B",c.FS="",c.GS="",c.RS="",c.US="",c.SP=" ",c.DEL=""}(o||(i.C0=o={})),function(c){c.PAD="",c.HOP="",c.BPH="",c.NBH="",c.IND="",c.NEL="",c.SSA="",c.ESA="",c.HTS="",c.HTJ="",c.VTS="",c.PLD="",c.PLU="",c.RI="",c.SS2="",c.SS3="",c.DCS="",c.PU1="",c.PU2="",c.STS="",c.CCH="",c.MW="",c.SPA="",c.EPA="",c.SOS="",c.SGCI="",c.SCI="",c.CSI="",c.ST="",c.OSC="",c.PM="",c.APC=""}(f||(i.C1=f={})),function(c){c.ST=`${o.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=o(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(c,p,w,C){const u={type:0,cancel:!1,key:void 0},n=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?u.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?u.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?u.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(u.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:u.key=c.ctrlKey?"\b":f.C0.DEL,c.altKey&&(u.key=f.C0.ESC+u.key);break;case 9:if(c.shiftKey){u.key=f.C0.ESC+"[Z";break}u.key=f.C0.HT,u.cancel=!0;break;case 13:u.key=c.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,u.cancel=!0;break;case 27:u.key=f.C0.ESC,c.altKey&&(u.key=f.C0.ESC+f.C0.ESC),u.cancel=!0;break;case 37:if(c.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"D",u.key===f.C0.ESC+"[1;3D"&&(u.key=f.C0.ESC+(w?"b":"[1;5D"))):u.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(c.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"C",u.key===f.C0.ESC+"[1;3C"&&(u.key=f.C0.ESC+(w?"f":"[1;5C"))):u.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(c.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"A",w||u.key!==f.C0.ESC+"[1;3A"||(u.key=f.C0.ESC+"[1;5A")):u.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(c.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"B",w||u.key!==f.C0.ESC+"[1;3B"||(u.key=f.C0.ESC+"[1;5B")):u.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(u.key=f.C0.ESC+"[2~");break;case 46:u.key=n?f.C0.ESC+"[3;"+(n+1)+"~":f.C0.ESC+"[3~";break;case 36:u.key=n?f.C0.ESC+"[1;"+(n+1)+"H":p?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:u.key=n?f.C0.ESC+"[1;"+(n+1)+"F":p?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:c.shiftKey?u.type=2:c.ctrlKey?u.key=f.C0.ESC+"[5;"+(n+1)+"~":u.key=f.C0.ESC+"[5~";break;case 34:c.shiftKey?u.type=3:c.ctrlKey?u.key=f.C0.ESC+"[6;"+(n+1)+"~":u.key=f.C0.ESC+"[6~";break;case 112:u.key=n?f.C0.ESC+"[1;"+(n+1)+"P":f.C0.ESC+"OP";break;case 113:u.key=n?f.C0.ESC+"[1;"+(n+1)+"Q":f.C0.ESC+"OQ";break;case 114:u.key=n?f.C0.ESC+"[1;"+(n+1)+"R":f.C0.ESC+"OR";break;case 115:u.key=n?f.C0.ESC+"[1;"+(n+1)+"S":f.C0.ESC+"OS";break;case 116:u.key=n?f.C0.ESC+"[15;"+(n+1)+"~":f.C0.ESC+"[15~";break;case 117:u.key=n?f.C0.ESC+"[17;"+(n+1)+"~":f.C0.ESC+"[17~";break;case 118:u.key=n?f.C0.ESC+"[18;"+(n+1)+"~":f.C0.ESC+"[18~";break;case 119:u.key=n?f.C0.ESC+"[19;"+(n+1)+"~":f.C0.ESC+"[19~";break;case 120:u.key=n?f.C0.ESC+"[20;"+(n+1)+"~":f.C0.ESC+"[20~";break;case 121:u.key=n?f.C0.ESC+"[21;"+(n+1)+"~":f.C0.ESC+"[21~";break;case 122:u.key=n?f.C0.ESC+"[23;"+(n+1)+"~":f.C0.ESC+"[23~";break;case 123:u.key=n?f.C0.ESC+"[24;"+(n+1)+"~":f.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(w&&!C||!c.altKey||c.metaKey)!w||c.altKey||c.ctrlKey||c.shiftKey||!c.metaKey?c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?u.key=c.key:c.key&&c.ctrlKey&&(c.key==="_"&&(u.key=f.C0.US),c.key==="@"&&(u.key=f.C0.NUL)):c.keyCode===65&&(u.type=1);else{const a=_[c.keyCode],l=a?.[c.shiftKey?1:0];if(l)u.key=f.C0.ESC+l;else if(c.keyCode>=65&&c.keyCode<=90){const h=c.ctrlKey?c.keyCode-64:c.keyCode+32;let m=String.fromCharCode(h);c.shiftKey&&(m=m.toUpperCase()),u.key=f.C0.ESC+m}else if(c.keyCode===32)u.key=f.C0.ESC+(c.ctrlKey?f.C0.NUL:" ");else if(c.key==="Dead"&&c.code.startsWith("Key")){let h=c.code.slice(3,4);c.shiftKey||(h=h.toLowerCase()),u.key=f.C0.ESC+h,u.cancel=!0}}else c.keyCode>=65&&c.keyCode<=90?u.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?u.key=f.C0.NUL:c.keyCode>=51&&c.keyCode<=55?u.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?u.key=f.C0.DEL:c.keyCode===219?u.key=f.C0.ESC:c.keyCode===220?u.key=f.C0.FS:c.keyCode===221&&(u.key=f.C0.GS)}return u}},482:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let c="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,c+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):c+=String.fromCharCode(w)}return c},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let c=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[c++]=1024*(this._interim-55296)+w-56320+65536:(f[c++]=this._interim,f[c++]=w),this._interim=0}for(let w=p;w<_;++w){const C=o.charCodeAt(w);if(55296<=C&&C<=56319){if(++w>=_)return this._interim=C,c;const u=o.charCodeAt(w);56320<=u&&u<=57343?f[c++]=1024*(C-55296)+u-56320+65536:(f[c++]=C,f[c++]=u)}else C!==65279&&(f[c++]=C)}return c}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let c,p,w,C,u=0,n=0,a=0;if(this.interim[0]){let m=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let g,x=0;for(;(g=63&this.interim[++x])&&x<4;)L<<=6,L|=g;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-x;for(;a<b;){if(a>=_)return 0;if(g=o[a++],(192&g)!=128){a--,m=!0;break}this.interim[x++]=g,L<<=6,L|=63&g}m||(y===2?L<128?a--:f[u++]=L:y===3?L<2048||L>=55296&&L<=57343||L===65279||(f[u++]=L):L<65536||L>1114111||(f[u++]=L)),this.interim.fill(0)}const l=_-4;let h=a;for(;h<_;){for(;!(!(h<l)||128&(c=o[h])||128&(p=o[h+1])||128&(w=o[h+2])||128&(C=o[h+3]));)f[u++]=c,f[u++]=p,f[u++]=w,f[u++]=C,h+=4;if(c=o[h++],c<128)f[u++]=c;else if((224&c)==192){if(h>=_)return this.interim[0]=c,u;if(p=o[h++],(192&p)!=128){h--;continue}if(n=(31&c)<<6|63&p,n<128){h--;continue}f[u++]=n}else if((240&c)==224){if(h>=_)return this.interim[0]=c,u;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=_)return this.interim[0]=c,this.interim[1]=p,u;if(w=o[h++],(192&w)!=128){h--;continue}if(n=(15&c)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&c)==240){if(h>=_)return this.interim[0]=c,u;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=_)return this.interim[0]=c,this.interim[1]=p,u;if(w=o[h++],(192&w)!=128){h--;continue}if(h>=_)return this.interim[0]=c,this.interim[1]=p,this.interim[2]=w,u;if(C=o[h++],(192&C)!=128){h--;continue}if(n=(7&c)<<18|(63&p)<<12|(63&w)<<6|63&C,n<65536||n>1114111)continue;f[u++]=n}}return u}}},225:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=o(1480),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let p;i.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let w=0;w<_.length;++w)p.fill(0,_[w][0],_[w][1]+1)}}wcwidth(w){return w<32?0:w<127?1:w<65536?p[w]:function(C,u){let n,a=0,l=u.length-1;if(C<u[0][0]||C>u[l][1])return!1;for(;l>=a;)if(n=a+l>>1,C>u[n][1])a=n+1;else{if(!(C<u[n][0]))return!0;l=n-1}return!1}(w,c)?0:w>=131072&&w<=196605||w>=196608&&w<=262141?2:1}charProperties(w,C){let u=this.wcwidth(w),n=u===0&&C!==0;if(n){const a=f.UnicodeService.extractWidth(C);a===0?n=!1:a>u&&(u=a)}return f.UnicodeService.createPropertyValue(0,u,n)}}},5981:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=o(8460),_=o(844);class c extends _.Disposable{constructor(w){super(),this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(w,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let u;for(this._isSyncWriting=!0;u=this._writeBuffer.shift();){this._action(u);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(w,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(C)}_innerWrite(w=0,C=!0){const u=w||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],a=this._action(n,C);if(a){const h=m=>Date.now()-u>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(u,m);return void a.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(h)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=c},5941:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function _(c,p){const w=c.toString(16),C=w.length<2?"0"+w:w;switch(p){case 4:return w[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}i.parseColor=function(c){if(!c)return;let p=c.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const w=o.exec(p);if(w){const C=w[1]?15:w[4]?255:w[7]?4095:65535;return[Math.round(parseInt(w[1]||w[4]||w[7]||w[10],16)/C*255),Math.round(parseInt(w[2]||w[5]||w[8]||w[11],16)/C*255),Math.round(parseInt(w[3]||w[6]||w[9]||w[12],16)/C*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),f.exec(p)&&[3,6,9,12].includes(p.length))){const w=p.length/3,C=[0,0,0];for(let u=0;u<3;++u){const n=parseInt(p.slice(w*u,w*u+w),16);C[u]=w===1?n<<4:w===2?n:w===3?n>>4:n>>8}return C}},i.toRgbString=function(c,p=16){const[w,C,u]=c;return`rgb:${_(w,p)}/${_(C,p)}/${_(u,p)}`}},5770:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=o(482),_=o(8742),c=o(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(C,u){this._handlers[C]===void 0&&(this._handlers[C]=[]);const n=this._handlers[C];return n.push(u),{dispose:()=>{const a=n.indexOf(u);a!==-1&&n.splice(a,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(C,u){if(this.reset(),this._ident=C,this._active=this._handlers[C]||p,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(u);else this._handlerFb(this._ident,"HOOK",u)}put(C,u,n){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(C,u,n);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(C,u,n))}unhook(C,u=!0){if(this._active.length){let n=!1,a=this._active.length-1,l=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,n=u,l=this._stack.fallThrough,this._stack.paused=!1),!l&&n===!1){for(;a>=0&&(n=this._active[a].unhook(C),n!==!0);a--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,n;a--}for(;a>=0;a--)if(n=this._active[a].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",C);this._active=p,this._ident=0}};const w=new _.Params;w.addParam(0),i.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=w,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():w,this._data="",this._hitLimit=!1}put(C,u,n){this._hitLimit||(this._data+=(0,f.utf32ToString)(C,u,n),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let u=!1;if(this._hitLimit)u=!1;else if(C&&(u=this._handler(this._data,this._params),u instanceof Promise))return u.then(n=>(this._params=w,this._data="",this._hitLimit=!1,n));return this._params=w,this._data="",this._hitLimit=!1,u}}},2015:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=o(844),_=o(8742),c=o(6242),p=o(6351);class w{constructor(a){this.table=new Uint8Array(a)}setDefault(a,l){this.table.fill(a<<4|l)}add(a,l,h,m){this.table[l<<8|a]=h<<4|m}addMany(a,l,h,m){for(let L=0;L<a.length;L++)this.table[l<<8|a[L]]=h<<4|m}}i.TransitionTable=w;const C=160;i.VT500_TRANSITION_TABLE=function(){const n=new w(4095),a=Array.apply(null,Array(256)).map((x,y)=>y),l=(x,y)=>a.slice(x,y),h=l(32,127),m=l(0,24);m.push(25),m.push.apply(m,l(28,32));const L=l(0,14);let g;for(g in n.setDefault(1,0),n.addMany(h,0,2,0),L)n.addMany([24,26,153,154],g,3,0),n.addMany(l(128,144),g,3,0),n.addMany(l(144,152),g,3,0),n.add(156,g,0,0),n.add(27,g,11,1),n.add(157,g,4,8),n.addMany([152,158,159],g,0,7),n.add(155,g,11,3),n.add(144,g,11,9);return n.addMany(m,0,3,0),n.addMany(m,1,3,1),n.add(127,1,0,1),n.addMany(m,8,0,8),n.addMany(m,3,3,3),n.add(127,3,0,3),n.addMany(m,4,3,4),n.add(127,4,0,4),n.addMany(m,6,3,6),n.addMany(m,5,3,5),n.add(127,5,0,5),n.addMany(m,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(h,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(l(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(h,7,0,7),n.addMany(m,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(l(64,127),3,7,0),n.addMany(l(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(l(48,60),4,8,4),n.addMany(l(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(l(32,64),6,0,6),n.add(127,6,0,6),n.addMany(l(64,127),6,0,0),n.addMany(l(32,48),3,9,5),n.addMany(l(32,48),5,9,5),n.addMany(l(48,64),5,0,6),n.addMany(l(64,127),5,7,0),n.addMany(l(32,48),4,9,5),n.addMany(l(32,48),1,9,2),n.addMany(l(32,48),2,9,2),n.addMany(l(48,127),2,10,0),n.addMany(l(48,80),1,10,0),n.addMany(l(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(l(96,127),1,10,0),n.add(80,1,11,9),n.addMany(m,9,0,9),n.add(127,9,0,9),n.addMany(l(28,32),9,0,9),n.addMany(l(32,48),9,9,12),n.addMany(l(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(m,11,0,11),n.addMany(l(32,128),11,0,11),n.addMany(l(28,32),11,0,11),n.addMany(m,10,0,10),n.add(127,10,0,10),n.addMany(l(28,32),10,0,10),n.addMany(l(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(l(32,48),10,9,12),n.addMany(m,12,0,12),n.add(127,12,0,12),n.addMany(l(28,32),12,0,12),n.addMany(l(32,48),12,9,12),n.addMany(l(48,64),12,0,11),n.addMany(l(64,127),12,12,13),n.addMany(l(64,127),10,12,13),n.addMany(l(64,127),9,12,13),n.addMany(m,13,13,13),n.addMany(h,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(C,0,2,0),n.add(C,8,5,8),n.add(C,6,0,6),n.add(C,11,0,11),n.add(C,13,13,13),n}();class u extends f.Disposable{constructor(a=i.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(l,h,m)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,h)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new c.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,l=[64,126]){let h=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=a.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let L=0;L<a.intermediates.length;++L){const g=a.intermediates.charCodeAt(L);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=g}}if(a.final.length!==1)throw new Error("final must be a single byte");const m=a.final.charCodeAt(0);if(l[0]>m||m>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return h<<=8,h|=m,h}identToString(a){const l=[];for(;a;)l.push(String.fromCharCode(255&a)),a>>=8;return l.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,l){const h=this._identifier(a,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);const m=this._escHandlers[h];return m.push(l),{dispose:()=>{const L=m.indexOf(l);L!==-1&&m.splice(L,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,l){this._executeHandlers[a.charCodeAt(0)]=l}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,l){const h=this._identifier(a);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);const m=this._csiHandlers[h];return m.push(l),{dispose:()=>{const L=m.indexOf(l);L!==-1&&m.splice(L,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,l){return this._dcsParser.registerHandler(this._identifier(a),l)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,l){return this._oscParser.registerHandler(a,l)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,l,h,m,L){this._parseStack.state=a,this._parseStack.handlers=l,this._parseStack.handlerPos=h,this._parseStack.transition=m,this._parseStack.chunkPos=L}parse(a,l,h){let m,L=0,g=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&b>-1){for(;b>=0&&(m=y[b](this._params),m!==!0);b--)if(m instanceof Promise)return this._parseStack.handlerPos=b,m}this._parseStack.handlers=[];break;case 4:if(h===!1&&b>-1){for(;b>=0&&(m=y[b](),m!==!0);b--)if(m instanceof Promise)return this._parseStack.handlerPos=b,m}this._parseStack.handlers=[];break;case 6:if(L=a[this._parseStack.chunkPos],m=this._dcsParser.unhook(L!==24&&L!==26,h),m)return m;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(L=a[this._parseStack.chunkPos],m=this._oscParser.end(L!==24&&L!==26,h),m)return m;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let y=x;y<l;++y){switch(L=a[y],g=this._transitions.table[this.currentState<<8|(L<160?L:C)],g>>4){case 2:for(let D=y+1;;++D){if(D>=l||(L=a[D])<32||L>126&&L<C){this._printHandler(a,y,D),y=D-1;break}if(++D>=l||(L=a[D])<32||L>126&&L<C){this._printHandler(a,y,D),y=D-1;break}if(++D>=l||(L=a[D])<32||L>126&&L<C){this._printHandler(a,y,D),y=D-1;break}if(++D>=l||(L=a[D])<32||L>126&&L<C){this._printHandler(a,y,D),y=D-1;break}}break;case 3:this._executeHandlers[L]?this._executeHandlers[L]():this._executeHandlerFb(L),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:L,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const b=this._csiHandlers[this._collect<<8|L];let E=b?b.length-1:-1;for(;E>=0&&(m=b[E](this._params),m!==!0);E--)if(m instanceof Promise)return this._preserveStack(3,b,E,g,y),m;E<0&&this._csiHandlerFb(this._collect<<8|L,this._params),this.precedingJoinState=0;break;case 8:do switch(L){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(L-48)}while(++y<l&&(L=a[y])>47&&L<60);y--;break;case 9:this._collect<<=8,this._collect|=L;break;case 10:const R=this._escHandlers[this._collect<<8|L];let k=R?R.length-1:-1;for(;k>=0&&(m=R[k](),m!==!0);k--)if(m instanceof Promise)return this._preserveStack(4,R,k,g,y),m;k<0&&this._escHandlerFb(this._collect<<8|L),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|L,this._params);break;case 13:for(let D=y+1;;++D)if(D>=l||(L=a[D])===24||L===26||L===27||L>127&&L<C){this._dcsParser.put(a,y,D),y=D-1;break}break;case 14:if(m=this._dcsParser.unhook(L!==24&&L!==26),m)return this._preserveStack(6,[],0,g,y),m;L===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let D=y+1;;D++)if(D>=l||(L=a[D])<32||L>127&&L<C){this._oscParser.put(a,y,D),y=D-1;break}break;case 6:if(m=this._oscParser.end(L!==24&&L!==26),m)return this._preserveStack(5,[],0,g,y),m;L===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&g}}}i.EscapeSequenceParser=u},6242:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=o(5770),_=o(482),c=[];i.OscParser=class{constructor(){this._state=0,this._active=c,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,w){this._handlers[p]===void 0&&(this._handlers[p]=[]);const C=this._handlers[p];return C.push(w),{dispose:()=>{const u=C.indexOf(w);u!==-1&&C.splice(u,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=c,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||c,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,w,C){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(p,w,C);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(p,w,C))}start(){this.reset(),this._state=1}put(p,w,C){if(this._state!==3){if(this._state===1)for(;w<C;){const u=p[w++];if(u===59){this._state=2,this._start();break}if(u<48||57<u)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+u-48}this._state===2&&C-w>0&&this._put(p,w,C)}}end(p,w=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,u=this._active.length-1,n=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,C=w,n=this._stack.fallThrough,this._stack.paused=!1),!n&&C===!1){for(;u>=0&&(C=this._active[u].end(p),C!==!0);u--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,C;u--}for(;u>=0;u--)if(C=this._active[u].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",p);this._active=c,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,w,C){this._hitLimit||(this._data+=(0,_.utf32ToString)(p,w,C),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let w=!1;if(this._hitLimit)w=!1;else if(p&&(w=this._handler(this._data),w instanceof Promise))return w.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,w}}},8742:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class f{static fromArray(c){const p=new f;if(!c.length)return p;for(let w=Array.isArray(c[0])?1:0;w<c.length;++w){const C=c[w];if(Array.isArray(C))for(let u=0;u<C.length;++u)p.addSubParam(C[u]);else p.addParam(C)}return p}constructor(c=32,p=32){if(this.maxLength=c,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const c=new f(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c}toArray(){const c=[];for(let p=0;p<this.length;++p){c.push(this.params[p]);const w=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];C-w>0&&c.push(Array.prototype.slice.call(this._subParams,w,C))}return c}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>o?o:c}}addSubParam(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>o?o:c,this._subParamsIdx[this.length-1]++}}hasSubParams(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0}getSubParams(c){const p=this._subParamsIdx[c]>>8,w=255&this._subParamsIdx[c];return w-p>0?this._subParams.subarray(p,w):null}getSubParamsAll(){const c={};for(let p=0;p<this.length;++p){const w=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];C-w>0&&(c[p]=this._subParams.slice(w,C))}return c}addDigit(c){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const w=this._digitIsSub?this._subParams:this.params,C=w[p-1];w[p-1]=~C?Math.min(10*C+c,o):c}}i.Params=f},5741:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,f){const _={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(_),f.dispose=()=>this._wrappedAddonDispose(_),f.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let f=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===o){f=_;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(f,1)}}},8771:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=o(3785),_=o(511);i.BufferApiView=class{constructor(c,p){this._buffer=c,this.type=p}init(c){return this._buffer=c,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(c){const p=this._buffer.lines.get(c);if(p)return new f.BufferLineApiView(p)}getNullCell(){return new _.CellData}}},3785:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=o(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,c){if(!(_<0||_>=this._line.length))return c?(this._line.loadCell(_,c),c):this._line.loadCell(_,new f.CellData)}translateToString(_,c,p){return this._line.translateToString(_,c,p)}}},8285:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=o(8771),_=o(8460),c=o(844);class p extends c.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,f){return this._core.registerCsiHandler(o,_=>f(_.toArray()))}addCsiHandler(o,f){return this.registerCsiHandler(o,f)}registerDcsHandler(o,f){return this._core.registerDcsHandler(o,(_,c)=>f(_,c.toArray()))}addDcsHandler(o,f){return this.registerDcsHandler(o,f)}registerEscHandler(o,f){return this._core.registerEscHandler(o,f)}addEscHandler(o,f){return this.registerEscHandler(o,f)}registerOscHandler(o,f){return this._core.registerOscHandler(o,f)}addOscHandler(o,f){return this.registerOscHandler(o,f)}}},7090:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(S,i,o){var f=this&&this.__decorate||function(n,a,l,h){var m,L=arguments.length,g=L<3?a:h===null?h=Object.getOwnPropertyDescriptor(a,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(n,a,l,h);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(g=(L<3?m(g):L>3?m(a,l,g):m(a,l))||g);return L>3&&g&&Object.defineProperty(a,l,g),g},_=this&&this.__param||function(n,a){return function(l,h){a(l,h,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const c=o(8460),p=o(844),w=o(5295),C=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let u=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new w.BufferSet(n,this))}resize(n,a){this.cols=n,this.rows=a,this.buffers.resize(n,a),this._onResize.fire({cols:n,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,a=!1){const l=this.buffer;let h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===n.fg&&h.getBg(0)===n.bg||(h=l.getBlankLine(n,a),this._cachedBlankLine=h),h.isWrapped=a;const m=l.ybase+l.scrollTop,L=l.ybase+l.scrollBottom;if(l.scrollTop===0){const g=l.lines.isFull;L===l.lines.length-1?g?l.lines.recycle().copyFrom(h):l.lines.push(h.clone()):l.lines.splice(L+1,0,h.clone()),g?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const g=L-m+1;l.lines.shiftElements(m+1,g-1,-1),l.lines.set(L,h.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(n,a,l){const h=this.buffer;if(n<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else n+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);const m=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+n,h.ybase),0),m!==h.ydisp&&(a||this._onScroll.fire(h.ydisp))}};i.BufferService=u=f([_(0,C.IOptionsService)],u)},7994:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,f){this._charsets[o]=f,this.glevel===o&&(this.charset=f)}}},1753:function(S,i,o){var f=this&&this.__decorate||function(h,m,L,g){var x,y=arguments.length,b=y<3?m:g===null?g=Object.getOwnPropertyDescriptor(m,L):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(h,m,L,g);else for(var E=h.length-1;E>=0;E--)(x=h[E])&&(b=(y<3?x(b):y>3?x(m,L,b):x(m,L))||b);return y>3&&b&&Object.defineProperty(m,L,b),b},_=this&&this.__param||function(h,m){return function(L,g){m(L,g,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const c=o(2585),p=o(8460),w=o(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function u(h,m){let L=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(L|=64,L|=h.action):(L|=3&h.button,4&h.button&&(L|=64),8&h.button&&(L|=128),h.action===32?L|=32:h.action!==0||m||(L|=3)),L}const n=String.fromCharCode,a={DEFAULT:h=>{const m=[u(h,!1)+32,h.col+32,h.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${n(m[0])}${n(m[1])}${n(m[2])}`},SGR:h=>{const m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${u(h,!0)};${h.col};${h.row}${m}`},SGR_PIXELS:h=>{const m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${u(h,!0)};${h.x};${h.y}${m}`}};let l=i.CoreMouseService=class extends w.Disposable{constructor(h,m){super(),this._bufferService=h,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const L of Object.keys(C))this.addProtocol(L,C[L]);for(const L of Object.keys(a))this.addEncoding(L,a[L]);this.reset()}addProtocol(h,m){this._protocols[h]=m}addEncoding(h,m){this._encodings[h]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;const m=this._encodings[this._activeEncoding](h);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,m,L){if(L){if(h.x!==m.x||h.y!==m.y)return!1}else if(h.col!==m.col||h.row!==m.row)return!1;return h.button===m.button&&h.action===m.action&&h.ctrl===m.ctrl&&h.alt===m.alt&&h.shift===m.shift}};i.CoreMouseService=l=f([_(0,c.IBufferService),_(1,c.ICoreService)],l)},6975:function(S,i,o){var f=this&&this.__decorate||function(l,h,m,L){var g,x=arguments.length,y=x<3?h:L===null?L=Object.getOwnPropertyDescriptor(h,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(l,h,m,L);else for(var b=l.length-1;b>=0;b--)(g=l[b])&&(y=(x<3?g(y):x>3?g(h,m,y):g(h,m))||y);return x>3&&y&&Object.defineProperty(h,m,y),y},_=this&&this.__param||function(l,h){return function(m,L){h(m,L,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const c=o(1439),p=o(8460),w=o(844),C=o(2585),u=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=i.CoreService=class extends w.Disposable{constructor(l,h,m){super(),this._bufferService=l,this._logService=h,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,c.clone)(u),this.decPrivateModes=(0,c.clone)(n)}reset(){this.modes=(0,c.clone)(u),this.decPrivateModes=(0,c.clone)(n)}triggerDataEvent(l,h=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,()=>l.split("").map(L=>L.charCodeAt(0))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,()=>l.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(l))}};i.CoreService=a=f([_(0,C.IBufferService),_(1,C.ILogService),_(2,C.IOptionsService)],a)},9074:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=o(8055),_=o(8460),c=o(844),p=o(6106);let w=0,C=0;class u extends c.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(l=>l?.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,c.toDisposable)(()=>this.reset()))}registerDecoration(l){if(l.marker.isDisposed)return;const h=new n(l);if(h){const m=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),m.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,h,m){let L=0,g=0;for(const x of this._decorations.getKeyIterator(h))L=x.options.x??0,g=L+(x.options.width??1),l>=L&&l<g&&(!m||(x.options.layer??"bottom")===m)&&(yield x)}forEachDecorationAtCell(l,h,m,L){this._decorations.forEachByKey(h,g=>{w=g.options.x??0,C=w+(g.options.width??1),l>=w&&l<C&&(!m||(g.options.layer??"bottom")===m)&&L(g)})}}i.DecorationService=u;class n extends c.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=o(2585),_=o(8343);class c{constructor(...w){this._entries=new Map;for(const[C,u]of w)this.set(C,u)}set(w,C){const u=this._entries.get(w);return this._entries.set(w,C),u}forEach(w){for(const[C,u]of this._entries.entries())w(C,u)}has(w){return this._entries.has(w)}get(w){return this._entries.get(w)}}i.ServiceCollection=c,i.InstantiationService=class{constructor(){this._services=new c,this._services.set(f.IInstantiationService,this)}setService(p,w){this._services.set(p,w)}getService(p){return this._services.get(p)}createInstance(p,...w){const C=(0,_.getServiceDependencies)(p).sort((a,l)=>a.index-l.index),u=[];for(const a of C){const l=this._services.get(a.id);if(!l)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${a.id}.`);u.push(l)}const n=C.length>0?C[0].index:w.length;if(w.length!==n)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${n+1} conflicts with ${w.length} static arguments`);return new p(...w,...u)}}},7866:function(S,i,o){var f=this&&this.__decorate||function(n,a,l,h){var m,L=arguments.length,g=L<3?a:h===null?h=Object.getOwnPropertyDescriptor(a,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(n,a,l,h);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(g=(L<3?m(g):L>3?m(a,l,g):m(a,l))||g);return L>3&&g&&Object.defineProperty(a,l,g),g},_=this&&this.__param||function(n,a){return function(l,h){a(l,h,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const c=o(844),p=o(2585),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let C,u=i.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){C=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const h=l.value;l.value=function(...m){if(C.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,m);C.trace(`GlyphRenderer#${h.name}(${m.map(g=>JSON.stringify(g)).join(", ")})`);const L=h.apply(this,m);return C.trace(`GlyphRenderer#${h.name} return`,L),L}}},7302:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=o(8460),_=o(844),c=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:c.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class w extends _.Disposable{constructor(u){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...i.DEFAULT_OPTIONS};for(const a in u)if(a in n)try{const l=u[a];n[a]=this._sanitizeAndValidateOption(a,l)}catch(l){console.error(l)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,_.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(u,n){return this.onOptionChange(a=>{a===u&&n(this.rawOptions[u])})}onMultipleOptionChange(u,n){return this.onOptionChange(a=>{u.indexOf(a)!==-1&&n()})}_setupOptions(){const u=a=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},n=(a,l)=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);l=this._sanitizeAndValidateOption(a,l),this.rawOptions[a]!==l&&(this.rawOptions[a]=l,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const l={get:u.bind(this,a),set:n.bind(this,a)};Object.defineProperty(this.options,a,l)}}_sanitizeAndValidateOption(u,n){switch(u){case"cursorStyle":if(n||(n=i.DEFAULT_OPTIONS[u]),!function(a){return a==="block"||a==="underline"||a==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${u}`);break;case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=p.includes(n)?n:i.DEFAULT_OPTIONS[u];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${u} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${u} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${u} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${u} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}i.OptionsService=w},2660:function(S,i,o){var f=this&&this.__decorate||function(w,C,u,n){var a,l=arguments.length,h=l<3?C:n===null?n=Object.getOwnPropertyDescriptor(C,u):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(w,C,u,n);else for(var m=w.length-1;m>=0;m--)(a=w[m])&&(h=(l<3?a(h):l>3?a(C,u,h):a(C,u))||h);return l>3&&h&&Object.defineProperty(C,u,h),h},_=this&&this.__param||function(w,C){return function(u,n){C(u,n,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const c=o(2585);let p=i.OscLinkService=class{constructor(w){this._bufferService=w,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(w){const C=this._bufferService.buffer;if(w.id===void 0){const m=C.addMarker(C.ybase+C.y),L={data:w,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(L,m)),this._dataByLinkId.set(L.id,L),L.id}const u=w,n=this._getEntryIdKey(u),a=this._entriesWithId.get(n);if(a)return this.addLineToLink(a.id,C.ybase+C.y),a.id;const l=C.addMarker(C.ybase+C.y),h={id:this._nextId++,key:this._getEntryIdKey(u),data:u,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(h,l)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(w,C){const u=this._dataByLinkId.get(w);if(u&&u.lines.every(n=>n.line!==C)){const n=this._bufferService.buffer.addMarker(C);u.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(u,n))}}getLinkData(w){return this._dataByLinkId.get(w)?.data}_getEntryIdKey(w){return`${w.id};;${w.uri}`}_removeMarkerFromLink(w,C){const u=w.lines.indexOf(C);u!==-1&&(w.lines.splice(u,1),w.lines.length===0&&(w.data.id!==void 0&&this._entriesWithId.delete(w.key),this._dataByLinkId.delete(w.id)))}};i.OscLinkService=p=f([_(0,c.IBufferService)],p)},8343:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const c=function(p,w,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(c,p,C)};return c.toString=()=>_,i.serviceRegistry.set(_,c),c}},2585:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(8343);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=o(8460),_=o(225);class c{static extractShouldJoin(w){return(1&w)!=0}static extractWidth(w){return w>>1&3}static extractCharKind(w){return w>>3}static createPropertyValue(w,C,u=!1){return(16777215&w)<<3|(3&C)<<1|(u?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const w=new _.UnicodeV6;this.register(w),this._active=w.version,this._activeProvider=w}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(w){if(!this._providers[w])throw new Error(`unknown Unicode version "${w}"`);this._active=w,this._activeProvider=this._providers[w],this._onChange.fire(w)}register(w){this._providers[w.version]=w}wcwidth(w){return this._activeProvider.wcwidth(w)}getStringCellWidth(w){let C=0,u=0;const n=w.length;for(let a=0;a<n;++a){let l=w.charCodeAt(a);if(55296<=l&&l<=56319){if(++a>=n)return C+this.wcwidth(l);const L=w.charCodeAt(a);56320<=L&&L<=57343?l=1024*(l-55296)+L-56320+65536:C+=this.wcwidth(L)}const h=this.charProperties(l,u);let m=c.extractWidth(h);c.extractShouldJoin(h)&&(m-=c.extractWidth(u)),C+=m,u=h}return C}charProperties(w,C){return this._activeProvider.charProperties(w,C)}}i.UnicodeService=c}},s={};function d(S){var i=s[S];if(i!==void 0)return i.exports;var o=s[S]={exports:{}};return r[S].call(o.exports,o,o.exports,d),o.exports}var v={};return(()=>{var S=v;Object.defineProperty(S,"__esModule",{value:!0}),S.Terminal=void 0;const i=d(9042),o=d(3236),f=d(844),_=d(5741),c=d(8285),p=d(7975),w=d(7090),C=["cols","rows"];class u extends f.Disposable{constructor(a){super(),this._core=this.register(new o.Terminal(a)),this._addonManager=this.register(new _.AddonManager),this._publicOptions={...this._core.options};const l=m=>this._core.options[m],h=(m,L)=>{this._checkReadonlyOptions(m),this._core.options[m]=L};for(const m in this._core.options){const L={get:l.bind(this,m),set:h.bind(this,m)};Object.defineProperty(this._publicOptions,m,L)}}_checkReadonlyOptions(a){if(C.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new w.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new c.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const l in a)this._publicOptions[l]=a[l]}blur(){this._core.blur()}focus(){this._core.focus()}input(a,l=!0){this._core.input(a,l)}resize(a,l){this._verifyIntegers(a,l),this._core.resize(a,l)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}attachCustomWheelEventHandler(a){this._core.attachCustomWheelEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){return this._checkProposedApi(),this._verifyPositiveIntegers(a.x??0,a.width??0,a.height??0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,l,h){this._verifyIntegers(a,l,h),this._core.select(a,l,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,l){this._verifyIntegers(a,l),this._core.selectLines(a,l)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,l){this._core.write(a,l)}writeln(a,l){this._core.write(a),this._core.write(`\r
`,l)}paste(a){this._core.paste(a)}refresh(a,l){this._verifyIntegers(a,l),this._core.refresh(a,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return i}_verifyIntegers(...a){for(const l of a)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const l of a)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}S.Terminal=u})(),v})())})(Sf);var Tm=Sf.exports,xf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(d){this._terminal=d}dispose(){}fit(){const d=this.proposeDimensions();if(!d||!this._terminal||isNaN(d.cols)||isNaN(d.rows))return;const v=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(v._renderService.clear(),this._terminal.resize(d.cols,d.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const d=this._terminal._core,v=d._renderService.dimensions;if(v.css.cell.width===0||v.css.cell.height===0)return;const S=this._terminal.options.scrollback===0?0:d.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),c=o-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),p=f-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-S;return{cols:Math.max(2,Math.floor(p/v.css.cell.width)),rows:Math.max(1,Math.floor(c/v.css.cell.height))}}}})(),r})())})(xf);var Pm=xf.exports,bf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={965:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;const f=o(374),_=o(509),c=o(855),p=o(859),w=o(381),C=11,u=C*Float32Array.BYTES_PER_ELEMENT;let n,a=0,l=0,h=0;class m extends p.Disposable{constructor(g,x,y,b){super(),this._terminal=g,this._gl=x,this._dimensions=y,this._optionsService=b,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const E=this._gl;_.TextureAtlas.maxAtlasPages===void 0&&(_.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),_.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,w.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(j){let H="";for(let B=1;B<j;B++)H+=` else if (v_texpage == ${B}) { outColor = texture(u_texture[${B}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${j}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${H}
}`}(_.TextureAtlas.maxAtlasPages))),this.register((0,p.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);const R=new Float32Array([0,0,1,0,0,1,1,1]),k=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(k))),E.bindBuffer(E.ARRAY_BUFFER,k),E.bufferData(E.ARRAY_BUFFER,R,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const D=new Uint8Array([0,1,2,3]),T=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(T))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,T),E.bufferData(E.ELEMENT_ARRAY_BUFFER,D,E.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(E.createBuffer()),this.register((0,p.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,u,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,u,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,u,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,u,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,u,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,u,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);const N=new Int32Array(_.TextureAtlas.maxAtlasPages);for(let j=0;j<_.TextureAtlas.maxAtlasPages;j++)N[j]=j;E.uniform1iv(this._textureLocation,N),E.uniformMatrix4fv(this._projectionLocation,!1,w.PROJECTION_MATRIX),this._atlasTextures=[];for(let j=0;j<_.TextureAtlas.maxAtlasPages;j++){const H=new w.GLTexture((0,f.throwIfFalsy)(E.createTexture()));this.register((0,p.toDisposable)(()=>E.deleteTexture(H.texture))),E.activeTexture(E.TEXTURE0+j),E.bindTexture(E.TEXTURE_2D,H.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[j]=H}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,x,y,b,E,R,k,D,T){this._updateCell(this._vertices.attributes,g,x,y,b,E,R,k,D,T)}_updateCell(g,x,y,b,E,R,k,D,T,N){a=(y*this._terminal.cols+x)*C,b!==c.NULL_CELL_CODE&&b!==void 0?this._atlas&&(n=D&&D.length>1?this._atlas.getRasterizedGlyphCombinedChar(D,E,R,k,!1):this._atlas.getRasterizedGlyph(b,E,R,k,!1),l=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),E!==N&&n.offset.x>l?(h=n.offset.x-l,g[a]=-(n.offset.x-h)+this._dimensions.device.char.left,g[a+1]=-n.offset.y+this._dimensions.device.char.top,g[a+2]=(n.size.x-h)/this._dimensions.device.canvas.width,g[a+3]=n.size.y/this._dimensions.device.canvas.height,g[a+4]=n.texturePage,g[a+5]=n.texturePositionClipSpace.x+h/this._atlas.pages[n.texturePage].canvas.width,g[a+6]=n.texturePositionClipSpace.y,g[a+7]=n.sizeClipSpace.x-h/this._atlas.pages[n.texturePage].canvas.width,g[a+8]=n.sizeClipSpace.y):(g[a]=-n.offset.x+this._dimensions.device.char.left,g[a+1]=-n.offset.y+this._dimensions.device.char.top,g[a+2]=n.size.x/this._dimensions.device.canvas.width,g[a+3]=n.size.y/this._dimensions.device.canvas.height,g[a+4]=n.texturePage,g[a+5]=n.texturePositionClipSpace.x,g[a+6]=n.texturePositionClipSpace.y,g[a+7]=n.sizeClipSpace.x,g[a+8]=n.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,f.allowRescaling)(b,T,n.size.x,this._dimensions.device.cell.width)&&(g[a+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):g.fill(0,a,a+C-1-2)}clear(){const g=this._terminal,x=g.cols*g.rows*C;this._vertices.count!==x?this._vertices.attributes=new Float32Array(x):this._vertices.attributes.fill(0);let y=0;for(;y<this._vertices.attributesBuffers.length;y++)this._vertices.count!==x?this._vertices.attributesBuffers[y]=new Float32Array(x):this._vertices.attributesBuffers[y].fill(0);this._vertices.count=x,y=0;for(let b=0;b<g.rows;b++)for(let E=0;E<g.cols;E++)this._vertices.attributes[y+9]=E/g.cols,this._vertices.attributes[y+10]=b/g.rows,y+=C}handleResize(){const g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;const x=this._gl;x.useProgram(this._program),x.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const y=this._vertices.attributesBuffers[this._activeBuffer];let b=0;for(let E=0;E<g.lineLengths.length;E++){const R=E*this._terminal.cols*C,k=this._vertices.attributes.subarray(R,R+g.lineLengths[E]*C);y.set(k,b),b+=k.length}x.bindBuffer(x.ARRAY_BUFFER,this._attributesBuffer),x.bufferData(x.ARRAY_BUFFER,y.subarray(0,b),x.STREAM_DRAW);for(let E=0;E<this._atlas.pages.length;E++)this._atlas.pages[E].version!==this._atlasTextures[E].version&&this._bindAtlasPageTexture(x,this._atlas,E);x.drawElementsInstanced(x.TRIANGLE_STRIP,4,x.UNSIGNED_BYTE,0,b/C)}setAtlas(g){this._atlas=g;for(const x of this._atlasTextures)x.version=-1}_bindAtlasPageTexture(g,x,y){g.activeTexture(g.TEXTURE0+y),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[y].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,x.pages[y].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[y].version=x.pages[y].version}setDimensions(g){this._dimensions=g}}i.GlyphRenderer=m},742:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;const f=o(374),_=o(859),c=o(310),p=o(381),w=8*Float32Array.BYTES_PER_ELEMENT;class C{constructor(){this.attributes=new Float32Array(160),this.count=0}}let u=0,n=0,a=0,l=0,h=0,m=0,L=0;class g extends _.Disposable{constructor(y,b,E,R){super(),this._terminal=y,this._gl=b,this._dimensions=E,this._themeService=R,this._vertices=new C,this._verticesCursor=new C;const k=this._gl;this._program=(0,f.throwIfFalsy)((0,p.createProgram)(k,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,_.toDisposable)(()=>k.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(k.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=k.createVertexArray(),k.bindVertexArray(this._vertexArrayObject);const D=new Float32Array([0,0,1,0,0,1,1,1]),T=k.createBuffer();this.register((0,_.toDisposable)(()=>k.deleteBuffer(T))),k.bindBuffer(k.ARRAY_BUFFER,T),k.bufferData(k.ARRAY_BUFFER,D,k.STATIC_DRAW),k.enableVertexAttribArray(3),k.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const N=new Uint8Array([0,1,2,3]),j=k.createBuffer();this.register((0,_.toDisposable)(()=>k.deleteBuffer(j))),k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,j),k.bufferData(k.ELEMENT_ARRAY_BUFFER,N,k.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(k.createBuffer()),this.register((0,_.toDisposable)(()=>k.deleteBuffer(this._attributesBuffer))),k.bindBuffer(k.ARRAY_BUFFER,this._attributesBuffer),k.enableVertexAttribArray(0),k.vertexAttribPointer(0,2,k.FLOAT,!1,w,0),k.vertexAttribDivisor(0,1),k.enableVertexAttribArray(1),k.vertexAttribPointer(1,2,k.FLOAT,!1,w,2*Float32Array.BYTES_PER_ELEMENT),k.vertexAttribDivisor(1,1),k.enableVertexAttribArray(2),k.vertexAttribPointer(2,4,k.FLOAT,!1,w,4*Float32Array.BYTES_PER_ELEMENT),k.vertexAttribDivisor(2,1),this._updateCachedColors(R.colors),this.register(this._themeService.onChangeColors(H=>{this._updateCachedColors(H),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(y){const b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,y.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,y.count)}handleResize(){this._updateViewportRectangle()}setDimensions(y){this._dimensions=y}_updateCachedColors(y){this._bgFloat=this._colorToFloat32Array(y.background),this._cursorFloat=this._colorToFloat32Array(y.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(y){const b=this._terminal,E=this._vertices;let R,k,D,T,N,j,H,B,M,A,O,I=1;for(R=0;R<b.rows;R++){for(D=-1,T=0,N=0,j=!1,k=0;k<b.cols;k++)H=(R*b.cols+k)*c.RENDER_MODEL_INDICIES_PER_CELL,B=y.cells[H+c.RENDER_MODEL_BG_OFFSET],M=y.cells[H+c.RENDER_MODEL_FG_OFFSET],A=!!(67108864&M),(B!==T||M!==N&&(j||A))&&((T!==0||j&&N!==0)&&(O=8*I++,this._updateRectangle(E,O,N,T,D,k,R)),D=k,T=B,N=M,j=A);(T!==0||j&&N!==0)&&(O=8*I++,this._updateRectangle(E,O,N,T,D,b.cols,R))}E.count=I}updateCursor(y){const b=this._verticesCursor,E=y.cursor;if(!E||E.style==="block")return void(b.count=0);let R,k=0;E.style!=="bar"&&E.style!=="outline"||(R=8*k++,this._addRectangleFloat(b.attributes,R,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.style==="bar"?E.dpr*E.cursorWidth:E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),E.style!=="underline"&&E.style!=="outline"||(R=8*k++,this._addRectangleFloat(b.attributes,R,E.x*this._dimensions.device.cell.width,(E.y+1)*this._dimensions.device.cell.height-E.dpr,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat)),E.style==="outline"&&(R=8*k++,this._addRectangleFloat(b.attributes,R,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat),R=8*k++,this._addRectangleFloat(b.attributes,R,(E.x+E.width)*this._dimensions.device.cell.width-E.dpr,E.y*this._dimensions.device.cell.height,E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=k}_updateRectangle(y,b,E,R,k,D,T){if(67108864&E)switch(50331648&E){case 16777216:case 33554432:u=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:u=(16777215&E)<<8;break;default:u=this._themeService.colors.foreground.rgba}else switch(50331648&R){case 16777216:case 33554432:u=this._themeService.colors.ansi[255&R].rgba;break;case 50331648:u=(16777215&R)<<8;break;default:u=this._themeService.colors.background.rgba}y.attributes.length<b+4&&(y.attributes=(0,p.expandFloat32Array)(y.attributes,this._terminal.rows*this._terminal.cols*8)),n=k*this._dimensions.device.cell.width,a=T*this._dimensions.device.cell.height,l=(u>>24&255)/255,h=(u>>16&255)/255,m=(u>>8&255)/255,L=1,this._addRectangle(y.attributes,b,n,a,(D-k)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,l,h,m,L)}_addRectangle(y,b,E,R,k,D,T,N,j,H){y[b]=E/this._dimensions.device.canvas.width,y[b+1]=R/this._dimensions.device.canvas.height,y[b+2]=k/this._dimensions.device.canvas.width,y[b+3]=D/this._dimensions.device.canvas.height,y[b+4]=T,y[b+5]=N,y[b+6]=j,y[b+7]=H}_addRectangleFloat(y,b,E,R,k,D,T){y[b]=E/this._dimensions.device.canvas.width,y[b+1]=R/this._dimensions.device.canvas.height,y[b+2]=k/this._dimensions.device.canvas.width,y[b+3]=D/this._dimensions.device.canvas.height,y[b+4]=T[0],y[b+5]=T[1],y[b+6]=T[2],y[b+7]=T[3]}_colorToFloat32Array(y){return new Float32Array([(y.rgba>>24&255)/255,(y.rgba>>16&255)/255,(y.rgba>>8&255)/255,(255&y.rgba)/255])}}i.RectangleRenderer=g},310:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;const f=o(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,f.createSelectionRenderModel)()}resize(_,c){const p=_*c*i.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(c))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;const f=o(820),_=o(274),c=o(627),p=o(457),w=o(56),C=o(374),u=o(345),n=o(859),a=o(147),l=o(782),h=o(855),m=o(965),L=o(742),g=o(310),x=o(733);class y extends n.Disposable{constructor(k,D,T,N,j,H,B,M,A){super(),this._terminal=k,this._characterJoinerService=D,this._charSizeService=T,this._coreBrowserService=N,this._coreService=j,this._decorationService=H,this._optionsService=B,this._themeService=M,this._cursorBlinkStateManager=new n.MutableDisposable,this._charAtlasDisposable=this.register(new n.MutableDisposable),this._observerDisposable=this.register(new n.MutableDisposable),this._model=new g.RenderModel,this._workCell=new l.CellData,this._workCell2=new l.CellData,this._rectangleRenderer=this.register(new n.MutableDisposable),this._glyphRenderer=this.register(new n.MutableDisposable),this._onChangeTextureAtlas=this.register(new u.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new u.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new u.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new _.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new x.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,B,this._themeService)],this.dimensions=(0,C.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(B.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");const O={antialias:!1,depth:!1,preserveDrawingBuffer:A};if(this._gl=this._canvas.getContext("webgl2",O),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",I=>{console.log("webglcontextlost event received"),I.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(I)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",I=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,c.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,w.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(I,W)=>this._setCanvasDevicePixelDimensions(I,W)),this.register(this._coreBrowserService.onWindowChange(I=>{this._observerDisposable.value=(0,w.observeDevicePixelDimensions)(this._canvas,I,(W,z)=>this._setCanvasDevicePixelDimensions(W,z))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,n.toDisposable)(()=>{for(const I of this._renderLayers)I.dispose();this._canvas.parentElement?.removeChild(this._canvas),(0,c.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._charAtlas?.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(k,D){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const T of this._renderLayers)T.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.value?.setDimensions(this.dimensions),this._rectangleRenderer.value?.handleResize(),this._glyphRenderer.value?.setDimensions(this.dimensions),this._glyphRenderer.value?.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const k of this._renderLayers)k.handleBlur(this._terminal);this._cursorBlinkStateManager.value?.pause(),this._requestRedrawViewport()}handleFocus(){for(const k of this._renderLayers)k.handleFocus(this._terminal);this._cursorBlinkStateManager.value?.resume(),this._requestRedrawViewport()}handleSelectionChanged(k,D,T){for(const N of this._renderLayers)N.handleSelectionChanged(this._terminal,k,D,T);this._model.selection.update(this._core,k,D,T),this._requestRedrawViewport()}handleCursorMove(){for(const k of this._renderLayers)k.handleCursorMove(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new L.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new m.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const k=(0,c.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==k&&(this._onChangeTextureAtlas.fire(k.pages[0].canvas),this._charAtlasDisposable.value=(0,n.getDisposeArrayDisposable)([(0,u.forwardEvent)(k.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,u.forwardEvent)(k.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=k,this._charAtlas.warmUp(),this._glyphRenderer.value?.setAtlas(this._charAtlas)}_clearModel(k){this._model.clear(),k&&this._glyphRenderer.value?.clear()}clearTextureAtlas(){this._charAtlas?.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const k of this._renderLayers)k.reset(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(k){return-1}deregisterCharacterJoiner(k){return!1}renderRows(k,D){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const T of this._renderLayers)T.handleGridChanged(this._terminal,k,D);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(k,D),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new p.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(k,D){const T=this._core;let N,j,H,B,M,A,O,I,W,z,X,K,$,P,U=this._workCell;k=E(k,T.rows-1,0),D=E(D,T.rows-1,0);const G=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Z=G-T.buffer.ydisp,J=Math.min(this._terminal.buffer.active.cursorX,T.cols-1);let ae=-1;const ee=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ue=!1;for(j=k;j<=D;j++)for(H=j+T.buffer.ydisp,B=T.buffer.lines.get(H),this._model.lineLengths[j]=0,M=this._characterJoinerService.getJoinedCharacters(H),$=0;$<T.cols;$++)if(N=this._cellColorResolver.result.bg,B.loadCell($,U),$===0&&(N=this._cellColorResolver.result.bg),A=!1,O=$,M.length>0&&$===M[0][0]&&(A=!0,I=M.shift(),U=new b(U,B.translateToString(!0,I[0],I[1]),I[1]-I[0]),O=I[1]-1),W=U.getChars(),z=U.getCode(),K=(j*T.cols+$)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(U,$,H,this.dimensions.device.cell.width),ee&&H===G&&($===J&&(this._model.cursor={x:J,y:Z,width:U.getWidth(),style:this._coreBrowserService.isFocused?T.options.cursorStyle||"block":T.options.cursorInactiveStyle,cursorWidth:T.options.cursorWidth,dpr:this._devicePixelRatio},ae=J+U.getWidth()-1),$>=J&&$<=ae&&(this._coreBrowserService.isFocused&&(T.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&T.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),z!==h.NULL_CELL_CODE&&(this._model.lineLengths[j]=$+1),(this._model.cells[K]!==z||this._model.cells[K+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[K+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[K+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ue=!0,W.length>1&&(z|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[K]=z,this._model.cells[K+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[K+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[K+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,X=U.getWidth(),this._glyphRenderer.value.updateCell($,j,z,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,W,X,N),A))for(U=this._workCell,$++;$<O;$++)P=(j*T.cols+$)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell($,j,h.NULL_CELL_CODE,0,0,0,h.NULL_CELL_CHAR,0,0),this._model.cells[P]=h.NULL_CELL_CODE,this._model.cells[P+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[P+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[P+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ue&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(k,D){this._canvas.width===k&&this._canvas.height===D||(this._canvas.width=k,this._canvas.height=D,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const k=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:k,end:k})}}i.WebglRenderer=y;class b extends a.AttributeData{constructor(k,D,T){super(),this.content=0,this.combinedData="",this.fg=k.fg,this.bg=k.bg,this.combinedData=D,this._width=T}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(k){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function E(R,k,D=0){return Math.max(Math.min(R,k),D)}i.JoinedCellData=b},381:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;const f=o(374);function _(c,p,w){const C=(0,f.throwIfFalsy)(c.createShader(p));if(c.shaderSource(C,w),c.compileShader(C),c.getShaderParameter(C,c.COMPILE_STATUS))return C;console.error(c.getShaderInfoLog(C)),c.deleteShader(C)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(c,p,w){const C=(0,f.throwIfFalsy)(c.createProgram());if(c.attachShader(C,(0,f.throwIfFalsy)(_(c,c.VERTEX_SHADER,p))),c.attachShader(C,(0,f.throwIfFalsy)(_(c,c.FRAGMENT_SHADER,w))),c.linkProgram(C),c.getProgramParameter(C,c.LINK_STATUS))return C;console.error(c.getProgramInfoLog(C)),c.deleteProgram(C)},i.createShader=_,i.expandFloat32Array=function(c,p){const w=Math.min(2*c.length,p),C=new Float32Array(w);for(let u=0;u<c.length;u++)C[u]=c[u];return C},i.GLTexture=class{constructor(c){this.texture=c,this.version=-1}}},592:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(627),_=o(237),c=o(374),p=o(859);class w extends p.Disposable{constructor(u,n,a,l,h,m,L,g){super(),this._container=n,this._alpha=h,this._coreBrowserService=m,this._optionsService=L,this._themeService=g,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${a}-layer`),this._canvas.style.zIndex=l.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(x=>{this._refreshCharAtlas(u,x),this.reset(u)})),this.register((0,p.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,c.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(u){}handleFocus(u){}handleCursorMove(u){}handleGridChanged(u,n,a){}handleSelectionChanged(u,n,a,l=!1){}_setTransparency(u,n){if(n===this._alpha)return;const a=this._canvas;this._alpha=n,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,a),this._refreshCharAtlas(u,this._themeService.colors),this.handleGridChanged(u,0,u.rows-1)}_refreshCharAtlas(u,n){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,f.acquireTextureAtlas)(u,this._optionsService.rawOptions,n,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(u,n){this._deviceCellWidth=n.device.cell.width,this._deviceCellHeight=n.device.cell.height,this._deviceCharWidth=n.device.char.width,this._deviceCharHeight=n.device.char.height,this._deviceCharLeft=n.device.char.left,this._deviceCharTop=n.device.char.top,this._canvas.width=n.device.canvas.width,this._canvas.height=n.device.canvas.height,this._canvas.style.width=`${n.css.canvas.width}px`,this._canvas.style.height=`${n.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(u,this._themeService.colors)}_fillBottomLineAtCells(u,n,a=1){this._ctx.fillRect(u*this._deviceCellWidth,(n+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,a*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(u,n,a,l){this._alpha?this._ctx.clearRect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,l*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,l*this._deviceCellHeight))}_fillCharTrueColor(u,n,a,l){this._ctx.font=this._getFont(u,!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipCell(a,l,n.getWidth()),this._ctx.fillText(n.getChars(),a*this._deviceCellWidth+this._deviceCharLeft,l*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(u,n,a){this._ctx.beginPath(),this._ctx.rect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(u,n,a){return`${a?"italic":""} ${n?u.options.fontWeightBold:u.options.fontWeight} ${u.options.fontSize*this._coreBrowserService.dpr}px ${u.options.fontFamily}`}}i.BaseRenderLayer=w},733:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),c=o(592);class p extends c.BaseRenderLayer{constructor(C,u,n,a,l,h,m){super(n,C,"link",u,!0,l,h,m),this.register(a.onShowLinkUnderline(L=>this._handleShowLinkUnderline(L))),this.register(a.onHideLinkUnderline(L=>this._handleHideLinkUnderline(L)))}resize(C,u){super.resize(C,u),this._state=void 0}reset(C){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const C=this._state.y2-this._state.y1-1;C>0&&this._clearCells(0,this._state.y1+1,this._state.cols,C),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(C){if(C.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:C.fg!==void 0&&(0,f.is256Color)(C.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[C.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,C.y1===C.y2)this._fillBottomLineAtCells(C.x1,C.y1,C.x2-C.x1);else{this._fillBottomLineAtCells(C.x1,C.y1,C.cols-C.x1);for(let u=C.y1+1;u<C.y2;u++)this._fillBottomLineAtCells(0,u,C.cols);this._fillBottomLineAtCells(0,C.y2,C.x2)}this._state=C}_handleHideLinkUnderline(C){this._clearCurrentLink()}}i.LinkRenderLayer=p},820:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,c){o.addEventListener(f,_,c);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,c))}}}},274:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),c=o(374);let p,w=0,C=0,u=!1,n=!1,a=!1,l=0;i.CellColorResolver=class{constructor(h,m,L,g,x,y){this._terminal=h,this._optionService=m,this._selectionRenderModel=L,this._decorationService=g,this._coreBrowserService=x,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(h,m,L,g){if(this.result.bg=h.bg,this.result.fg=h.fg,this.result.ext=268435456&h.bg?h.extended.ext:0,C=0,w=0,n=!1,u=!1,a=!1,p=this._themeService.colors,l=0,h.getCode()!==f.NULL_CELL_CODE&&h.extended.underlineStyle===4){const x=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));l=m*g%(2*Math.round(x))}if(this._decorationService.forEachDecorationAtCell(m,L,"bottom",x=>{x.backgroundColorRGB&&(C=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,L),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:C=(16777215&this.result.fg)<<8|255;break;default:C=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:C=(16777215&this.result.bg)<<8|255}C=_.rgba.blend(C,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else C=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(w=p.selectionForeground.rgba>>8&16777215,u=!0),(0,c.treatGlyphAsBackgroundColor)(h.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))w=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}w=_.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}u=!0}}this._decorationService.forEachDecorationAtCell(m,L,"top",x=>{x.backgroundColorRGB&&(C=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),n&&(C=a?-16777216&h.bg&-134217729|C|50331648:-16777216&h.bg|C|50331648),u&&(w=-16777216&h.fg&-67108865|w|50331648),67108864&this.result.fg&&(n&&!u&&(w=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,u=!0),!n&&u&&(C=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?C:this.result.bg,this.result.fg=u?w:this.result.fg,this.result.ext&=536870911,this.result.ext|=l<<29&3758096384}}},627:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),c=[];i.acquireTextureAtlas=function(p,w,C,u,n,a,l,h){const m=(0,_.generateConfig)(u,n,a,l,w,C,h);for(let x=0;x<c.length;x++){const y=c[x],b=y.ownedBy.indexOf(p);if(b>=0){if((0,_.configEquals)(y.config,m))return y.atlas;y.ownedBy.length===1?(y.atlas.dispose(),c.splice(x,1)):y.ownedBy.splice(b,1);break}}for(let x=0;x<c.length;x++){const y=c[x];if((0,_.configEquals)(y.config,m))return y.ownedBy.push(p),y.atlas}const L=p._core,g={atlas:new f.TextureAtlas(document,m,L.unicodeService),config:m,ownedBy:[p]};return c.push(g),g.atlas},i.removeTerminalFromCache=function(p){for(let w=0;w<c.length;w++){const C=c[w].ownedBy.indexOf(p);if(C!==-1){c[w].ownedBy.length===1?(c[w].atlas.dispose(),c.splice(w,1)):c[w].ownedBy.splice(C,1);break}}}},197:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,c,p,w,C,u,n){const a={foreground:u.foreground,background:u.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:u.ansi.slice(),contrastCache:u.contrastCache,halfContrastCache:u.halfContrastCache};return{customGlyphs:C.customGlyphs,devicePixelRatio:n,letterSpacing:C.letterSpacing,lineHeight:C.lineHeight,deviceCellWidth:_,deviceCellHeight:c,deviceCharWidth:p,deviceCharHeight:w,fontFamily:C.fontFamily,fontSize:C.fontSize,fontWeight:C.fontWeight,fontWeightBold:C.fontWeightBold,allowTransparency:C.allowTransparency,drawBoldTextInBrightColors:C.drawBoldTextInBrightColors,minimumContrastRatio:C.minimumContrastRatio,colors:a}},i.configEquals=function(_,c){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==c.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===c.devicePixelRatio&&_.customGlyphs===c.customGlyphs&&_.lineHeight===c.lineHeight&&_.letterSpacing===c.letterSpacing&&_.fontFamily===c.fontFamily&&_.fontSize===c.fontSize&&_.fontWeight===c.fontWeight&&_.fontWeightBold===c.fontWeightBold&&_.allowTransparency===c.allowTransparency&&_.deviceCharWidth===c.deviceCharWidth&&_.deviceCharHeight===c.deviceCharHeight&&_.drawBoldTextInBrightColors===c.drawBoldTextInBrightColors&&_.minimumContrastRatio===c.minimumContrastRatio&&_.colors.foreground.rgba===c.colors.foreground.rgba&&_.colors.background.rgba===c.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},1 L${.5-u},.5 L1,.5 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M1,${.5-n} L${.5-u},${.5-n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M${.5+u},1 L${.5+u},.5 L0,.5 M${.5-u},.5 L${.5-u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5+u},${.5-n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(u,n)=>`M1,.5 L${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0 M1,${.5+n} L${.5-u},${.5+n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(u,n)=>`M0,.5 L${.5+u},.5 L${.5+u},0 M${.5-u},.5 L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M0,${.5+n} L${.5+u},${.5+n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1 M${.5+u},.5 L1,.5`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M0,.5 L${.5-u},.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M${.5+u},0 L${.5+u},1 M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},1 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(u,n,a,l,h,m,L,g){const x=i.blockElementDefinitions[n];if(x)return function(R,k,D,T,N,j){for(let H=0;H<k.length;H++){const B=k[H],M=N/8,A=j/8;R.fillRect(D+B.x*M,T+B.y*A,B.w*M,B.h*A)}}(u,x,a,l,h,m),!0;const y=_[n];if(y)return function(R,k,D,T,N,j){let H=c.get(k);H||(H=new Map,c.set(k,H));const B=R.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let M=H.get(B);if(!M){const A=k[0].length,O=k.length,I=R.canvas.ownerDocument.createElement("canvas");I.width=A,I.height=O;const W=(0,f.throwIfFalsy)(I.getContext("2d")),z=new ImageData(A,O);let X,K,$,P;if(B.startsWith("#"))X=parseInt(B.slice(1,3),16),K=parseInt(B.slice(3,5),16),$=parseInt(B.slice(5,7),16),P=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[X,K,$,P]=B.substring(5,B.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<O;U++)for(let G=0;G<A;G++)z.data[4*(U*A+G)]=X,z.data[4*(U*A+G)+1]=K,z.data[4*(U*A+G)+2]=$,z.data[4*(U*A+G)+3]=k[U][G]*(255*P);W.putImageData(z,0,0),M=(0,f.throwIfFalsy)(R.createPattern(I,null)),H.set(B,M)}R.fillStyle=M,R.fillRect(D,T,N,j)}(u,y,a,l,h,m),!0;const b=i.boxDrawingDefinitions[n];if(b)return function(R,k,D,T,N,j,H){R.strokeStyle=R.fillStyle;for(const[B,M]of Object.entries(k)){let A;R.beginPath(),R.lineWidth=H*Number.parseInt(B),A=typeof M=="function"?M(.15,.15/j*N):M;for(const O of A.split(" ")){const I=O[0],W=w[I];if(!W){console.error(`Could not find drawing instructions for "${I}"`);continue}const z=O.substring(1).split(",");z[0]&&z[1]&&W(R,C(z,N,j,D,T,!0,H))}R.stroke(),R.closePath()}}(u,b,a,l,h,m,g),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(R,k,D,T,N,j,H,B){const M=new Path2D;M.rect(D,T,N,j),R.clip(M),R.beginPath();const A=H/12;R.lineWidth=B*A;for(const O of k.d.split(" ")){const I=O[0],W=w[I];if(!W){console.error(`Could not find drawing instructions for "${I}"`);continue}const z=O.substring(1).split(",");z[0]&&z[1]&&W(R,C(z,N,j,D,T,!1,B,(k.leftPadding??0)*(A/2),(k.rightPadding??0)*(A/2)))}k.type===1?(R.strokeStyle=R.fillStyle,R.stroke()):R.fill(),R.closePath()}(u,E,a,l,h,m,L,g),!0)};const c=new Map;function p(u,n,a=0){return Math.max(Math.min(u,n),a)}const w={C:(u,n)=>u.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(u,n)=>u.lineTo(n[0],n[1]),M:(u,n)=>u.moveTo(n[0],n[1])};function C(u,n,a,l,h,m,L,g=0,x=0){const y=u.map(b=>parseFloat(b)||parseInt(b));if(y.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<y.length;b+=2)y[b]*=n-g*L-x*L,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,n,0)),y[b]+=l+g*L;for(let b=1;b<y.length;b+=2)y[b]*=a,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,a,0)),y[b]+=h;return y}},56:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,c,p){let w=new c.ResizeObserver(C=>{const u=C.find(l=>l.target===_);if(!u)return;if(!("devicePixelContentBoxSize"in u))return w?.disconnect(),void(w=void 0);const n=u.devicePixelContentBoxSize[0].inlineSize,a=u.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{w.observe(_,{box:["device-pixel-content-box"]})}catch{w.disconnect(),w=void 0}return(0,f.toDisposable)(()=>w?.disconnect())}},374:(S,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,c,p,w){return c===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(C){return 57344<=C&&C<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(c){return 9472<=c&&c<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,c,p=0){return(_-(2*Math.round(c)-p))%(2*Math.round(c))}},296:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,c,p,w=!1){if(this.selectionStart=c,this.selectionEnd=p,!c||!p||c[0]===p[0]&&c[1]===p[1])return void this.clear();const C=_.buffers.active.ydisp,u=c[1]-C,n=p[1]-C,a=Math.max(u,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=c[0],this.endCol=p[0])}isCellSelected(_,c,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?c>=this.startCol&&p>=this.viewportCappedStartRow&&c<this.endCol&&p<=this.viewportCappedEndRow:c<this.startCol&&p>=this.viewportCappedStartRow&&c>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),c=o(374),p=o(160),w=o(345),C=o(485),u=o(385),n=o(147),a=o(855),l={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let h;class m{get pages(){return this._pages}constructor(b,E,R){this._document=b,this._config=E,this._unicodeService=R,this._didWarmUp=!1,this._cacheMap=new C.FourKeyMap,this._cacheMapCombined=new C.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new w.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new w.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=x(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,c.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const b=new u.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const R=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,R)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(H=>2*H.canvas.width<=(m.maxTextureSize||4096)).sort((H,B)=>B.canvas.width!==H.canvas.width?B.canvas.width-H.canvas.width:B.percentageUsed-H.percentageUsed);let R=-1,k=0;for(let H=0;H<E.length;H++)if(E[H].canvas.width!==k)R=H,k=E[H].canvas.width;else if(H-R==3)break;const D=E.slice(R,R+4),T=D.map(H=>H.glyphs[0].texturePage).sort((H,B)=>H>B?1:-1),N=this.pages.length-D.length,j=this._mergePages(D,N);j.version++;for(let H=T.length-1;H>=0;H--)this._deletePage(T[H]);this.pages.push(j),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(j.canvas)}const b=new L(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){const R=2*b[0].canvas.width,k=new L(this._document,R,b);for(const[D,T]of b.entries()){const N=D*T.canvas.width%R,j=Math.floor(D/2)*T.canvas.height;k.ctx.drawImage(T.canvas,N,j);for(const B of T.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/R,B.sizeClipSpace.y=B.size.y/R,B.texturePosition.x+=N,B.texturePosition.y+=j,B.texturePositionClipSpace.x=B.texturePosition.x/R,B.texturePositionClipSpace.y=B.texturePosition.y/R;this._onRemoveTextureAtlasCanvas.fire(T.canvas);const H=this._activePages.indexOf(T);H!==-1&&this._activePages.splice(H,1)}return k}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){const R=this._pages[E];for(const k of R.glyphs)k.texturePage--;R.version++}}getRasterizedGlyphCombinedChar(b,E,R,k,D){return this._getFromCacheMap(this._cacheMapCombined,b,E,R,k,D)}getRasterizedGlyph(b,E,R,k,D){return this._getFromCacheMap(this._cacheMap,b,E,R,k,D)}_getFromCacheMap(b,E,R,k,D,T=!1){return h=b.get(E,R,k,D),h||(h=this._drawToCache(E,R,k,D,T),b.set(E,R,k,D,h)),h}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,R,k){if(this._config.allowTransparency)return p.NULL_COLOR;let D;switch(b){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(E);break;case 50331648:const T=n.AttributeData.toColorRGB(E);D=p.channels.toColor(T[0],T[1],T[2]);break;default:D=R?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return D}_getForegroundColor(b,E,R,k,D,T,N,j,H,B){const M=this._getMinimumContrastColor(b,E,R,k,D,T,N,H,j,B);if(M)return M;let A;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&H&&T<8&&(T+=8),A=this._getColorFromAnsiIndex(T);break;case 50331648:const O=n.AttributeData.toColorRGB(T);A=p.channels.toColor(O[0],O[1],O[2]);break;default:A=N?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=p.color.opaque(A)),j&&(A=p.color.multiplyOpacity(A,f.DIM_OPACITY)),A}_resolveBackgroundRgba(b,E,R){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,R,k){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&k&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,R,k,D,T,N,j,H,B){if(this._config.minimumContrastRatio===1||B)return;const M=this._getContrastCache(H),A=M.getColor(b,k);if(A!==void 0)return A||void 0;const O=this._resolveBackgroundRgba(E,R,N),I=this._resolveForegroundRgba(D,T,N,j),W=p.rgba.ensureContrastRatio(O,I,this._config.minimumContrastRatio/(H?2:1));if(!W)return void M.setColor(b,k,null);const z=p.channels.toColor(W>>24&255,W>>16&255,W>>8&255);return M.setColor(b,k,z),z}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,R,k,D=!1){const T=typeof b=="number"?String.fromCharCode(b):b,N=Math.min(this._config.deviceCellWidth*Math.max(T.length,2)+4,this._textureSize);this._tmpCanvas.width<N&&(this._tmpCanvas.width=N);const j=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<j&&(this._tmpCanvas.height=j),this._tmpCtx.save(),this._workAttributeData.fg=R,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=k,this._workAttributeData.isInvisible())return l;const H=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),M=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),O=!!this._workAttributeData.isUnderline(),I=!!this._workAttributeData.isStrikethrough(),W=!!this._workAttributeData.isOverline();let z=this._workAttributeData.getFgColor(),X=this._workAttributeData.getFgColorMode(),K=this._workAttributeData.getBgColor(),$=this._workAttributeData.getBgColorMode();if(B){const q=z;z=K,K=q;const ne=X;X=$,$=ne}const P=this._getBackgroundColor($,K,B,M);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const U=H?this._config.fontWeightBold:this._config.fontWeight,G=A?"italic":"";this._tmpCtx.font=`${G} ${U} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Z=T.length===1&&(0,c.isPowerlineGlyph)(T.charCodeAt(0)),J=T.length===1&&(0,c.isRestrictedPowerlineGlyph)(T.charCodeAt(0)),ae=this._getForegroundColor(E,$,K,R,X,z,B,M,H,(0,c.treatGlyphAsBackgroundColor)(T.charCodeAt(0)));this._tmpCtx.fillStyle=ae.css;const ee=J?0:4;let ue=!1;this._config.customGlyphs!==!1&&(ue=(0,_.tryDrawCustomChar)(this._tmpCtx,T,ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let ge,oe=!Z;if(ge=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),O){this._tmpCtx.save();const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ne=q%2==1?.5:0;if(this._tmpCtx.lineWidth=q,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())oe=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{oe=!1;let de=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&de<8&&(de+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(de).css}this._tmpCtx.beginPath();const fe=ee,ce=Math.ceil(ee+this._config.deviceCharHeight)-ne-(D?2*q:0),ze=ce+q,Ee=ce+2*q;let ke=this._workAttributeData.getUnderlineVariantOffset();for(let de=0;de<ge;de++){this._tmpCtx.save();const he=fe+de*this._config.deviceCellWidth,le=fe+(de+1)*this._config.deviceCellWidth,Q=he+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(he,ce),this._tmpCtx.lineTo(le,ce),this._tmpCtx.moveTo(he,Ee),this._tmpCtx.lineTo(le,Ee);break;case 3:const me=q<=1?Ee:Math.ceil(ee+this._config.deviceCharHeight-q/2)-ne,_e=q<=1?ce:Math.ceil(ee+this._config.deviceCharHeight+q/2)-ne,Pe=new Path2D;Pe.rect(he,ce,this._config.deviceCellWidth,Ee-ce),this._tmpCtx.clip(Pe),this._tmpCtx.moveTo(he-this._config.deviceCellWidth/2,ze),this._tmpCtx.bezierCurveTo(he-this._config.deviceCellWidth/2,_e,he,_e,he,ze),this._tmpCtx.bezierCurveTo(he,me,Q,me,Q,ze),this._tmpCtx.bezierCurveTo(Q,_e,le,_e,le,ze),this._tmpCtx.bezierCurveTo(le,me,le+this._config.deviceCellWidth/2,me,le+this._config.deviceCellWidth/2,ze);break;case 4:const Fe=ke===0?0:ke>=q?2*q-ke:q-ke;ke>=q||Fe===0?(this._tmpCtx.setLineDash([Math.round(q),Math.round(q)]),this._tmpCtx.moveTo(he+Fe,ce),this._tmpCtx.lineTo(le,ce)):(this._tmpCtx.setLineDash([Math.round(q),Math.round(q)]),this._tmpCtx.moveTo(he,ce),this._tmpCtx.lineTo(he+Fe,ce),this._tmpCtx.moveTo(he+Fe+q,ce),this._tmpCtx.lineTo(le,ce)),ke=(0,c.computeNextVariantOffset)(le-he,q,ke);break;case 5:const zt=.6,kr=.3,bt=le-he,Tt=Math.floor(zt*bt),Pt=Math.floor(kr*bt),rr=bt-Tt-Pt;this._tmpCtx.setLineDash([Tt,Pt,rr]),this._tmpCtx.moveTo(he,ce),this._tmpCtx.lineTo(le,ce);break;default:this._tmpCtx.moveTo(he,ce),this._tmpCtx.lineTo(le,ce)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ue&&this._config.fontSize>=12&&!this._config.allowTransparency&&T!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const de=this._tmpCtx.measureText(T);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in de&&de.actualBoundingBoxDescent>0){this._tmpCtx.save();const he=new Path2D;he.rect(fe,ce-Math.ceil(q/2),this._config.deviceCellWidth*ge,Ee-ce+Math.ceil(q/2)),this._tmpCtx.clip(he),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(T,ee,ee+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(W){const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ne=q%2==1?.5:0;this._tmpCtx.lineWidth=q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+ne),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*ge,ee+ne),this._tmpCtx.stroke()}if(ue||this._tmpCtx.fillText(T,ee,ee+this._config.deviceCharHeight),T==="_"&&!this._config.allowTransparency){let q=g(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ae,oe);if(q)for(let ne=1;ne<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(T,ee,ee+this._config.deviceCharHeight-ne),q=g(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ae,oe),q);ne++);}if(I){const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),ne=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+Math.floor(this._config.deviceCharHeight/2)-ne),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*ge,ee+Math.floor(this._config.deviceCharHeight/2)-ne),this._tmpCtx.stroke()}this._tmpCtx.restore();const Te=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let vt;if(vt=this._config.allowTransparency?function(q){for(let ne=0;ne<q.data.length;ne+=4)if(q.data[ne+3]>0)return!1;return!0}(Te):g(Te,P,ae,oe),vt)return l;const se=this._findGlyphBoundingBox(Te,this._workBoundingBox,N,J,ue,ee);let te,re;for(;;){if(this._activePages.length===0){const q=this._createNewPage();te=q,re=q.currentRow,re.height=se.size.y;break}te=this._activePages[this._activePages.length-1],re=te.currentRow;for(const q of this._activePages)se.size.y<=q.currentRow.height&&(te=q,re=q.currentRow);for(let q=this._activePages.length-1;q>=0;q--)for(const ne of this._activePages[q].fixedRows)ne.height<=re.height&&se.size.y<=ne.height&&(te=this._activePages[q],re=ne);if(re.y+se.size.y>=te.canvas.height||re.height>se.size.y+2){let q=!1;if(te.currentRow.y+te.currentRow.height+se.size.y>=te.canvas.height){let ne;for(const fe of this._activePages)if(fe.currentRow.y+fe.currentRow.height+se.size.y<fe.canvas.height){ne=fe;break}if(ne)te=ne;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&re.y+se.size.y<=te.canvas.height&&re.height>=se.size.y&&re.x+se.size.x<=te.canvas.width)q=!0;else{const fe=this._createNewPage();te=fe,re=fe.currentRow,re.height=se.size.y,q=!0}}q||(te.currentRow.height>0&&te.fixedRows.push(te.currentRow),re={x:0,y:te.currentRow.y+te.currentRow.height,height:se.size.y},te.fixedRows.push(re),te.currentRow={x:0,y:re.y+re.height,height:0})}if(re.x+se.size.x<=te.canvas.width)break;re===te.currentRow?(re.x=0,re.y+=re.height,re.height=0):te.fixedRows.splice(te.fixedRows.indexOf(re),1)}return se.texturePage=this._pages.indexOf(te),se.texturePosition.x=re.x,se.texturePosition.y=re.y,se.texturePositionClipSpace.x=re.x/te.canvas.width,se.texturePositionClipSpace.y=re.y/te.canvas.height,se.sizeClipSpace.x/=te.canvas.width,se.sizeClipSpace.y/=te.canvas.height,re.height=Math.max(re.height,se.size.y),re.x+=se.size.x,te.ctx.putImageData(Te,se.texturePosition.x-this._workBoundingBox.left,se.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,se.size.x,se.size.y),te.addGlyph(se),te.version++,se}_findGlyphBoundingBox(b,E,R,k,D,T){E.top=0;const N=k?this._config.deviceCellHeight:this._tmpCanvas.height,j=k?this._config.deviceCellWidth:R;let H=!1;for(let B=0;B<N;B++){for(let M=0;M<j;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(b.data[A]!==0){E.top=B,H=!0;break}}if(H)break}E.left=0,H=!1;for(let B=0;B<T+j;B++){for(let M=0;M<N;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.left=B,H=!0;break}}if(H)break}E.right=j,H=!1;for(let B=T+j-1;B>=T;B--){for(let M=0;M<N;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.right=B,H=!0;break}}if(H)break}E.bottom=N,H=!1;for(let B=N-1;B>=0;B--){for(let M=0;M<j;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(b.data[A]!==0){E.bottom=B,H=!0;break}}if(H)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+T+(k||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+T+(k||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,R){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],R)for(const k of R)this._glyphs.push(...k.glyphs),this._usedPixels+=k._usedPixels;this.canvas=x(b,E,E),this.ctx=(0,c.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(y,b,E,R){const k=b.rgba>>>24,D=b.rgba>>>16&255,T=b.rgba>>>8&255,N=E.rgba>>>24,j=E.rgba>>>16&255,H=E.rgba>>>8&255,B=Math.floor((Math.abs(k-N)+Math.abs(D-j)+Math.abs(T-H))/12);let M=!0;for(let A=0;A<y.data.length;A+=4)y.data[A]===k&&y.data[A+1]===D&&y.data[A+2]===T||R&&Math.abs(y.data[A]-k)+Math.abs(y.data[A+1]-D)+Math.abs(y.data[A+2]-T)<B?y.data[A+3]=0:M=!1;return M}function x(y,b,E){const R=y.createElement("canvas");return R.width=b,R.height=E,R}},160:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,c=0;var p,w,C,u,n;function a(h){const m=h.toString(16);return m.length<2?"0"+m:m}function l(h,m){return h<m?(m+.05)/(h+.05):(h+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(m,L,g,x){return x!==void 0?`#${a(m)}${a(L)}${a(g)}${a(x)}`:`#${a(m)}${a(L)}${a(g)}`},h.toRgba=function(m,L,g,x=255){return(m<<24|L<<16|g<<8|x)>>>0},h.toColor=function(m,L,g,x){return{css:h.toCss(m,L,g,x),rgba:h.toRgba(m,L,g,x)}}}(p||(i.channels=p={})),function(h){function m(L,g){return c=Math.round(255*g),[o,f,_]=n.toChannels(L.rgba),{css:p.toCss(o,f,_,c),rgba:p.toRgba(o,f,_,c)}}h.blend=function(L,g){if(c=(255&g.rgba)/255,c===1)return{css:g.css,rgba:g.rgba};const x=g.rgba>>24&255,y=g.rgba>>16&255,b=g.rgba>>8&255,E=L.rgba>>24&255,R=L.rgba>>16&255,k=L.rgba>>8&255;return o=E+Math.round((x-E)*c),f=R+Math.round((y-R)*c),_=k+Math.round((b-k)*c),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},h.isOpaque=function(L){return(255&L.rgba)==255},h.ensureContrastRatio=function(L,g,x){const y=n.ensureContrastRatio(L.rgba,g.rgba,x);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},h.opaque=function(L){const g=(255|L.rgba)>>>0;return[o,f,_]=n.toChannels(g),{css:p.toCss(o,f,_),rgba:g}},h.opacity=m,h.multiplyOpacity=function(L,g){return c=255&L.rgba,m(L,c*g/255)},h.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(i.color=w={})),function(h){let m,L;try{const g=document.createElement("canvas");g.width=1,g.height=1;const x=g.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",L=m.createLinearGradient(0,0,1,1))}catch{}h.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return o=parseInt(g.slice(1,2).repeat(2),16),f=parseInt(g.slice(2,3).repeat(2),16),_=parseInt(g.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(g.slice(1,2).repeat(2),16),f=parseInt(g.slice(2,3).repeat(2),16),_=parseInt(g.slice(3,4).repeat(2),16),c=parseInt(g.slice(4,5).repeat(2),16),p.toColor(o,f,_,c);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const x=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return o=parseInt(x[1]),f=parseInt(x[2]),_=parseInt(x[3]),c=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),p.toColor(o,f,_,c);if(!m||!L)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=L,m.fillStyle=g,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,c]=m.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,c),css:g}}}(C||(i.css=C={})),function(h){function m(L,g,x){const y=L/255,b=g/255,E=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}h.relativeLuminance=function(L){return m(L>>16&255,L>>8&255,255&L)},h.relativeLuminance2=m}(u||(i.rgb=u={})),function(h){function m(g,x,y){const b=g>>24&255,E=g>>16&255,R=g>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;N<y&&(k>0||D>0||T>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}function L(g,x,y){const b=g>>24&255,E=g>>16&255,R=g>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;N<y&&(k<255||D<255||T<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}h.blend=function(g,x){if(c=(255&x)/255,c===1)return x;const y=x>>24&255,b=x>>16&255,E=x>>8&255,R=g>>24&255,k=g>>16&255,D=g>>8&255;return o=R+Math.round((y-R)*c),f=k+Math.round((b-k)*c),_=D+Math.round((E-D)*c),p.toRgba(o,f,_)},h.ensureContrastRatio=function(g,x,y){const b=u.relativeLuminance(g>>8),E=u.relativeLuminance(x>>8);if(l(b,E)<y){if(E<b){const D=m(g,x,y),T=l(b,u.relativeLuminance(D>>8));if(T<y){const N=L(g,x,y);return T>l(b,u.relativeLuminance(N>>8))?D:N}return D}const R=L(g,x,y),k=l(b,u.relativeLuminance(R>>8));if(k<y){const D=m(g,x,y);return k>l(b,u.relativeLuminance(D>>8))?R:D}return R}},h.reduceLuminance=m,h.increaseLuminance=L,h.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},345:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let c=0;c<this._listeners.length;c++)_.push(this._listeners[c]);for(let c=0;c<_.length;c++)_[c].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(S,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,c,p){this._data[_]||(this._data[_]={}),this._data[_][c]=p}get(_,c){return this._data[_]?this._data[_][c]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,c,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(c,p,w)}get(f,_,c,p){return this._data.get(f,_)?.get(c,p)}clear(){this._data.clear()}}},399:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let C=0,u=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),u=Math.max(C,u),a=w.timeRemaining(),1.5*u>a)return n-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-C))}ms`),void this._start();n=a}this.clear()}}class c extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const C=Date.now()+w;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}i.PriorityTaskQueue=c,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:c,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){const c=new o;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}get underlineVariantOffset(){const c=(3758096384&this._ext)>>29;return c<0?4294967288^c:c}set underlineVariantOffset(c){this._ext&=536870911,this._ext|=c<<29&3758096384}constructor(c=0,p=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),c=o(147);class p extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const u=new p;return u.setFromCharData(C),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(C[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(C[_.CHAR_DATA_CHAR_INDEX].length===2){const n=C[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=C[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|C[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=C[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=C[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let c="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,c+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):c+=String.fromCharCode(w)}return c},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let c=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[c++]=1024*(this._interim-55296)+w-56320+65536:(f[c++]=this._interim,f[c++]=w),this._interim=0}for(let w=p;w<_;++w){const C=o.charCodeAt(w);if(55296<=C&&C<=56319){if(++w>=_)return this._interim=C,c;const u=o.charCodeAt(w);56320<=u&&u<=57343?f[c++]=1024*(C-55296)+u-56320+65536:(f[c++]=C,f[c++]=u)}else C!==65279&&(f[c++]=C)}return c}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let c,p,w,C,u=0,n=0,a=0;if(this.interim[0]){let m=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let g,x=0;for(;(g=63&this.interim[++x])&&x<4;)L<<=6,L|=g;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-x;for(;a<b;){if(a>=_)return 0;if(g=o[a++],(192&g)!=128){a--,m=!0;break}this.interim[x++]=g,L<<=6,L|=63&g}m||(y===2?L<128?a--:f[u++]=L:y===3?L<2048||L>=55296&&L<=57343||L===65279||(f[u++]=L):L<65536||L>1114111||(f[u++]=L)),this.interim.fill(0)}const l=_-4;let h=a;for(;h<_;){for(;!(!(h<l)||128&(c=o[h])||128&(p=o[h+1])||128&(w=o[h+2])||128&(C=o[h+3]));)f[u++]=c,f[u++]=p,f[u++]=w,f[u++]=C,h+=4;if(c=o[h++],c<128)f[u++]=c;else if((224&c)==192){if(h>=_)return this.interim[0]=c,u;if(p=o[h++],(192&p)!=128){h--;continue}if(n=(31&c)<<6|63&p,n<128){h--;continue}f[u++]=n}else if((240&c)==224){if(h>=_)return this.interim[0]=c,u;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=_)return this.interim[0]=c,this.interim[1]=p,u;if(w=o[h++],(192&w)!=128){h--;continue}if(n=(15&c)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&c)==240){if(h>=_)return this.interim[0]=c,u;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=_)return this.interim[0]=c,this.interim[1]=p,u;if(w=o[h++],(192&w)!=128){h--;continue}if(h>=_)return this.interim[0]=c,this.interim[1]=p,this.interim[2]=w,u;if(C=o[h++],(192&C)!=128){h--;continue}if(n=(7&c)<<18|(63&p)<<12|(63&w)<<6|63&C,n<65536||n>1114111)continue;f[u++]=n}}return u}}},776:function(S,i,o){var f=this&&this.__decorate||function(n,a,l,h){var m,L=arguments.length,g=L<3?a:h===null?h=Object.getOwnPropertyDescriptor(a,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(n,a,l,h);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(g=(L<3?m(g):L>3?m(a,l,g):m(a,l))||g);return L>3&&g&&Object.defineProperty(a,l,g),g},_=this&&this.__param||function(n,a){return function(l,h){a(l,h,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const c=o(859),p=o(97),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let C,u=i.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){C=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const h=l.value;l.value=function(...m){if(C.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,m);C.trace(`GlyphRenderer#${h.name}(${m.map(g=>JSON.stringify(g)).join(", ")})`);const L=h.apply(this,m);return C.trace(`GlyphRenderer#${h.name} return`,L),L}}},726:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const c=function(p,w,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(c,p,C)};return c.toString=()=>_,i.serviceRegistry.set(_,c),c}},97:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(S){var i=s[S];if(i!==void 0)return i.exports;var o=s[S]={exports:{}};return r[S].call(o.exports,o,o.exports,d),o.exports}var v={};return(()=>{var S=v;Object.defineProperty(S,"__esModule",{value:!0}),S.WebglAddon=void 0;const i=d(345),o=d(859),f=d(399),_=d(666),c=d(776);class p extends o.Disposable{constructor(C){if(f.isSafari&&(0,f.getSafariVersion)()<16){const u={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",u))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=C,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(C){const u=C._core;if(!C.element)return void this.register(u.onWillOpen(()=>this.activate(C)));this._terminal=C;const n=u.coreService,a=u.optionsService,l=u,h=l._renderService,m=l._characterJoinerService,L=l._charSizeService,g=l._coreBrowserService,x=l._decorationService,y=l._logService,b=l._themeService;(0,c.setTraceLogger)(y),this._renderer=this.register(new _.WebglRenderer(C,m,L,g,n,x,a,b,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),h.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{const E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(C.cols,C.rows)}))}get textureAtlas(){return this._renderer?.textureAtlas}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}S.WebglAddon=p})(),v})())})(bf);var Bm=bf.exports,Lf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={903:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(274),_=o(627),c=o(237),p=o(860),w=o(374),C=o(296),u=o(345),n=o(859),a=o(399),l=o(855);class h extends n.Disposable{get canvas(){return this._canvas}get cacheCanvas(){return this._charAtlas?.pages[0].canvas}constructor(g,x,y,b,E,R,k,D,T,N){super(),this._terminal=g,this._container=x,this._alpha=E,this._themeService=R,this._bufferService=k,this._optionsService=D,this._decorationService=T,this._coreBrowserService=N,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,C.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new n.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new f.CellColorResolver(this._terminal,this._optionsService,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${y}-layer`),this._canvas.style.zIndex=b.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(j=>{this._refreshCharAtlas(j),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,n.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,w.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(g,x){}handleSelectionChanged(g,x,y=!1){this._selectionModel.update(this._terminal._core,g,x,y)}_setTransparency(g){if(g===this._alpha)return;const x=this._canvas;this._alpha=g,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,x),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(g){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,_.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,g,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,u.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let x=0;x<this._charAtlas.pages.length;x++)this._bitmapGenerator[x]=new m(this._charAtlas.pages[x].canvas)}}resize(g){this._deviceCellWidth=g.device.cell.width,this._deviceCellHeight=g.device.cell.height,this._deviceCharWidth=g.device.char.width,this._deviceCharHeight=g.device.char.height,this._deviceCharLeft=g.device.char.left,this._deviceCharTop=g.device.char.top,this._canvas.width=g.device.canvas.width,this._canvas.height=g.device.canvas.height,this._canvas.style.width=`${g.css.canvas.width}px`,this._canvas.style.height=`${g.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){this._charAtlas?.clearTexture()}_fillCells(g,x,y,b){this._ctx.fillRect(g*this._deviceCellWidth,x*this._deviceCellHeight,y*this._deviceCellWidth,b*this._deviceCellHeight)}_fillMiddleLineAtCells(g,x,y=1){const b=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(g*this._deviceCellWidth,(x+1)*this._deviceCellHeight-b-this._coreBrowserService.dpr,y*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(g,x,y=1,b=0){this._ctx.fillRect(g*this._deviceCellWidth,(x+1)*this._deviceCellHeight+b-this._coreBrowserService.dpr-1,y*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(g,x,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b;for(let E=0;E<y;E++){const R=(g+E)*this._deviceCellWidth,k=(g+E+.5)*this._deviceCellWidth,D=(g+E+1)*this._deviceCellWidth,T=(x+1)*this._deviceCellHeight-b-1,N=T-b,j=T+b;this._ctx.moveTo(R,T),this._ctx.bezierCurveTo(R,N,k,N,k,T),this._ctx.bezierCurveTo(k,j,D,j,D,T)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(g,x,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b,this._ctx.setLineDash([2*b,b]);const E=g*this._deviceCellWidth,R=(x+1)*this._deviceCellHeight-b-1;this._ctx.moveTo(E,R);for(let k=0;k<y;k++){const D=(g+y+k)*this._deviceCellWidth;this._ctx.lineTo(D,R)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(g,x,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b,this._ctx.setLineDash([4*b,3*b]);const E=g*this._deviceCellWidth,R=(g+y)*this._deviceCellWidth,k=(x+1)*this._deviceCellHeight-b-1;this._ctx.moveTo(E,k),this._ctx.lineTo(R,k),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(g,x,y){this._ctx.fillRect(g*this._deviceCellWidth,x*this._deviceCellHeight,this._coreBrowserService.dpr*y,this._deviceCellHeight)}_strokeRectAtCell(g,x,y,b){const E=this._coreBrowserService.dpr;this._ctx.lineWidth=E,this._ctx.strokeRect(g*this._deviceCellWidth+E/2,x*this._deviceCellHeight+E/2,y*this._deviceCellWidth-E,b*this._deviceCellHeight-E)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(g,x,y,b){this._alpha?this._ctx.clearRect(g*this._deviceCellWidth,x*this._deviceCellHeight,y*this._deviceCellWidth,b*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(g*this._deviceCellWidth,x*this._deviceCellHeight,y*this._deviceCellWidth,b*this._deviceCellHeight))}_fillCharTrueColor(g,x,y){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=c.TEXT_BASELINE,this._clipRow(y);let b=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(b=(0,p.tryDrawCustomChar)(this._ctx,g.getChars(),x*this._deviceCellWidth,y*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),b||this._ctx.fillText(g.getChars(),x*this._deviceCellWidth+this._deviceCharLeft,y*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(g,x,y){const b=g.getChars(),E=g.getCode(),R=g.getWidth();if(this._cellColorResolver.resolve(g,x,this._bufferService.buffer.ydisp+y,this._deviceCellWidth),!this._charAtlas)return;let k;if(k=b&&b.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(b,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(g.getCode()||l.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),!k.size.x||!k.size.y)return;this._ctx.save(),this._clipRow(y),this._bitmapGenerator[k.texturePage]&&this._charAtlas.pages[k.texturePage].canvas!==this._bitmapGenerator[k.texturePage].canvas&&(this._bitmapGenerator[k.texturePage]?.bitmap?.close(),delete this._bitmapGenerator[k.texturePage]),this._charAtlas.pages[k.texturePage].version!==this._bitmapGenerator[k.texturePage]?.version&&(this._bitmapGenerator[k.texturePage]||(this._bitmapGenerator[k.texturePage]=new m(this._charAtlas.pages[k.texturePage].canvas)),this._bitmapGenerator[k.texturePage].refresh(),this._bitmapGenerator[k.texturePage].version=this._charAtlas.pages[k.texturePage].version);let D=k.size.x;this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,w.allowRescaling)(E,R,k.size.x,this._deviceCellWidth)&&(D=this._deviceCellWidth-1),this._ctx.drawImage(this._bitmapGenerator[k.texturePage]?.bitmap||this._charAtlas.pages[k.texturePage].canvas,k.texturePosition.x,k.texturePosition.y,k.size.x,k.size.y,x*this._deviceCellWidth+this._deviceCharLeft-k.offset.x,y*this._deviceCellHeight+this._deviceCharTop-k.offset.y,D,k.size.y),this._ctx.restore()}_clipRow(g){this._ctx.beginPath(),this._ctx.rect(0,g*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(g,x){return`${x?"italic":""} ${g?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}i.BaseRenderLayer=h;class m{get bitmap(){return this._bitmap}constructor(g){this.canvas=g,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){this._bitmap?.close(),this._bitmap=void 0,a.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){this._state===0&&(this._bitmap?.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(g=>{this._state===2?this.refresh():this._bitmap=g,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasRenderer=void 0;const f=o(627),_=o(56),c=o(374),p=o(345),w=o(859),C=o(873),u=o(43),n=o(630),a=o(744);class l extends w.Disposable{constructor(m,L,g,x,y,b,E,R,k,D,T){super(),this._terminal=m,this._screenElement=L,this._bufferService=x,this._charSizeService=y,this._optionsService=b,this._coreBrowserService=k,this._themeService=T,this._observerDisposable=this.register(new w.MutableDisposable),this._onRequestRedraw=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new p.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new p.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const N=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new a.TextRenderLayer(this._terminal,this._screenElement,0,N,this._bufferService,this._optionsService,E,D,this._coreBrowserService,T),new n.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,D,this._optionsService,T),new u.LinkRenderLayer(this._terminal,this._screenElement,2,g,this._bufferService,this._optionsService,D,this._coreBrowserService,T),new C.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,R,this._coreBrowserService,D,T)];for(const j of this._renderLayers)(0,p.forwardEvent)(j.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,c.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(j,H)=>this._setCanvasDevicePixelDimensions(j,H)),this.register(this._coreBrowserService.onWindowChange(j=>{this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,j,(H,B)=>this._setCanvasDevicePixelDimensions(H,B))})),this.register((0,w.toDisposable)(()=>{for(const j of this._renderLayers)j.dispose();(0,f.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(m,L){this._updateDimensions();for(const g of this._renderLayers)g.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(m=>m.handleBlur())}handleFocus(){this._runOperation(m=>m.handleFocus())}handleSelectionChanged(m,L,g=!1){this._runOperation(x=>x.handleSelectionChanged(m,L,g)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(m=>m.handleCursorMove())}clear(){this._runOperation(m=>m.reset())}_runOperation(m){for(const L of this._renderLayers)m(L)}renderRows(m,L){for(const g of this._renderLayers)g.handleGridChanged(m,L)}clearTextureAtlas(){for(const m of this._renderLayers)m.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const m=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*m),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*m),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/m),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/m),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(m,L){this.dimensions.device.canvas.height=L,this.dimensions.device.canvas.width=m;for(const g of this._renderLayers)g.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}i.CanvasRenderer=l},873:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorRenderLayer=void 0;const f=o(457),_=o(859),c=o(399),p=o(782),w=o(903);class C extends w.BaseRenderLayer{constructor(n,a,l,h,m,L,g,x,y,b){super(n,a,"cursor",l,!0,b,m,L,y,x),this._onRequestRedraw=h,this._coreService=g,this._cursorBlinkStateManager=this.register(new _.MutableDisposable),this._cell=new p.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(L.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(n){super.resize(n),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){this._clearCursor(),this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){this._cursorBlinkStateManager.value?.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){this._cursorBlinkStateManager.value?.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){this._cursorBlinkStateManager.value?.restartBlinkAnimation()}handleGridChanged(n,a){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(n){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const a=this._bufferService.buffer.ybase+this._bufferService.buffer.y,l=a-this._bufferService.buffer.ydisp;if(l<0||l>=this._bufferService.rows)return void this._clearCursor();const h=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(a).loadCell(h,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const m=this._optionsService.rawOptions.cursorStyle,L=this._optionsService.rawOptions.cursorInactiveStyle;return L&&L!=="none"&&this._cursorRenderers[L](h,l,this._cell),this._ctx.restore(),this._state.x=h,this._state.y=l,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===h&&this._state.y===l&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](h,l,this._cell),this._ctx.restore(),this._state.x=h,this._state.y=l,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(c.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(n,a,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(n,a,l.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(l,n,a),this._ctx.restore()}_renderUnderlineCursor(n,a,l){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(n,a),this._ctx.restore()}_renderOutlineCursor(n,a,l){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(n,a,l.getWidth(),1),this._ctx.restore()}}i.CursorRenderLayer=C},574:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GridCache=void 0,i.GridCache=class{constructor(){this.cache=[]}resize(o,f){for(let _=0;_<o;_++){this.cache.length<=_&&this.cache.push([]);for(let c=this.cache[_].length;c<f;c++)this.cache[_].push(void 0);this.cache[_].length=f}this.cache.length=o}clear(){for(let o=0;o<this.cache.length;o++)for(let f=0;f<this.cache[o].length;f++)this.cache[o][f]=void 0}}},43:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),c=o(903);class p extends c.BaseRenderLayer{constructor(C,u,n,a,l,h,m,L,g){super(C,u,"link",n,!0,g,l,h,m,L),this.register(a.onShowLinkUnderline(x=>this._handleShowLinkUnderline(x))),this.register(a.onHideLinkUnderline(x=>this._handleHideLinkUnderline(x)))}resize(C){super.resize(C),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const C=this._state.y2-this._state.y1-1;C>0&&this._clearCells(0,this._state.y1+1,this._state.cols,C),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(C){if(C.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:C.fg&&(0,f.is256Color)(C.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[C.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,C.y1===C.y2)this._fillBottomLineAtCells(C.x1,C.y1,C.x2-C.x1);else{this._fillBottomLineAtCells(C.x1,C.y1,C.cols-C.x1);for(let u=C.y1+1;u<C.y2;u++)this._fillBottomLineAtCells(0,u,C.cols);this._fillBottomLineAtCells(0,C.y2,C.x2)}this._state=C}_handleHideLinkUnderline(C){this._clearCurrentLink()}}i.LinkRenderLayer=p},630:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRenderLayer=void 0;const f=o(903);class _ extends f.BaseRenderLayer{constructor(p,w,C,u,n,a,l,h){super(p,w,"selection",C,!0,h,u,l,a,n),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(p){super.resize(p),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(p,w,C){super.handleSelectionChanged(p,w,C),this._redrawSelection(p,w,C)}_redrawSelection(p,w,C){if(!this._didStateChange(p,w,C,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!p||!w)return void this._clearState();const u=p[1]-this._bufferService.buffer.ydisp,n=w[1]-this._bufferService.buffer.ydisp,a=Math.max(u,0),l=Math.min(n,this._bufferService.rows-1);if(a>=this._bufferService.rows||l<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,C){const h=p[0],m=w[0]-h,L=l-a+1;this._fillCells(h,a,m,L)}else{const h=u===a?p[0]:0,m=a===n?w[0]:this._bufferService.cols;this._fillCells(h,a,m-h,1);const L=Math.max(l-a-1,0);if(this._fillCells(0,a+1,this._bufferService.cols,L),a!==l){const g=n===l?w[0]:this._bufferService.cols;this._fillCells(0,l,g,1)}}this._state.start=[p[0],p[1]],this._state.end=[w[0],w[1]],this._state.columnSelectMode=C,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(p,w,C,u){return!this._areCoordinatesEqual(p,this._state.start)||!this._areCoordinatesEqual(w,this._state.end)||C!==this._state.columnSelectMode||u!==this._state.ydisp}_areCoordinatesEqual(p,w){return!(!p||!w)&&p[0]===w[0]&&p[1]===w[1]}}i.SelectionRenderLayer=_},744:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextRenderLayer=void 0;const f=o(577),_=o(147),c=o(782),p=o(855),w=o(903),C=o(574);class u extends w.BaseRenderLayer{constructor(a,l,h,m,L,g,x,y,b,E){super(a,l,"text",h,m,E,L,g,y,b),this._characterJoinerService=x,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new c.CellData,this._state=new C.GridCache,this.register(g.onSpecificOptionChange("allowTransparency",R=>this._setTransparency(R)))}resize(a){super.resize(a);const l=this._getFont(!1,!1);this._characterWidth===a.device.char.width&&this._characterFont===l||(this._characterWidth=a.device.char.width,this._characterFont=l,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(a,l,h){for(let m=a;m<=l;m++){const L=m+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.lines.get(L),x=this._characterJoinerService.getJoinedCharacters(L);for(let y=0;y<this._bufferService.cols;y++){g.loadCell(y,this._workCell);let b=this._workCell,E=!1,R=y;if(b.getWidth()!==0){if(x.length>0&&y===x[0][0]){E=!0;const k=x.shift();b=new f.JoinedCellData(this._workCell,g.translateToString(!0,k[0],k[1]),k[1]-k[0]),R=k[1]-1}!E&&this._isOverlapping(b)&&R<g.length-1&&g.getCodePoint(R+1)===p.NULL_CELL_CODE&&(b.content&=-12582913,b.content|=8388608),h(b,y,m),y=R}}}}_drawBackground(a,l){const h=this._ctx,m=this._bufferService.cols;let L=0,g=0,x=null;h.save(),this._forEachCell(a,l,(y,b,E)=>{let R=null;y.isInverse()?R=y.isFgDefault()?this._themeService.colors.foreground.css:y.isFgRGB()?`rgb(${_.AttributeData.toColorRGB(y.getFgColor()).join(",")})`:this._themeService.colors.ansi[y.getFgColor()].css:y.isBgRGB()?R=`rgb(${_.AttributeData.toColorRGB(y.getBgColor()).join(",")})`:y.isBgPalette()&&(R=this._themeService.colors.ansi[y.getBgColor()].css);let k=!1;this._decorationService.forEachDecorationAtCell(b,this._bufferService.buffer.ydisp+E,void 0,D=>{D.options.layer!=="top"&&k||(D.backgroundColorRGB&&(R=D.backgroundColorRGB.css),k=D.options.layer==="top")}),x===null&&(L=b,g=E),E!==g?(h.fillStyle=x||"",this._fillCells(L,g,m-L,1),L=b,g=E):x!==R&&(h.fillStyle=x||"",this._fillCells(L,g,b-L,1),L=b,g=E),x=R}),x!==null&&(h.fillStyle=x,this._fillCells(L,g,m-L,1)),h.restore()}_drawForeground(a,l){this._forEachCell(a,l,(h,m,L)=>this._drawChars(h,m,L))}handleGridChanged(a,l){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,a,this._bufferService.cols,l-a+1),this._drawBackground(a,l),this._drawForeground(a,l))}_isOverlapping(a){if(a.getWidth()!==1||a.getCode()<256)return!1;const l=a.getChars();if(this._characterOverlapCache.hasOwnProperty(l))return this._characterOverlapCache[l];this._ctx.save(),this._ctx.font=this._characterFont;const h=Math.floor(this._ctx.measureText(l).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[l]=h,h}}i.TextRenderLayer=u},274:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),c=o(374);let p,w=0,C=0,u=!1,n=!1,a=!1,l=0;i.CellColorResolver=class{constructor(h,m,L,g,x,y){this._terminal=h,this._optionService=m,this._selectionRenderModel=L,this._decorationService=g,this._coreBrowserService=x,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(h,m,L,g){if(this.result.bg=h.bg,this.result.fg=h.fg,this.result.ext=268435456&h.bg?h.extended.ext:0,C=0,w=0,n=!1,u=!1,a=!1,p=this._themeService.colors,l=0,h.getCode()!==f.NULL_CELL_CODE&&h.extended.underlineStyle===4){const x=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));l=m*g%(2*Math.round(x))}if(this._decorationService.forEachDecorationAtCell(m,L,"bottom",x=>{x.backgroundColorRGB&&(C=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,L),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:C=(16777215&this.result.fg)<<8|255;break;default:C=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:C=(16777215&this.result.bg)<<8|255}C=_.rgba.blend(C,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else C=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(w=p.selectionForeground.rgba>>8&16777215,u=!0),(0,c.treatGlyphAsBackgroundColor)(h.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))w=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}w=_.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}u=!0}}this._decorationService.forEachDecorationAtCell(m,L,"top",x=>{x.backgroundColorRGB&&(C=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),n&&(C=a?-16777216&h.bg&-134217729|C|50331648:-16777216&h.bg|C|50331648),u&&(w=-16777216&h.fg&-67108865|w|50331648),67108864&this.result.fg&&(n&&!u&&(w=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,u=!0),!n&&u&&(C=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?C:this.result.bg,this.result.fg=u?w:this.result.fg,this.result.ext&=536870911,this.result.ext|=l<<29&3758096384}}},627:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),c=[];i.acquireTextureAtlas=function(p,w,C,u,n,a,l,h){const m=(0,_.generateConfig)(u,n,a,l,w,C,h);for(let x=0;x<c.length;x++){const y=c[x],b=y.ownedBy.indexOf(p);if(b>=0){if((0,_.configEquals)(y.config,m))return y.atlas;y.ownedBy.length===1?(y.atlas.dispose(),c.splice(x,1)):y.ownedBy.splice(b,1);break}}for(let x=0;x<c.length;x++){const y=c[x];if((0,_.configEquals)(y.config,m))return y.ownedBy.push(p),y.atlas}const L=p._core,g={atlas:new f.TextureAtlas(document,m,L.unicodeService),config:m,ownedBy:[p]};return c.push(g),g.atlas},i.removeTerminalFromCache=function(p){for(let w=0;w<c.length;w++){const C=c[w].ownedBy.indexOf(p);if(C!==-1){c[w].ownedBy.length===1?(c[w].atlas.dispose(),c.splice(w,1)):c[w].ownedBy.splice(C,1);break}}}},197:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,c,p,w,C,u,n){const a={foreground:u.foreground,background:u.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:u.ansi.slice(),contrastCache:u.contrastCache,halfContrastCache:u.halfContrastCache};return{customGlyphs:C.customGlyphs,devicePixelRatio:n,letterSpacing:C.letterSpacing,lineHeight:C.lineHeight,deviceCellWidth:_,deviceCellHeight:c,deviceCharWidth:p,deviceCharHeight:w,fontFamily:C.fontFamily,fontSize:C.fontSize,fontWeight:C.fontWeight,fontWeightBold:C.fontWeightBold,allowTransparency:C.allowTransparency,drawBoldTextInBrightColors:C.drawBoldTextInBrightColors,minimumContrastRatio:C.minimumContrastRatio,colors:a}},i.configEquals=function(_,c){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==c.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===c.devicePixelRatio&&_.customGlyphs===c.customGlyphs&&_.lineHeight===c.lineHeight&&_.letterSpacing===c.letterSpacing&&_.fontFamily===c.fontFamily&&_.fontSize===c.fontSize&&_.fontWeight===c.fontWeight&&_.fontWeightBold===c.fontWeightBold&&_.allowTransparency===c.allowTransparency&&_.deviceCharWidth===c.deviceCharWidth&&_.deviceCharHeight===c.deviceCharHeight&&_.drawBoldTextInBrightColors===c.drawBoldTextInBrightColors&&_.minimumContrastRatio===c.minimumContrastRatio&&_.colors.foreground.rgba===c.colors.foreground.rgba&&_.colors.background.rgba===c.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},1 L${.5-u},.5 L1,.5 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M1,${.5-n} L${.5-u},${.5-n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M${.5+u},1 L${.5+u},.5 L0,.5 M${.5-u},.5 L${.5-u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5+u},${.5-n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(u,n)=>`M1,.5 L${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0 M1,${.5+n} L${.5-u},${.5+n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(u,n)=>`M0,.5 L${.5+u},.5 L${.5+u},0 M${.5-u},.5 L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M0,${.5+n} L${.5+u},${.5+n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1 M${.5+u},.5 L1,.5`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M0,.5 L${.5-u},.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M${.5+u},0 L${.5+u},1 M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},1 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(u,n,a,l,h,m,L,g){const x=i.blockElementDefinitions[n];if(x)return function(R,k,D,T,N,j){for(let H=0;H<k.length;H++){const B=k[H],M=N/8,A=j/8;R.fillRect(D+B.x*M,T+B.y*A,B.w*M,B.h*A)}}(u,x,a,l,h,m),!0;const y=_[n];if(y)return function(R,k,D,T,N,j){let H=c.get(k);H||(H=new Map,c.set(k,H));const B=R.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let M=H.get(B);if(!M){const A=k[0].length,O=k.length,I=R.canvas.ownerDocument.createElement("canvas");I.width=A,I.height=O;const W=(0,f.throwIfFalsy)(I.getContext("2d")),z=new ImageData(A,O);let X,K,$,P;if(B.startsWith("#"))X=parseInt(B.slice(1,3),16),K=parseInt(B.slice(3,5),16),$=parseInt(B.slice(5,7),16),P=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[X,K,$,P]=B.substring(5,B.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<O;U++)for(let G=0;G<A;G++)z.data[4*(U*A+G)]=X,z.data[4*(U*A+G)+1]=K,z.data[4*(U*A+G)+2]=$,z.data[4*(U*A+G)+3]=k[U][G]*(255*P);W.putImageData(z,0,0),M=(0,f.throwIfFalsy)(R.createPattern(I,null)),H.set(B,M)}R.fillStyle=M,R.fillRect(D,T,N,j)}(u,y,a,l,h,m),!0;const b=i.boxDrawingDefinitions[n];if(b)return function(R,k,D,T,N,j,H){R.strokeStyle=R.fillStyle;for(const[B,M]of Object.entries(k)){let A;R.beginPath(),R.lineWidth=H*Number.parseInt(B),A=typeof M=="function"?M(.15,.15/j*N):M;for(const O of A.split(" ")){const I=O[0],W=w[I];if(!W){console.error(`Could not find drawing instructions for "${I}"`);continue}const z=O.substring(1).split(",");z[0]&&z[1]&&W(R,C(z,N,j,D,T,!0,H))}R.stroke(),R.closePath()}}(u,b,a,l,h,m,g),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(R,k,D,T,N,j,H,B){const M=new Path2D;M.rect(D,T,N,j),R.clip(M),R.beginPath();const A=H/12;R.lineWidth=B*A;for(const O of k.d.split(" ")){const I=O[0],W=w[I];if(!W){console.error(`Could not find drawing instructions for "${I}"`);continue}const z=O.substring(1).split(",");z[0]&&z[1]&&W(R,C(z,N,j,D,T,!1,B,(k.leftPadding??0)*(A/2),(k.rightPadding??0)*(A/2)))}k.type===1?(R.strokeStyle=R.fillStyle,R.stroke()):R.fill(),R.closePath()}(u,E,a,l,h,m,L,g),!0)};const c=new Map;function p(u,n,a=0){return Math.max(Math.min(u,n),a)}const w={C:(u,n)=>u.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(u,n)=>u.lineTo(n[0],n[1]),M:(u,n)=>u.moveTo(n[0],n[1])};function C(u,n,a,l,h,m,L,g=0,x=0){const y=u.map(b=>parseFloat(b)||parseInt(b));if(y.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<y.length;b+=2)y[b]*=n-g*L-x*L,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,n,0)),y[b]+=l+g*L;for(let b=1;b<y.length;b+=2)y[b]*=a,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,a,0)),y[b]+=h;return y}},56:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,c,p){let w=new c.ResizeObserver(C=>{const u=C.find(l=>l.target===_);if(!u)return;if(!("devicePixelContentBoxSize"in u))return w?.disconnect(),void(w=void 0);const n=u.devicePixelContentBoxSize[0].inlineSize,a=u.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{w.observe(_,{box:["device-pixel-content-box"]})}catch{w.disconnect(),w=void 0}return(0,f.toDisposable)(()=>w?.disconnect())}},374:(S,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,c,p,w){return c===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(C){return 57344<=C&&C<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(c){return 9472<=c&&c<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,c,p=0){return(_-(2*Math.round(c)-p))%(2*Math.round(c))}},296:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,c,p,w=!1){if(this.selectionStart=c,this.selectionEnd=p,!c||!p||c[0]===p[0]&&c[1]===p[1])return void this.clear();const C=_.buffers.active.ydisp,u=c[1]-C,n=p[1]-C,a=Math.max(u,0),l=Math.min(n,_.rows-1);a>=_.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=c[0],this.endCol=p[0])}isCellSelected(_,c,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?c>=this.startCol&&p>=this.viewportCappedStartRow&&c<this.endCol&&p<=this.viewportCappedEndRow:c<this.startCol&&p>=this.viewportCappedStartRow&&c>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&c>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),c=o(374),p=o(160),w=o(345),C=o(485),u=o(385),n=o(147),a=o(855),l={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let h;class m{get pages(){return this._pages}constructor(b,E,R){this._document=b,this._config=E,this._unicodeService=R,this._didWarmUp=!1,this._cacheMap=new C.FourKeyMap,this._cacheMapCombined=new C.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new w.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new w.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=x(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,c.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const b=new u.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const R=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,R)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(H=>2*H.canvas.width<=(m.maxTextureSize||4096)).sort((H,B)=>B.canvas.width!==H.canvas.width?B.canvas.width-H.canvas.width:B.percentageUsed-H.percentageUsed);let R=-1,k=0;for(let H=0;H<E.length;H++)if(E[H].canvas.width!==k)R=H,k=E[H].canvas.width;else if(H-R==3)break;const D=E.slice(R,R+4),T=D.map(H=>H.glyphs[0].texturePage).sort((H,B)=>H>B?1:-1),N=this.pages.length-D.length,j=this._mergePages(D,N);j.version++;for(let H=T.length-1;H>=0;H--)this._deletePage(T[H]);this.pages.push(j),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(j.canvas)}const b=new L(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){const R=2*b[0].canvas.width,k=new L(this._document,R,b);for(const[D,T]of b.entries()){const N=D*T.canvas.width%R,j=Math.floor(D/2)*T.canvas.height;k.ctx.drawImage(T.canvas,N,j);for(const B of T.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/R,B.sizeClipSpace.y=B.size.y/R,B.texturePosition.x+=N,B.texturePosition.y+=j,B.texturePositionClipSpace.x=B.texturePosition.x/R,B.texturePositionClipSpace.y=B.texturePosition.y/R;this._onRemoveTextureAtlasCanvas.fire(T.canvas);const H=this._activePages.indexOf(T);H!==-1&&this._activePages.splice(H,1)}return k}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){const R=this._pages[E];for(const k of R.glyphs)k.texturePage--;R.version++}}getRasterizedGlyphCombinedChar(b,E,R,k,D){return this._getFromCacheMap(this._cacheMapCombined,b,E,R,k,D)}getRasterizedGlyph(b,E,R,k,D){return this._getFromCacheMap(this._cacheMap,b,E,R,k,D)}_getFromCacheMap(b,E,R,k,D,T=!1){return h=b.get(E,R,k,D),h||(h=this._drawToCache(E,R,k,D,T),b.set(E,R,k,D,h)),h}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,R,k){if(this._config.allowTransparency)return p.NULL_COLOR;let D;switch(b){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(E);break;case 50331648:const T=n.AttributeData.toColorRGB(E);D=p.channels.toColor(T[0],T[1],T[2]);break;default:D=R?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return D}_getForegroundColor(b,E,R,k,D,T,N,j,H,B){const M=this._getMinimumContrastColor(b,E,R,k,D,T,N,H,j,B);if(M)return M;let A;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&H&&T<8&&(T+=8),A=this._getColorFromAnsiIndex(T);break;case 50331648:const O=n.AttributeData.toColorRGB(T);A=p.channels.toColor(O[0],O[1],O[2]);break;default:A=N?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=p.color.opaque(A)),j&&(A=p.color.multiplyOpacity(A,f.DIM_OPACITY)),A}_resolveBackgroundRgba(b,E,R){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,R,k){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&k&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,R,k,D,T,N,j,H,B){if(this._config.minimumContrastRatio===1||B)return;const M=this._getContrastCache(H),A=M.getColor(b,k);if(A!==void 0)return A||void 0;const O=this._resolveBackgroundRgba(E,R,N),I=this._resolveForegroundRgba(D,T,N,j),W=p.rgba.ensureContrastRatio(O,I,this._config.minimumContrastRatio/(H?2:1));if(!W)return void M.setColor(b,k,null);const z=p.channels.toColor(W>>24&255,W>>16&255,W>>8&255);return M.setColor(b,k,z),z}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,R,k,D=!1){const T=typeof b=="number"?String.fromCharCode(b):b,N=Math.min(this._config.deviceCellWidth*Math.max(T.length,2)+4,this._textureSize);this._tmpCanvas.width<N&&(this._tmpCanvas.width=N);const j=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<j&&(this._tmpCanvas.height=j),this._tmpCtx.save(),this._workAttributeData.fg=R,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=k,this._workAttributeData.isInvisible())return l;const H=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),M=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),O=!!this._workAttributeData.isUnderline(),I=!!this._workAttributeData.isStrikethrough(),W=!!this._workAttributeData.isOverline();let z=this._workAttributeData.getFgColor(),X=this._workAttributeData.getFgColorMode(),K=this._workAttributeData.getBgColor(),$=this._workAttributeData.getBgColorMode();if(B){const q=z;z=K,K=q;const ne=X;X=$,$=ne}const P=this._getBackgroundColor($,K,B,M);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const U=H?this._config.fontWeightBold:this._config.fontWeight,G=A?"italic":"";this._tmpCtx.font=`${G} ${U} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Z=T.length===1&&(0,c.isPowerlineGlyph)(T.charCodeAt(0)),J=T.length===1&&(0,c.isRestrictedPowerlineGlyph)(T.charCodeAt(0)),ae=this._getForegroundColor(E,$,K,R,X,z,B,M,H,(0,c.treatGlyphAsBackgroundColor)(T.charCodeAt(0)));this._tmpCtx.fillStyle=ae.css;const ee=J?0:4;let ue=!1;this._config.customGlyphs!==!1&&(ue=(0,_.tryDrawCustomChar)(this._tmpCtx,T,ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let ge,oe=!Z;if(ge=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),O){this._tmpCtx.save();const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ne=q%2==1?.5:0;if(this._tmpCtx.lineWidth=q,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())oe=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{oe=!1;let de=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&de<8&&(de+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(de).css}this._tmpCtx.beginPath();const fe=ee,ce=Math.ceil(ee+this._config.deviceCharHeight)-ne-(D?2*q:0),ze=ce+q,Ee=ce+2*q;let ke=this._workAttributeData.getUnderlineVariantOffset();for(let de=0;de<ge;de++){this._tmpCtx.save();const he=fe+de*this._config.deviceCellWidth,le=fe+(de+1)*this._config.deviceCellWidth,Q=he+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(he,ce),this._tmpCtx.lineTo(le,ce),this._tmpCtx.moveTo(he,Ee),this._tmpCtx.lineTo(le,Ee);break;case 3:const me=q<=1?Ee:Math.ceil(ee+this._config.deviceCharHeight-q/2)-ne,_e=q<=1?ce:Math.ceil(ee+this._config.deviceCharHeight+q/2)-ne,Pe=new Path2D;Pe.rect(he,ce,this._config.deviceCellWidth,Ee-ce),this._tmpCtx.clip(Pe),this._tmpCtx.moveTo(he-this._config.deviceCellWidth/2,ze),this._tmpCtx.bezierCurveTo(he-this._config.deviceCellWidth/2,_e,he,_e,he,ze),this._tmpCtx.bezierCurveTo(he,me,Q,me,Q,ze),this._tmpCtx.bezierCurveTo(Q,_e,le,_e,le,ze),this._tmpCtx.bezierCurveTo(le,me,le+this._config.deviceCellWidth/2,me,le+this._config.deviceCellWidth/2,ze);break;case 4:const Fe=ke===0?0:ke>=q?2*q-ke:q-ke;ke>=q||Fe===0?(this._tmpCtx.setLineDash([Math.round(q),Math.round(q)]),this._tmpCtx.moveTo(he+Fe,ce),this._tmpCtx.lineTo(le,ce)):(this._tmpCtx.setLineDash([Math.round(q),Math.round(q)]),this._tmpCtx.moveTo(he,ce),this._tmpCtx.lineTo(he+Fe,ce),this._tmpCtx.moveTo(he+Fe+q,ce),this._tmpCtx.lineTo(le,ce)),ke=(0,c.computeNextVariantOffset)(le-he,q,ke);break;case 5:const zt=.6,kr=.3,bt=le-he,Tt=Math.floor(zt*bt),Pt=Math.floor(kr*bt),rr=bt-Tt-Pt;this._tmpCtx.setLineDash([Tt,Pt,rr]),this._tmpCtx.moveTo(he,ce),this._tmpCtx.lineTo(le,ce);break;default:this._tmpCtx.moveTo(he,ce),this._tmpCtx.lineTo(le,ce)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ue&&this._config.fontSize>=12&&!this._config.allowTransparency&&T!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const de=this._tmpCtx.measureText(T);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in de&&de.actualBoundingBoxDescent>0){this._tmpCtx.save();const he=new Path2D;he.rect(fe,ce-Math.ceil(q/2),this._config.deviceCellWidth*ge,Ee-ce+Math.ceil(q/2)),this._tmpCtx.clip(he),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(T,ee,ee+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(W){const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ne=q%2==1?.5:0;this._tmpCtx.lineWidth=q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+ne),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*ge,ee+ne),this._tmpCtx.stroke()}if(ue||this._tmpCtx.fillText(T,ee,ee+this._config.deviceCharHeight),T==="_"&&!this._config.allowTransparency){let q=g(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ae,oe);if(q)for(let ne=1;ne<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(T,ee,ee+this._config.deviceCharHeight-ne),q=g(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ae,oe),q);ne++);}if(I){const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),ne=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+Math.floor(this._config.deviceCharHeight/2)-ne),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*ge,ee+Math.floor(this._config.deviceCharHeight/2)-ne),this._tmpCtx.stroke()}this._tmpCtx.restore();const Te=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let vt;if(vt=this._config.allowTransparency?function(q){for(let ne=0;ne<q.data.length;ne+=4)if(q.data[ne+3]>0)return!1;return!0}(Te):g(Te,P,ae,oe),vt)return l;const se=this._findGlyphBoundingBox(Te,this._workBoundingBox,N,J,ue,ee);let te,re;for(;;){if(this._activePages.length===0){const q=this._createNewPage();te=q,re=q.currentRow,re.height=se.size.y;break}te=this._activePages[this._activePages.length-1],re=te.currentRow;for(const q of this._activePages)se.size.y<=q.currentRow.height&&(te=q,re=q.currentRow);for(let q=this._activePages.length-1;q>=0;q--)for(const ne of this._activePages[q].fixedRows)ne.height<=re.height&&se.size.y<=ne.height&&(te=this._activePages[q],re=ne);if(re.y+se.size.y>=te.canvas.height||re.height>se.size.y+2){let q=!1;if(te.currentRow.y+te.currentRow.height+se.size.y>=te.canvas.height){let ne;for(const fe of this._activePages)if(fe.currentRow.y+fe.currentRow.height+se.size.y<fe.canvas.height){ne=fe;break}if(ne)te=ne;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&re.y+se.size.y<=te.canvas.height&&re.height>=se.size.y&&re.x+se.size.x<=te.canvas.width)q=!0;else{const fe=this._createNewPage();te=fe,re=fe.currentRow,re.height=se.size.y,q=!0}}q||(te.currentRow.height>0&&te.fixedRows.push(te.currentRow),re={x:0,y:te.currentRow.y+te.currentRow.height,height:se.size.y},te.fixedRows.push(re),te.currentRow={x:0,y:re.y+re.height,height:0})}if(re.x+se.size.x<=te.canvas.width)break;re===te.currentRow?(re.x=0,re.y+=re.height,re.height=0):te.fixedRows.splice(te.fixedRows.indexOf(re),1)}return se.texturePage=this._pages.indexOf(te),se.texturePosition.x=re.x,se.texturePosition.y=re.y,se.texturePositionClipSpace.x=re.x/te.canvas.width,se.texturePositionClipSpace.y=re.y/te.canvas.height,se.sizeClipSpace.x/=te.canvas.width,se.sizeClipSpace.y/=te.canvas.height,re.height=Math.max(re.height,se.size.y),re.x+=se.size.x,te.ctx.putImageData(Te,se.texturePosition.x-this._workBoundingBox.left,se.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,se.size.x,se.size.y),te.addGlyph(se),te.version++,se}_findGlyphBoundingBox(b,E,R,k,D,T){E.top=0;const N=k?this._config.deviceCellHeight:this._tmpCanvas.height,j=k?this._config.deviceCellWidth:R;let H=!1;for(let B=0;B<N;B++){for(let M=0;M<j;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(b.data[A]!==0){E.top=B,H=!0;break}}if(H)break}E.left=0,H=!1;for(let B=0;B<T+j;B++){for(let M=0;M<N;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.left=B,H=!0;break}}if(H)break}E.right=j,H=!1;for(let B=T+j-1;B>=T;B--){for(let M=0;M<N;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.right=B,H=!0;break}}if(H)break}E.bottom=N,H=!1;for(let B=N-1;B>=0;B--){for(let M=0;M<j;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(b.data[A]!==0){E.bottom=B,H=!0;break}}if(H)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+T+(k||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+T+(k||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,R){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],R)for(const k of R)this._glyphs.push(...k.glyphs),this._usedPixels+=k._usedPixels;this.canvas=x(b,E,E),this.ctx=(0,c.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(y,b,E,R){const k=b.rgba>>>24,D=b.rgba>>>16&255,T=b.rgba>>>8&255,N=E.rgba>>>24,j=E.rgba>>>16&255,H=E.rgba>>>8&255,B=Math.floor((Math.abs(k-N)+Math.abs(D-j)+Math.abs(T-H))/12);let M=!0;for(let A=0;A<y.data.length;A+=4)y.data[A]===k&&y.data[A+1]===D&&y.data[A+2]===T||R&&Math.abs(y.data[A]-k)+Math.abs(y.data[A+1]-D)+Math.abs(y.data[A+2]-T)<B?y.data[A+3]=0:M=!1;return M}function x(y,b,E){const R=y.createElement("canvas");return R.width=b,R.height=E,R}},577:function(S,i,o){var f=this&&this.__decorate||function(a,l,h,m){var L,g=arguments.length,x=g<3?l:m===null?m=Object.getOwnPropertyDescriptor(l,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,l,h,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(g<3?L(x):g>3?L(l,h,x):L(l,h))||x);return g>3&&x&&Object.defineProperty(l,h,x),x},_=this&&this.__param||function(a,l){return function(h,m){l(h,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const c=o(147),p=o(855),w=o(782),C=o(97);class u extends c.AttributeData{constructor(l,h,m){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=h,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let n=i.CharacterJoinerService=class Ef{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(l){const h={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(h),h.id}deregister(l){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===l)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(l);if(!h||h.length===0)return[];const m=[],L=h.translateToString(!0);let g=0,x=0,y=0,b=h.getFg(0),E=h.getBg(0);for(let R=0;R<h.getTrimmedLength();R++)if(h.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==E){if(R-g>1){const k=this._getJoinedRanges(L,y,x,h,g);for(let D=0;D<k.length;D++)m.push(k[D])}g=R,y=x,b=this._workCell.fg,E=this._workCell.bg}x+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-g>1){const R=this._getJoinedRanges(L,y,x,h,g);for(let k=0;k<R.length;k++)m.push(R[k])}return m}_getJoinedRanges(l,h,m,L,g){const x=l.substring(h,m);let y=[];try{y=this._characterJoiners[0].handler(x)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const E=this._characterJoiners[b].handler(x);for(let R=0;R<E.length;R++)Ef._mergeRanges(y,E[R])}catch(E){console.error(E)}return this._stringRangesToCellRanges(y,L,g),y}_stringRangesToCellRanges(l,h,m){let L=0,g=!1,x=0,y=l[L];if(y){for(let b=m;b<this._bufferService.cols;b++){const E=h.getWidth(b),R=h.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!g&&y[0]<=x&&(y[0]=b,g=!0),y[1]<=x){if(y[1]=b,y=l[++L],!y)break;y[0]<=x?(y[0]=b,g=!0):g=!1}x+=R}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(l,h){let m=!1;for(let L=0;L<l.length;L++){const g=l[L];if(m){if(h[1]<=g[0])return l[L-1][1]=h[1],l;if(h[1]<=g[1])return l[L-1][1]=Math.max(h[1],g[1]),l.splice(L,1),l;l.splice(L,1),L--}else{if(h[1]<=g[0])return l.splice(L,0,h),l;if(h[1]<=g[1])return g[0]=Math.min(h[0],g[0]),l;h[0]<g[1]&&(g[0]=Math.min(h[0],g[0]),m=!0)}}return m?l[l.length-1][1]=h[1]:l.push(h),l}};i.CharacterJoinerService=n=f([_(0,C.IBufferService)],n)},160:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,c=0;var p,w,C,u,n;function a(h){const m=h.toString(16);return m.length<2?"0"+m:m}function l(h,m){return h<m?(m+.05)/(h+.05):(h+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(m,L,g,x){return x!==void 0?`#${a(m)}${a(L)}${a(g)}${a(x)}`:`#${a(m)}${a(L)}${a(g)}`},h.toRgba=function(m,L,g,x=255){return(m<<24|L<<16|g<<8|x)>>>0},h.toColor=function(m,L,g,x){return{css:h.toCss(m,L,g,x),rgba:h.toRgba(m,L,g,x)}}}(p||(i.channels=p={})),function(h){function m(L,g){return c=Math.round(255*g),[o,f,_]=n.toChannels(L.rgba),{css:p.toCss(o,f,_,c),rgba:p.toRgba(o,f,_,c)}}h.blend=function(L,g){if(c=(255&g.rgba)/255,c===1)return{css:g.css,rgba:g.rgba};const x=g.rgba>>24&255,y=g.rgba>>16&255,b=g.rgba>>8&255,E=L.rgba>>24&255,R=L.rgba>>16&255,k=L.rgba>>8&255;return o=E+Math.round((x-E)*c),f=R+Math.round((y-R)*c),_=k+Math.round((b-k)*c),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},h.isOpaque=function(L){return(255&L.rgba)==255},h.ensureContrastRatio=function(L,g,x){const y=n.ensureContrastRatio(L.rgba,g.rgba,x);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},h.opaque=function(L){const g=(255|L.rgba)>>>0;return[o,f,_]=n.toChannels(g),{css:p.toCss(o,f,_),rgba:g}},h.opacity=m,h.multiplyOpacity=function(L,g){return c=255&L.rgba,m(L,c*g/255)},h.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(i.color=w={})),function(h){let m,L;try{const g=document.createElement("canvas");g.width=1,g.height=1;const x=g.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",L=m.createLinearGradient(0,0,1,1))}catch{}h.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return o=parseInt(g.slice(1,2).repeat(2),16),f=parseInt(g.slice(2,3).repeat(2),16),_=parseInt(g.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(g.slice(1,2).repeat(2),16),f=parseInt(g.slice(2,3).repeat(2),16),_=parseInt(g.slice(3,4).repeat(2),16),c=parseInt(g.slice(4,5).repeat(2),16),p.toColor(o,f,_,c);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const x=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return o=parseInt(x[1]),f=parseInt(x[2]),_=parseInt(x[3]),c=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),p.toColor(o,f,_,c);if(!m||!L)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=L,m.fillStyle=g,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,c]=m.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,c),css:g}}}(C||(i.css=C={})),function(h){function m(L,g,x){const y=L/255,b=g/255,E=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}h.relativeLuminance=function(L){return m(L>>16&255,L>>8&255,255&L)},h.relativeLuminance2=m}(u||(i.rgb=u={})),function(h){function m(g,x,y){const b=g>>24&255,E=g>>16&255,R=g>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;N<y&&(k>0||D>0||T>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}function L(g,x,y){const b=g>>24&255,E=g>>16&255,R=g>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;N<y&&(k<255||D<255||T<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),N=l(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}h.blend=function(g,x){if(c=(255&x)/255,c===1)return x;const y=x>>24&255,b=x>>16&255,E=x>>8&255,R=g>>24&255,k=g>>16&255,D=g>>8&255;return o=R+Math.round((y-R)*c),f=k+Math.round((b-k)*c),_=D+Math.round((E-D)*c),p.toRgba(o,f,_)},h.ensureContrastRatio=function(g,x,y){const b=u.relativeLuminance(g>>8),E=u.relativeLuminance(x>>8);if(l(b,E)<y){if(E<b){const D=m(g,x,y),T=l(b,u.relativeLuminance(D>>8));if(T<y){const N=L(g,x,y);return T>l(b,u.relativeLuminance(N>>8))?D:N}return D}const R=L(g,x,y),k=l(b,u.relativeLuminance(R>>8));if(k<y){const D=m(g,x,y);return k>l(b,u.relativeLuminance(D>>8))?R:D}return R}},h.reduceLuminance=m,h.increaseLuminance=L,h.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=l},345:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let c=0;c<this._listeners.length;c++)_.push(this._listeners[c]);for(let c=0;c<_.length;c++)_[c].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(S,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,c,p){this._data[_]||(this._data[_]={}),this._data[_][c]=p}get(_,c){return this._data[_]?this._data[_][c]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,c,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(c,p,w)}get(f,_,c,p){return this._data.get(f,_)?.get(c,p)}clear(){this._data.clear()}}},399:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let C=0,u=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),u=Math.max(C,u),a=w.timeRemaining(),1.5*u>a)return n-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-C))}ms`),void this._start();n=a}this.clear()}}class c extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const C=Date.now()+w;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}i.PriorityTaskQueue=c,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:c,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){const c=new o;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}get underlineVariantOffset(){const c=(3758096384&this._ext)>>29;return c<0?4294967288^c:c}set underlineVariantOffset(c){this._ext&=536870911,this._ext|=c<<29&3758096384}constructor(c=0,p=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),c=o(147);class p extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const u=new p;return u.setFromCharData(C),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(C[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(C[_.CHAR_DATA_CHAR_INDEX].length===2){const n=C[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=C[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|C[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=C[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=C[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let c="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,c+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):c+=String.fromCharCode(w)}return c},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let c=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[c++]=1024*(this._interim-55296)+w-56320+65536:(f[c++]=this._interim,f[c++]=w),this._interim=0}for(let w=p;w<_;++w){const C=o.charCodeAt(w);if(55296<=C&&C<=56319){if(++w>=_)return this._interim=C,c;const u=o.charCodeAt(w);56320<=u&&u<=57343?f[c++]=1024*(C-55296)+u-56320+65536:(f[c++]=C,f[c++]=u)}else C!==65279&&(f[c++]=C)}return c}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let c,p,w,C,u=0,n=0,a=0;if(this.interim[0]){let m=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let g,x=0;for(;(g=63&this.interim[++x])&&x<4;)L<<=6,L|=g;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-x;for(;a<b;){if(a>=_)return 0;if(g=o[a++],(192&g)!=128){a--,m=!0;break}this.interim[x++]=g,L<<=6,L|=63&g}m||(y===2?L<128?a--:f[u++]=L:y===3?L<2048||L>=55296&&L<=57343||L===65279||(f[u++]=L):L<65536||L>1114111||(f[u++]=L)),this.interim.fill(0)}const l=_-4;let h=a;for(;h<_;){for(;!(!(h<l)||128&(c=o[h])||128&(p=o[h+1])||128&(w=o[h+2])||128&(C=o[h+3]));)f[u++]=c,f[u++]=p,f[u++]=w,f[u++]=C,h+=4;if(c=o[h++],c<128)f[u++]=c;else if((224&c)==192){if(h>=_)return this.interim[0]=c,u;if(p=o[h++],(192&p)!=128){h--;continue}if(n=(31&c)<<6|63&p,n<128){h--;continue}f[u++]=n}else if((240&c)==224){if(h>=_)return this.interim[0]=c,u;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=_)return this.interim[0]=c,this.interim[1]=p,u;if(w=o[h++],(192&w)!=128){h--;continue}if(n=(15&c)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&c)==240){if(h>=_)return this.interim[0]=c,u;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=_)return this.interim[0]=c,this.interim[1]=p,u;if(w=o[h++],(192&w)!=128){h--;continue}if(h>=_)return this.interim[0]=c,this.interim[1]=p,this.interim[2]=w,u;if(C=o[h++],(192&C)!=128){h--;continue}if(n=(7&c)<<18|(63&p)<<12|(63&w)<<6|63&C,n<65536||n>1114111)continue;f[u++]=n}}return u}}},776:function(S,i,o){var f=this&&this.__decorate||function(n,a,l,h){var m,L=arguments.length,g=L<3?a:h===null?h=Object.getOwnPropertyDescriptor(a,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(n,a,l,h);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(g=(L<3?m(g):L>3?m(a,l,g):m(a,l))||g);return L>3&&g&&Object.defineProperty(a,l,g),g},_=this&&this.__param||function(n,a){return function(l,h){a(l,h,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const c=o(859),p=o(97),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let C,u=i.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,l){this._evalLazyOptionalParams(l),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...l)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){C=n},i.traceCall=function(n,a,l){if(typeof l.value!="function")throw new Error("not supported");const h=l.value;l.value=function(...m){if(C.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,m);C.trace(`GlyphRenderer#${h.name}(${m.map(g=>JSON.stringify(g)).join(", ")})`);const L=h.apply(this,m);return C.trace(`GlyphRenderer#${h.name} return`,L),L}}},726:(S,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const c=function(p,w,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(c,p,C)};return c.toString=()=>_,i.serviceRegistry.set(_,c),c}},97:(S,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(S){var i=s[S];if(i!==void 0)return i.exports;var o=s[S]={exports:{}};return r[S].call(o.exports,o,o.exports,d),o.exports}var v={};return(()=>{var S=v;Object.defineProperty(S,"__esModule",{value:!0}),S.CanvasAddon=void 0;const i=d(345),o=d(859),f=d(776),_=d(949);class c extends o.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){return this._renderer?.textureAtlas}activate(w){const C=w._core;if(!w.element)return void this.register(C.onWillOpen(()=>this.activate(w)));this._terminal=w;const u=C.coreService,n=C.optionsService,a=C.screenElement,l=C.linkifier,h=C,m=h._bufferService,L=h._renderService,g=h._characterJoinerService,x=h._charSizeService,y=h._coreBrowserService,b=h._decorationService,E=h._logService,R=h._themeService;(0,f.setTraceLogger)(E),this._renderer=new _.CanvasRenderer(w,a,l,m,x,n,g,u,y,b,R),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),L.setRenderer(this._renderer),L.handleResize(m.cols,m.rows),this.register((0,o.toDisposable)(()=>{L.setRenderer(this._terminal._core._createRenderer()),L.handleResize(w.cols,w.rows),this._renderer?.dispose(),this._renderer=void 0}))}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}S.CanvasAddon=c})(),v})())})(Lf);var Bh=Lf.exports;const Om="\x1B[2m",Im="\x1B[22m";function Fm(e){const t=e.charCodeAt(0);return t>=32&&t<=126}class Nm{term;predicted=[];_enabled=!1;altScreen=!1;constructor(t){this.term=t}get enabled(){return this._enabled}set enabled(t){this._enabled=t,t||this.reset()}setAltScreen(t){this.altScreen=t,t&&this.reset()}handleInput(t){if(!(!this._enabled||this.altScreen)){if(t.length>1){this.reset();return}for(const r of t){if(r==="\r"||r===`
`){this.reset();return}if(r===""||r==="\b"){this.predicted.length>0&&(this.predicted.pop(),this.term.write("\b \b"));return}if(!Fm(r)){this.reset();return}this.predicted.push(r),this.term.write(`${Om}${r}${Im}`)}}}handleOutput(t){if(!this._enabled||this.predicted.length===0)return;const r=new TextDecoder().decode(t);let s=0;for(let d=0;d<r.length&&s<this.predicted.length&&r[d]===this.predicted[s];d++)s++;if(s>0){const d="\b \b".repeat(this.predicted.length);this.term.write(d),this.predicted.splice(0,s)}else if(this.predicted.length>0){const d="\b \b".repeat(this.predicted.length);this.term.write(d),this.predicted=[]}}isActive(){return this.predicted.length>0}reset(){if(this.predicted.length>0){const t="\b \b".repeat(this.predicted.length);this.term.write(t),this.predicted=[]}}}const Hm=6,$m=24,jo=12,jm=e=>{const t=document.createElement("textarea");t.value=e,t.style.cssText="position:fixed;left:-9999px;top:-9999px;opacity:0",document.body.appendChild(t),t.focus(),t.select();let r=!1;try{r=document.execCommand("copy")}catch{}return document.body.removeChild(t),r},Wm=()=>{const e=V.useRef(null),t=V.useRef(null),r=V.useRef(null),{subscribeOutput:s,sendInput:d,sendControl:v,resize:S,setClientTty:i,mobileKeyboardLocked:o,setMobileKeyboardLocked:f}=Lr(),_=V.useRef(i),[c,p]=V.useState(()=>{const W=localStorage.getItem("terminal_font_size");return W?parseInt(W,10):jo}),w=V.useRef({initialDistance:0,initialFontSize:jo}),C=V.useRef(c),u=V.useRef({lastY:0,accumDelta:0,mode:"none"}),n=V.useRef(null),[a,l]=V.useState(!1),h=V.useRef(null),m=V.useRef(null),L=V.useRef(d),g=V.useRef({mouseTracking:!1,sgrMode:!1}),[x,y]=V.useState(!1),b=V.useRef(null),E=V.useRef(null),R=V.useRef(null),k=V.useRef(null),D=V.useRef(null),T=V.useRef(f);V.useEffect(()=>{L.current=d},[d]),V.useEffect(()=>{T.current=f},[f]);const N=V.useCallback(()=>{if(r.current&&t.current){r.current.fit();const{cols:W,rows:z}=t.current;S(W,z)}},[S]),j=V.useCallback(()=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(N,60)},[N]),H=V.useCallback(W=>{const z=Math.max(Hm,Math.min($m,Math.round(W)));t.current&&z!==t.current.options.fontSize&&(t.current.options.fontSize=z,p(z),C.current=z,R.current&&clearTimeout(R.current),R.current=window.setTimeout(()=>{localStorage.setItem("terminal_font_size",String(z))},500),k.current||(N(),k.current=window.setTimeout(()=>{k.current=null},100)),l(!0),h.current&&clearTimeout(h.current),h.current=window.setTimeout(()=>l(!1),1200))},[N]),B=W=>{if(W.length<2)return 0;const z=W[0].clientX-W[1].clientX,X=W[0].clientY-W[1].clientY;return Math.sqrt(z*z+X*X)},M=V.useCallback(W=>{W.touches.length===2?(u.current.mode="pinch",w.current={initialDistance:B(W.touches),initialFontSize:C.current}):W.touches.length===1&&(u.current={lastY:W.touches[0].clientY,accumDelta:0,mode:"scroll"})},[]),A=V.useCallback(W=>{const z=u.current;if(W.touches.length===2){z.mode="pinch";const X=B(W.touches),{initialDistance:K,initialFontSize:$}=w.current;if(K>0){const P=X/K;H($*P)}W.preventDefault()}else if(W.touches.length===1&&z.mode==="scroll"){const X=t.current;if(!X)return;const K=X.buffer.active.type==="alternate",$=g.current;if(K&&$.mouseTracking){const P=W.touches[0].clientY,U=z.lastY-P;z.lastY=P,z.accumDelta+=U;const G=E.current;if(!G)return;const Z=G.getBoundingClientRect(),J=Z.height/X.rows,ae=J*.8;for(;Math.abs(z.accumDelta)>=ae;){const ee=z.accumDelta>0?1:-1;z.accumDelta-=ee*ae;const ue=Z.width/X.cols,ge=Math.max(1,Math.min(X.cols,Math.floor((W.touches[0].clientX-Z.left)/ue)+1)),oe=Math.max(1,Math.min(X.rows,Math.floor((W.touches[0].clientY-Z.top)/J)+1)),Te=ee>0?65:64;$.sgrMode?L.current(`\x1B[<${Te};${ge};${oe}M`):L.current(`\x1B[M${String.fromCharCode(Te+32)}${String.fromCharCode(ge+32)}${String.fromCharCode(oe+32)}`)}W.preventDefault()}}},[H]),O=V.useCallback(()=>{u.current.mode="none"},[]);V.useEffect(()=>{if(!e.current)return;const W=new Tm.Terminal({fontSize:c,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#0d1117",foreground:"#e6edf3",cursor:"#58a6ff",cursorAccent:"#0d1117",selectionBackground:"rgba(163, 113, 247, 0.3)",black:"#484f58",red:"#f85149",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#a371f7",cyan:"#39c5cf",white:"#b1bac4",brightBlack:"#6e7681",brightRed:"#ffa198",brightGreen:"#56d364",brightYellow:"#e3b341",brightBlue:"#79c0ff",brightMagenta:"#d2a8ff",brightCyan:"#56d4dd",brightWhite:"#f0f6fc"},scrollback:5e3,cursorBlink:!0,allowProposedApi:!0,macOptionClickForcesSelection:!0});t.current=W;const z=new Nm(W);z.enabled=localStorage.getItem("terminal_predictive_echo")!=="off",m.current=z;const X=new Pm.FitAddon;r.current=X,W.loadAddon(X);let K="dom";try{const Q=new Bm.WebglAddon;Q.onContextLoss(()=>{console.warn("[Terminal] WebGL context lost, falling back to canvas"),Q.dispose();try{W.loadAddon(new Bh.CanvasAddon)}catch{}}),W.loadAddon(Q),K="webgl"}catch{try{W.loadAddon(new Bh.CanvasAddon),K="canvas"}catch{K="dom"}}console.log(`[Terminal] Using ${K} renderer`),W.open(e.current);const $=e.current.querySelector(".xterm-helper-textarea");D.current=$,("ontouchstart"in window||navigator.maxTouchPoints>0)&&$&&$.setAttribute("inputmode","none");const U=e.current.querySelector(".xterm-screen");E.current=U;let G=null,Z=!1;const J=4,ae=new WeakSet,ee=/mac/i.test(navigator.platform)||/macintosh/i.test(navigator.userAgent),ue=ee?{altKey:!0}:{shiftKey:!0},ge=(Q,me={})=>{const _e={bubbles:!0,cancelable:!0,view:Q.view,detail:Q.detail,screenX:Q.screenX,screenY:Q.screenY,clientX:Q.clientX,clientY:Q.clientY,button:Q.button,buttons:Q.buttons,relatedTarget:Q.relatedTarget,shiftKey:Q.shiftKey,ctrlKey:Q.ctrlKey,altKey:Q.altKey,metaKey:Q.metaKey,...me},Pe=new MouseEvent(Q.type,_e);return ae.add(Pe),Pe},oe=Q=>{ae.has(Q)||!g.current.mouseTracking||Q.button!==0||(ee?Q.altKey:Q.shiftKey)||(Q.stopImmediatePropagation(),Q.preventDefault(),G=Q,Z=!1)},Te=Q=>{if(!G||ae.has(Q))return;if(Q.stopImmediatePropagation(),Q.preventDefault(),!Z){const _e=Q.clientX-G.clientX,Pe=Q.clientY-G.clientY;if(_e*_e+Pe*Pe<J*J)return;Z=!0,G.target?.dispatchEvent(ge(G,ue))}const me=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,view:Q.view,screenX:Q.screenX,screenY:Q.screenY,clientX:Q.clientX,clientY:Q.clientY,button:Q.button,buttons:Q.buttons,ctrlKey:Q.ctrlKey,altKey:Q.altKey,metaKey:Q.metaKey,shiftKey:Q.shiftKey,...ue});ae.add(me),Q.target?.dispatchEvent(me)},vt=Q=>{!G||ae.has(Q)||(Q.stopImmediatePropagation(),Q.preventDefault(),Z?Q.target?.dispatchEvent(ge(Q,ue)):(G.target?.dispatchEvent(ge(G)),Q.target?.dispatchEvent(ge(Q))),G=null,Z=!1)};U&&(U.addEventListener("mousedown",oe,{capture:!0}),U.addEventListener("mousemove",Te,{capture:!0}),U.addEventListener("mouseup",vt,{capture:!0}));const se=W.parser.registerOscHandler(7337,Q=>(Q&&_.current(Q),!1)),te=W.parser.registerCsiHandler({prefix:"?",final:"h"},Q=>{for(let me=0;me<Q.length;me++){const _e=Q[me];typeof _e=="number"&&((_e===1e3||_e===1002||_e===1003)&&(g.current.mouseTracking=!0),_e===1006&&(g.current.sgrMode=!0),(_e===1049||_e===47)&&(m.current?.setAltScreen(!0),T.current(!0)))}return!1}),re=W.parser.registerCsiHandler({prefix:"?",final:"l"},Q=>{for(let me=0;me<Q.length;me++){const _e=Q[me];typeof _e=="number"&&((_e===1e3||_e===1002||_e===1003)&&(g.current.mouseTracking=!1),_e===1006&&(g.current.sgrMode=!1),(_e===1049||_e===47)&&m.current?.setAltScreen(!1))}return!1});setTimeout(()=>{X.fit();const{cols:Q,rows:me}=W;S(Q,me)},0);const q=W.onData(Q=>{z.handleInput(Q),d(Q)}),ne=5;let fe=0,ce=!1;const ze=s(Q=>{Q instanceof Uint8Array&&z.handleOutput(Q),fe++,fe>=ne&&!ce&&(ce=!0,v(50)),W.write((Q instanceof Uint8Array,Q),()=>{fe--,fe===0&&ce&&(ce=!1,v(51))})}),Ee=Q=>{z.enabled=Q.detail};window.addEventListener("predictive-echo-changed",Ee),window.addEventListener("resize",j);const ke=window.visualViewport;ke?.addEventListener("resize",j);const de=e.current;de.addEventListener("touchstart",M,{passive:!0}),de.addEventListener("touchmove",A,{passive:!1}),de.addEventListener("touchend",O,{passive:!0});const he=async Q=>{const me=Q.clipboardData?.items;if(me){for(const _e of Array.from(me))if(_e.type.startsWith("image/")){Q.preventDefault();const Pe=_e.getAsFile();if(!Pe)return;try{const Fe=await fetch("/api/upload-image",{method:"POST",headers:{"Content-Type":Pe.type},body:Pe});if(!Fe.ok)throw new Error(`Upload failed: ${Fe.status}`);const{path:zt}=await Fe.json();d(zt)}catch(Fe){console.error("[Terminal] Image upload failed:",Fe)}return}}};de.addEventListener("paste",he,!0);const le=()=>{if(document.getElementById("copy-mode-overlay"))return;const Q=[],me=W.buffer.active;for(let co=0;co<me.length;co++){const Kl=me.getLine(co);Kl&&Q.push(Kl.translateToString(!0))}const _e=Q.join(`
`).replace(/\n+$/,"");if(!_e)return;const Pe=document.createElement("div");Pe.id="copy-mode-overlay",Pe.style.cssText="position:fixed;inset:0;z-index:9999;display:flex;flex-direction:column;background:#0d1117;";const Fe=document.createElement("div");Fe.style.cssText="display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-bottom:1px solid #30363d;flex-shrink:0;";const zt=document.createElement("span");zt.textContent="Select text to copy",zt.style.cssText="color:#8b949e;font-size:12px;";const kr=document.createElement("div");kr.style.cssText="display:flex;gap:8px;";const bt="padding:4px 10px;border-radius:6px;border:1px solid #30363d;font-size:12px;background:#21262d;color:#e6edf3;-webkit-appearance:none;",Tt=document.createElement("button");Tt.textContent="Select All",Tt.style.cssText=bt;const Pt=document.createElement("button");Pt.textContent="Copy All",Pt.style.cssText=bt+"background:#58a6ff;color:#fff;border-color:#58a6ff;";const rr=document.createElement("button");rr.textContent="",rr.style.cssText=bt+"min-width:32px;",kr.append(Tt,Pt,rr),Fe.append(zt,kr);const Bt=document.createElement("textarea");Bt.readOnly=!0,Bt.value=_e,Bt.style.cssText='flex:1;margin:0;padding:12px;border:none;resize:none;outline:none;background:#0d1117;color:#e6edf3;font-family:Menlo,Monaco,"Courier New",monospace;font-size:12px;line-height:1.5;-webkit-user-select:text;user-select:text;-webkit-touch-callout:default;',Pe.append(Fe,Bt),document.body.appendChild(Pe),Bt.scrollTop=Bt.scrollHeight;const kf=()=>{Pe.remove()};rr.onclick=kf,Tt.onclick=()=>{Bt.focus(),Bt.select()},Pt.onclick=()=>{Bt.focus(),Bt.select(),jm(_e),y(!0),b.current&&clearTimeout(b.current),b.current=window.setTimeout(()=>y(!1),1500)}};return window.addEventListener("terminal-copy-viewport",le),()=>{ze(),q.dispose(),se.dispose(),te.dispose(),re.dispose(),window.removeEventListener("predictive-echo-changed",Ee),window.removeEventListener("resize",j),ke?.removeEventListener("resize",j),window.removeEventListener("terminal-copy-viewport",le),U&&(U.removeEventListener("mousedown",oe,{capture:!0}),U.removeEventListener("mousemove",Te,{capture:!0}),U.removeEventListener("mouseup",vt,{capture:!0})),n.current&&clearTimeout(n.current),b.current&&clearTimeout(b.current),R.current&&clearTimeout(R.current),k.current&&clearTimeout(k.current),de.removeEventListener("touchstart",M),de.removeEventListener("touchmove",A),de.removeEventListener("touchend",O),de.removeEventListener("paste",he,!0),W.dispose()}},[s,d,v,S,N,j,M,A,O]),V.useEffect(()=>{const W=D.current;!W||!("ontouchstart"in window||navigator.maxTouchPoints>0)||(o?(W.setAttribute("inputmode","none"),document.activeElement===W&&W.blur()):(W.removeAttribute("inputmode"),W.focus({preventScroll:!0})))},[o]);const I=Math.round(c/jo*100);return F.jsxs("div",{className:"relative w-full h-full",children:[F.jsx("div",{ref:e,className:"w-full h-full bg-bg-primary overflow-hidden",style:{padding:"4px"}}),a&&F.jsxs("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-black/70 backdrop-blur-sm border border-border-subtle text-text-primary text-sm font-mono pointer-events-none select-none z-10",children:[I,"%  ",c,"px"]}),x&&F.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-accent-green/80 backdrop-blur-sm border border-accent-green/50 text-white text-sm font-mono pointer-events-none select-none z-10",children:"Copied!"})]})};function zm(){return V.useEffect(()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),F.jsx(sg,{children:F.jsx(og,{children:F.jsx(Am,{children:F.jsx(Wm,{})})})})}Wo.createRoot(document.getElementById("root")).render(F.jsx(zf.StrictMode,{children:F.jsx(zm,{})}));</script>
    <style rel="stylesheet" crossorigin>/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */.xterm{cursor:text;position:relative;-moz-user-select:none;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;inset:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility:not(.debug),.xterm .xterm-message{position:absolute;inset:0;z-index:10;color:transparent;pointer-events:none}.xterm .xterm-accessibility-tree:not(.debug) *::-moz-selection{color:transparent}.xterm .xterm-accessibility-tree:not(.debug) *::selection{color:transparent}.xterm .xterm-accessibility-tree{-webkit-user-select:text;-moz-user-select:text;user-select:text;white-space:pre}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{-webkit-text-decoration:double underline;text-decoration:double underline}.xterm-underline-3{-webkit-text-decoration:wavy underline;text-decoration:wavy underline}.xterm-underline-4{-webkit-text-decoration:dotted underline;text-decoration:dotted underline}.xterm-underline-5{-webkit-text-decoration:dashed underline;text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{-webkit-text-decoration:overline double underline;text-decoration:overline double underline}.xterm-overline.xterm-underline-3{-webkit-text-decoration:overline wavy underline;text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{-webkit-text-decoration:overline dotted underline;text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{-webkit-text-decoration:overline dashed underline;text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}html,body,#root{height:100dvh;width:100%;overflow:hidden;margin:0;padding:0}body{background-color:var(--bg-primary);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.left-0{left:0}.left-1\/2{left:50%}.top-3{top:.75rem}.top-full{top:100%}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-\[1px\]{margin-bottom:1px}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-3{margin-top:.75rem}.block{display:block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.hidden{display:none}.h-1\.5{height:.375rem}.h-12{height:3rem}.h-2{height:.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-\[40px\]{height:40px}.h-\[90vh\]{height:90vh}.h-full{height:100%}.max-h-\[200px\]{max-height:200px}.max-h-\[300px\]{max-height:300px}.max-h-\[400px\]{max-height:400px}.max-h-\[70vh\]{max-height:70vh}.max-h-\[80vh\]{max-height:80vh}.min-h-0{min-height:0px}.min-h-\[36px\]{min-height:36px}.w-1\.5{width:.375rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-2{width:.5rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-full{width:100%}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-\[160px\]{min-width:160px}.min-w-\[32px\]{min-width:32px}.min-w-\[36px\]{min-width:36px}.max-w-\[200px\]{max-width:200px}.max-w-sm{max-width:24rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.resize{resize:both}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-t-2xl{border-top-left-radius:1rem;border-top-right-radius:1rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-accent-blue{border-color:var(--accent-blue)}.border-accent-purple{border-color:var(--accent-purple)}.border-border-subtle{border-color:var(--border-subtle)}.border-t-transparent{border-top-color:transparent}.bg-accent-blue{background-color:var(--accent-blue)}.bg-accent-green{background-color:var(--accent-green)}.bg-accent-purple{background-color:var(--accent-purple)}.bg-accent-red{background-color:var(--accent-red)}.bg-bg-primary{background-color:var(--bg-primary)}.bg-bg-secondary{background-color:var(--bg-secondary)}.bg-bg-tertiary{background-color:var(--bg-tertiary)}.bg-black\/50{background-color:#00000080}.bg-black\/70{background-color:#000000b3}.bg-black\/80{background-color:#000c}.bg-border-subtle{background-color:var(--border-subtle)}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.bg-text-muted{background-color:var(--text-muted)}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\.5{padding-top:.625rem;padding-bottom:.625rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-\[env\(safe-area-inset-bottom\)\]{padding-bottom:env(safe-area-inset-bottom)}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-\[10px\]{font-size:10px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-5{line-height:1.25rem}.tracking-wider{letter-spacing:.05em}.text-accent-blue{color:var(--accent-blue)}.text-accent-green{color:var(--accent-green)}.text-accent-purple{color:var(--accent-purple)}.text-accent-red{color:var(--accent-red)}.text-border-subtle{color:var(--border-subtle)}.text-text-muted{color:var(--text-muted)}.text-text-primary{color:var(--text-primary)}.text-text-secondary{color:var(--text-secondary)}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.opacity-50{opacity:.5}.opacity-70{opacity:.7}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-100{transition-duration:.1s}.duration-200{transition-duration:.2s}.no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.mask-gradient-right{mask-image:linear-gradient(to right,black 90%,transparent 100%);-webkit-mask-image:linear-gradient(to right,black 90%,transparent 100%)}.animate-in.fade-in{animation:fadeIn .2s ease-out forwards}:root{--bg-primary: #0d1117;--bg-secondary: #161b22;--bg-tertiary: #21262d;--accent-blue: #58a6ff;--accent-green: #3fb950;--accent-red: #f85149;--accent-purple: #a371f7;--accent-orange: #d29922;--text-primary: #e6edf3;--text-secondary: #8b949e;--text-muted: #6e7681;--border-subtle: #30363d;--glow-ai: rgba(163, 113, 247, .15)}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:var(--bg-secondary)}::-webkit-scrollbar-thumb{background:var(--bg-tertiary);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:var(--border-subtle)}::-moz-selection{background-color:var(--accent-purple);color:#fff}::selection{background-color:var(--accent-purple);color:#fff}.xterm-screen{touch-action:none;contain:strict}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.placeholder\:text-text-muted::-moz-placeholder{color:var(--text-muted)}.placeholder\:text-text-muted::placeholder{color:var(--text-muted)}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:start-\[2px\]:after{content:var(--tw-content);inset-inline-start:2px}.after\:top-\[2px\]:after{content:var(--tw-content);top:2px}.after\:h-5:after{content:var(--tw-content);height:1.25rem}.after\:w-5:after{content:var(--tw-content);width:1.25rem}.after\:rounded-full:after{content:var(--tw-content);border-radius:9999px}.after\:border:after{content:var(--tw-content);border-width:1px}.after\:border-gray-300:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.after\:bg-white:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.after\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.after\:content-\[\'\'\]:after{--tw-content: "";content:var(--tw-content)}.hover\:bg-bg-tertiary:hover{background-color:var(--bg-tertiary)}.hover\:text-accent-red:hover{color:var(--accent-red)}.hover\:text-text-primary:hover{color:var(--text-primary)}.focus\:border-accent-blue:focus{border-color:var(--accent-blue)}.focus\:border-accent-purple:focus{border-color:var(--accent-purple)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:bg-bg-tertiary:active{background-color:var(--bg-tertiary)}.active\:opacity-70:active{opacity:.7}.active\:opacity-80:active{opacity:.8}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-30:disabled{opacity:.3}.disabled\:opacity-40:disabled{opacity:.4}.disabled\:opacity-50:disabled{opacity:.5}.peer:checked~.peer-checked\:bg-accent-green{background-color:var(--accent-green)}.peer:checked~.peer-checked\:after\:translate-x-full:after{content:var(--tw-content);--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked~.peer-checked\:after\:border-white:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.peer:focus~.peer-focus\:outline-none{outline:2px solid transparent;outline-offset:2px}.peer:checked~.rtl\:peer-checked\:after\:-translate-x-full:where([dir=rtl],[dir=rtl] *):after{content:var(--tw-content);--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
