<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>VibeTerm - Mobile Terminal</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const C of g.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&s(C)}).observe(document,{childList:!0,subtree:!0});function r(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function s(d){if(d.ep)return;d.ep=!0;const g=r(d);fetch(d.href,g)}})();var Ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Th(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var d=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,d.get?d:{enumerable:!0,get:function(){return e[s]}})}),r}var Oh={exports:{}},On={},Ph={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var us=Symbol.for("react.element"),Lf=Symbol.for("react.portal"),Ef=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),Mf=Symbol.for("react.provider"),Df=Symbol.for("react.context"),Af=Symbol.for("react.forward_ref"),Tf=Symbol.for("react.suspense"),Bf=Symbol.for("react.memo"),Of=Symbol.for("react.lazy"),Gl=Symbol.iterator;function Pf(e){return e===null||typeof e!="object"?null:(e=Gl&&e[Gl]||e["@@iterator"],typeof e=="function"?e:null)}var Ih={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fh=Object.assign,Nh={};function pi(e,t,r){this.props=e,this.context=t,this.refs=Nh,this.updater=r||Ih}pi.prototype.isReactComponent={};pi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hh(){}Hh.prototype=pi.prototype;function Ha(e,t,r){this.props=e,this.context=t,this.refs=Nh,this.updater=r||Ih}var ja=Ha.prototype=new Hh;ja.constructor=Ha;Fh(ja,pi.prototype);ja.isPureReactComponent=!0;var Vl=Array.isArray,jh=Object.prototype.hasOwnProperty,$a={current:null},$h={key:!0,ref:!0,__self:!0,__source:!0};function Wh(e,t,r){var s,d={},g=null,C=null;if(t!=null)for(s in t.ref!==void 0&&(C=t.ref),t.key!==void 0&&(g=""+t.key),t)jh.call(t,s)&&!$h.hasOwnProperty(s)&&(d[s]=t[s]);var i=arguments.length-2;if(i===1)d.children=r;else if(1<i){for(var o=Array(i),f=0;f<i;f++)o[f]=arguments[f+2];d.children=o}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)d[s]===void 0&&(d[s]=i[s]);return{$$typeof:us,type:e,key:g,ref:C,props:d,_owner:$a.current}}function If(e,t){return{$$typeof:us,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wa(e){return typeof e=="object"&&e!==null&&e.$$typeof===us}function Ff(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Kl=/\/+/g;function ao(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ff(""+e.key):t.toString(36)}function zs(e,t,r,s,d){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var C=!1;if(e===null)C=!0;else switch(g){case"string":case"number":C=!0;break;case"object":switch(e.$$typeof){case us:case Lf:C=!0}}if(C)return C=e,d=d(C),e=s===""?"."+ao(C,0):s,Vl(d)?(r="",e!=null&&(r=e.replace(Kl,"$&/")+"/"),zs(d,t,r,"",function(f){return f})):d!=null&&(Wa(d)&&(d=If(d,r+(!d.key||C&&C.key===d.key?"":(""+d.key).replace(Kl,"$&/")+"/")+e)),t.push(d)),1;if(C=0,s=s===""?".":s+":",Vl(e))for(var i=0;i<e.length;i++){g=e[i];var o=s+ao(g,i);C+=zs(g,t,r,o,d)}else if(o=Pf(e),typeof o=="function")for(e=o.call(e),i=0;!(g=e.next()).done;)g=g.value,o=s+ao(g,i++),C+=zs(g,t,r,o,d);else if(g==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return C}function xs(e,t,r){if(e==null)return e;var s=[],d=0;return zs(e,s,"","",function(g){return t.call(r,g,d++)}),s}function Nf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ze={current:null},Us={transition:null},Hf={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Us,ReactCurrentOwner:$a};function zh(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:xs,forEach:function(e,t,r){xs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return xs(e,function(){t++}),t},toArray:function(e){return xs(e,function(t){return t})||[]},only:function(e){if(!Wa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=pi;de.Fragment=Ef;de.Profiler=Rf;de.PureComponent=Ha;de.StrictMode=kf;de.Suspense=Tf;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hf;de.act=zh;de.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Fh({},e.props),d=e.key,g=e.ref,C=e._owner;if(t!=null){if(t.ref!==void 0&&(g=t.ref,C=$a.current),t.key!==void 0&&(d=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(o in t)jh.call(t,o)&&!$h.hasOwnProperty(o)&&(s[o]=t[o]===void 0&&i!==void 0?i[o]:t[o])}var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){i=Array(o);for(var f=0;f<o;f++)i[f]=arguments[f+2];s.children=i}return{$$typeof:us,type:e.type,key:d,ref:g,props:s,_owner:C}};de.createContext=function(e){return e={$$typeof:Df,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mf,_context:e},e.Consumer=e};de.createElement=Wh;de.createFactory=function(e){var t=Wh.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:Af,render:e}};de.isValidElement=Wa;de.lazy=function(e){return{$$typeof:Of,_payload:{_status:-1,_result:e},_init:Nf}};de.memo=function(e,t){return{$$typeof:Bf,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=Us.transition;Us.transition={};try{e()}finally{Us.transition=t}};de.unstable_act=zh;de.useCallback=function(e,t){return Ze.current.useCallback(e,t)};de.useContext=function(e){return Ze.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return Ze.current.useDeferredValue(e)};de.useEffect=function(e,t){return Ze.current.useEffect(e,t)};de.useId=function(){return Ze.current.useId()};de.useImperativeHandle=function(e,t,r){return Ze.current.useImperativeHandle(e,t,r)};de.useInsertionEffect=function(e,t){return Ze.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return Ze.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return Ze.current.useMemo(e,t)};de.useReducer=function(e,t,r){return Ze.current.useReducer(e,t,r)};de.useRef=function(e){return Ze.current.useRef(e)};de.useState=function(e){return Ze.current.useState(e)};de.useSyncExternalStore=function(e,t,r){return Ze.current.useSyncExternalStore(e,t,r)};de.useTransition=function(){return Ze.current.useTransition()};de.version="18.3.1";Ph.exports=de;var V=Ph.exports;const jf=Th(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=V,Wf=Symbol.for("react.element"),zf=Symbol.for("react.fragment"),Uf=Object.prototype.hasOwnProperty,Gf=$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vf={key:!0,ref:!0,__self:!0,__source:!0};function Uh(e,t,r){var s,d={},g=null,C=null;r!==void 0&&(g=""+r),t.key!==void 0&&(g=""+t.key),t.ref!==void 0&&(C=t.ref);for(s in t)Uf.call(t,s)&&!Vf.hasOwnProperty(s)&&(d[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)d[s]===void 0&&(d[s]=t[s]);return{$$typeof:Wf,type:e,key:g,ref:C,props:d,_owner:Gf.current}}On.Fragment=zf;On.jsx=Uh;On.jsxs=Uh;Oh.exports=On;var F=Oh.exports,Ho={},Gh={exports:{}},_t={},Vh={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,M){var A=B.length;B.push(M);e:for(;0<A;){var P=A-1>>>1,H=B[P];if(0<d(H,M))B[P]=M,B[A]=H,A=P;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var M=B[0],A=B.pop();if(A!==M){B[0]=A;e:for(var P=0,H=B.length,W=H>>>1;P<W;){var z=2*(P+1)-1,J=B[z],Y=z+1,$=B[Y];if(0>d(J,A))Y<H&&0>d($,J)?(B[P]=$,B[Y]=A,P=Y):(B[P]=J,B[z]=A,P=z);else if(Y<H&&0>d($,A))B[P]=$,B[Y]=A,P=Y;else break e}}return M}function d(B,M){var A=B.sortIndex-M.sortIndex;return A!==0?A:B.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var C=Date,i=C.now();e.unstable_now=function(){return C.now()-i}}var o=[],f=[],_=1,h=null,p=3,w=!1,S=!1,u=!1,n=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function l(B){for(var M=r(f);M!==null;){if(M.callback===null)s(f);else if(M.startTime<=B)s(f),M.sortIndex=M.expirationTime,t(o,M);else break;M=r(f)}}function m(B){if(u=!1,l(B),!S)if(r(o)!==null)S=!0,N(L);else{var M=r(f);M!==null&&I(m,M.startTime-B)}}function L(B,M){S=!1,u&&(u=!1,a(y),y=-1),w=!0;var A=p;try{for(l(M),h=r(o);h!==null&&(!(h.expirationTime>M)||B&&!R());){var P=h.callback;if(typeof P=="function"){h.callback=null,p=h.priorityLevel;var H=P(h.expirationTime<=M);M=e.unstable_now(),typeof H=="function"?h.callback=H:h===r(o)&&s(o),l(M)}else s(o);h=r(o)}if(h!==null)var W=!0;else{var z=r(f);z!==null&&I(m,z.startTime-M),W=!1}return W}finally{h=null,p=A,w=!1}}var v=!1,x=null,y=-1,b=5,E=-1;function R(){return!(e.unstable_now()-E<b)}function k(){if(x!==null){var B=e.unstable_now();E=B;var M=!0;try{M=x(!0,B)}finally{M?D():(v=!1,x=null)}}else v=!1}var D;if(typeof c=="function")D=function(){c(k)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,j=T.port2;T.port1.onmessage=k,D=function(){j.postMessage(null)}}else D=function(){n(k,0)};function N(B){x=B,v||(v=!0,D())}function I(B,M){y=n(function(){B(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){S||w||(S=!0,N(L))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var A=p;p=M;try{return B()}finally{p=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,M){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var A=p;p=B;try{return M()}finally{p=A}},e.unstable_scheduleCallback=function(B,M,A){var P=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?P+A:P):A=P,B){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=A+H,B={id:_++,callback:M,priorityLevel:B,startTime:A,expirationTime:H,sortIndex:-1},A>P?(B.sortIndex=A,t(f,B),r(o)===null&&B===r(f)&&(u?(a(y),y=-1):u=!0,I(m,A-P))):(B.sortIndex=H,t(o,B),S||w||(S=!0,N(L))),B},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(B){var M=p;return function(){var A=p;p=M;try{return B.apply(this,arguments)}finally{p=A}}}})(Kh);Vh.exports=Kh;var Kf=Vh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf=V,ft=Kf;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qh=new Set,Gi={};function Ir(e,t){ai(e,t),ai(e+"Capture",t)}function ai(e,t){for(Gi[e]=t,e=0;e<t.length;e++)qh.add(t[e])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jo=Object.prototype.hasOwnProperty,Xf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ql={},Xl={};function Yf(e){return jo.call(Xl,e)?!0:jo.call(ql,e)?!1:Xf.test(e)?Xl[e]=!0:(ql[e]=!0,!1)}function Jf(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zf(e,t,r,s){if(t===null||typeof t>"u"||Jf(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qe(e,t,r,s,d,g,C){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=g,this.removeEmptyString=C}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ze[e]=new Qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ze[t]=new Qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ze[e]=new Qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ze[e]=new Qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ze[e]=new Qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ze[e]=new Qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ze[e]=new Qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ze[e]=new Qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ze[e]=new Qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var za=/[\-:]([a-z])/g;function Ua(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(za,Ua);ze[t]=new Qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(za,Ua);ze[t]=new Qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(za,Ua);ze[t]=new Qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ze[e]=new Qe(e,1,!1,e.toLowerCase(),null,!1,!1)});ze.xlinkHref=new Qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ze[e]=new Qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ga(e,t,r,s){var d=ze.hasOwnProperty(t)?ze[t]:null;(d!==null?d.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zf(t,r,d,s)&&(r=null),s||d===null?Yf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,s=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var qt=qf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bs=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),Va=Symbol.for("react.strict_mode"),$o=Symbol.for("react.profiler"),Xh=Symbol.for("react.provider"),Yh=Symbol.for("react.context"),Ka=Symbol.for("react.forward_ref"),Wo=Symbol.for("react.suspense"),zo=Symbol.for("react.suspense_list"),qa=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),Jh=Symbol.for("react.offscreen"),Yl=Symbol.iterator;function xi(e){return e===null||typeof e!="object"?null:(e=Yl&&e[Yl]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,lo;function Ti(e){if(lo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);lo=t&&t[1]||""}return`
`+lo+e}var co=!1;function ho(e,t){if(!e||co)return"";co=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var d=f.stack.split(`
`),g=s.stack.split(`
`),C=d.length-1,i=g.length-1;1<=C&&0<=i&&d[C]!==g[i];)i--;for(;1<=C&&0<=i;C--,i--)if(d[C]!==g[i]){if(C!==1||i!==1)do if(C--,i--,0>i||d[C]!==g[i]){var o=`
`+d[C].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=C&&0<=i);break}}}finally{co=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ti(e):""}function Qf(e){switch(e.tag){case 5:return Ti(e.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 2:case 15:return e=ho(e.type,!1),e;case 11:return e=ho(e.type.render,!1),e;case 1:return e=ho(e.type,!0),e;default:return""}}function Uo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wr:return"Fragment";case $r:return"Portal";case $o:return"Profiler";case Va:return"StrictMode";case Wo:return"Suspense";case zo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yh:return(e.displayName||"Context")+".Consumer";case Xh:return(e._context.displayName||"Context")+".Provider";case Ka:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qa:return t=e.displayName||null,t!==null?t:Uo(e.type)||"Memo";case Zt:t=e._payload,e=e._init;try{return Uo(e(t))}catch{}}return null}function e_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uo(t);case 8:return t===Va?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _r(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function t_(e){var t=Zh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,g=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(C){s=""+C,g.call(this,C)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(C){s=""+C},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ls(e){e._valueTracker||(e._valueTracker=t_(e))}function Qh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Zh(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function on(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Go(e,t){var r=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Jl(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=_r(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eu(e,t){t=t.checked,t!=null&&Ga(e,"checked",t,!1)}function Vo(e,t){eu(e,t);var r=_r(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ko(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ko(e,t.type,_r(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ko(e,t,r){(t!=="number"||on(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Bi=Array.isArray;function Qr(e,t,r,s){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&s&&(e[r].defaultSelected=!0)}else{for(r=""+_r(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,s&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function qo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ql(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(Bi(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:_r(r)}}function tu(e,t){var r=_r(t.value),s=_r(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ec(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ru(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ru(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Es,iu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Es=Es||document.createElement("div"),Es.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Es.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r_=["Webkit","ms","Moz","O"];Object.keys(Ii).forEach(function(e){r_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ii[t]=Ii[e]})});function su(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ii.hasOwnProperty(e)&&Ii[e]?(""+t).trim():t+"px"}function nu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,d=su(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,d):e[r]=d}}var i_=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yo(e,t){if(t){if(i_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Jo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zo=null;function Xa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qo=null,ei=null,ti=null;function tc(e){if(e=_s(e)){if(typeof Qo!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Hn(t),Qo(e.stateNode,e.type,t))}}function ou(e){ei?ti?ti.push(e):ti=[e]:ei=e}function au(){if(ei){var e=ei,t=ti;if(ti=ei=null,tc(e),t)for(e=0;e<t.length;e++)tc(t[e])}}function lu(e,t){return e(t)}function cu(){}var uo=!1;function hu(e,t,r){if(uo)return e(t,r);uo=!0;try{return lu(e,t,r)}finally{uo=!1,(ei!==null||ti!==null)&&(cu(),au())}}function Ki(e,t){var r=e.stateNode;if(r===null)return null;var s=Hn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var ea=!1;if(Ut)try{var bi={};Object.defineProperty(bi,"passive",{get:function(){ea=!0}}),window.addEventListener("test",bi,bi),window.removeEventListener("test",bi,bi)}catch{ea=!1}function s_(e,t,r,s,d,g,C,i,o){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(_){this.onError(_)}}var Fi=!1,an=null,ln=!1,ta=null,n_={onError:function(e){Fi=!0,an=e}};function o_(e,t,r,s,d,g,C,i,o){Fi=!1,an=null,s_.apply(n_,arguments)}function a_(e,t,r,s,d,g,C,i,o){if(o_.apply(this,arguments),Fi){if(Fi){var f=an;Fi=!1,an=null}else throw Error(X(198));ln||(ln=!0,ta=f)}}function Fr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function uu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rc(e){if(Fr(e)!==e)throw Error(X(188))}function l_(e){var t=e.alternate;if(!t){if(t=Fr(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,s=t;;){var d=r.return;if(d===null)break;var g=d.alternate;if(g===null){if(s=d.return,s!==null){r=s;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===r)return rc(d),e;if(g===s)return rc(d),t;g=g.sibling}throw Error(X(188))}if(r.return!==s.return)r=d,s=g;else{for(var C=!1,i=d.child;i;){if(i===r){C=!0,r=d,s=g;break}if(i===s){C=!0,s=d,r=g;break}i=i.sibling}if(!C){for(i=g.child;i;){if(i===r){C=!0,r=g,s=d;break}if(i===s){C=!0,s=g,r=d;break}i=i.sibling}if(!C)throw Error(X(189))}}if(r.alternate!==s)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function du(e){return e=l_(e),e!==null?fu(e):null}function fu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fu(e);if(t!==null)return t;e=e.sibling}return null}var _u=ft.unstable_scheduleCallback,ic=ft.unstable_cancelCallback,c_=ft.unstable_shouldYield,h_=ft.unstable_requestPaint,De=ft.unstable_now,u_=ft.unstable_getCurrentPriorityLevel,Ya=ft.unstable_ImmediatePriority,pu=ft.unstable_UserBlockingPriority,cn=ft.unstable_NormalPriority,d_=ft.unstable_LowPriority,gu=ft.unstable_IdlePriority,Pn=null,Pt=null;function f_(e){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Pn,e,void 0,(e.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:g_,__=Math.log,p_=Math.LN2;function g_(e){return e>>>=0,e===0?32:31-(__(e)/p_|0)|0}var ks=64,Rs=4194304;function Oi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hn(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,d=e.suspendedLanes,g=e.pingedLanes,C=r&268435455;if(C!==0){var i=C&~d;i!==0?s=Oi(i):(g&=C,g!==0&&(s=Oi(g)))}else C=r&~d,C!==0?s=Oi(C):g!==0&&(s=Oi(g));if(s===0)return 0;if(t!==0&&t!==s&&!(t&d)&&(d=s&-s,g=t&-t,d>=g||d===16&&(g&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-kt(t),d=1<<r,s|=e[r],t&=~d;return s}function v_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m_(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes;0<g;){var C=31-kt(g),i=1<<C,o=d[C];o===-1?(!(i&r)||i&s)&&(d[C]=v_(i,t)):o<=t&&(e.expiredLanes|=i),g&=~i}}function ra(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vu(){var e=ks;return ks<<=1,!(ks&4194240)&&(ks=64),e}function fo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ds(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kt(t),e[t]=r}function y_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-kt(r),g=1<<d;t[d]=0,s[d]=-1,e[d]=-1,r&=~g}}function Ja(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-kt(r),d=1<<s;d&t|e[s]&t&&(e[s]|=t),r&=~d}}var Ce=0;function mu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yu,Za,Cu,Su,wu,ia=!1,Ms=[],nr=null,or=null,ar=null,qi=new Map,Xi=new Map,er=[],C_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":qi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(t.pointerId)}}function Li(e,t,r,s,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:g,targetContainers:[d]},t!==null&&(t=_s(t),t!==null&&Za(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function S_(e,t,r,s,d){switch(t){case"focusin":return nr=Li(nr,e,t,r,s,d),!0;case"dragenter":return or=Li(or,e,t,r,s,d),!0;case"mouseover":return ar=Li(ar,e,t,r,s,d),!0;case"pointerover":var g=d.pointerId;return qi.set(g,Li(qi.get(g)||null,e,t,r,s,d)),!0;case"gotpointercapture":return g=d.pointerId,Xi.set(g,Li(Xi.get(g)||null,e,t,r,s,d)),!0}return!1}function xu(e){var t=br(e.target);if(t!==null){var r=Fr(t);if(r!==null){if(t=r.tag,t===13){if(t=uu(r),t!==null){e.blockedOn=t,wu(e.priority,function(){Cu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=sa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Zo=s,r.target.dispatchEvent(s),Zo=null}else return t=_s(r),t!==null&&Za(t),e.blockedOn=r,!1;t.shift()}return!0}function nc(e,t,r){Gs(e)&&r.delete(t)}function w_(){ia=!1,nr!==null&&Gs(nr)&&(nr=null),or!==null&&Gs(or)&&(or=null),ar!==null&&Gs(ar)&&(ar=null),qi.forEach(nc),Xi.forEach(nc)}function Ei(e,t){e.blockedOn===t&&(e.blockedOn=null,ia||(ia=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,w_)))}function Yi(e){function t(d){return Ei(d,e)}if(0<Ms.length){Ei(Ms[0],e);for(var r=1;r<Ms.length;r++){var s=Ms[r];s.blockedOn===e&&(s.blockedOn=null)}}for(nr!==null&&Ei(nr,e),or!==null&&Ei(or,e),ar!==null&&Ei(ar,e),qi.forEach(t),Xi.forEach(t),r=0;r<er.length;r++)s=er[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<er.length&&(r=er[0],r.blockedOn===null);)xu(r),r.blockedOn===null&&er.shift()}var ri=qt.ReactCurrentBatchConfig,un=!0;function x_(e,t,r,s){var d=Ce,g=ri.transition;ri.transition=null;try{Ce=1,Qa(e,t,r,s)}finally{Ce=d,ri.transition=g}}function b_(e,t,r,s){var d=Ce,g=ri.transition;ri.transition=null;try{Ce=4,Qa(e,t,r,s)}finally{Ce=d,ri.transition=g}}function Qa(e,t,r,s){if(un){var d=sa(e,t,r,s);if(d===null)xo(e,t,s,dn,r),sc(e,s);else if(S_(d,e,t,r,s))s.stopPropagation();else if(sc(e,s),t&4&&-1<C_.indexOf(e)){for(;d!==null;){var g=_s(d);if(g!==null&&yu(g),g=sa(e,t,r,s),g===null&&xo(e,t,s,dn,r),g===d)break;d=g}d!==null&&s.stopPropagation()}else xo(e,t,s,null,r)}}var dn=null;function sa(e,t,r,s){if(dn=null,e=Xa(s),e=br(e),e!==null)if(t=Fr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=uu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dn=e,null}function bu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u_()){case Ya:return 1;case pu:return 4;case cn:case d_:return 16;case gu:return 536870912;default:return 16}default:return 16}}var rr=null,el=null,Vs=null;function Lu(){if(Vs)return Vs;var e,t=el,r=t.length,s,d="value"in rr?rr.value:rr.textContent,g=d.length;for(e=0;e<r&&t[e]===d[e];e++);var C=r-e;for(s=1;s<=C&&t[r-s]===d[g-s];s++);return Vs=d.slice(e,1<s?1-s:void 0)}function Ks(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ds(){return!0}function oc(){return!1}function pt(e){function t(r,s,d,g,C){this._reactName=r,this._targetInst=d,this.type=s,this.nativeEvent=g,this.target=C,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(g):g[i]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ds:oc,this.isPropagationStopped=oc,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),t}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=pt(gi),fs=Re({},gi,{view:0,detail:0}),L_=pt(fs),_o,po,ki,In=Re({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ki&&(ki&&e.type==="mousemove"?(_o=e.screenX-ki.screenX,po=e.screenY-ki.screenY):po=_o=0,ki=e),_o)},movementY:function(e){return"movementY"in e?e.movementY:po}}),ac=pt(In),E_=Re({},In,{dataTransfer:0}),k_=pt(E_),R_=Re({},fs,{relatedTarget:0}),go=pt(R_),M_=Re({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),D_=pt(M_),A_=Re({},gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),T_=pt(A_),B_=Re({},gi,{data:0}),lc=pt(B_),O_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=I_[e])?!!t[e]:!1}function rl(){return F_}var N_=Re({},fs,{key:function(e){if(e.key){var t=O_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ks(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?P_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rl,charCode:function(e){return e.type==="keypress"?Ks(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ks(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),H_=pt(N_),j_=Re({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cc=pt(j_),$_=Re({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rl}),W_=pt($_),z_=Re({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),U_=pt(z_),G_=Re({},In,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),V_=pt(G_),K_=[9,13,27,32],il=Ut&&"CompositionEvent"in window,Ni=null;Ut&&"documentMode"in document&&(Ni=document.documentMode);var q_=Ut&&"TextEvent"in window&&!Ni,Eu=Ut&&(!il||Ni&&8<Ni&&11>=Ni),hc=" ",uc=!1;function ku(e,t){switch(e){case"keyup":return K_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ru(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zr=!1;function X_(e,t){switch(e){case"compositionend":return Ru(t);case"keypress":return t.which!==32?null:(uc=!0,hc);case"textInput":return e=t.data,e===hc&&uc?null:e;default:return null}}function Y_(e,t){if(zr)return e==="compositionend"||!il&&ku(e,t)?(e=Lu(),Vs=el=rr=null,zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Eu&&t.locale!=="ko"?null:t.data;default:return null}}var J_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J_[e.type]:t==="textarea"}function Mu(e,t,r,s){ou(s),t=fn(t,"onChange"),0<t.length&&(r=new tl("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Hi=null,Ji=null;function Z_(e){ju(e,0)}function Fn(e){var t=Vr(e);if(Qh(t))return e}function Q_(e,t){if(e==="change")return t}var Du=!1;if(Ut){var vo;if(Ut){var mo="oninput"in document;if(!mo){var fc=document.createElement("div");fc.setAttribute("oninput","return;"),mo=typeof fc.oninput=="function"}vo=mo}else vo=!1;Du=vo&&(!document.documentMode||9<document.documentMode)}function _c(){Hi&&(Hi.detachEvent("onpropertychange",Au),Ji=Hi=null)}function Au(e){if(e.propertyName==="value"&&Fn(Ji)){var t=[];Mu(t,Ji,e,Xa(e)),hu(Z_,t)}}function ep(e,t,r){e==="focusin"?(_c(),Hi=t,Ji=r,Hi.attachEvent("onpropertychange",Au)):e==="focusout"&&_c()}function tp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fn(Ji)}function rp(e,t){if(e==="click")return Fn(t)}function ip(e,t){if(e==="input"||e==="change")return Fn(t)}function sp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mt=typeof Object.is=="function"?Object.is:sp;function Zi(e,t){if(Mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var d=r[s];if(!jo.call(t,d)||!Mt(e[d],t[d]))return!1}return!0}function pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gc(e,t){var r=pc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pc(r)}}function Tu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bu(){for(var e=window,t=on();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=on(e.document)}return t}function sl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function np(e){var t=Bu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Tu(r.ownerDocument.documentElement,r)){if(s!==null&&sl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,g=Math.min(s.start,d);s=s.end===void 0?g:Math.min(s.end,d),!e.extend&&g>s&&(d=s,s=g,g=d),d=gc(r,g);var C=gc(r,s);d&&C&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==C.node||e.focusOffset!==C.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),g>s?(e.addRange(t),e.extend(C.node,C.offset)):(t.setEnd(C.node,C.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var op=Ut&&"documentMode"in document&&11>=document.documentMode,Ur=null,na=null,ji=null,oa=!1;function vc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;oa||Ur==null||Ur!==on(s)||(s=Ur,"selectionStart"in s&&sl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ji&&Zi(ji,s)||(ji=s,s=fn(na,"onSelect"),0<s.length&&(t=new tl("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Ur)))}function As(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Gr={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionend:As("Transition","TransitionEnd")},yo={},Ou={};Ut&&(Ou=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function Nn(e){if(yo[e])return yo[e];if(!Gr[e])return e;var t=Gr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ou)return yo[e]=t[r];return e}var Pu=Nn("animationend"),Iu=Nn("animationiteration"),Fu=Nn("animationstart"),Nu=Nn("transitionend"),Hu=new Map,mc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(e,t){Hu.set(e,t),Ir(t,[e])}for(var Co=0;Co<mc.length;Co++){var So=mc[Co],ap=So.toLowerCase(),lp=So[0].toUpperCase()+So.slice(1);gr(ap,"on"+lp)}gr(Pu,"onAnimationEnd");gr(Iu,"onAnimationIteration");gr(Fu,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(Nu,"onTransitionEnd");ai("onMouseEnter",["mouseout","mouseover"]);ai("onMouseLeave",["mouseout","mouseover"]);ai("onPointerEnter",["pointerout","pointerover"]);ai("onPointerLeave",["pointerout","pointerover"]);Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function yc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,a_(s,t,void 0,e),e.currentTarget=null}function ju(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],d=s.event;s=s.listeners;e:{var g=void 0;if(t)for(var C=s.length-1;0<=C;C--){var i=s[C],o=i.instance,f=i.currentTarget;if(i=i.listener,o!==g&&d.isPropagationStopped())break e;yc(d,i,f),g=o}else for(C=0;C<s.length;C++){if(i=s[C],o=i.instance,f=i.currentTarget,i=i.listener,o!==g&&d.isPropagationStopped())break e;yc(d,i,f),g=o}}}if(ln)throw e=ta,ln=!1,ta=null,e}function xe(e,t){var r=t[ua];r===void 0&&(r=t[ua]=new Set);var s=e+"__bubble";r.has(s)||($u(t,e,2,!1),r.add(s))}function wo(e,t,r){var s=0;t&&(s|=4),$u(r,e,s,t)}var Ts="_reactListening"+Math.random().toString(36).slice(2);function Qi(e){if(!e[Ts]){e[Ts]=!0,qh.forEach(function(r){r!=="selectionchange"&&(cp.has(r)||wo(r,!1,e),wo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ts]||(t[Ts]=!0,wo("selectionchange",!1,t))}}function $u(e,t,r,s){switch(bu(t)){case 1:var d=x_;break;case 4:d=b_;break;default:d=Qa}r=d.bind(null,t,r,e),d=void 0,!ea||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),s?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function xo(e,t,r,s,d){var g=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var C=s.tag;if(C===3||C===4){var i=s.stateNode.containerInfo;if(i===d||i.nodeType===8&&i.parentNode===d)break;if(C===4)for(C=s.return;C!==null;){var o=C.tag;if((o===3||o===4)&&(o=C.stateNode.containerInfo,o===d||o.nodeType===8&&o.parentNode===d))return;C=C.return}for(;i!==null;){if(C=br(i),C===null)return;if(o=C.tag,o===5||o===6){s=g=C;continue e}i=i.parentNode}}s=s.return}hu(function(){var f=g,_=Xa(r),h=[];e:{var p=Hu.get(e);if(p!==void 0){var w=tl,S=e;switch(e){case"keypress":if(Ks(r)===0)break e;case"keydown":case"keyup":w=H_;break;case"focusin":S="focus",w=go;break;case"focusout":S="blur",w=go;break;case"beforeblur":case"afterblur":w=go;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=k_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=W_;break;case Pu:case Iu:case Fu:w=D_;break;case Nu:w=U_;break;case"scroll":w=L_;break;case"wheel":w=V_;break;case"copy":case"cut":case"paste":w=T_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=cc}var u=(t&4)!==0,n=!u&&e==="scroll",a=u?p!==null?p+"Capture":null:p;u=[];for(var c=f,l;c!==null;){l=c;var m=l.stateNode;if(l.tag===5&&m!==null&&(l=m,a!==null&&(m=Ki(c,a),m!=null&&u.push(es(c,m,l)))),n)break;c=c.return}0<u.length&&(p=new w(p,S,null,r,_),h.push({event:p,listeners:u}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",p&&r!==Zo&&(S=r.relatedTarget||r.fromElement)&&(br(S)||S[Gt]))break e;if((w||p)&&(p=_.window===_?_:(p=_.ownerDocument)?p.defaultView||p.parentWindow:window,w?(S=r.relatedTarget||r.toElement,w=f,S=S?br(S):null,S!==null&&(n=Fr(S),S!==n||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=f),w!==S)){if(u=ac,m="onMouseLeave",a="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(u=cc,m="onPointerLeave",a="onPointerEnter",c="pointer"),n=w==null?p:Vr(w),l=S==null?p:Vr(S),p=new u(m,c+"leave",w,r,_),p.target=n,p.relatedTarget=l,m=null,br(_)===f&&(u=new u(a,c+"enter",S,r,_),u.target=l,u.relatedTarget=n,m=u),n=m,w&&S)t:{for(u=w,a=S,c=0,l=u;l;l=jr(l))c++;for(l=0,m=a;m;m=jr(m))l++;for(;0<c-l;)u=jr(u),c--;for(;0<l-c;)a=jr(a),l--;for(;c--;){if(u===a||a!==null&&u===a.alternate)break t;u=jr(u),a=jr(a)}u=null}else u=null;w!==null&&Cc(h,p,w,u,!1),S!==null&&n!==null&&Cc(h,n,S,u,!0)}}e:{if(p=f?Vr(f):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var L=Q_;else if(dc(p))if(Du)L=ip;else{L=tp;var v=ep}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=rp);if(L&&(L=L(e,f))){Mu(h,L,r,_);break e}v&&v(e,p,f),e==="focusout"&&(v=p._wrapperState)&&v.controlled&&p.type==="number"&&Ko(p,"number",p.value)}switch(v=f?Vr(f):window,e){case"focusin":(dc(v)||v.contentEditable==="true")&&(Ur=v,na=f,ji=null);break;case"focusout":ji=na=Ur=null;break;case"mousedown":oa=!0;break;case"contextmenu":case"mouseup":case"dragend":oa=!1,vc(h,r,_);break;case"selectionchange":if(op)break;case"keydown":case"keyup":vc(h,r,_)}var x;if(il)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zr?ku(e,r)&&(y="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(y="onCompositionStart");y&&(Eu&&r.locale!=="ko"&&(zr||y!=="onCompositionStart"?y==="onCompositionEnd"&&zr&&(x=Lu()):(rr=_,el="value"in rr?rr.value:rr.textContent,zr=!0)),v=fn(f,y),0<v.length&&(y=new lc(y,e,null,r,_),h.push({event:y,listeners:v}),x?y.data=x:(x=Ru(r),x!==null&&(y.data=x)))),(x=q_?X_(e,r):Y_(e,r))&&(f=fn(f,"onBeforeInput"),0<f.length&&(_=new lc("onBeforeInput","beforeinput",null,r,_),h.push({event:_,listeners:f}),_.data=x))}ju(h,t)})}function es(e,t,r){return{instance:e,listener:t,currentTarget:r}}function fn(e,t){for(var r=t+"Capture",s=[];e!==null;){var d=e,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=Ki(e,r),g!=null&&s.unshift(es(e,g,d)),g=Ki(e,t),g!=null&&s.push(es(e,g,d))),e=e.return}return s}function jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cc(e,t,r,s,d){for(var g=t._reactName,C=[];r!==null&&r!==s;){var i=r,o=i.alternate,f=i.stateNode;if(o!==null&&o===s)break;i.tag===5&&f!==null&&(i=f,d?(o=Ki(r,g),o!=null&&C.unshift(es(r,o,i))):d||(o=Ki(r,g),o!=null&&C.push(es(r,o,i)))),r=r.return}C.length!==0&&e.push({event:t,listeners:C})}var hp=/\r\n?/g,up=/\u0000|\uFFFD/g;function Sc(e){return(typeof e=="string"?e:""+e).replace(hp,`
`).replace(up,"")}function Bs(e,t,r){if(t=Sc(t),Sc(e)!==t&&r)throw Error(X(425))}function _n(){}var aa=null,la=null;function ca(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ha=typeof setTimeout=="function"?setTimeout:void 0,dp=typeof clearTimeout=="function"?clearTimeout:void 0,wc=typeof Promise=="function"?Promise:void 0,fp=typeof queueMicrotask=="function"?queueMicrotask:typeof wc<"u"?function(e){return wc.resolve(null).then(e).catch(_p)}:ha;function _p(e){setTimeout(function(){throw e})}function bo(e,t){var r=t,s=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(s===0){e.removeChild(d),Yi(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=d}while(r);Yi(t)}function lr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var vi=Math.random().toString(36).slice(2),Ot="__reactFiber$"+vi,ts="__reactProps$"+vi,Gt="__reactContainer$"+vi,ua="__reactEvents$"+vi,pp="__reactListeners$"+vi,gp="__reactHandles$"+vi;function br(e){var t=e[Ot];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Gt]||r[Ot]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=xc(e);e!==null;){if(r=e[Ot])return r;e=xc(e)}return t}e=r,r=e.parentNode}return null}function _s(e){return e=e[Ot]||e[Gt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Hn(e){return e[ts]||null}var da=[],Kr=-1;function vr(e){return{current:e}}function be(e){0>Kr||(e.current=da[Kr],da[Kr]=null,Kr--)}function we(e,t){Kr++,da[Kr]=e.current,e.current=t}var pr={},Xe=vr(pr),st=vr(!1),Dr=pr;function li(e,t){var r=e.type.contextTypes;if(!r)return pr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in r)d[g]=t[g];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function nt(e){return e=e.childContextTypes,e!=null}function pn(){be(st),be(Xe)}function bc(e,t,r){if(Xe.current!==pr)throw Error(X(168));we(Xe,t),we(st,r)}function Wu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var d in s)if(!(d in t))throw Error(X(108,e_(e)||"Unknown",d));return Re({},r,s)}function gn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pr,Dr=Xe.current,we(Xe,e),we(st,st.current),!0}function Lc(e,t,r){var s=e.stateNode;if(!s)throw Error(X(169));r?(e=Wu(e,t,Dr),s.__reactInternalMemoizedMergedChildContext=e,be(st),be(Xe),we(Xe,e)):be(st),we(st,r)}var Ht=null,jn=!1,Lo=!1;function zu(e){Ht===null?Ht=[e]:Ht.push(e)}function vp(e){jn=!0,zu(e)}function mr(){if(!Lo&&Ht!==null){Lo=!0;var e=0,t=Ce;try{var r=Ht;for(Ce=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Ht=null,jn=!1}catch(d){throw Ht!==null&&(Ht=Ht.slice(e+1)),_u(Ya,mr),d}finally{Ce=t,Lo=!1}}return null}var qr=[],Xr=0,vn=null,mn=0,vt=[],mt=0,Ar=null,jt=1,$t="";function wr(e,t){qr[Xr++]=mn,qr[Xr++]=vn,vn=e,mn=t}function Uu(e,t,r){vt[mt++]=jt,vt[mt++]=$t,vt[mt++]=Ar,Ar=e;var s=jt;e=$t;var d=32-kt(s)-1;s&=~(1<<d),r+=1;var g=32-kt(t)+d;if(30<g){var C=d-d%5;g=(s&(1<<C)-1).toString(32),s>>=C,d-=C,jt=1<<32-kt(t)+d|r<<d|s,$t=g+e}else jt=1<<g|r<<d|s,$t=e}function nl(e){e.return!==null&&(wr(e,1),Uu(e,1,0))}function ol(e){for(;e===vn;)vn=qr[--Xr],qr[Xr]=null,mn=qr[--Xr],qr[Xr]=null;for(;e===Ar;)Ar=vt[--mt],vt[mt]=null,$t=vt[--mt],vt[mt]=null,jt=vt[--mt],vt[mt]=null}var ut=null,ht=null,Le=!1,Et=null;function Gu(e,t){var r=yt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ec(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ut=e,ht=lr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ut=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ar!==null?{id:jt,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=yt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ut=e,ht=null,!0):!1;default:return!1}}function fa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _a(e){if(Le){var t=ht;if(t){var r=t;if(!Ec(e,t)){if(fa(e))throw Error(X(418));t=lr(r.nextSibling);var s=ut;t&&Ec(e,t)?Gu(s,r):(e.flags=e.flags&-4097|2,Le=!1,ut=e)}}else{if(fa(e))throw Error(X(418));e.flags=e.flags&-4097|2,Le=!1,ut=e}}}function kc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ut=e}function Os(e){if(e!==ut)return!1;if(!Le)return kc(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ca(e.type,e.memoizedProps)),t&&(t=ht)){if(fa(e))throw Vu(),Error(X(418));for(;t;)Gu(e,t),t=lr(t.nextSibling)}if(kc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ht=lr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=ut?lr(e.stateNode.nextSibling):null;return!0}function Vu(){for(var e=ht;e;)e=lr(e.nextSibling)}function ci(){ht=ut=null,Le=!1}function al(e){Et===null?Et=[e]:Et.push(e)}var mp=qt.ReactCurrentBatchConfig;function Ri(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var s=r.stateNode}if(!s)throw Error(X(147,e));var d=s,g=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===g?t.ref:(t=function(C){var i=d.refs;C===null?delete i[g]:i[g]=C},t._stringRef=g,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function Ps(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rc(e){var t=e._init;return t(e._payload)}function Ku(e){function t(a,c){if(e){var l=a.deletions;l===null?(a.deletions=[c],a.flags|=16):l.push(c)}}function r(a,c){if(!e)return null;for(;c!==null;)t(a,c),c=c.sibling;return null}function s(a,c){for(a=new Map;c!==null;)c.key!==null?a.set(c.key,c):a.set(c.index,c),c=c.sibling;return a}function d(a,c){return a=dr(a,c),a.index=0,a.sibling=null,a}function g(a,c,l){return a.index=l,e?(l=a.alternate,l!==null?(l=l.index,l<c?(a.flags|=2,c):l):(a.flags|=2,c)):(a.flags|=1048576,c)}function C(a){return e&&a.alternate===null&&(a.flags|=2),a}function i(a,c,l,m){return c===null||c.tag!==6?(c=To(l,a.mode,m),c.return=a,c):(c=d(c,l),c.return=a,c)}function o(a,c,l,m){var L=l.type;return L===Wr?_(a,c,l.props.children,m,l.key):c!==null&&(c.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Zt&&Rc(L)===c.type)?(m=d(c,l.props),m.ref=Ri(a,c,l),m.return=a,m):(m=en(l.type,l.key,l.props,null,a.mode,m),m.ref=Ri(a,c,l),m.return=a,m)}function f(a,c,l,m){return c===null||c.tag!==4||c.stateNode.containerInfo!==l.containerInfo||c.stateNode.implementation!==l.implementation?(c=Bo(l,a.mode,m),c.return=a,c):(c=d(c,l.children||[]),c.return=a,c)}function _(a,c,l,m,L){return c===null||c.tag!==7?(c=Mr(l,a.mode,m,L),c.return=a,c):(c=d(c,l),c.return=a,c)}function h(a,c,l){if(typeof c=="string"&&c!==""||typeof c=="number")return c=To(""+c,a.mode,l),c.return=a,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case bs:return l=en(c.type,c.key,c.props,null,a.mode,l),l.ref=Ri(a,null,c),l.return=a,l;case $r:return c=Bo(c,a.mode,l),c.return=a,c;case Zt:var m=c._init;return h(a,m(c._payload),l)}if(Bi(c)||xi(c))return c=Mr(c,a.mode,l,null),c.return=a,c;Ps(a,c)}return null}function p(a,c,l,m){var L=c!==null?c.key:null;if(typeof l=="string"&&l!==""||typeof l=="number")return L!==null?null:i(a,c,""+l,m);if(typeof l=="object"&&l!==null){switch(l.$$typeof){case bs:return l.key===L?o(a,c,l,m):null;case $r:return l.key===L?f(a,c,l,m):null;case Zt:return L=l._init,p(a,c,L(l._payload),m)}if(Bi(l)||xi(l))return L!==null?null:_(a,c,l,m,null);Ps(a,l)}return null}function w(a,c,l,m,L){if(typeof m=="string"&&m!==""||typeof m=="number")return a=a.get(l)||null,i(c,a,""+m,L);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case bs:return a=a.get(m.key===null?l:m.key)||null,o(c,a,m,L);case $r:return a=a.get(m.key===null?l:m.key)||null,f(c,a,m,L);case Zt:var v=m._init;return w(a,c,l,v(m._payload),L)}if(Bi(m)||xi(m))return a=a.get(l)||null,_(c,a,m,L,null);Ps(c,m)}return null}function S(a,c,l,m){for(var L=null,v=null,x=c,y=c=0,b=null;x!==null&&y<l.length;y++){x.index>y?(b=x,x=null):b=x.sibling;var E=p(a,x,l[y],m);if(E===null){x===null&&(x=b);break}e&&x&&E.alternate===null&&t(a,x),c=g(E,c,y),v===null?L=E:v.sibling=E,v=E,x=b}if(y===l.length)return r(a,x),Le&&wr(a,y),L;if(x===null){for(;y<l.length;y++)x=h(a,l[y],m),x!==null&&(c=g(x,c,y),v===null?L=x:v.sibling=x,v=x);return Le&&wr(a,y),L}for(x=s(a,x);y<l.length;y++)b=w(x,a,y,l[y],m),b!==null&&(e&&b.alternate!==null&&x.delete(b.key===null?y:b.key),c=g(b,c,y),v===null?L=b:v.sibling=b,v=b);return e&&x.forEach(function(R){return t(a,R)}),Le&&wr(a,y),L}function u(a,c,l,m){var L=xi(l);if(typeof L!="function")throw Error(X(150));if(l=L.call(l),l==null)throw Error(X(151));for(var v=L=null,x=c,y=c=0,b=null,E=l.next();x!==null&&!E.done;y++,E=l.next()){x.index>y?(b=x,x=null):b=x.sibling;var R=p(a,x,E.value,m);if(R===null){x===null&&(x=b);break}e&&x&&R.alternate===null&&t(a,x),c=g(R,c,y),v===null?L=R:v.sibling=R,v=R,x=b}if(E.done)return r(a,x),Le&&wr(a,y),L;if(x===null){for(;!E.done;y++,E=l.next())E=h(a,E.value,m),E!==null&&(c=g(E,c,y),v===null?L=E:v.sibling=E,v=E);return Le&&wr(a,y),L}for(x=s(a,x);!E.done;y++,E=l.next())E=w(x,a,y,E.value,m),E!==null&&(e&&E.alternate!==null&&x.delete(E.key===null?y:E.key),c=g(E,c,y),v===null?L=E:v.sibling=E,v=E);return e&&x.forEach(function(k){return t(a,k)}),Le&&wr(a,y),L}function n(a,c,l,m){if(typeof l=="object"&&l!==null&&l.type===Wr&&l.key===null&&(l=l.props.children),typeof l=="object"&&l!==null){switch(l.$$typeof){case bs:e:{for(var L=l.key,v=c;v!==null;){if(v.key===L){if(L=l.type,L===Wr){if(v.tag===7){r(a,v.sibling),c=d(v,l.props.children),c.return=a,a=c;break e}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Zt&&Rc(L)===v.type){r(a,v.sibling),c=d(v,l.props),c.ref=Ri(a,v,l),c.return=a,a=c;break e}r(a,v);break}else t(a,v);v=v.sibling}l.type===Wr?(c=Mr(l.props.children,a.mode,m,l.key),c.return=a,a=c):(m=en(l.type,l.key,l.props,null,a.mode,m),m.ref=Ri(a,c,l),m.return=a,a=m)}return C(a);case $r:e:{for(v=l.key;c!==null;){if(c.key===v)if(c.tag===4&&c.stateNode.containerInfo===l.containerInfo&&c.stateNode.implementation===l.implementation){r(a,c.sibling),c=d(c,l.children||[]),c.return=a,a=c;break e}else{r(a,c);break}else t(a,c);c=c.sibling}c=Bo(l,a.mode,m),c.return=a,a=c}return C(a);case Zt:return v=l._init,n(a,c,v(l._payload),m)}if(Bi(l))return S(a,c,l,m);if(xi(l))return u(a,c,l,m);Ps(a,l)}return typeof l=="string"&&l!==""||typeof l=="number"?(l=""+l,c!==null&&c.tag===6?(r(a,c.sibling),c=d(c,l),c.return=a,a=c):(r(a,c),c=To(l,a.mode,m),c.return=a,a=c),C(a)):r(a,c)}return n}var hi=Ku(!0),qu=Ku(!1),yn=vr(null),Cn=null,Yr=null,ll=null;function cl(){ll=Yr=Cn=null}function hl(e){var t=yn.current;be(yn),e._currentValue=t}function pa(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function ii(e,t){Cn=e,ll=Yr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(it=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(ll!==e)if(e={context:e,memoizedValue:t,next:null},Yr===null){if(Cn===null)throw Error(X(308));Yr=e,Cn.dependencies={lanes:0,firstContext:e}}else Yr=Yr.next=e;return t}var Lr=null;function ul(e){Lr===null?Lr=[e]:Lr.push(e)}function Xu(e,t,r,s){var d=t.interleaved;return d===null?(r.next=r,ul(t)):(r.next=d.next,d.next=r),t.interleaved=r,Vt(e,s)}function Vt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Qt=!1;function dl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,_e&2){var d=s.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),s.pending=t,Vt(e,r)}return d=s.interleaved,d===null?(t.next=t,ul(s)):(t.next=d.next,d.next=t),s.interleaved=t,Vt(e,r)}function qs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ja(e,r)}}function Mc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var d=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var C={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};g===null?d=g=C:g=g.next=C,r=r.next}while(r!==null);g===null?d=g=t:g=g.next=t}else d=g=t;r={baseState:s.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Sn(e,t,r,s){var d=e.updateQueue;Qt=!1;var g=d.firstBaseUpdate,C=d.lastBaseUpdate,i=d.shared.pending;if(i!==null){d.shared.pending=null;var o=i,f=o.next;o.next=null,C===null?g=f:C.next=f,C=o;var _=e.alternate;_!==null&&(_=_.updateQueue,i=_.lastBaseUpdate,i!==C&&(i===null?_.firstBaseUpdate=f:i.next=f,_.lastBaseUpdate=o))}if(g!==null){var h=d.baseState;C=0,_=f=o=null,i=g;do{var p=i.lane,w=i.eventTime;if((s&p)===p){_!==null&&(_=_.next={eventTime:w,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var S=e,u=i;switch(p=t,w=r,u.tag){case 1:if(S=u.payload,typeof S=="function"){h=S.call(w,h,p);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=u.payload,p=typeof S=="function"?S.call(w,h,p):S,p==null)break e;h=Re({},h,p);break e;case 2:Qt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=d.effects,p===null?d.effects=[i]:p.push(i))}else w={eventTime:w,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},_===null?(f=_=w,o=h):_=_.next=w,C|=p;if(i=i.next,i===null){if(i=d.shared.pending,i===null)break;p=i,i=p.next,p.next=null,d.lastBaseUpdate=p,d.shared.pending=null}}while(!0);if(_===null&&(o=h),d.baseState=o,d.firstBaseUpdate=f,d.lastBaseUpdate=_,t=d.shared.interleaved,t!==null){d=t;do C|=d.lane,d=d.next;while(d!==t)}else g===null&&(d.shared.lanes=0);Br|=C,e.lanes=C,e.memoizedState=h}}function Dc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],d=s.callback;if(d!==null){if(s.callback=null,s=r,typeof d!="function")throw Error(X(191,d));d.call(s)}}}var ps={},It=vr(ps),rs=vr(ps),is=vr(ps);function Er(e){if(e===ps)throw Error(X(174));return e}function fl(e,t){switch(we(is,t),we(rs,e),we(It,ps),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xo(t,e)}be(It),we(It,t)}function ui(){be(It),be(rs),be(is)}function Ju(e){Er(is.current);var t=Er(It.current),r=Xo(t,e.type);t!==r&&(we(rs,e),we(It,r))}function _l(e){rs.current===e&&(be(It),be(rs))}var Ee=vr(0);function wn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Eo=[];function pl(){for(var e=0;e<Eo.length;e++)Eo[e]._workInProgressVersionPrimary=null;Eo.length=0}var Xs=qt.ReactCurrentDispatcher,ko=qt.ReactCurrentBatchConfig,Tr=0,ke=null,Oe=null,Fe=null,xn=!1,$i=!1,ss=0,yp=0;function Ue(){throw Error(X(321))}function gl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Mt(e[r],t[r]))return!1;return!0}function vl(e,t,r,s,d,g){if(Tr=g,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xs.current=e===null||e.memoizedState===null?xp:bp,e=r(s,d),$i){g=0;do{if($i=!1,ss=0,25<=g)throw Error(X(301));g+=1,Fe=Oe=null,t.updateQueue=null,Xs.current=Lp,e=r(s,d)}while($i)}if(Xs.current=bn,t=Oe!==null&&Oe.next!==null,Tr=0,Fe=Oe=ke=null,xn=!1,t)throw Error(X(300));return e}function ml(){var e=ss!==0;return ss=0,e}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?ke.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function wt(){if(Oe===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Fe===null?ke.memoizedState:Fe.next;if(t!==null)Fe=t,Oe=e;else{if(e===null)throw Error(X(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Fe===null?ke.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function ns(e,t){return typeof t=="function"?t(e):t}function Ro(e){var t=wt(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var s=Oe,d=s.baseQueue,g=r.pending;if(g!==null){if(d!==null){var C=d.next;d.next=g.next,g.next=C}s.baseQueue=d=g,r.pending=null}if(d!==null){g=d.next,s=s.baseState;var i=C=null,o=null,f=g;do{var _=f.lane;if((Tr&_)===_)o!==null&&(o=o.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var h={lane:_,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};o===null?(i=o=h,C=s):o=o.next=h,ke.lanes|=_,Br|=_}f=f.next}while(f!==null&&f!==g);o===null?C=s:o.next=i,Mt(s,t.memoizedState)||(it=!0),t.memoizedState=s,t.baseState=C,t.baseQueue=o,r.lastRenderedState=s}if(e=r.interleaved,e!==null){d=e;do g=d.lane,ke.lanes|=g,Br|=g,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Mo(e){var t=wt(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var s=r.dispatch,d=r.pending,g=t.memoizedState;if(d!==null){r.pending=null;var C=d=d.next;do g=e(g,C.action),C=C.next;while(C!==d);Mt(g,t.memoizedState)||(it=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),r.lastRenderedState=g}return[g,s]}function Zu(){}function Qu(e,t){var r=ke,s=wt(),d=t(),g=!Mt(s.memoizedState,d);if(g&&(s.memoizedState=d,it=!0),s=s.queue,yl(rd.bind(null,r,s,e),[e]),s.getSnapshot!==t||g||Fe!==null&&Fe.memoizedState.tag&1){if(r.flags|=2048,os(9,td.bind(null,r,s,d,t),void 0,null),Ne===null)throw Error(X(349));Tr&30||ed(r,t,d)}return d}function ed(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function td(e,t,r,s){t.value=r,t.getSnapshot=s,id(t)&&sd(e)}function rd(e,t,r){return r(function(){id(t)&&sd(e)})}function id(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Mt(e,r)}catch{return!0}}function sd(e){var t=Vt(e,1);t!==null&&Rt(t,e,1,-1)}function Ac(e){var t=Tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:e},t.queue=e,e=e.dispatch=wp.bind(null,ke,e),[t.memoizedState,e]}function os(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function nd(){return wt().memoizedState}function Ys(e,t,r,s){var d=Tt();ke.flags|=e,d.memoizedState=os(1|t,r,void 0,s===void 0?null:s)}function $n(e,t,r,s){var d=wt();s=s===void 0?null:s;var g=void 0;if(Oe!==null){var C=Oe.memoizedState;if(g=C.destroy,s!==null&&gl(s,C.deps)){d.memoizedState=os(t,r,g,s);return}}ke.flags|=e,d.memoizedState=os(1|t,r,g,s)}function Tc(e,t){return Ys(8390656,8,e,t)}function yl(e,t){return $n(2048,8,e,t)}function od(e,t){return $n(4,2,e,t)}function ad(e,t){return $n(4,4,e,t)}function ld(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cd(e,t,r){return r=r!=null?r.concat([e]):null,$n(4,4,ld.bind(null,t,e),r)}function Cl(){}function hd(e,t){var r=wt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&gl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function ud(e,t){var r=wt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&gl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function dd(e,t,r){return Tr&21?(Mt(r,t)||(r=vu(),ke.lanes|=r,Br|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=r)}function Cp(e,t){var r=Ce;Ce=r!==0&&4>r?r:4,e(!0);var s=ko.transition;ko.transition={};try{e(!1),t()}finally{Ce=r,ko.transition=s}}function fd(){return wt().memoizedState}function Sp(e,t,r){var s=ur(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},_d(e))pd(t,r);else if(r=Xu(e,t,r,s),r!==null){var d=Je();Rt(r,e,s,d),gd(r,t,s)}}function wp(e,t,r){var s=ur(e),d={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(_d(e))pd(t,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var C=t.lastRenderedState,i=g(C,r);if(d.hasEagerState=!0,d.eagerState=i,Mt(i,C)){var o=t.interleaved;o===null?(d.next=d,ul(t)):(d.next=o.next,o.next=d),t.interleaved=d;return}}catch{}finally{}r=Xu(e,t,d,s),r!==null&&(d=Je(),Rt(r,e,s,d),gd(r,t,s))}}function _d(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function pd(e,t){$i=xn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function gd(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ja(e,r)}}var bn={readContext:St,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},xp={readContext:St,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Tc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ys(4194308,4,ld.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ys(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ys(4,2,e,t)},useMemo:function(e,t){var r=Tt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Tt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Sp.bind(null,ke,e),[s.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:Ac,useDebugValue:Cl,useDeferredValue:function(e){return Tt().memoizedState=e},useTransition:function(){var e=Ac(!1),t=e[0];return e=Cp.bind(null,e[1]),Tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ke,d=Tt();if(Le){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),Ne===null)throw Error(X(349));Tr&30||ed(s,t,r)}d.memoizedState=r;var g={value:r,getSnapshot:t};return d.queue=g,Tc(rd.bind(null,s,g,e),[e]),s.flags|=2048,os(9,td.bind(null,s,g,r,t),void 0,null),r},useId:function(){var e=Tt(),t=Ne.identifierPrefix;if(Le){var r=$t,s=jt;r=(s&~(1<<32-kt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ss++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=yp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bp={readContext:St,useCallback:hd,useContext:St,useEffect:yl,useImperativeHandle:cd,useInsertionEffect:od,useLayoutEffect:ad,useMemo:ud,useReducer:Ro,useRef:nd,useState:function(){return Ro(ns)},useDebugValue:Cl,useDeferredValue:function(e){var t=wt();return dd(t,Oe.memoizedState,e)},useTransition:function(){var e=Ro(ns)[0],t=wt().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:Qu,useId:fd,unstable_isNewReconciler:!1},Lp={readContext:St,useCallback:hd,useContext:St,useEffect:yl,useImperativeHandle:cd,useInsertionEffect:od,useLayoutEffect:ad,useMemo:ud,useReducer:Mo,useRef:nd,useState:function(){return Mo(ns)},useDebugValue:Cl,useDeferredValue:function(e){var t=wt();return Oe===null?t.memoizedState=e:dd(t,Oe.memoizedState,e)},useTransition:function(){var e=Mo(ns)[0],t=wt().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:Qu,useId:fd,unstable_isNewReconciler:!1};function bt(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ga(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Re({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Wn={isMounted:function(e){return(e=e._reactInternals)?Fr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Je(),d=ur(e),g=zt(s,d);g.payload=t,r!=null&&(g.callback=r),t=cr(e,g,d),t!==null&&(Rt(t,e,d,s),qs(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Je(),d=ur(e),g=zt(s,d);g.tag=1,g.payload=t,r!=null&&(g.callback=r),t=cr(e,g,d),t!==null&&(Rt(t,e,d,s),qs(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Je(),s=ur(e),d=zt(r,s);d.tag=2,t!=null&&(d.callback=t),t=cr(e,d,s),t!==null&&(Rt(t,e,s,r),qs(t,e,s))}};function Bc(e,t,r,s,d,g,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,g,C):t.prototype&&t.prototype.isPureReactComponent?!Zi(r,s)||!Zi(d,g):!0}function vd(e,t,r){var s=!1,d=pr,g=t.contextType;return typeof g=="object"&&g!==null?g=St(g):(d=nt(t)?Dr:Xe.current,s=t.contextTypes,g=(s=s!=null)?li(e,d):pr),t=new t(r,g),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wn,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=g),t}function Oc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Wn.enqueueReplaceState(t,t.state,null)}function va(e,t,r,s){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},dl(e);var g=t.contextType;typeof g=="object"&&g!==null?d.context=St(g):(g=nt(t)?Dr:Xe.current,d.context=li(e,g)),d.state=e.memoizedState,g=t.getDerivedStateFromProps,typeof g=="function"&&(ga(e,t,g,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Wn.enqueueReplaceState(d,d.state,null),Sn(e,r,d,s),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function di(e,t){try{var r="",s=t;do r+=Qf(s),s=s.return;while(s);var d=r}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:t,stack:d,digest:null}}function Do(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ma(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ep=typeof WeakMap=="function"?WeakMap:Map;function md(e,t,r){r=zt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){En||(En=!0,Ra=s),ma(e,t)},r}function yd(e,t,r){r=zt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var d=t.value;r.payload=function(){return s(d)},r.callback=function(){ma(e,t)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(r.callback=function(){ma(e,t),typeof s!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var C=t.stack;this.componentDidCatch(t.value,{componentStack:C!==null?C:""})}),r}function Pc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Ep;var d=new Set;s.set(t,d)}else d=s.get(t),d===void 0&&(d=new Set,s.set(t,d));d.has(r)||(d.add(r),e=jp.bind(null,e,t,r),t.then(e,e))}function Ic(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fc(e,t,r,s,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=zt(-1,1),t.tag=2,cr(r,t,1))),r.lanes|=1),e)}var kp=qt.ReactCurrentOwner,it=!1;function Ye(e,t,r,s){t.child=e===null?qu(t,null,r,s):hi(t,e.child,r,s)}function Nc(e,t,r,s,d){r=r.render;var g=t.ref;return ii(t,d),s=vl(e,t,r,s,g,d),r=ml(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Kt(e,t,d)):(Le&&r&&nl(t),t.flags|=1,Ye(e,t,s,d),t.child)}function Hc(e,t,r,s,d){if(e===null){var g=r.type;return typeof g=="function"&&!Rl(g)&&g.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=g,Cd(e,t,g,s,d)):(e=en(r.type,null,s,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!(e.lanes&d)){var C=g.memoizedProps;if(r=r.compare,r=r!==null?r:Zi,r(C,s)&&e.ref===t.ref)return Kt(e,t,d)}return t.flags|=1,e=dr(g,s),e.ref=t.ref,e.return=t,t.child=e}function Cd(e,t,r,s,d){if(e!==null){var g=e.memoizedProps;if(Zi(g,s)&&e.ref===t.ref)if(it=!1,t.pendingProps=s=g,(e.lanes&d)!==0)e.flags&131072&&(it=!0);else return t.lanes=e.lanes,Kt(e,t,d)}return ya(e,t,r,s,d)}function Sd(e,t,r){var s=t.pendingProps,d=s.children,g=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Zr,ct),ct|=r;else{if(!(r&1073741824))return e=g!==null?g.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(Zr,ct),ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=g!==null?g.baseLanes:r,we(Zr,ct),ct|=s}else g!==null?(s=g.baseLanes|r,t.memoizedState=null):s=r,we(Zr,ct),ct|=s;return Ye(e,t,d,r),t.child}function wd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ya(e,t,r,s,d){var g=nt(r)?Dr:Xe.current;return g=li(t,g),ii(t,d),r=vl(e,t,r,s,g,d),s=ml(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Kt(e,t,d)):(Le&&s&&nl(t),t.flags|=1,Ye(e,t,r,d),t.child)}function jc(e,t,r,s,d){if(nt(r)){var g=!0;gn(t)}else g=!1;if(ii(t,d),t.stateNode===null)Js(e,t),vd(t,r,s),va(t,r,s,d),s=!0;else if(e===null){var C=t.stateNode,i=t.memoizedProps;C.props=i;var o=C.context,f=r.contextType;typeof f=="object"&&f!==null?f=St(f):(f=nt(r)?Dr:Xe.current,f=li(t,f));var _=r.getDerivedStateFromProps,h=typeof _=="function"||typeof C.getSnapshotBeforeUpdate=="function";h||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(i!==s||o!==f)&&Oc(t,C,s,f),Qt=!1;var p=t.memoizedState;C.state=p,Sn(t,s,C,d),o=t.memoizedState,i!==s||p!==o||st.current||Qt?(typeof _=="function"&&(ga(t,r,_,s),o=t.memoizedState),(i=Qt||Bc(t,r,i,s,p,o,f))?(h||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(t.flags|=4194308)):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=o),C.props=s,C.state=o,C.context=f,s=i):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{C=t.stateNode,Yu(e,t),i=t.memoizedProps,f=t.type===t.elementType?i:bt(t.type,i),C.props=f,h=t.pendingProps,p=C.context,o=r.contextType,typeof o=="object"&&o!==null?o=St(o):(o=nt(r)?Dr:Xe.current,o=li(t,o));var w=r.getDerivedStateFromProps;(_=typeof w=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(i!==h||p!==o)&&Oc(t,C,s,o),Qt=!1,p=t.memoizedState,C.state=p,Sn(t,s,C,d);var S=t.memoizedState;i!==h||p!==S||st.current||Qt?(typeof w=="function"&&(ga(t,r,w,s),S=t.memoizedState),(f=Qt||Bc(t,r,f,s,p,S,o)||!1)?(_||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(s,S,o),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(s,S,o)),typeof C.componentDidUpdate=="function"&&(t.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof C.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=S),C.props=s,C.state=S,C.context=o,s=f):(typeof C.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return Ca(e,t,r,s,g,d)}function Ca(e,t,r,s,d,g){wd(e,t);var C=(t.flags&128)!==0;if(!s&&!C)return d&&Lc(t,r,!1),Kt(e,t,g);s=t.stateNode,kp.current=t;var i=C&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&C?(t.child=hi(t,e.child,null,g),t.child=hi(t,null,i,g)):Ye(e,t,i,g),t.memoizedState=s.state,d&&Lc(t,r,!0),t.child}function xd(e){var t=e.stateNode;t.pendingContext?bc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bc(e,t.context,!1),fl(e,t.containerInfo)}function $c(e,t,r,s,d){return ci(),al(d),t.flags|=256,Ye(e,t,r,s),t.child}var Sa={dehydrated:null,treeContext:null,retryLane:0};function wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function bd(e,t,r){var s=t.pendingProps,d=Ee.current,g=!1,C=(t.flags&128)!==0,i;if((i=C)||(i=e!==null&&e.memoizedState===null?!1:(d&2)!==0),i?(g=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),we(Ee,d&1),e===null)return _a(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(C=s.children,e=s.fallback,g?(s=t.mode,g=t.child,C={mode:"hidden",children:C},!(s&1)&&g!==null?(g.childLanes=0,g.pendingProps=C):g=Gn(C,s,0,null),e=Mr(e,s,r,null),g.return=t,e.return=t,g.sibling=e,t.child=g,t.child.memoizedState=wa(r),t.memoizedState=Sa,e):Sl(t,C));if(d=e.memoizedState,d!==null&&(i=d.dehydrated,i!==null))return Rp(e,t,C,s,i,d,r);if(g){g=s.fallback,C=t.mode,d=e.child,i=d.sibling;var o={mode:"hidden",children:s.children};return!(C&1)&&t.child!==d?(s=t.child,s.childLanes=0,s.pendingProps=o,t.deletions=null):(s=dr(d,o),s.subtreeFlags=d.subtreeFlags&14680064),i!==null?g=dr(i,g):(g=Mr(g,C,r,null),g.flags|=2),g.return=t,s.return=t,s.sibling=g,t.child=s,s=g,g=t.child,C=e.child.memoizedState,C=C===null?wa(r):{baseLanes:C.baseLanes|r,cachePool:null,transitions:C.transitions},g.memoizedState=C,g.childLanes=e.childLanes&~r,t.memoizedState=Sa,s}return g=e.child,e=g.sibling,s=dr(g,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Sl(e,t){return t=Gn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Is(e,t,r,s){return s!==null&&al(s),hi(t,e.child,null,r),e=Sl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rp(e,t,r,s,d,g,C){if(r)return t.flags&256?(t.flags&=-257,s=Do(Error(X(422))),Is(e,t,C,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(g=s.fallback,d=t.mode,s=Gn({mode:"visible",children:s.children},d,0,null),g=Mr(g,d,C,null),g.flags|=2,s.return=t,g.return=t,s.sibling=g,t.child=s,t.mode&1&&hi(t,e.child,null,C),t.child.memoizedState=wa(C),t.memoizedState=Sa,g);if(!(t.mode&1))return Is(e,t,C,null);if(d.data==="$!"){if(s=d.nextSibling&&d.nextSibling.dataset,s)var i=s.dgst;return s=i,g=Error(X(419)),s=Do(g,s,void 0),Is(e,t,C,s)}if(i=(C&e.childLanes)!==0,it||i){if(s=Ne,s!==null){switch(C&-C){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(s.suspendedLanes|C)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Vt(e,d),Rt(s,e,d,-1))}return kl(),s=Do(Error(X(421))),Is(e,t,C,s)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=$p.bind(null,e),d._reactRetry=t,null):(e=g.treeContext,ht=lr(d.nextSibling),ut=t,Le=!0,Et=null,e!==null&&(vt[mt++]=jt,vt[mt++]=$t,vt[mt++]=Ar,jt=e.id,$t=e.overflow,Ar=t),t=Sl(t,s.children),t.flags|=4096,t)}function Wc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),pa(e.return,t,r)}function Ao(e,t,r,s,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=r,g.tailMode=d)}function Ld(e,t,r){var s=t.pendingProps,d=s.revealOrder,g=s.tail;if(Ye(e,t,s.children,r),s=Ee.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wc(e,r,t);else if(e.tag===19)Wc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(we(Ee,s),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&wn(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Ao(t,!1,d,r,g);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&wn(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Ao(t,!0,r,null,g);break;case"together":Ao(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Js(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=dr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=dr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Mp(e,t,r){switch(t.tag){case 3:xd(t),ci();break;case 5:Ju(t);break;case 1:nt(t.type)&&gn(t);break;case 4:fl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,d=t.memoizedProps.value;we(yn,s._currentValue),s._currentValue=d;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(we(Ee,Ee.current&1),t.flags|=128,null):r&t.child.childLanes?bd(e,t,r):(we(Ee,Ee.current&1),e=Kt(e,t,r),e!==null?e.sibling:null);we(Ee,Ee.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Ld(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),we(Ee,Ee.current),s)break;return null;case 22:case 23:return t.lanes=0,Sd(e,t,r)}return Kt(e,t,r)}var Ed,xa,kd,Rd;Ed=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xa=function(){};kd=function(e,t,r,s){var d=e.memoizedProps;if(d!==s){e=t.stateNode,Er(It.current);var g=null;switch(r){case"input":d=Go(e,d),s=Go(e,s),g=[];break;case"select":d=Re({},d,{value:void 0}),s=Re({},s,{value:void 0}),g=[];break;case"textarea":d=qo(e,d),s=qo(e,s),g=[];break;default:typeof d.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=_n)}Yo(r,s);var C;r=null;for(f in d)if(!s.hasOwnProperty(f)&&d.hasOwnProperty(f)&&d[f]!=null)if(f==="style"){var i=d[f];for(C in i)i.hasOwnProperty(C)&&(r||(r={}),r[C]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Gi.hasOwnProperty(f)?g||(g=[]):(g=g||[]).push(f,null));for(f in s){var o=s[f];if(i=d?.[f],s.hasOwnProperty(f)&&o!==i&&(o!=null||i!=null))if(f==="style")if(i){for(C in i)!i.hasOwnProperty(C)||o&&o.hasOwnProperty(C)||(r||(r={}),r[C]="");for(C in o)o.hasOwnProperty(C)&&i[C]!==o[C]&&(r||(r={}),r[C]=o[C])}else r||(g||(g=[]),g.push(f,r)),r=o;else f==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,i=i?i.__html:void 0,o!=null&&i!==o&&(g=g||[]).push(f,o)):f==="children"?typeof o!="string"&&typeof o!="number"||(g=g||[]).push(f,""+o):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Gi.hasOwnProperty(f)?(o!=null&&f==="onScroll"&&xe("scroll",e),g||i===o||(g=[])):(g=g||[]).push(f,o))}r&&(g=g||[]).push("style",r);var f=g;(t.updateQueue=f)&&(t.flags|=4)}};Rd=function(e,t,r,s){r!==s&&(t.flags|=4)};function Mi(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags&14680064,s|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags,s|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Dp(e,t,r){var s=t.pendingProps;switch(ol(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return nt(t.type)&&pn(),Ge(t),null;case 3:return s=t.stateNode,ui(),be(st),be(Xe),pl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Os(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Et!==null&&(Aa(Et),Et=null))),xa(e,t),Ge(t),null;case 5:_l(t);var d=Er(is.current);if(r=t.type,e!==null&&t.stateNode!=null)kd(e,t,r,s,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(X(166));return Ge(t),null}if(e=Er(It.current),Os(t)){s=t.stateNode,r=t.type;var g=t.memoizedProps;switch(s[Ot]=t,s[ts]=g,e=(t.mode&1)!==0,r){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(d=0;d<Pi.length;d++)xe(Pi[d],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":Jl(s,g),xe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!g.multiple},xe("invalid",s);break;case"textarea":Ql(s,g),xe("invalid",s)}Yo(r,g),d=null;for(var C in g)if(g.hasOwnProperty(C)){var i=g[C];C==="children"?typeof i=="string"?s.textContent!==i&&(g.suppressHydrationWarning!==!0&&Bs(s.textContent,i,e),d=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(g.suppressHydrationWarning!==!0&&Bs(s.textContent,i,e),d=["children",""+i]):Gi.hasOwnProperty(C)&&i!=null&&C==="onScroll"&&xe("scroll",s)}switch(r){case"input":Ls(s),Zl(s,g,!0);break;case"textarea":Ls(s),ec(s);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(s.onclick=_n)}s=d,t.updateQueue=s,s!==null&&(t.flags|=4)}else{C=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ru(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=C.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=C.createElement(r,{is:s.is}):(e=C.createElement(r),r==="select"&&(C=e,s.multiple?C.multiple=!0:s.size&&(C.size=s.size))):e=C.createElementNS(e,r),e[Ot]=t,e[ts]=s,Ed(e,t,!1,!1),t.stateNode=e;e:{switch(C=Jo(r,s),r){case"dialog":xe("cancel",e),xe("close",e),d=s;break;case"iframe":case"object":case"embed":xe("load",e),d=s;break;case"video":case"audio":for(d=0;d<Pi.length;d++)xe(Pi[d],e);d=s;break;case"source":xe("error",e),d=s;break;case"img":case"image":case"link":xe("error",e),xe("load",e),d=s;break;case"details":xe("toggle",e),d=s;break;case"input":Jl(e,s),d=Go(e,s),xe("invalid",e);break;case"option":d=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},d=Re({},s,{value:void 0}),xe("invalid",e);break;case"textarea":Ql(e,s),d=qo(e,s),xe("invalid",e);break;default:d=s}Yo(r,d),i=d;for(g in i)if(i.hasOwnProperty(g)){var o=i[g];g==="style"?nu(e,o):g==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&iu(e,o)):g==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Vi(e,o):typeof o=="number"&&Vi(e,""+o):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Gi.hasOwnProperty(g)?o!=null&&g==="onScroll"&&xe("scroll",e):o!=null&&Ga(e,g,o,C))}switch(r){case"input":Ls(e),Zl(e,s,!1);break;case"textarea":Ls(e),ec(e);break;case"option":s.value!=null&&e.setAttribute("value",""+_r(s.value));break;case"select":e.multiple=!!s.multiple,g=s.value,g!=null?Qr(e,!!s.multiple,g,!1):s.defaultValue!=null&&Qr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=_n)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ge(t),null;case 6:if(e&&t.stateNode!=null)Rd(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(X(166));if(r=Er(is.current),Er(It.current),Os(t)){if(s=t.stateNode,r=t.memoizedProps,s[Ot]=t,(g=s.nodeValue!==r)&&(e=ut,e!==null))switch(e.tag){case 3:Bs(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bs(s.nodeValue,r,(e.mode&1)!==0)}g&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ot]=t,t.stateNode=s}return Ge(t),null;case 13:if(be(Ee),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&ht!==null&&t.mode&1&&!(t.flags&128))Vu(),ci(),t.flags|=98560,g=!1;else if(g=Os(t),s!==null&&s.dehydrated!==null){if(e===null){if(!g)throw Error(X(318));if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(X(317));g[Ot]=t}else ci(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ge(t),g=!1}else Et!==null&&(Aa(Et),Et=null),g=!0;if(!g)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?Pe===0&&(Pe=3):kl())),t.updateQueue!==null&&(t.flags|=4),Ge(t),null);case 4:return ui(),xa(e,t),e===null&&Qi(t.stateNode.containerInfo),Ge(t),null;case 10:return hl(t.type._context),Ge(t),null;case 17:return nt(t.type)&&pn(),Ge(t),null;case 19:if(be(Ee),g=t.memoizedState,g===null)return Ge(t),null;if(s=(t.flags&128)!==0,C=g.rendering,C===null)if(s)Mi(g,!1);else{if(Pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(C=wn(e),C!==null){for(t.flags|=128,Mi(g,!1),s=C.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)g=r,e=s,g.flags&=14680066,C=g.alternate,C===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=C.childLanes,g.lanes=C.lanes,g.child=C.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=C.memoizedProps,g.memoizedState=C.memoizedState,g.updateQueue=C.updateQueue,g.type=C.type,e=C.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return we(Ee,Ee.current&1|2),t.child}e=e.sibling}g.tail!==null&&De()>fi&&(t.flags|=128,s=!0,Mi(g,!1),t.lanes=4194304)}else{if(!s)if(e=wn(C),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Mi(g,!0),g.tail===null&&g.tailMode==="hidden"&&!C.alternate&&!Le)return Ge(t),null}else 2*De()-g.renderingStartTime>fi&&r!==1073741824&&(t.flags|=128,s=!0,Mi(g,!1),t.lanes=4194304);g.isBackwards?(C.sibling=t.child,t.child=C):(r=g.last,r!==null?r.sibling=C:t.child=C,g.last=C)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=De(),t.sibling=null,r=Ee.current,we(Ee,s?r&1|2:r&1),t):(Ge(t),null);case 22:case 23:return El(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ct&1073741824&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function Ap(e,t){switch(ol(t),t.tag){case 1:return nt(t.type)&&pn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ui(),be(st),be(Xe),pl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _l(t),null;case 13:if(be(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));ci()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Ee),null;case 4:return ui(),null;case 10:return hl(t.type._context),null;case 22:case 23:return El(),null;case 24:return null;default:return null}}var Fs=!1,qe=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,se=null;function Jr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Me(e,t,s)}else r.current=null}function ba(e,t,r){try{r()}catch(s){Me(e,t,s)}}var zc=!1;function Bp(e,t){if(aa=un,e=Bu(),sl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var d=s.anchorOffset,g=s.focusNode;s=s.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var C=0,i=-1,o=-1,f=0,_=0,h=e,p=null;t:for(;;){for(var w;h!==r||d!==0&&h.nodeType!==3||(i=C+d),h!==g||s!==0&&h.nodeType!==3||(o=C+s),h.nodeType===3&&(C+=h.nodeValue.length),(w=h.firstChild)!==null;)p=h,h=w;for(;;){if(h===e)break t;if(p===r&&++f===d&&(i=C),p===g&&++_===s&&(o=C),(w=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=w}r=i===-1||o===-1?null:{start:i,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(la={focusedElem:e,selectionRange:r},un=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var u=S.memoizedProps,n=S.memoizedState,a=t.stateNode,c=a.getSnapshotBeforeUpdate(t.elementType===t.type?u:bt(t.type,u),n);a.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var l=t.stateNode.containerInfo;l.nodeType===1?l.textContent="":l.nodeType===9&&l.documentElement&&l.removeChild(l.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(m){Me(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return S=zc,zc=!1,S}function Wi(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&e)===e){var g=d.destroy;d.destroy=void 0,g!==void 0&&ba(t,r,g)}d=d.next}while(d!==s)}}function zn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function La(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Md(e){var t=e.alternate;t!==null&&(e.alternate=null,Md(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[ts],delete t[ua],delete t[pp],delete t[gp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dd(e){return e.tag===5||e.tag===3||e.tag===4}function Uc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ea(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=_n));else if(s!==4&&(e=e.child,e!==null))for(Ea(e,t,r),e=e.sibling;e!==null;)Ea(e,t,r),e=e.sibling}function ka(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(ka(e,t,r),e=e.sibling;e!==null;)ka(e,t,r),e=e.sibling}var je=null,Lt=!1;function Jt(e,t,r){for(r=r.child;r!==null;)Ad(e,t,r),r=r.sibling}function Ad(e,t,r){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Pn,r)}catch{}switch(r.tag){case 5:qe||Jr(r,t);case 6:var s=je,d=Lt;je=null,Jt(e,t,r),je=s,Lt=d,je!==null&&(Lt?(e=je,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):je.removeChild(r.stateNode));break;case 18:je!==null&&(Lt?(e=je,r=r.stateNode,e.nodeType===8?bo(e.parentNode,r):e.nodeType===1&&bo(e,r),Yi(e)):bo(je,r.stateNode));break;case 4:s=je,d=Lt,je=r.stateNode.containerInfo,Lt=!0,Jt(e,t,r),je=s,Lt=d;break;case 0:case 11:case 14:case 15:if(!qe&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){d=s=s.next;do{var g=d,C=g.destroy;g=g.tag,C!==void 0&&(g&2||g&4)&&ba(r,t,C),d=d.next}while(d!==s)}Jt(e,t,r);break;case 1:if(!qe&&(Jr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(i){Me(r,t,i)}Jt(e,t,r);break;case 21:Jt(e,t,r);break;case 22:r.mode&1?(qe=(s=qe)||r.memoizedState!==null,Jt(e,t,r),qe=s):Jt(e,t,r);break;default:Jt(e,t,r)}}function Gc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Tp),t.forEach(function(s){var d=Wp.bind(null,e,s);r.has(s)||(r.add(s),s.then(d,d))})}}function xt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var d=r[s];try{var g=e,C=t,i=C;e:for(;i!==null;){switch(i.tag){case 5:je=i.stateNode,Lt=!1;break e;case 3:je=i.stateNode.containerInfo,Lt=!0;break e;case 4:je=i.stateNode.containerInfo,Lt=!0;break e}i=i.return}if(je===null)throw Error(X(160));Ad(g,C,d),je=null,Lt=!1;var o=d.alternate;o!==null&&(o.return=null),d.return=null}catch(f){Me(d,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Td(t,e),t=t.sibling}function Td(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xt(t,e),Dt(e),s&4){try{Wi(3,e,e.return),zn(3,e)}catch(u){Me(e,e.return,u)}try{Wi(5,e,e.return)}catch(u){Me(e,e.return,u)}}break;case 1:xt(t,e),Dt(e),s&512&&r!==null&&Jr(r,r.return);break;case 5:if(xt(t,e),Dt(e),s&512&&r!==null&&Jr(r,r.return),e.flags&32){var d=e.stateNode;try{Vi(d,"")}catch(u){Me(e,e.return,u)}}if(s&4&&(d=e.stateNode,d!=null)){var g=e.memoizedProps,C=r!==null?r.memoizedProps:g,i=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{i==="input"&&g.type==="radio"&&g.name!=null&&eu(d,g),Jo(i,C);var f=Jo(i,g);for(C=0;C<o.length;C+=2){var _=o[C],h=o[C+1];_==="style"?nu(d,h):_==="dangerouslySetInnerHTML"?iu(d,h):_==="children"?Vi(d,h):Ga(d,_,h,f)}switch(i){case"input":Vo(d,g);break;case"textarea":tu(d,g);break;case"select":var p=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var w=g.value;w!=null?Qr(d,!!g.multiple,w,!1):p!==!!g.multiple&&(g.defaultValue!=null?Qr(d,!!g.multiple,g.defaultValue,!0):Qr(d,!!g.multiple,g.multiple?[]:"",!1))}d[ts]=g}catch(u){Me(e,e.return,u)}}break;case 6:if(xt(t,e),Dt(e),s&4){if(e.stateNode===null)throw Error(X(162));d=e.stateNode,g=e.memoizedProps;try{d.nodeValue=g}catch(u){Me(e,e.return,u)}}break;case 3:if(xt(t,e),Dt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Yi(t.containerInfo)}catch(u){Me(e,e.return,u)}break;case 4:xt(t,e),Dt(e);break;case 13:xt(t,e),Dt(e),d=e.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(bl=De())),s&4&&Gc(e);break;case 22:if(_=r!==null&&r.memoizedState!==null,e.mode&1?(qe=(f=qe)||_,xt(t,e),qe=f):xt(t,e),Dt(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!_&&e.mode&1)for(se=e,_=e.child;_!==null;){for(h=se=_;se!==null;){switch(p=se,w=p.child,p.tag){case 0:case 11:case 14:case 15:Wi(4,p,p.return);break;case 1:Jr(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){s=p,r=p.return;try{t=s,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(u){Me(s,r,u)}}break;case 5:Jr(p,p.return);break;case 22:if(p.memoizedState!==null){Kc(h);continue}}w!==null?(w.return=p,se=w):Kc(h)}_=_.sibling}e:for(_=null,h=e;;){if(h.tag===5){if(_===null){_=h;try{d=h.stateNode,f?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(i=h.stateNode,o=h.memoizedProps.style,C=o!=null&&o.hasOwnProperty("display")?o.display:null,i.style.display=su("display",C))}catch(u){Me(e,e.return,u)}}}else if(h.tag===6){if(_===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(u){Me(e,e.return,u)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;_===h&&(_=null),h=h.return}_===h&&(_=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xt(t,e),Dt(e),s&4&&Gc(e);break;case 21:break;default:xt(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Dd(r)){var s=r;break e}r=r.return}throw Error(X(160))}switch(s.tag){case 5:var d=s.stateNode;s.flags&32&&(Vi(d,""),s.flags&=-33);var g=Uc(e);ka(e,g,d);break;case 3:case 4:var C=s.stateNode.containerInfo,i=Uc(e);Ea(e,i,C);break;default:throw Error(X(161))}}catch(o){Me(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Op(e,t,r){se=e,Bd(e)}function Bd(e,t,r){for(var s=(e.mode&1)!==0;se!==null;){var d=se,g=d.child;if(d.tag===22&&s){var C=d.memoizedState!==null||Fs;if(!C){var i=d.alternate,o=i!==null&&i.memoizedState!==null||qe;i=Fs;var f=qe;if(Fs=C,(qe=o)&&!f)for(se=d;se!==null;)C=se,o=C.child,C.tag===22&&C.memoizedState!==null?qc(d):o!==null?(o.return=C,se=o):qc(d);for(;g!==null;)se=g,Bd(g),g=g.sibling;se=d,Fs=i,qe=f}Vc(e)}else d.subtreeFlags&8772&&g!==null?(g.return=d,se=g):Vc(e)}}function Vc(e){for(;se!==null;){var t=se;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||zn(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!qe)if(r===null)s.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:bt(t.type,r.memoizedProps);s.componentDidUpdate(d,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var g=t.updateQueue;g!==null&&Dc(t,g,s);break;case 3:var C=t.updateQueue;if(C!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Dc(t,C,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var _=f.memoizedState;if(_!==null){var h=_.dehydrated;h!==null&&Yi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}qe||t.flags&512&&La(t)}catch(p){Me(t,t.return,p)}}if(t===e){se=null;break}if(r=t.sibling,r!==null){r.return=t.return,se=r;break}se=t.return}}function Kc(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var r=t.sibling;if(r!==null){r.return=t.return,se=r;break}se=t.return}}function qc(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{zn(4,t)}catch(o){Me(t,r,o)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var d=t.return;try{s.componentDidMount()}catch(o){Me(t,d,o)}}var g=t.return;try{La(t)}catch(o){Me(t,g,o)}break;case 5:var C=t.return;try{La(t)}catch(o){Me(t,C,o)}}}catch(o){Me(t,t.return,o)}if(t===e){se=null;break}var i=t.sibling;if(i!==null){i.return=t.return,se=i;break}se=t.return}}var Pp=Math.ceil,Ln=qt.ReactCurrentDispatcher,wl=qt.ReactCurrentOwner,Ct=qt.ReactCurrentBatchConfig,_e=0,Ne=null,Be=null,We=0,ct=0,Zr=vr(0),Pe=0,as=null,Br=0,Un=0,xl=0,zi=null,rt=null,bl=0,fi=1/0,Nt=null,En=!1,Ra=null,hr=null,Ns=!1,ir=null,kn=0,Ui=0,Ma=null,Zs=-1,Qs=0;function Je(){return _e&6?De():Zs!==-1?Zs:Zs=De()}function ur(e){return e.mode&1?_e&2&&We!==0?We&-We:mp.transition!==null?(Qs===0&&(Qs=vu()),Qs):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:bu(e.type)),e):1}function Rt(e,t,r,s){if(50<Ui)throw Ui=0,Ma=null,Error(X(185));ds(e,r,s),(!(_e&2)||e!==Ne)&&(e===Ne&&(!(_e&2)&&(Un|=r),Pe===4&&tr(e,We)),ot(e,s),r===1&&_e===0&&!(t.mode&1)&&(fi=De()+500,jn&&mr()))}function ot(e,t){var r=e.callbackNode;m_(e,t);var s=hn(e,e===Ne?We:0);if(s===0)r!==null&&ic(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&ic(r),t===1)e.tag===0?vp(Xc.bind(null,e)):zu(Xc.bind(null,e)),fp(function(){!(_e&6)&&mr()}),r=null;else{switch(mu(s)){case 1:r=Ya;break;case 4:r=pu;break;case 16:r=cn;break;case 536870912:r=gu;break;default:r=cn}r=$d(r,Od.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Od(e,t){if(Zs=-1,Qs=0,_e&6)throw Error(X(327));var r=e.callbackNode;if(si()&&e.callbackNode!==r)return null;var s=hn(e,e===Ne?We:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Rn(e,s);else{t=s;var d=_e;_e|=2;var g=Id();(Ne!==e||We!==t)&&(Nt=null,fi=De()+500,Rr(e,t));do try{Np();break}catch(i){Pd(e,i)}while(!0);cl(),Ln.current=g,_e=d,Be!==null?t=0:(Ne=null,We=0,t=Pe)}if(t!==0){if(t===2&&(d=ra(e),d!==0&&(s=d,t=Da(e,d))),t===1)throw r=as,Rr(e,0),tr(e,s),ot(e,De()),r;if(t===6)tr(e,s);else{if(d=e.current.alternate,!(s&30)&&!Ip(d)&&(t=Rn(e,s),t===2&&(g=ra(e),g!==0&&(s=g,t=Da(e,g))),t===1))throw r=as,Rr(e,0),tr(e,s),ot(e,De()),r;switch(e.finishedWork=d,e.finishedLanes=s,t){case 0:case 1:throw Error(X(345));case 2:xr(e,rt,Nt);break;case 3:if(tr(e,s),(s&130023424)===s&&(t=bl+500-De(),10<t)){if(hn(e,0)!==0)break;if(d=e.suspendedLanes,(d&s)!==s){Je(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=ha(xr.bind(null,e,rt,Nt),t);break}xr(e,rt,Nt);break;case 4:if(tr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,d=-1;0<s;){var C=31-kt(s);g=1<<C,C=t[C],C>d&&(d=C),s&=~g}if(s=d,s=De()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Pp(s/1960))-s,10<s){e.timeoutHandle=ha(xr.bind(null,e,rt,Nt),s);break}xr(e,rt,Nt);break;case 5:xr(e,rt,Nt);break;default:throw Error(X(329))}}}return ot(e,De()),e.callbackNode===r?Od.bind(null,e):null}function Da(e,t){var r=zi;return e.current.memoizedState.isDehydrated&&(Rr(e,t).flags|=256),e=Rn(e,t),e!==2&&(t=rt,rt=r,t!==null&&Aa(t)),e}function Aa(e){rt===null?rt=e:rt.push.apply(rt,e)}function Ip(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var d=r[s],g=d.getSnapshot;d=d.value;try{if(!Mt(g(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tr(e,t){for(t&=~xl,t&=~Un,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-kt(t),s=1<<r;e[r]=-1,t&=~s}}function Xc(e){if(_e&6)throw Error(X(327));si();var t=hn(e,0);if(!(t&1))return ot(e,De()),null;var r=Rn(e,t);if(e.tag!==0&&r===2){var s=ra(e);s!==0&&(t=s,r=Da(e,s))}if(r===1)throw r=as,Rr(e,0),tr(e,t),ot(e,De()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xr(e,rt,Nt),ot(e,De()),null}function Ll(e,t){var r=_e;_e|=1;try{return e(t)}finally{_e=r,_e===0&&(fi=De()+500,jn&&mr())}}function Or(e){ir!==null&&ir.tag===0&&!(_e&6)&&si();var t=_e;_e|=1;var r=Ct.transition,s=Ce;try{if(Ct.transition=null,Ce=1,e)return e()}finally{Ce=s,Ct.transition=r,_e=t,!(_e&6)&&mr()}}function El(){ct=Zr.current,be(Zr)}function Rr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,dp(r)),Be!==null)for(r=Be.return;r!==null;){var s=r;switch(ol(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&pn();break;case 3:ui(),be(st),be(Xe),pl();break;case 5:_l(s);break;case 4:ui();break;case 13:be(Ee);break;case 19:be(Ee);break;case 10:hl(s.type._context);break;case 22:case 23:El()}r=r.return}if(Ne=e,Be=e=dr(e.current,null),We=ct=t,Pe=0,as=null,xl=Un=Br=0,rt=zi=null,Lr!==null){for(t=0;t<Lr.length;t++)if(r=Lr[t],s=r.interleaved,s!==null){r.interleaved=null;var d=s.next,g=r.pending;if(g!==null){var C=g.next;g.next=d,s.next=C}r.pending=s}Lr=null}return e}function Pd(e,t){do{var r=Be;try{if(cl(),Xs.current=bn,xn){for(var s=ke.memoizedState;s!==null;){var d=s.queue;d!==null&&(d.pending=null),s=s.next}xn=!1}if(Tr=0,Fe=Oe=ke=null,$i=!1,ss=0,wl.current=null,r===null||r.return===null){Pe=1,as=t,Be=null;break}e:{var g=e,C=r.return,i=r,o=t;if(t=We,i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var f=o,_=i,h=_.tag;if(!(_.mode&1)&&(h===0||h===11||h===15)){var p=_.alternate;p?(_.updateQueue=p.updateQueue,_.memoizedState=p.memoizedState,_.lanes=p.lanes):(_.updateQueue=null,_.memoizedState=null)}var w=Ic(C);if(w!==null){w.flags&=-257,Fc(w,C,i,g,t),w.mode&1&&Pc(g,f,t),t=w,o=f;var S=t.updateQueue;if(S===null){var u=new Set;u.add(o),t.updateQueue=u}else S.add(o);break e}else{if(!(t&1)){Pc(g,f,t),kl();break e}o=Error(X(426))}}else if(Le&&i.mode&1){var n=Ic(C);if(n!==null){!(n.flags&65536)&&(n.flags|=256),Fc(n,C,i,g,t),al(di(o,i));break e}}g=o=di(o,i),Pe!==4&&(Pe=2),zi===null?zi=[g]:zi.push(g),g=C;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t;var a=md(g,o,t);Mc(g,a);break e;case 1:i=o;var c=g.type,l=g.stateNode;if(!(g.flags&128)&&(typeof c.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(hr===null||!hr.has(l)))){g.flags|=65536,t&=-t,g.lanes|=t;var m=yd(g,i,t);Mc(g,m);break e}}g=g.return}while(g!==null)}Nd(r)}catch(L){t=L,Be===r&&r!==null&&(Be=r=r.return);continue}break}while(!0)}function Id(){var e=Ln.current;return Ln.current=bn,e===null?bn:e}function kl(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Ne===null||!(Br&268435455)&&!(Un&268435455)||tr(Ne,We)}function Rn(e,t){var r=_e;_e|=2;var s=Id();(Ne!==e||We!==t)&&(Nt=null,Rr(e,t));do try{Fp();break}catch(d){Pd(e,d)}while(!0);if(cl(),_e=r,Ln.current=s,Be!==null)throw Error(X(261));return Ne=null,We=0,Pe}function Fp(){for(;Be!==null;)Fd(Be)}function Np(){for(;Be!==null&&!c_();)Fd(Be)}function Fd(e){var t=jd(e.alternate,e,ct);e.memoizedProps=e.pendingProps,t===null?Nd(e):Be=t,wl.current=null}function Nd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ap(r,t),r!==null){r.flags&=32767,Be=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pe=6,Be=null;return}}else if(r=Dp(r,t,ct),r!==null){Be=r;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);Pe===0&&(Pe=5)}function xr(e,t,r){var s=Ce,d=Ct.transition;try{Ct.transition=null,Ce=1,Hp(e,t,r,s)}finally{Ct.transition=d,Ce=s}return null}function Hp(e,t,r,s){do si();while(ir!==null);if(_e&6)throw Error(X(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var g=r.lanes|r.childLanes;if(y_(e,g),e===Ne&&(Be=Ne=null,We=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ns||(Ns=!0,$d(cn,function(){return si(),null})),g=(r.flags&15990)!==0,r.subtreeFlags&15990||g){g=Ct.transition,Ct.transition=null;var C=Ce;Ce=1;var i=_e;_e|=4,wl.current=null,Bp(e,r),Td(r,e),np(la),un=!!aa,la=aa=null,e.current=r,Op(r),h_(),_e=i,Ce=C,Ct.transition=g}else e.current=r;if(Ns&&(Ns=!1,ir=e,kn=d),g=e.pendingLanes,g===0&&(hr=null),f_(r.stateNode),ot(e,De()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],s(d.value,{componentStack:d.stack,digest:d.digest});if(En)throw En=!1,e=Ra,Ra=null,e;return kn&1&&e.tag!==0&&si(),g=e.pendingLanes,g&1?e===Ma?Ui++:(Ui=0,Ma=e):Ui=0,mr(),null}function si(){if(ir!==null){var e=mu(kn),t=Ct.transition,r=Ce;try{if(Ct.transition=null,Ce=16>e?16:e,ir===null)var s=!1;else{if(e=ir,ir=null,kn=0,_e&6)throw Error(X(331));var d=_e;for(_e|=4,se=e.current;se!==null;){var g=se,C=g.child;if(se.flags&16){var i=g.deletions;if(i!==null){for(var o=0;o<i.length;o++){var f=i[o];for(se=f;se!==null;){var _=se;switch(_.tag){case 0:case 11:case 15:Wi(8,_,g)}var h=_.child;if(h!==null)h.return=_,se=h;else for(;se!==null;){_=se;var p=_.sibling,w=_.return;if(Md(_),_===f){se=null;break}if(p!==null){p.return=w,se=p;break}se=w}}}var S=g.alternate;if(S!==null){var u=S.child;if(u!==null){S.child=null;do{var n=u.sibling;u.sibling=null,u=n}while(u!==null)}}se=g}}if(g.subtreeFlags&2064&&C!==null)C.return=g,se=C;else e:for(;se!==null;){if(g=se,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Wi(9,g,g.return)}var a=g.sibling;if(a!==null){a.return=g.return,se=a;break e}se=g.return}}var c=e.current;for(se=c;se!==null;){C=se;var l=C.child;if(C.subtreeFlags&2064&&l!==null)l.return=C,se=l;else e:for(C=c;se!==null;){if(i=se,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:zn(9,i)}}catch(L){Me(i,i.return,L)}if(i===C){se=null;break e}var m=i.sibling;if(m!==null){m.return=i.return,se=m;break e}se=i.return}}if(_e=d,mr(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Pn,e)}catch{}s=!0}return s}finally{Ce=r,Ct.transition=t}}return!1}function Yc(e,t,r){t=di(r,t),t=md(e,t,1),e=cr(e,t,1),t=Je(),e!==null&&(ds(e,1,t),ot(e,t))}function Me(e,t,r){if(e.tag===3)Yc(e,e,r);else for(;t!==null;){if(t.tag===3){Yc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(hr===null||!hr.has(s))){e=di(r,e),e=yd(t,e,1),t=cr(t,e,1),e=Je(),t!==null&&(ds(t,1,e),ot(t,e));break}}t=t.return}}function jp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Je(),e.pingedLanes|=e.suspendedLanes&r,Ne===e&&(We&r)===r&&(Pe===4||Pe===3&&(We&130023424)===We&&500>De()-bl?Rr(e,0):xl|=r),ot(e,t)}function Hd(e,t){t===0&&(e.mode&1?(t=Rs,Rs<<=1,!(Rs&130023424)&&(Rs=4194304)):t=1);var r=Je();e=Vt(e,t),e!==null&&(ds(e,t,r),ot(e,r))}function $p(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Hd(e,r)}function Wp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(X(314))}s!==null&&s.delete(t),Hd(e,r)}var jd;jd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||st.current)it=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return it=!1,Mp(e,t,r);it=!!(e.flags&131072)}else it=!1,Le&&t.flags&1048576&&Uu(t,mn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Js(e,t),e=t.pendingProps;var d=li(t,Xe.current);ii(t,r),d=vl(null,t,s,e,d,r);var g=ml();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(s)?(g=!0,gn(t)):g=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,dl(t),d.updater=Wn,t.stateNode=d,d._reactInternals=t,va(t,s,e,r),t=Ca(null,t,s,!0,g,r)):(t.tag=0,Le&&g&&nl(t),Ye(null,t,d,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Js(e,t),e=t.pendingProps,d=s._init,s=d(s._payload),t.type=s,d=t.tag=Up(s),e=bt(s,e),d){case 0:t=ya(null,t,s,e,r);break e;case 1:t=jc(null,t,s,e,r);break e;case 11:t=Nc(null,t,s,e,r);break e;case 14:t=Hc(null,t,s,bt(s.type,e),r);break e}throw Error(X(306,s,""))}return t;case 0:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:bt(s,d),ya(e,t,s,d,r);case 1:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:bt(s,d),jc(e,t,s,d,r);case 3:e:{if(xd(t),e===null)throw Error(X(387));s=t.pendingProps,g=t.memoizedState,d=g.element,Yu(e,t),Sn(t,s,null,r);var C=t.memoizedState;if(s=C.element,g.isDehydrated)if(g={element:s,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){d=di(Error(X(423)),t),t=$c(e,t,s,r,d);break e}else if(s!==d){d=di(Error(X(424)),t),t=$c(e,t,s,r,d);break e}else for(ht=lr(t.stateNode.containerInfo.firstChild),ut=t,Le=!0,Et=null,r=qu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ci(),s===d){t=Kt(e,t,r);break e}Ye(e,t,s,r)}t=t.child}return t;case 5:return Ju(t),e===null&&_a(t),s=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,C=d.children,ca(s,d)?C=null:g!==null&&ca(s,g)&&(t.flags|=32),wd(e,t),Ye(e,t,C,r),t.child;case 6:return e===null&&_a(t),null;case 13:return bd(e,t,r);case 4:return fl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=hi(t,null,s,r):Ye(e,t,s,r),t.child;case 11:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:bt(s,d),Nc(e,t,s,d,r);case 7:return Ye(e,t,t.pendingProps,r),t.child;case 8:return Ye(e,t,t.pendingProps.children,r),t.child;case 12:return Ye(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,d=t.pendingProps,g=t.memoizedProps,C=d.value,we(yn,s._currentValue),s._currentValue=C,g!==null)if(Mt(g.value,C)){if(g.children===d.children&&!st.current){t=Kt(e,t,r);break e}}else for(g=t.child,g!==null&&(g.return=t);g!==null;){var i=g.dependencies;if(i!==null){C=g.child;for(var o=i.firstContext;o!==null;){if(o.context===s){if(g.tag===1){o=zt(-1,r&-r),o.tag=2;var f=g.updateQueue;if(f!==null){f=f.shared;var _=f.pending;_===null?o.next=o:(o.next=_.next,_.next=o),f.pending=o}}g.lanes|=r,o=g.alternate,o!==null&&(o.lanes|=r),pa(g.return,r,t),i.lanes|=r;break}o=o.next}}else if(g.tag===10)C=g.type===t.type?null:g.child;else if(g.tag===18){if(C=g.return,C===null)throw Error(X(341));C.lanes|=r,i=C.alternate,i!==null&&(i.lanes|=r),pa(C,r,t),C=g.sibling}else C=g.child;if(C!==null)C.return=g;else for(C=g;C!==null;){if(C===t){C=null;break}if(g=C.sibling,g!==null){g.return=C.return,C=g;break}C=C.return}g=C}Ye(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,s=t.pendingProps.children,ii(t,r),d=St(d),s=s(d),t.flags|=1,Ye(e,t,s,r),t.child;case 14:return s=t.type,d=bt(s,t.pendingProps),d=bt(s.type,d),Hc(e,t,s,d,r);case 15:return Cd(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:bt(s,d),Js(e,t),t.tag=1,nt(s)?(e=!0,gn(t)):e=!1,ii(t,r),vd(t,s,d),va(t,s,d,r),Ca(null,t,s,!0,e,r);case 19:return Ld(e,t,r);case 22:return Sd(e,t,r)}throw Error(X(156,t.tag))};function $d(e,t){return _u(e,t)}function zp(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(e,t,r,s){return new zp(e,t,r,s)}function Rl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Up(e){if(typeof e=="function")return Rl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ka)return 11;if(e===qa)return 14}return 2}function dr(e,t){var r=e.alternate;return r===null?(r=yt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function en(e,t,r,s,d,g){var C=2;if(s=e,typeof e=="function")Rl(e)&&(C=1);else if(typeof e=="string")C=5;else e:switch(e){case Wr:return Mr(r.children,d,g,t);case Va:C=8,d|=8;break;case $o:return e=yt(12,r,t,d|2),e.elementType=$o,e.lanes=g,e;case Wo:return e=yt(13,r,t,d),e.elementType=Wo,e.lanes=g,e;case zo:return e=yt(19,r,t,d),e.elementType=zo,e.lanes=g,e;case Jh:return Gn(r,d,g,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xh:C=10;break e;case Yh:C=9;break e;case Ka:C=11;break e;case qa:C=14;break e;case Zt:C=16,s=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=yt(C,r,t,d),t.elementType=e,t.type=s,t.lanes=g,t}function Mr(e,t,r,s){return e=yt(7,e,s,t),e.lanes=r,e}function Gn(e,t,r,s){return e=yt(22,e,s,t),e.elementType=Jh,e.lanes=r,e.stateNode={isHidden:!1},e}function To(e,t,r){return e=yt(6,e,null,t),e.lanes=r,e}function Bo(e,t,r){return t=yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gp(e,t,r,s,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fo(0),this.expirationTimes=fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fo(0),this.identifierPrefix=s,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ml(e,t,r,s,d,g,C,i,o){return e=new Gp(e,t,r,i,o),t===1?(t=1,g===!0&&(t|=8)):t=0,g=yt(3,null,null,t),e.current=g,g.stateNode=e,g.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},dl(g),e}function Vp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Wd(e){if(!e)return pr;e=e._reactInternals;e:{if(Fr(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(nt(r))return Wu(e,r,t)}return t}function zd(e,t,r,s,d,g,C,i,o){return e=Ml(r,s,!0,e,d,g,C,i,o),e.context=Wd(null),r=e.current,s=Je(),d=ur(r),g=zt(s,d),g.callback=t??null,cr(r,g,d),e.current.lanes=d,ds(e,d,s),ot(e,s),e}function Vn(e,t,r,s){var d=t.current,g=Je(),C=ur(d);return r=Wd(r),t.context===null?t.context=r:t.pendingContext=r,t=zt(g,C),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=cr(d,t,C),e!==null&&(Rt(e,d,C,g),qs(e,d,C)),C}function Mn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Dl(e,t){Jc(e,t),(e=e.alternate)&&Jc(e,t)}function Kp(){return null}var Ud=typeof reportError=="function"?reportError:function(e){console.error(e)};function Al(e){this._internalRoot=e}Kn.prototype.render=Al.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));Vn(e,t,null,null)};Kn.prototype.unmount=Al.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Or(function(){Vn(null,e,null,null)}),t[Gt]=null}};function Kn(e){this._internalRoot=e}Kn.prototype.unstable_scheduleHydration=function(e){if(e){var t=Su();e={blockedOn:null,target:e,priority:t};for(var r=0;r<er.length&&t!==0&&t<er[r].priority;r++);er.splice(r,0,e),r===0&&xu(e)}};function Tl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zc(){}function qp(e,t,r,s,d){if(d){if(typeof s=="function"){var g=s;s=function(){var f=Mn(C);g.call(f)}}var C=zd(t,s,e,0,null,!1,!1,"",Zc);return e._reactRootContainer=C,e[Gt]=C.current,Qi(e.nodeType===8?e.parentNode:e),Or(),C}for(;d=e.lastChild;)e.removeChild(d);if(typeof s=="function"){var i=s;s=function(){var f=Mn(o);i.call(f)}}var o=Ml(e,0,!1,null,null,!1,!1,"",Zc);return e._reactRootContainer=o,e[Gt]=o.current,Qi(e.nodeType===8?e.parentNode:e),Or(function(){Vn(t,o,r,s)}),o}function Xn(e,t,r,s,d){var g=r._reactRootContainer;if(g){var C=g;if(typeof d=="function"){var i=d;d=function(){var o=Mn(C);i.call(o)}}Vn(t,C,e,d)}else C=qp(r,t,e,d,s);return Mn(C)}yu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Oi(t.pendingLanes);r!==0&&(Ja(t,r|1),ot(t,De()),!(_e&6)&&(fi=De()+500,mr()))}break;case 13:Or(function(){var s=Vt(e,1);if(s!==null){var d=Je();Rt(s,e,1,d)}}),Dl(e,1)}};Za=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var r=Je();Rt(t,e,134217728,r)}Dl(e,134217728)}};Cu=function(e){if(e.tag===13){var t=ur(e),r=Vt(e,t);if(r!==null){var s=Je();Rt(r,e,t,s)}Dl(e,t)}};Su=function(){return Ce};wu=function(e,t){var r=Ce;try{return Ce=e,t()}finally{Ce=r}};Qo=function(e,t,r){switch(t){case"input":if(Vo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var d=Hn(s);if(!d)throw Error(X(90));Qh(s),Vo(s,d)}}}break;case"textarea":tu(e,r);break;case"select":t=r.value,t!=null&&Qr(e,!!r.multiple,t,!1)}};lu=Ll;cu=Or;var Xp={usingClientEntryPoint:!1,Events:[_s,Vr,Hn,ou,au,Ll]},Di={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yp={bundleType:Di.bundleType,version:Di.version,rendererPackageName:Di.rendererPackageName,rendererConfig:Di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=du(e),e===null?null:e.stateNode},findFiberByHostInstance:Di.findFiberByHostInstance||Kp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hs.isDisabled&&Hs.supportsFiber)try{Pn=Hs.inject(Yp),Pt=Hs}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xp;_t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tl(t))throw Error(X(200));return Vp(e,t,null,r)};_t.createRoot=function(e,t){if(!Tl(e))throw Error(X(299));var r=!1,s="",d=Ud;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Ml(e,1,!1,null,null,r,!1,s,d),e[Gt]=t.current,Qi(e.nodeType===8?e.parentNode:e),new Al(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=du(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return Or(e)};_t.hydrate=function(e,t,r){if(!qn(t))throw Error(X(200));return Xn(null,e,t,!0,r)};_t.hydrateRoot=function(e,t,r){if(!Tl(e))throw Error(X(405));var s=r!=null&&r.hydratedSources||null,d=!1,g="",C=Ud;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),t=zd(t,null,e,1,r??null,d,!1,g,C),e[Gt]=t.current,Qi(e),s)for(e=0;e<s.length;e++)r=s[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new Kn(t)};_t.render=function(e,t,r){if(!qn(t))throw Error(X(200));return Xn(null,e,t,!1,r)};_t.unmountComponentAtNode=function(e){if(!qn(e))throw Error(X(40));return e._reactRootContainer?(Or(function(){Xn(null,null,e,!1,function(){e._reactRootContainer=null,e[Gt]=null})}),!0):!1};_t.unstable_batchedUpdates=Ll;_t.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!qn(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return Xn(e,t,r,!1,s)};_t.version="18.3.1-next-f1338f8080-20240426";function Gd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gd)}catch(e){console.error(e)}}Gd(),Gh.exports=_t;var Jp=Gh.exports,Qc=Jp;Ho.createRoot=Qc.createRoot,Ho.hydrateRoot=Qc.hydrateRoot;const Vd=V.createContext(null),Xt=()=>{const e=V.useContext(Vd);if(!e)throw new Error("useTerminal must be used within a TerminalProvider");return e},Zp={ESC:"\x1B",TAB:"	",ENTER:"\r",CTRL_C:"",ARROW_UP:"\x1B[A",ARROW_DOWN:"\x1B[B",ARROW_RIGHT:"\x1B[C",ARROW_LEFT:"\x1B[D",PAGE_UP:"\x1B[5~",PAGE_DOWN:"\x1B[6~",CTRL_L:"\f"},Qp=10,eg=[500,1e3,2e3,3e3,5e3,5e3,1e4,1e4,15e3,3e4],eh="ttyd_last_tmux_session",tg=({children:e})=>{const t=V.useRef(null),r=V.useRef(null),s=V.useRef(new Set),[d,g]=V.useState("connecting"),[C,i]=V.useState(0),o=V.useRef(null),f=V.useRef(!1),_=V.useRef(!1),h=V.useRef(0),[p,w]=V.useState(null),S=V.useRef(null),u=V.useRef({cols:80,rows:24}),n=V.useRef([]),a=V.useRef(!1),c=V.useRef([]),l=V.useRef(0),m=V.useRef(null),L=V.useCallback(()=>{const N=c.current;if(N.length===0)return;m.current=null;let I;if(N.length===1)I=N[0];else{I=new Uint8Array(l.current);let B=0;for(const M of N)I.set(M,B),B+=M.length}if(c.current=[],l.current=0,!a.current){n.current.push(I);return}s.current.forEach(B=>B(I))},[]),v=V.useCallback(async(N=3e3)=>{const I=Date.now();for(;Date.now()-I<N;){if(S.current)return S.current;await new Promise(B=>setTimeout(B,100))}return S.current},[]),x=V.useCallback(async N=>{const I=sessionStorage.getItem(eh);if(!I)return;console.log(`[Terminal] Restoring tmux session: ${I}`);const B=await v(3e3);if(B)for(let M=0;M<10;M++){try{const A=`/api/tmux/list?client_tty=${encodeURIComponent(B)}`,P=await fetch(A,{signal:AbortSignal.timeout(3e3)});if(!P.ok)break;const H=await P.json();if(!(H.sessions||[]).some(z=>z.name===I)){console.log(`[Terminal] Saved session "${I}" no longer exists`),sessionStorage.removeItem(eh);return}if(H.currentSession){if(H.currentSession===I){console.log(`[Terminal] Already on correct session: ${I}`);return}const z=`/api/tmux/switch?session=${encodeURIComponent(I)}&client_tty=${encodeURIComponent(B)}`;if((await fetch(z,{signal:AbortSignal.timeout(3e3)})).ok){console.log(`[Terminal] Restored tmux session via API: ${I}`);return}}}catch{}await new Promise(A=>setTimeout(A,500))}},[v]),y=V.useCallback(()=>{if(r.current?.readyState===WebSocket.OPEN)return;const N=_.current;g(N?"reconnecting":"connecting");const I=window.location.protocol==="https:"?"wss:":"ws:",B=window.location.host,M=window.location.pathname.replace(/\/$/,""),A=`${I}//${B}${M}/ws`,P=new WebSocket(A,["tty"]);P.binaryType="arraybuffer",r.current=P,P.onopen=()=>{console.log("[Terminal] WebSocket connected"),g("connected"),i(0),h.current=Date.now(),S.current=null,w(null);const{cols:H,rows:W}=u.current,z=JSON.stringify({AuthToken:"",columns:H,rows:W});P.send(new TextEncoder().encode(z)),N&&(_.current=!1,x(P))},P.onmessage=H=>{const W=new Uint8Array(H.data);if(W.length===0)return;const z=String.fromCharCode(W[0]);if(z==="0"){const J=W.subarray(1);if(!S.current){const O=new TextDecoder().decode(J).match(/\]7337;(\/dev\/pts\/\d+)/);O&&(S.current=O[1],w(O[1]))}c.current.push(J),l.current+=J.length;const Y=512*1024;l.current>Y?L():m.current===null&&(m.current=requestAnimationFrame(L))}else if(z==="1"){const J=new TextDecoder().decode(W.subarray(1));document.title=J}},P.onclose=()=>{if(console.log("[Terminal] WebSocket closed"),r.current=null,L(),m.current!==null&&(cancelAnimationFrame(m.current),m.current=null),f.current){f.current=!1,g("disconnected");return}g("disconnected"),_.current=!0,i(H=>{const W=H+1;if(W<=Qp){const z=eg[H]||3e4;console.log(`[Terminal] Reconnecting in ${z}ms (attempt ${W})`),o.current=window.setTimeout(()=>{y()},z)}return W})},P.onerror=H=>{console.error("[Terminal] WebSocket error",H)}},[x,L]),b=V.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null),_.current=!0,i(0),y()},[y]);V.useEffect(()=>{const N=()=>{if(document.visibilityState==="visible"){const I=r.current;if(!I||I.readyState===WebSocket.CLOSED||I.readyState===WebSocket.CLOSING)console.log("[Terminal] Page became visible, connection lost  reconnecting immediately"),o.current&&(clearTimeout(o.current),o.current=null),_.current=!0,i(0),y();else if(I&&I.readyState===WebSocket.OPEN&&Date.now()-h.current>3e4){const{cols:A,rows:P}=u.current,H=JSON.stringify({AuthToken:"",columns:A,rows:P}),W=new TextEncoder().encode(H),z=new Uint8Array(W.length+1);z[0]=49,z.set(W,1);try{I.send(z)}catch{console.log("[Terminal] Connection stale on visibility change  forcing reconnect"),I.close()}}}};return document.addEventListener("visibilitychange",N),()=>document.removeEventListener("visibilitychange",N)},[y]),V.useEffect(()=>(y(),()=>{f.current=!0,o.current&&clearTimeout(o.current),m.current!==null&&(cancelAnimationFrame(m.current),m.current=null),r.current&&r.current.close()}),[y]);const E=V.useCallback(N=>{if(r.current&&r.current.readyState===WebSocket.OPEN){const I=new TextEncoder().encode(N),B=new Uint8Array(I.length+1);B[0]=48,B.set(I,1),r.current.send(B)}},[]),R=V.useCallback(N=>{const I=Zp[N];I&&E(I)},[E]),k=V.useCallback(N=>{if(s.current.add(N),!a.current){a.current=!0;const I=n.current;n.current=[];for(const B of I)N(B)}return()=>{s.current.delete(N)}},[]),D=V.useCallback(N=>{r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(new Uint8Array([N]))},[]),T=V.useCallback(N=>{S.current=N,w(N)},[]),j=V.useCallback((N,I)=>{if(u.current={cols:N,rows:I},r.current&&r.current.readyState===WebSocket.OPEN){const B=JSON.stringify({AuthToken:"",columns:N,rows:I}),M=new TextEncoder().encode(B),A=new Uint8Array(M.length+1);A[0]=49,A.set(M,1),r.current.send(A)}},[]);return F.jsx(Vd.Provider,{value:{connectionState:d,sendInput:E,sendKey:R,subscribeOutput:k,sendControl:D,terminalRef:t,resize:j,reconnect:b,reconnectAttempt:C,clientTty:p,setClientTty:T},children:e})},rg=5e3,Kd=V.createContext(null),qd=()=>{const e=V.useContext(Kd);if(!e)throw new Error("useServerEvents must be used within a ServerEventsProvider");return e},ig=({children:e})=>{const{clientTty:t}=Xt(),r=V.useRef(null),[s,d]=V.useState(""),[g,C]=V.useState(""),[i,o]=V.useState([]),[f,_]=V.useState(null),[h,p]=V.useState(!1),[w,S]=V.useState(!1),u=V.useRef(null),n=V.useRef(null),a=V.useRef(!0),c=V.useCallback(x=>{d(x.branch||""),C(x.path||""),o(x.tmux?.sessions||[]),_(x.tmux?.currentSession||null),p(!1),S(!0)},[]),l=V.useCallback(async()=>{try{const x=r.current?`?client_tty=${encodeURIComponent(r.current)}`:"",[y,b]=await Promise.all([fetch("/api/diff",{signal:AbortSignal.timeout(3e3)}),fetch(`/api/tmux/list${x}`,{signal:AbortSignal.timeout(3e3)})]);let E="",R="";if(y.ok){const T=await y.json();E=T.branch||"",R=T.git_root||T.cwd||""}let k=[],D=null;if(b.ok){const T=await b.json();k=T.sessions||[],D=T.currentSession||null}d(E),C(R),o(k),_(D),p(!1),S(!0)}catch{p(!0)}},[]),m=V.useCallback(()=>{n.current||(l(),n.current=window.setInterval(l,rg))},[l]),L=V.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]),v=V.useCallback(()=>{l()},[l]);return V.useEffect(()=>{r.current=t},[t]),V.useEffect(()=>{let x=!1;return(async()=>{try{const b=await fetch("/api/tmux/list",{signal:AbortSignal.timeout(3e3)});if(b.ok&&!x){const E=await b.json();o(E.sessions||[]),_(E.currentSession||null),S(!0)}}catch{}})(),()=>{x=!0}},[]),V.useEffect(()=>{if(!t)return;const y=`/api/events${`?client_tty=${encodeURIComponent(t)}`}`,b=new EventSource(y);return u.current=b,b.onmessage=E=>{try{const R=JSON.parse(E.data);c(R)}catch{}},b.onerror=()=>{b.close(),u.current=null,a.current=!1,m()},()=>{b.close(),u.current=null,L()}},[t,c,m,L]),F.jsx(Kd.Provider,{value:{branch:s,path:g,tmuxSessions:i,currentTmuxSession:f,isOffline:h,clientTty:t,sessionsLoaded:w,refresh:v},children:e})},th={defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]},sg=({isOpen:e,onClose:t,onConfigChange:r})=>{const[s,d]=V.useState(th),[g,C]=V.useState(""),[i,o]=V.useState(""),[f,_]=V.useState(()=>localStorage.getItem("terminal_predictive_echo")==="on");V.useEffect(()=>{if(e){const u=localStorage.getItem("ttyd_commands");if(u)try{d(JSON.parse(u))}catch(n){console.error("Failed to parse ttyd_commands",n)}else d(th)}},[e]);const h=u=>{d(u),localStorage.setItem("ttyd_commands",JSON.stringify(u)),r()},p=u=>{const n=[...s.defaultCommands];n[u].visible=!n[u].visible,h({...s,defaultCommands:n})},w=u=>{const n=s.customCommands.filter((a,c)=>c!==u);h({...s,customCommands:n})},S=u=>{if(u.preventDefault(),!g.trim()||!i.trim())return;const n=[...s.customCommands,{name:g.trim(),cmd:i.trim()}];h({...s,customCommands:n}),C(""),o("")};return e?F.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:F.jsxs("div",{className:"bg-bg-secondary w-full max-w-sm mx-4 rounded-xl shadow-2xl border border-border-subtle flex flex-col max-h-[80vh]",onClick:u=>u.stopPropagation(),children:[F.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[F.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Command Settings"}),F.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:""})]}),F.jsxs("div",{className:"overflow-y-auto p-4 space-y-6",children:[F.jsxs("section",{children:[F.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Built-in Commands"}),F.jsx("div",{className:"space-y-2",children:s.defaultCommands.map((u,n)=>F.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[F.jsx("span",{className:"font-mono text-sm text-text-primary",children:u.name}),F.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[F.jsx("input",{type:"checkbox",className:"sr-only peer",checked:u.visible,onChange:()=>p(n)}),F.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-green"})]})]},u.name))})]}),F.jsxs("section",{children:[F.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Custom Commands"}),s.customCommands.length===0?F.jsx("p",{className:"text-sm text-text-muted italic",children:"No custom commands added"}):F.jsx("div",{className:"space-y-2",children:s.customCommands.map((u,n)=>F.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[F.jsxs("div",{className:"flex flex-col min-w-0 mr-2",children:[F.jsx("span",{className:"font-mono text-sm text-text-primary truncate",children:u.name}),F.jsx("span",{className:"font-mono text-xs text-text-muted truncate",children:u.cmd})]}),F.jsx("button",{onClick:()=>w(n),className:"p-2 text-text-secondary hover:text-accent-red transition-colors",children:""})]},n))})]}),F.jsxs("section",{children:[F.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Performance"}),F.jsxs("div",{className:"flex items-center justify-between bg-bg-tertiary p-3 rounded-lg",children:[F.jsxs("div",{className:"flex flex-col",children:[F.jsx("span",{className:"text-sm text-text-primary",children:"Predictive Echo"}),F.jsx("span",{className:"text-xs text-text-muted",children:"Show keystrokes before server confirms"})]}),F.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[F.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f,onChange:()=>{const u=!f;_(u),localStorage.setItem("terminal_predictive_echo",u?"on":"off"),window.dispatchEvent(new CustomEvent("predictive-echo-changed",{detail:u}))}}),F.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-green"})]})]})]}),F.jsxs("section",{children:[F.jsx("h3",{className:"text-sm font-medium text-text-muted uppercase tracking-wider mb-3",children:"Add New Command"}),F.jsxs("form",{onSubmit:S,className:"space-y-3",children:[F.jsx("div",{children:F.jsx("input",{type:"text",placeholder:"Button Name (e.g. ls -la)",value:g,onChange:u=>C(u.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),F.jsx("div",{children:F.jsx("input",{type:"text",placeholder:"Command (e.g. ls -la\\r)",value:i,onChange:u=>o(u.target.value),className:"w-full bg-bg-primary border border-border-subtle rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue"})}),F.jsx("button",{type:"submit",disabled:!g.trim()||!i.trim(),className:"w-full py-2 bg-accent-blue/10 text-accent-blue border border-accent-blue/30 rounded font-medium hover:bg-accent-blue/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Command"})]})]})]})]})}):null},ng=({isOpen:e,onClose:t,onSend:r})=>{const[s,d]=V.useState(""),g=V.useRef(null);V.useEffect(()=>{e?setTimeout(()=>{g.current&&g.current.focus()},50):d("")},[e]);const C=()=>{s&&(r(s),t())},i=o=>{o.key==="Enter"&&(o.metaKey||o.ctrlKey)&&(o.preventDefault(),C())};return e?F.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:F.jsxs("div",{className:"bg-bg-secondary w-full max-w-lg mx-4 rounded-xl shadow-2xl border border-border-subtle flex flex-col h-[50vh]",onClick:o=>o.stopPropagation(),children:[F.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[F.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Input Text"}),F.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:""})]}),F.jsx("div",{className:"flex-1 p-4",children:F.jsx("textarea",{ref:g,value:s,onChange:o=>d(o.target.value),onKeyDown:i,placeholder:"Type or paste long text here...",className:"w-full h-full bg-bg-primary border border-border-subtle rounded p-3 font-mono text-sm text-text-primary focus:outline-none focus:border-accent-blue resize-none"})}),F.jsxs("div",{className:"p-4 border-t border-border-subtle flex justify-end gap-3",children:[F.jsx("button",{onClick:t,className:"px-4 py-2 rounded text-text-secondary hover:bg-bg-tertiary transition-colors",children:"Cancel"}),F.jsx("button",{onClick:C,disabled:!s,className:"px-4 py-2 bg-accent-blue text-white rounded font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Send (Cmd+Enter)"})]})]})}):null};var Xd={},Yd={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var g="",C=0;C<arguments.length;C++){var i=arguments[C];i&&(g=d(g,s(i)))}return g}function s(g){if(typeof g=="string"||typeof g=="number")return g;if(typeof g!="object")return"";if(Array.isArray(g))return r.apply(null,g);if(g.toString!==Object.prototype.toString&&!g.toString.toString().includes("[native code]"))return g.toString();var C="";for(var i in g)t.call(g,i)&&g[i]&&(C=d(C,i));return C}function d(g,C){return C?g?g+" "+C:g+C:g}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Yd);var og=Yd.exports,fr={},Jd={},Yt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){}t.prototype={diff:function(d,g){var C,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var f=this;function _(x){return o?(setTimeout(function(){o(void 0,x)},0),!0):x}d=this.castInput(d),g=this.castInput(g),d=this.removeEmpty(this.tokenize(d)),g=this.removeEmpty(this.tokenize(g));var h=g.length,p=d.length,w=1,S=h+p;i.maxEditLength&&(S=Math.min(S,i.maxEditLength));var u=(C=i.timeout)!==null&&C!==void 0?C:1/0,n=Date.now()+u,a=[{oldPos:-1,lastComponent:void 0}],c=this.extractCommon(a[0],g,d,0);if(a[0].oldPos+1>=p&&c+1>=h)return _([{value:this.join(g),count:g.length}]);var l=-1/0,m=1/0;function L(){for(var x=Math.max(l,-w);x<=Math.min(m,w);x+=2){var y=void 0,b=a[x-1],E=a[x+1];b&&(a[x-1]=void 0);var R=!1;if(E){var k=E.oldPos-x;R=E&&0<=k&&k<h}var D=b&&b.oldPos+1<p;if(!R&&!D){a[x]=void 0;continue}if(!D||R&&b.oldPos+1<E.oldPos?y=f.addToPath(E,!0,void 0,0):y=f.addToPath(b,void 0,!0,1),c=f.extractCommon(y,g,d,x),y.oldPos+1>=p&&c+1>=h)return _(r(f,y.lastComponent,g,d,f.useLongestToken));a[x]=y,y.oldPos+1>=p&&(m=Math.min(m,x-1)),c+1>=h&&(l=Math.max(l,x+1))}w++}if(o)(function x(){setTimeout(function(){if(w>S||Date.now()>n)return o();L()||x()},0)})();else for(;w<=S&&Date.now()<=n;){var v=L();if(v)return v}},addToPath:function(d,g,C,i){var o=d.lastComponent;return o&&o.added===g&&o.removed===C?{oldPos:d.oldPos+i,lastComponent:{count:o.count+1,added:g,removed:C,previousComponent:o.previousComponent}}:{oldPos:d.oldPos+i,lastComponent:{count:1,added:g,removed:C,previousComponent:o}}},extractCommon:function(d,g,C,i){for(var o=g.length,f=C.length,_=d.oldPos,h=_-i,p=0;h+1<o&&_+1<f&&this.equals(g[h+1],C[_+1]);)h++,_++,p++;return p&&(d.lastComponent={count:p,previousComponent:d.lastComponent}),d.oldPos=_,h},equals:function(d,g){return this.options.comparator?this.options.comparator(d,g):d===g||this.options.ignoreCase&&d.toLowerCase()===g.toLowerCase()},removeEmpty:function(d){for(var g=[],C=0;C<d.length;C++)d[C]&&g.push(d[C]);return g},castInput:function(d){return d},tokenize:function(d){return d.split("")},join:function(d){return d.join("")}};function r(s,d,g,C,i){for(var o=[],f;d;)o.push(d),f=d.previousComponent,delete d.previousComponent,d=f;o.reverse();for(var _=0,h=o.length,p=0,w=0;_<h;_++){var S=o[_];if(S.removed){if(S.value=s.join(C.slice(w,w+S.count)),w+=S.count,_&&o[_-1].added){var n=o[_-1];o[_-1]=o[_],o[_]=n}}else{if(!S.added&&i){var u=g.slice(p,p+S.count);u=u.map(function(c,l){var m=C[w+l];return m.length>c.length?m:c}),S.value=s.join(u)}else S.value=s.join(g.slice(p,p+S.count));p+=S.count,S.added||(w+=S.count)}}var a=o[h-1];return h>1&&typeof a.value=="string"&&(a.added||a.removed)&&s.equals("",a.value)&&(o[h-2].value+=a.value,o.pop()),o}})(Yt);var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.diffChars=cg;gs.characterDiff=void 0;var ag=lg(Yt);function lg(e){return e&&e.__esModule?e:{default:e}}var Zd=new ag.default;gs.characterDiff=Zd;function cg(e,t,r){return Zd.diff(e,t,r)}var mi={},Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.generateOptions=hg;function hg(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}Object.defineProperty(mi,"__esModule",{value:!0});mi.diffWords=_g;mi.diffWordsWithSpace=pg;mi.wordDiff=void 0;var ug=fg(Yt),dg=Yn;function fg(e){return e&&e.__esModule?e:{default:e}}var rh=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,ih=/\S/,vs=new ug.default;mi.wordDiff=vs;vs.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!ih.test(e)&&!ih.test(t)};vs.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&rh.test(t[r])&&rh.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};function _g(e,t,r){return r=(0,dg.generateOptions)(r,{ignoreWhitespace:!0}),vs.diff(e,t,r)}function pg(e,t,r){return vs.diff(e,t,r)}var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.diffLines=yg;yr.diffTrimmedLines=Cg;yr.lineDiff=void 0;var gg=mg(Yt),vg=Yn;function mg(e){return e&&e.__esModule?e:{default:e}}var Jn=new gg.default;yr.lineDiff=Jn;Jn.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var s=0;s<r.length;s++){var d=r[s];s%2&&!this.options.newlineIsToken?t[t.length-1]+=d:(this.options.ignoreWhitespace&&(d=d.trim()),t.push(d))}return t};function yg(e,t,r){return Jn.diff(e,t,r)}function Cg(e,t,r){var s=(0,vg.generateOptions)(r,{ignoreWhitespace:!0});return Jn.diff(e,t,s)}var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.diffSentences=xg;ms.sentenceDiff=void 0;var Sg=wg(Yt);function wg(e){return e&&e.__esModule?e:{default:e}}var Bl=new Sg.default;ms.sentenceDiff=Bl;Bl.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function xg(e,t,r){return Bl.diff(e,t,r)}var ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.diffCss=Eg;ys.cssDiff=void 0;var bg=Lg(Yt);function Lg(e){return e&&e.__esModule?e:{default:e}}var Ol=new bg.default;ys.cssDiff=Ol;Ol.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Eg(e,t,r){return Ol.diff(e,t,r)}var yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.diffJson=Dg;yi.canonicalize=Dn;yi.jsonDiff=void 0;var Qd=Rg(Yt),kg=yr;function Rg(e){return e&&e.__esModule?e:{default:e}}function tn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tn=function(r){return typeof r}:tn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},tn(e)}var Mg=Object.prototype.toString,Pr=new Qd.default;yi.jsonDiff=Pr;Pr.useLongestToken=!0;Pr.tokenize=kg.lineDiff.tokenize;Pr.castInput=function(e){var t=this.options,r=t.undefinedReplacement,s=t.stringifyReplacer,d=s===void 0?function(g,C){return typeof C>"u"?r:C}:s;return typeof e=="string"?e:JSON.stringify(Dn(e,null,null,d),d,"  ")};Pr.equals=function(e,t){return Qd.default.prototype.equals.call(Pr,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Dg(e,t,r){return Pr.diff(e,t,r)}function Dn(e,t,r,s,d){t=t||[],r=r||[],s&&(e=s(d,e));var g;for(g=0;g<t.length;g+=1)if(t[g]===e)return r[g];var C;if(Mg.call(e)==="[object Array]"){for(t.push(e),C=new Array(e.length),r.push(C),g=0;g<e.length;g+=1)C[g]=Dn(e[g],t,r,s,d);return t.pop(),r.pop(),C}if(e&&e.toJSON&&(e=e.toJSON()),tn(e)==="object"&&e!==null){t.push(e),C={},r.push(C);var i=[],o;for(o in e)e.hasOwnProperty(o)&&i.push(o);for(i.sort(),g=0;g<i.length;g+=1)o=i[g],C[o]=Dn(e[o],t,r,s,o);t.pop(),r.pop()}else C=e;return C}var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.diffArrays=Bg;Cs.arrayDiff=void 0;var Ag=Tg(Yt);function Tg(e){return e&&e.__esModule?e:{default:e}}var ls=new Ag.default;Cs.arrayDiff=ls;ls.tokenize=function(e){return e.slice()};ls.join=ls.removeEmpty=function(e){return e};function Bg(e,t,r){return ls.diff(e,t,r)}var Zn={},Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.parsePatch=Og;function Og(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.split(/\r\n|[\n\v\f\r\x85]/),s=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],d=[],g=0;function C(){var f={};for(d.push(f);g<r.length;){var _=r[g];if(/^(\-\-\-|\+\+\+|@@)\s/.test(_))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+/.exec(_);h&&(f.index=_.substring(h[0].length).trim()),g++}for(i(f),i(f),f.hunks=[];g<r.length;){var p=r[g];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))f.hunks.push(o());else{if(p&&t.strict)throw new Error("Unknown line "+(g+1)+" "+JSON.stringify(p));g++}}}function i(f){var _=/^(---|\+\+\+)\s+/.exec(r[g]);if(_){var h=_[1]==="---"?"old":"new",p=r[g].substring(3).trim().split("	",2),w=p[0].replace(/\\\\/g,"\\");w.startsWith('"')&&w.endsWith('"')&&(w=w.substr(1,w.length-2)),f[h+"FileName"]=w,f[h+"Header"]=(p[1]||"").trim(),g++}}function o(){var f=g,_=r[g++],h=_.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+h[1],oldLines:typeof h[2]>"u"?1:+h[2],newStart:+h[3],newLines:typeof h[4]>"u"?1:+h[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var w=0,S=0;g<r.length&&!(r[g].indexOf("--- ")===0&&g+2<r.length&&r[g+1].indexOf("+++ ")===0&&r[g+2].indexOf("@@")===0);g++){var u=r[g].length==0&&g!=r.length-1?" ":r[g][0];if(u==="+"||u==="-"||u===" "||u==="\\")p.lines.push(r[g]),p.linedelimiters.push(s[g]||`
`),u==="+"?w++:u==="-"?S++:u===" "&&(w++,S++);else break}if(!w&&p.newLines===1&&(p.newLines=0),!S&&p.oldLines===1&&(p.oldLines=0),t.strict){if(w!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(f+1));if(S!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(f+1))}return p}for(;g<r.length;)C();return d}var ef={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r,s,d){var g=!0,C=!1,i=!1,o=1;return function f(){if(g&&!i){if(C?o++:g=!1,r+o<=d)return o;i=!0}if(!C)return i||(g=!0),s<=r-o?-o++:(C=!0,f())}}})(ef);Object.defineProperty(Zn,"__esModule",{value:!0});Zn.applyPatch=rf;Zn.applyPatches=Fg;var tf=Ss,Pg=Ig(ef);function Ig(e){return e&&e.__esModule?e:{default:e}}function rf(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=(0,tf.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var s=e.split(/\r\n|[\n\v\f\r\x85]/),d=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],g=t.hunks,C=r.compareLine||function(j,N,I,B){return N===B},i=0,o=r.fuzzFactor||0,f=0,_=0,h,p;function w(j,N){for(var I=0;I<j.lines.length;I++){var B=j.lines[I],M=B.length>0?B[0]:" ",A=B.length>0?B.substr(1):B;if(M===" "||M==="-"){if(!C(N+1,s[N],M,A)&&(i++,i>o))return!1;N++}}return!0}for(var S=0;S<g.length;S++){for(var u=g[S],n=s.length-u.oldLines,a=0,c=_+u.oldStart-1,l=(0,Pg.default)(c,f,n);a!==void 0;a=l())if(w(u,c+a)){u.offset=_+=a;break}if(a===void 0)return!1;f=u.offset+u.oldStart+u.oldLines}for(var m=0,L=0;L<g.length;L++){var v=g[L],x=v.oldStart+v.offset+m-1;m+=v.newLines-v.oldLines;for(var y=0;y<v.lines.length;y++){var b=v.lines[y],E=b.length>0?b[0]:" ",R=b.length>0?b.substr(1):b,k=v.linedelimiters&&v.linedelimiters[y]||`
`;if(E===" ")x++;else if(E==="-")s.splice(x,1),d.splice(x,1);else if(E==="+")s.splice(x,0,R),d.splice(x,0,k),x++;else if(E==="\\"){var D=v.lines[y-1]?v.lines[y-1][0]:null;D==="+"?h=!0:D==="-"&&(p=!0)}}}if(h)for(;!s[s.length-1];)s.pop(),d.pop();else p&&(s.push(""),d.push(`
`));for(var T=0;T<s.length-1;T++)s[T]=s[T]+d[T];return s.join("")}function Fg(e,t){typeof e=="string"&&(e=(0,tf.parsePatch)(e));var r=0;function s(){var d=e[r++];if(!d)return t.complete();t.loadFile(d,function(g,C){if(g)return t.complete(g);var i=rf(C,d,t);t.patched(d,i,function(o){if(o)return t.complete(o);s()})})}s()}var Qn={},Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.structuredPatch=sf;Nr.formatPatch=Pl;Nr.createTwoFilesPatch=nf;Nr.createPatch=zg;var Ng=yr;function Oo(e){return Wg(e)||$g(e)||jg(e)||Hg()}function Hg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jg(e,t){if(e){if(typeof e=="string")return Ta(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ta(e,t)}}function $g(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Wg(e){if(Array.isArray(e))return Ta(e)}function Ta(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function sf(e,t,r,s,d,g,C){C||(C={}),typeof C.context>"u"&&(C.context=4);var i=(0,Ng.diffLines)(r,s,C);if(!i)return;i.push({value:"",lines:[]});function o(a){return a.map(function(c){return" "+c})}for(var f=[],_=0,h=0,p=[],w=1,S=1,u=function(c){var l=i[c],m=l.lines||l.value.replace(/\n$/,"").split(`
`);if(l.lines=m,l.added||l.removed){var L;if(!_){var v=i[c-1];_=w,h=S,v&&(p=C.context>0?o(v.lines.slice(-C.context)):[],_-=p.length,h-=p.length)}(L=p).push.apply(L,Oo(m.map(function(T){return(l.added?"+":"-")+T}))),l.added?S+=m.length:w+=m.length}else{if(_)if(m.length<=C.context*2&&c<i.length-2){var x;(x=p).push.apply(x,Oo(o(m)))}else{var y,b=Math.min(m.length,C.context);(y=p).push.apply(y,Oo(o(m.slice(0,b))));var E={oldStart:_,oldLines:w-_+b,newStart:h,newLines:S-h+b,lines:p};if(c>=i.length-2&&m.length<=C.context){var R=/\n$/.test(r),k=/\n$/.test(s),D=m.length==0&&p.length>E.oldLines;!R&&D&&r.length>0&&p.splice(E.oldLines,0,"\\ No newline at end of file"),(!R&&!D||!k)&&p.push("\\ No newline at end of file")}f.push(E),_=0,h=0,p=[]}w+=m.length,S+=m.length}},n=0;n<i.length;n++)u(n);return{oldFileName:e,newFileName:t,oldHeader:d,newHeader:g,hunks:f}}function Pl(e){if(Array.isArray(e))return e.map(Pl).join(`
`);var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader>"u"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader>"u"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var s=e.hunks[r];s.oldLines===0&&(s.oldStart-=1),s.newLines===0&&(s.newStart-=1),t.push("@@ -"+s.oldStart+","+s.oldLines+" +"+s.newStart+","+s.newLines+" @@"),t.push.apply(t,s.lines)}return t.join(`
`)+`
`}function nf(e,t,r,s,d,g,C){return Pl(sf(e,t,r,s,d,g,C))}function zg(e,t,r,s,d,g){return nf(e,e,t,r,s,d,g)}var eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.arrayEqual=Ug;eo.arrayStartsWith=of;function Ug(e,t){return e.length!==t.length?!1:of(e,t)}function of(e,t){if(t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}Object.defineProperty(Qn,"__esModule",{value:!0});Qn.calcLineCount=af;Qn.merge=Jg;var Gg=Nr,Vg=Ss,Po=eo;function ni(e){return Yg(e)||Xg(e)||qg(e)||Kg()}function Kg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qg(e,t){if(e){if(typeof e=="string")return Ba(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ba(e,t)}}function Xg(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Yg(e){if(Array.isArray(e))return Ba(e)}function Ba(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function af(e){var t=Oa(e.lines),r=t.oldLines,s=t.newLines;r!==void 0?e.oldLines=r:delete e.oldLines,s!==void 0?e.newLines=s:delete e.newLines}function Jg(e,t,r){e=sh(e,r),t=sh(t,r);var s={};(e.index||t.index)&&(s.index=e.index||t.index),(e.newFileName||t.newFileName)&&(nh(e)?nh(t)?(s.oldFileName=js(s,e.oldFileName,t.oldFileName),s.newFileName=js(s,e.newFileName,t.newFileName),s.oldHeader=js(s,e.oldHeader,t.oldHeader),s.newHeader=js(s,e.newHeader,t.newHeader)):(s.oldFileName=e.oldFileName,s.newFileName=e.newFileName,s.oldHeader=e.oldHeader,s.newHeader=e.newHeader):(s.oldFileName=t.oldFileName||e.oldFileName,s.newFileName=t.newFileName||e.newFileName,s.oldHeader=t.oldHeader||e.oldHeader,s.newHeader=t.newHeader||e.newHeader)),s.hunks=[];for(var d=0,g=0,C=0,i=0;d<e.hunks.length||g<t.hunks.length;){var o=e.hunks[d]||{oldStart:1/0},f=t.hunks[g]||{oldStart:1/0};if(oh(o,f))s.hunks.push(ah(o,C)),d++,i+=o.newLines-o.oldLines;else if(oh(f,o))s.hunks.push(ah(f,i)),g++,C+=f.newLines-f.oldLines;else{var _={oldStart:Math.min(o.oldStart,f.oldStart),oldLines:0,newStart:Math.min(o.newStart+C,f.oldStart+i),newLines:0,lines:[]};Zg(_,o.oldStart,o.lines,f.oldStart,f.lines),g++,d++,s.hunks.push(_)}}return s}function sh(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,Vg.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,Gg.structuredPatch)(void 0,void 0,t,e)}return e}function nh(e){return e.newFileName&&e.newFileName!==e.oldFileName}function js(e,t,r){return t===r?t:(e.conflict=!0,{mine:t,theirs:r})}function oh(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function ah(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function Zg(e,t,r,s,d){var g={offset:t,lines:r,index:0},C={offset:s,lines:d,index:0};for(ch(e,g,C),ch(e,C,g);g.index<g.lines.length&&C.index<C.lines.length;){var i=g.lines[g.index],o=C.lines[C.index];if((i[0]==="-"||i[0]==="+")&&(o[0]==="-"||o[0]==="+"))Qg(e,g,C);else if(i[0]==="+"&&o[0]===" "){var f;(f=e.lines).push.apply(f,ni(kr(g)))}else if(o[0]==="+"&&i[0]===" "){var _;(_=e.lines).push.apply(_,ni(kr(C)))}else i[0]==="-"&&o[0]===" "?lh(e,g,C):o[0]==="-"&&i[0]===" "?lh(e,C,g,!0):i===o?(e.lines.push(i),g.index++,C.index++):Il(e,kr(g),kr(C))}hh(e,g),hh(e,C),af(e)}function Qg(e,t,r){var s=kr(t),d=kr(r);if(uh(s)&&uh(d)){if((0,Po.arrayStartsWith)(s,d)&&dh(r,s,s.length-d.length)){var g;(g=e.lines).push.apply(g,ni(s));return}else if((0,Po.arrayStartsWith)(d,s)&&dh(t,d,d.length-s.length)){var C;(C=e.lines).push.apply(C,ni(d));return}}else if((0,Po.arrayEqual)(s,d)){var i;(i=e.lines).push.apply(i,ni(s));return}Il(e,s,d)}function lh(e,t,r,s){var d=kr(t),g=ev(r,d);if(g.merged){var C;(C=e.lines).push.apply(C,ni(g.merged))}else Il(e,s?g:d,s?d:g)}function Il(e,t,r){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:r})}function ch(e,t,r){for(;t.offset<r.offset&&t.index<t.lines.length;){var s=t.lines[t.index++];e.lines.push(s),t.offset++}}function hh(e,t){for(;t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r)}}function kr(e){for(var t=[],r=e.lines[e.index][0];e.index<e.lines.length;){var s=e.lines[e.index];if(r==="-"&&s[0]==="+"&&(r="+"),r===s[0])t.push(s),e.index++;else break}return t}function ev(e,t){for(var r=[],s=[],d=0,g=!1,C=!1;d<t.length&&e.index<e.lines.length;){var i=e.lines[e.index],o=t[d];if(o[0]==="+")break;if(g=g||i[0]!==" ",s.push(o),d++,i[0]==="+")for(C=!0;i[0]==="+";)r.push(i),i=e.lines[++e.index];o.substr(1)===i.substr(1)?(r.push(i),e.index++):C=!0}if((t[d]||"")[0]==="+"&&g&&(C=!0),C)return r;for(;d<t.length;)s.push(t[d++]);return{merged:s,changes:r}}function uh(e){return e.reduce(function(t,r){return t&&r[0]==="-"},!0)}function dh(e,t,r){for(var s=0;s<r;s++){var d=t[t.length-r+s].substr(1);if(e.lines[e.index+s]!==" "+d)return!1}return e.index+=r,!0}function Oa(e){var t=0,r=0;return e.forEach(function(s){if(typeof s!="string"){var d=Oa(s.mine),g=Oa(s.theirs);t!==void 0&&(d.oldLines===g.oldLines?t+=d.oldLines:t=void 0),r!==void 0&&(d.newLines===g.newLines?r+=d.newLines:r=void 0)}else r!==void 0&&(s[0]==="+"||s[0]===" ")&&r++,t!==void 0&&(s[0]==="-"||s[0]===" ")&&t++}),{oldLines:t,newLines:r}}var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.reversePatch=lf;function fh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,s)}return r}function _h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fh(Object(r),!0).forEach(function(s){tv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fh(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function tv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lf(e){return Array.isArray(e)?e.map(lf).reverse():_h(_h({},e),{},{oldFileName:e.newFileName,oldHeader:e.newHeader,newFileName:e.oldFileName,newHeader:e.oldHeader,hunks:e.hunks.map(function(t){return{oldLines:t.newLines,oldStart:t.newStart,newLines:t.oldLines,newStart:t.oldStart,linedelimiters:t.linedelimiters,lines:t.lines.map(function(r){return r.startsWith("-")?"+".concat(r.slice(1)):r.startsWith("+")?"-".concat(r.slice(1)):r})}})})}var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.convertChangesToDMP=rv;function rv(e){for(var t=[],r,s,d=0;d<e.length;d++)r=e[d],r.added?s=1:r.removed?s=-1:s=0,t.push([s,r.value]);return t}var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.convertChangesToXML=iv;function iv(e){for(var t=[],r=0;r<e.length;r++){var s=e[r];s.added?t.push("<ins>"):s.removed&&t.push("<del>"),t.push(sv(s.value)),s.added?t.push("</ins>"):s.removed&&t.push("</del>")}return t.join("")}function sv(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Diff",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"diffChars",{enumerable:!0,get:function(){return r.diffChars}}),Object.defineProperty(e,"diffWords",{enumerable:!0,get:function(){return s.diffWords}}),Object.defineProperty(e,"diffWordsWithSpace",{enumerable:!0,get:function(){return s.diffWordsWithSpace}}),Object.defineProperty(e,"diffLines",{enumerable:!0,get:function(){return d.diffLines}}),Object.defineProperty(e,"diffTrimmedLines",{enumerable:!0,get:function(){return d.diffTrimmedLines}}),Object.defineProperty(e,"diffSentences",{enumerable:!0,get:function(){return g.diffSentences}}),Object.defineProperty(e,"diffCss",{enumerable:!0,get:function(){return C.diffCss}}),Object.defineProperty(e,"diffJson",{enumerable:!0,get:function(){return i.diffJson}}),Object.defineProperty(e,"canonicalize",{enumerable:!0,get:function(){return i.canonicalize}}),Object.defineProperty(e,"diffArrays",{enumerable:!0,get:function(){return o.diffArrays}}),Object.defineProperty(e,"applyPatch",{enumerable:!0,get:function(){return f.applyPatch}}),Object.defineProperty(e,"applyPatches",{enumerable:!0,get:function(){return f.applyPatches}}),Object.defineProperty(e,"parsePatch",{enumerable:!0,get:function(){return _.parsePatch}}),Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return h.merge}}),Object.defineProperty(e,"reversePatch",{enumerable:!0,get:function(){return p.reversePatch}}),Object.defineProperty(e,"structuredPatch",{enumerable:!0,get:function(){return w.structuredPatch}}),Object.defineProperty(e,"createTwoFilesPatch",{enumerable:!0,get:function(){return w.createTwoFilesPatch}}),Object.defineProperty(e,"createPatch",{enumerable:!0,get:function(){return w.createPatch}}),Object.defineProperty(e,"formatPatch",{enumerable:!0,get:function(){return w.formatPatch}}),Object.defineProperty(e,"convertChangesToDMP",{enumerable:!0,get:function(){return S.convertChangesToDMP}}),Object.defineProperty(e,"convertChangesToXML",{enumerable:!0,get:function(){return u.convertChangesToXML}});var t=n(Yt),r=gs,s=mi,d=yr,g=ms,C=ys,i=yi,o=Cs,f=Zn,_=Ss,h=Qn,p=Fl,w=Nr,S=Nl,u=Hl;function n(a){return a&&a.__esModule?a:{default:a}}})(Jd);var nv=Ie&&Ie.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r);var d=Object.getOwnPropertyDescriptor(t,r);(!d||("get"in d?!t.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,d)}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),ov=Ie&&Ie.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),av=Ie&&Ie.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&nv(t,e,r);return ov(t,e),t};Object.defineProperty(fr,"__esModule",{value:!0});fr.computeLineInformation=fr.DiffMethod=fr.DiffType=void 0;const Pa=av(Jd),lv=Pa;var Wt;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ADDED=1]="ADDED",e[e.REMOVED=2]="REMOVED",e[e.CHANGED=3]="CHANGED"})(Wt||(fr.DiffType=Wt={}));var An;(function(e){e.CHARS="diffChars",e.WORDS="diffWords",e.WORDS_WITH_SPACE="diffWordsWithSpace",e.LINES="diffLines",e.TRIMMED_LINES="diffTrimmedLines",e.SENTENCES="diffSentences",e.CSS="diffCss",e.JSON="diffJson"})(An||(fr.DiffMethod=An={}));const ph=e=>e===""?[]:e.replace(/\n$/,"").split(`
`),cv=(e,t,r=An.CHARS)=>{const s=lv[r](e,t),d={left:[],right:[]};return s.forEach(({added:g,removed:C,value:i})=>{const o={};return g&&(o.type=Wt.ADDED,o.value=i,d.right.push(o)),C&&(o.type=Wt.REMOVED,o.value=i,d.left.push(o)),!C&&!g&&(o.type=Wt.DEFAULT,o.value=i,d.right.push(o),d.left.push(o)),o}),d},hv=(e,t,r=!1,s=An.CHARS,d=0,g=[])=>{let C=[];typeof e=="string"&&typeof t=="string"?C=Pa.diffLines(e.trimRight(),t.trimRight(),{newlineIsToken:!1,ignoreWhitespace:!1,ignoreCase:!1}):C=Pa.diffJson(e,t);let i=d,o=d,f=[],_=0;const h=[],p=[],w=(S,u,n,a,c)=>ph(S).map((m,L)=>{const v={},x={};if(!(p.includes(`${u}-${L}`)||c&&L!==0)){if(n||a){let y=!0;if(a){o+=1,v.lineNumber=o,v.type=Wt.REMOVED,v.value=m||" ";const b=C[u+1];if(b&&b.added){const E=ph(b.value)[L];if(E){const R=w(E,u,!0,!1,!0),{value:k,lineNumber:D,type:T}=R[0].right;if(p.push(`${u+1}-${L}`),x.lineNumber=D,v.value===k)y=!1,x.type=0,v.type=0,x.value=k;else if(x.type=T,r)x.value=k;else{const j=cv(m,k,s);x.value=j.right,v.value=j.left}}}}else i+=1,x.lineNumber=i,x.type=Wt.ADDED,x.value=m;y&&!c&&(h.includes(_)||h.push(_))}else o+=1,i+=1,v.lineNumber=o,v.type=Wt.DEFAULT,v.value=m,x.lineNumber=i,x.type=Wt.DEFAULT,x.value=m;return(g?.includes(`L-${v.lineNumber}`)||g?.includes(`R-${x.lineNumber}`)&&!h.includes(_))&&h.push(_),c||(_+=1),{right:x,left:v}}}).filter(Boolean);return C.forEach(({added:S,removed:u,value:n},a)=>{f=[...f,...w(n,a,S,u)]}),{lineInformation:f,diffLines:h}};fr.computeLineInformation=hv;var jl={};function uv(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function dv(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var fv=function(){function e(r){var s=this;this._insertTag=function(d){var g;s.tags.length===0?s.insertionPoint?g=s.insertionPoint.nextSibling:s.prepend?g=s.container.firstChild:g=s.before:g=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(d,g),s.tags.push(d)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(dv(this));var d=this.tags[this.tags.length-1];if(this.isSpeedy){var g=uv(d);try{g.insertRule(s,g.cssRules.length)}catch{}}else d.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var d;return(d=s.parentNode)==null?void 0:d.removeChild(s)}),this.tags=[],this.ctr=0},e}(),Ke="-ms-",Tn="-moz-",ve="-webkit-",cf="comm",$l="rule",Wl="decl",_v="@import",hf="@keyframes",pv="@layer",gv=Math.abs,to=String.fromCharCode,vv=Object.assign;function mv(e,t){return $e(e,0)^45?(((t<<2^$e(e,0))<<2^$e(e,1))<<2^$e(e,2))<<2^$e(e,3):0}function uf(e){return e.trim()}function yv(e,t){return(e=t.exec(e))?e[0]:e}function me(e,t,r){return e.replace(t,r)}function Ia(e,t){return e.indexOf(t)}function $e(e,t){return e.charCodeAt(t)|0}function cs(e,t,r){return e.slice(t,r)}function Bt(e){return e.length}function zl(e){return e.length}function $s(e,t){return t.push(e),e}function Cv(e,t){return e.map(t).join("")}var ro=1,_i=1,df=0,at=0,Te=0,Ci="";function io(e,t,r,s,d,g,C){return{value:e,root:t,parent:r,type:s,props:d,children:g,line:ro,column:_i,length:C,return:""}}function Ai(e,t){return vv(io("",null,null,"",null,null,0),e,{length:-e.length},t)}function Sv(){return Te}function wv(){return Te=at>0?$e(Ci,--at):0,_i--,Te===10&&(_i=1,ro--),Te}function dt(){return Te=at<df?$e(Ci,at++):0,_i++,Te===10&&(_i=1,ro++),Te}function Ft(){return $e(Ci,at)}function rn(){return at}function ws(e,t){return cs(Ci,e,t)}function hs(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ff(e){return ro=_i=1,df=Bt(Ci=e),at=0,[]}function _f(e){return Ci="",e}function sn(e){return uf(ws(at-1,Fa(e===91?e+2:e===40?e+1:e)))}function xv(e){for(;(Te=Ft())&&Te<33;)dt();return hs(e)>2||hs(Te)>3?"":" "}function bv(e,t){for(;--t&&dt()&&!(Te<48||Te>102||Te>57&&Te<65||Te>70&&Te<97););return ws(e,rn()+(t<6&&Ft()==32&&dt()==32))}function Fa(e){for(;dt();)switch(Te){case e:return at;case 34:case 39:e!==34&&e!==39&&Fa(Te);break;case 40:e===41&&Fa(e);break;case 92:dt();break}return at}function Lv(e,t){for(;dt()&&e+Te!==57;)if(e+Te===84&&Ft()===47)break;return"/*"+ws(t,at-1)+"*"+to(e===47?e:dt())}function Ev(e){for(;!hs(Ft());)dt();return ws(e,at)}function kv(e){return _f(nn("",null,null,null,[""],e=ff(e),0,[0],e))}function nn(e,t,r,s,d,g,C,i,o){for(var f=0,_=0,h=C,p=0,w=0,S=0,u=1,n=1,a=1,c=0,l="",m=d,L=g,v=s,x=l;n;)switch(S=c,c=dt()){case 40:if(S!=108&&$e(x,h-1)==58){Ia(x+=me(sn(c),"&","&\f"),"&\f")!=-1&&(a=-1);break}case 34:case 39:case 91:x+=sn(c);break;case 9:case 10:case 13:case 32:x+=xv(S);break;case 92:x+=bv(rn()-1,7);continue;case 47:switch(Ft()){case 42:case 47:$s(Rv(Lv(dt(),rn()),t,r),o);break;default:x+="/"}break;case 123*u:i[f++]=Bt(x)*a;case 125*u:case 59:case 0:switch(c){case 0:case 125:n=0;case 59+_:a==-1&&(x=me(x,/\f/g,"")),w>0&&Bt(x)-h&&$s(w>32?vh(x+";",s,r,h-1):vh(me(x," ","")+";",s,r,h-2),o);break;case 59:x+=";";default:if($s(v=gh(x,t,r,f,_,d,i,l,m=[],L=[],h),g),c===123)if(_===0)nn(x,t,v,v,m,g,h,i,L);else switch(p===99&&$e(x,3)===110?100:p){case 100:case 108:case 109:case 115:nn(e,v,v,s&&$s(gh(e,v,v,0,0,d,i,l,d,m=[],h),L),d,L,h,i,s?m:L);break;default:nn(x,v,v,v,[""],L,0,i,L)}}f=_=w=0,u=a=1,l=x="",h=C;break;case 58:h=1+Bt(x),w=S;default:if(u<1){if(c==123)--u;else if(c==125&&u++==0&&wv()==125)continue}switch(x+=to(c),c*u){case 38:a=_>0?1:(x+="\f",-1);break;case 44:i[f++]=(Bt(x)-1)*a,a=1;break;case 64:Ft()===45&&(x+=sn(dt())),p=Ft(),_=h=Bt(l=x+=Ev(rn())),c++;break;case 45:S===45&&Bt(x)==2&&(u=0)}}return g}function gh(e,t,r,s,d,g,C,i,o,f,_){for(var h=d-1,p=d===0?g:[""],w=zl(p),S=0,u=0,n=0;S<s;++S)for(var a=0,c=cs(e,h+1,h=gv(u=C[S])),l=e;a<w;++a)(l=uf(u>0?p[a]+" "+c:me(c,/&\f/g,p[a])))&&(o[n++]=l);return io(e,t,r,d===0?$l:i,o,f,_)}function Rv(e,t,r){return io(e,t,r,cf,to(Sv()),cs(e,2,-2),0)}function vh(e,t,r,s){return io(e,t,r,Wl,cs(e,0,s),cs(e,s+1,-1),s)}function oi(e,t){for(var r="",s=zl(e),d=0;d<s;d++)r+=t(e[d],d,e,t)||"";return r}function Mv(e,t,r,s){switch(e.type){case pv:if(e.children.length)break;case _v:case Wl:return e.return=e.return||e.value;case cf:return"";case hf:return e.return=e.value+"{"+oi(e.children,s)+"}";case $l:e.value=e.props.join(",")}return Bt(r=oi(e.children,s))?e.return=e.value+"{"+r+"}":""}function Dv(e){var t=zl(e);return function(r,s,d,g){for(var C="",i=0;i<t;i++)C+=e[i](r,s,d,g)||"";return C}}function Av(e){return function(t){t.root||(t=t.return)&&e(t)}}function Tv(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Bv=function(t,r,s){for(var d=0,g=0;d=g,g=Ft(),d===38&&g===12&&(r[s]=1),!hs(g);)dt();return ws(t,at)},Ov=function(t,r){var s=-1,d=44;do switch(hs(d)){case 0:d===38&&Ft()===12&&(r[s]=1),t[s]+=Bv(at-1,r,s);break;case 2:t[s]+=sn(d);break;case 4:if(d===44){t[++s]=Ft()===58?"&\f":"",r[s]=t[s].length;break}default:t[s]+=to(d)}while(d=dt());return t},Pv=function(t,r){return _f(Ov(ff(t),r))},mh=new WeakMap,Iv=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,s=t.parent,d=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!mh.get(s))&&!d){mh.set(t,!0);for(var g=[],C=Pv(r,g),i=s.props,o=0,f=0;o<C.length;o++)for(var _=0;_<i.length;_++,f++)t.props[f]=g[o]?C[o].replace(/&\f/g,i[_]):i[_]+" "+C[o]}}},Fv=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function pf(e,t){switch(mv(e,t)){case 5103:return ve+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ve+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ve+e+Tn+e+Ke+e+e;case 6828:case 4268:return ve+e+Ke+e+e;case 6165:return ve+e+Ke+"flex-"+e+e;case 5187:return ve+e+me(e,/(\w+).+(:[^]+)/,ve+"box-$1$2"+Ke+"flex-$1$2")+e;case 5443:return ve+e+Ke+"flex-item-"+me(e,/flex-|-self/,"")+e;case 4675:return ve+e+Ke+"flex-line-pack"+me(e,/align-content|flex-|-self/,"")+e;case 5548:return ve+e+Ke+me(e,"shrink","negative")+e;case 5292:return ve+e+Ke+me(e,"basis","preferred-size")+e;case 6060:return ve+"box-"+me(e,"-grow","")+ve+e+Ke+me(e,"grow","positive")+e;case 4554:return ve+me(e,/([^-])(transform)/g,"$1"+ve+"$2")+e;case 6187:return me(me(me(e,/(zoom-|grab)/,ve+"$1"),/(image-set)/,ve+"$1"),e,"")+e;case 5495:case 3959:return me(e,/(image-set\([^]*)/,ve+"$1$`$1");case 4968:return me(me(e,/(.+:)(flex-)?(.*)/,ve+"box-pack:$3"+Ke+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ve+e+e;case 4095:case 3583:case 4068:case 2532:return me(e,/(.+)-inline(.+)/,ve+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bt(e)-1-t>6)switch($e(e,t+1)){case 109:if($e(e,t+4)!==45)break;case 102:return me(e,/(.+:)(.+)-([^]+)/,"$1"+ve+"$2-$3$1"+Tn+($e(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Ia(e,"stretch")?pf(me(e,"stretch","fill-available"),t)+e:e}break;case 4949:if($e(e,t+1)!==115)break;case 6444:switch($e(e,Bt(e)-3-(~Ia(e,"!important")&&10))){case 107:return me(e,":",":"+ve)+e;case 101:return me(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ve+($e(e,14)===45?"inline-":"")+"box$3$1"+ve+"$2$3$1"+Ke+"$2box$3")+e}break;case 5936:switch($e(e,t+11)){case 114:return ve+e+Ke+me(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ve+e+Ke+me(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ve+e+Ke+me(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ve+e+Ke+e+e}return e}var Nv=function(t,r,s,d){if(t.length>-1&&!t.return)switch(t.type){case Wl:t.return=pf(t.value,t.length);break;case hf:return oi([Ai(t,{value:me(t.value,"@","@"+ve)})],d);case $l:if(t.length)return Cv(t.props,function(g){switch(yv(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return oi([Ai(t,{props:[me(g,/:(read-\w+)/,":"+Tn+"$1")]})],d);case"::placeholder":return oi([Ai(t,{props:[me(g,/:(plac\w+)/,":"+ve+"input-$1")]}),Ai(t,{props:[me(g,/:(plac\w+)/,":"+Tn+"$1")]}),Ai(t,{props:[me(g,/:(plac\w+)/,Ke+"input-$1")]})],d)}return""})}},Hv=[Nv],jv=function(t){var r=t.key;if(r==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(u){var n=u.getAttribute("data-emotion");n.indexOf(" ")!==-1&&(document.head.appendChild(u),u.setAttribute("data-s",""))})}var d=t.stylisPlugins||Hv,g={},C,i=[];C=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(u){for(var n=u.getAttribute("data-emotion").split(" "),a=1;a<n.length;a++)g[n[a]]=!0;i.push(u)});var o,f=[Iv,Fv];{var _,h=[Mv,Av(function(u){_.insert(u)})],p=Dv(f.concat(d,h)),w=function(n){return oi(kv(n),p)};o=function(n,a,c,l){_=c,w(n?n+"{"+a.styles+"}":a.styles),l&&(S.inserted[a.name]=!0)}}var S={key:r,sheet:new fv({key:r,container:C,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:g,registered:{},insert:o};return S.sheet.hydrate(i),S};function $v(e){for(var t=0,r,s=0,d=e.length;d>=4;++s,d-=4)r=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(d){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Wv={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zv=/[A-Z]|^ms/g,Uv=/_EMO_([^_]+?)_([^]*?)_EMO_/g,gf=function(t){return t.charCodeAt(1)===45},yh=function(t){return t!=null&&typeof t!="boolean"},Io=Tv(function(e){return gf(e)?e:e.replace(zv,"-$&").toLowerCase()}),Ch=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(Uv,function(s,d,g){return sr={name:d,styles:g,next:sr},d})}return Wv[t]!==1&&!gf(t)&&typeof r=="number"&&r!==0?r+"px":r};function Bn(e,t,r){if(r==null)return"";var s=r;if(s.__emotion_styles!==void 0)return s;switch(typeof r){case"boolean":return"";case"object":{var d=r;if(d.anim===1)return sr={name:d.name,styles:d.styles,next:sr},d.name;var g=r;if(g.styles!==void 0){var C=g.next;if(C!==void 0)for(;C!==void 0;)sr={name:C.name,styles:C.styles,next:sr},C=C.next;var i=g.styles+";";return i}return Gv(e,t,r)}}var o=r;if(t==null)return o;var f=t[o];return f!==void 0?f:o}function Gv(e,t,r){var s="";if(Array.isArray(r))for(var d=0;d<r.length;d++)s+=Bn(e,t,r[d])+";";else for(var g in r){var C=r[g];if(typeof C!="object"){var i=C;t!=null&&t[i]!==void 0?s+=g+"{"+t[i]+"}":yh(i)&&(s+=Io(g)+":"+Ch(g,i)+";")}else if(Array.isArray(C)&&typeof C[0]=="string"&&(t==null||t[C[0]]===void 0))for(var o=0;o<C.length;o++)yh(C[o])&&(s+=Io(g)+":"+Ch(g,C[o])+";");else{var f=Bn(e,t,C);switch(g){case"animation":case"animationName":{s+=Io(g)+":"+f+";";break}default:s+=g+"{"+f+"}"}}}return s}var Sh=/label:\s*([^\s;{]+)\s*(;|$)/g,sr;function Fo(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,d="";sr=void 0;var g=e[0];if(g==null||g.raw===void 0)s=!1,d+=Bn(r,t,g);else{var C=g;d+=C[0]}for(var i=1;i<e.length;i++)if(d+=Bn(r,t,e[i]),s){var o=g;d+=o[i]}Sh.lastIndex=0;for(var f="",_;(_=Sh.exec(d))!==null;)f+="-"+_[1];var h=$v(d)+f;return{name:h,styles:d,next:sr}}function vf(e,t,r){var s="";return r.split(" ").forEach(function(d){e[d]!==void 0?t.push(e[d]+";"):d&&(s+=d+" ")}),s}var Vv=function(t,r,s){var d=t.key+"-"+r.name;t.registered[d]===void 0&&(t.registered[d]=r.styles)},Kv=function(t,r,s){Vv(t,r);var d=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var g=r;do t.insert(r===g?"."+d:"",g,t.sheet,!0),g=g.next;while(g!==void 0)}};function wh(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function xh(e,t,r){var s=[],d=vf(e,s,r);return s.length<2?r:d+t(s)}var qv=function(t){var r=jv(t);r.sheet.speedy=function(i){this.isSpeedy=i},r.compat=!0;var s=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var h=Fo(f,r.registered,void 0);return Kv(r,h),r.key+"-"+h.name},d=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var h=Fo(f,r.registered),p="animation-"+h.name;return wh(r,{name:h.name,styles:"@keyframes "+p+"{"+h.styles+"}"}),p},g=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];var h=Fo(f,r.registered);wh(r,h)},C=function(){for(var o=arguments.length,f=new Array(o),_=0;_<o;_++)f[_]=arguments[_];return xh(r.registered,s,Xv(f))};return{css:s,cx:C,injectGlobal:g,keyframes:d,hydrate:function(o){o.forEach(function(f){r.inserted[f]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:vf.bind(null,r.registered),merge:xh.bind(null,r.registered,s)}},Xv=function e(t){for(var r="",s=0;s<t.length;s++){var d=t[s];if(d!=null){var g=void 0;switch(typeof d){case"boolean":break;case"object":{if(Array.isArray(d))g=e(d);else{g="";for(var C in d)d[C]&&C&&(g&&(g+=" "),g+=C)}break}default:g=d}g&&(r&&(r+=" "),r+=g)}}return r};const Yv=Object.freeze(Object.defineProperty({__proto__:null,default:qv},Symbol.toStringTag,{value:"Module"})),Jv=Bh(Yv);var Zv=Ie&&Ie.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)t.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(r[s[d]]=e[s[d]]);return r},Qv=Ie&&Ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jl,"__esModule",{value:!0});const em=Qv(Jv);jl.default=(e,t=!1,r="")=>{const{variables:s={}}=e,d=Zv(e,["variables"]),g={light:Object.assign({diffViewerBackground:"#fff",diffViewerColor:"#212529",addedBackground:"#e6ffed",addedColor:"#24292e",removedBackground:"#ffeef0",removedColor:"#24292e",changedBackground:"#fffbdd",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0",addedGutterBackground:"#cdffd8",removedGutterBackground:"#ffdce0",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",codeFoldGutterBackground:"#dbedff",codeFoldBackground:"#f1f8ff",emptyLineBackground:"#fafbfc",gutterColor:"#212529",addedGutterColor:"#212529",removedGutterColor:"#212529",codeFoldContentColor:"#212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleColor:"#212529",diffViewerTitleBorderColor:"#eee"},s.light||{}),dark:Object.assign({diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",addedBackground:"#044B53",addedColor:"white",removedBackground:"#632F34",removedColor:"white",changedBackground:"#3e302c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f",addedGutterBackground:"#034148",removedGutterBackground:"#632b30",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",codeFoldGutterBackground:"#21232b",codeFoldBackground:"#262831",emptyLineBackground:"#363946",gutterColor:"#666c87",addedGutterColor:"#8c8c8c",removedGutterColor:"#8c8c8c",codeFoldContentColor:"#656a8b",diffViewerTitleBackground:"#2f323e",diffViewerTitleColor:"#555a7b",diffViewerTitleBorderColor:"#353846"},s.dark||{})},C=t?g.dark:g.light,{css:i,cx:o}=(0,em.default)({key:"react-diff",nonce:r}),f=i({width:"100%",label:"content"}),_=i({[`.${f}`]:{width:"50%"},label:"split-view"}),h=i({width:"100%",background:C.diffViewerBackground,pre:{margin:0,whiteSpace:"pre-wrap",lineHeight:"25px"},label:"diff-container",borderCollapse:"collapse"}),p=i({color:C.codeFoldContentColor,label:"code-fold-content"}),w=i({color:C.diffViewerColor,label:"content-text"}),S=i({background:C.diffViewerTitleBackground,padding:10,borderBottom:`1px solid ${C.diffViewerTitleBorderColor}`,label:"title-block",":last-child":{borderLeft:`1px solid ${C.diffViewerTitleBorderColor}`},[`.${w}`]:{color:C.diffViewerTitleColor}}),u=i({color:C.gutterColor,label:"line-number"}),n=i({background:C.removedBackground,color:C.removedColor,pre:{color:C.removedColor},[`.${u}`]:{color:C.removedGutterColor},label:"diff-removed"}),a=i({background:C.addedBackground,color:C.addedColor,pre:{color:C.addedColor},[`.${u}`]:{color:C.addedGutterColor},label:"diff-added"}),c=i({background:C.changedBackground,[`.${u}`]:{color:C.gutterColor},label:"diff-changed"}),l=i({padding:2,display:"inline-flex",borderRadius:4,wordBreak:"break-all",label:"word-diff"}),m=i({background:C.wordAddedBackground,label:"word-added"}),L=i({background:C.wordRemovedBackground,label:"word-removed"}),v=i({backgroundColor:C.codeFoldGutterBackground,label:"code-fold-gutter"}),x=i({backgroundColor:C.codeFoldBackground,height:40,fontSize:14,fontWeight:700,label:"code-fold",a:{textDecoration:"underline !important",cursor:"pointer",pre:{display:"inline"}}}),y=i({backgroundColor:C.emptyLineBackground,label:"empty-line"}),b=i({width:25,paddingLeft:10,paddingRight:10,userSelect:"none",label:"marker",[`&.${a}`]:{pre:{color:C.addedColor}},[`&.${n}`]:{pre:{color:C.removedColor}}}),E=i({background:C.highlightBackground,label:"highlighted-line",[`.${m}, .${L}`]:{backgroundColor:"initial"}}),R=i({label:"highlighted-gutter"}),k=i({userSelect:"none",minWidth:50,padding:"0 10px",whiteSpace:"nowrap",label:"gutter",textAlign:"right",background:C.gutterBackground,"&:hover":{cursor:"pointer",background:C.gutterBackgroundDark,pre:{opacity:1}},pre:{opacity:.5},[`&.${a}`]:{background:C.addedGutterBackground},[`&.${n}`]:{background:C.removedGutterBackground},[`&.${R}`]:{background:C.highlightGutterBackground,"&:hover":{background:C.highlightGutterBackground}}}),D=i({"&:hover":{background:C.gutterBackground,cursor:"initial"},label:"empty-gutter"}),T=i({verticalAlign:"baseline",label:"line"}),j={diffContainer:h,diffRemoved:n,diffAdded:a,diffChanged:c,splitView:_,marker:b,highlightedGutter:R,highlightedLine:E,gutter:k,line:T,wordDiff:l,wordAdded:m,wordRemoved:L,codeFoldGutter:v,codeFold:x,emptyGutter:D,emptyLine:y,lineNumber:u,contentText:w,content:f,codeFoldContent:p,titleBlock:S},N=Object.keys(d).reduce((I,B)=>Object.assign(Object.assign({},I),{[B]:i(d[B])}),{});return Object.keys(j).reduce((I,B)=>Object.assign(Object.assign({},I),{[B]:N[B]?o(j[B],N[B]):j[B]}),{})};var so={};Object.defineProperty(so,"__esModule",{value:!0});so.computeHiddenBlocks=void 0;function tm(e,t,r){let s=0,d,g={},C=[];return e.forEach((i,o)=>{const f=t.some(_=>_>=o-r&&_<=o+r);!f&&d==null?(d={index:s,startLine:o,endLine:o,lines:1},C.push(d),g[o]=d.index,s++):f?d=void 0:(d.endLine=o,d.lines++,g[o]=d.index)}),{lineBlocks:g,blocks:C}}so.computeHiddenBlocks=tm;var bh=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function rm(e,t){return!!(e===t||bh(e)&&bh(t))}function im(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!rm(e[r],t[r]))return!1;return!0}function sm(e,t){t===void 0&&(t=im);var r=null;function s(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];if(r&&r.lastThis===this&&t(d,r.lastArgs))return r.lastResult;var C=e.apply(this,d);return r={lastResult:C,lastArgs:d,lastThis:this},C}return s.clear=function(){r=null},s}const nm=Object.freeze(Object.defineProperty({__proto__:null,default:sm},Symbol.toStringTag,{value:"Module"})),om=Bh(nm);(function(e){var t=Ie&&Ie.__createBinding||(Object.create?function(u,n,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(n,a);(!l||("get"in l?!n.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(u,c,l)}:function(u,n,a,c){c===void 0&&(c=a),u[c]=n[a]}),r=Ie&&Ie.__setModuleDefault||(Object.create?function(u,n){Object.defineProperty(u,"default",{enumerable:!0,value:n})}:function(u,n){u.default=n}),s=Ie&&Ie.__importStar||function(u){if(u&&u.__esModule)return u;var n={};if(u!=null)for(var a in u)a!=="default"&&Object.prototype.hasOwnProperty.call(u,a)&&t(n,u,a);return r(n,u),n},d=Ie&&Ie.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.DiffMethod=e.LineNumberPrefix=void 0;const g=F,C=s(V),i=d(og),o=fr;Object.defineProperty(e,"DiffMethod",{enumerable:!0,get:function(){return o.DiffMethod}});const f=d(jl),_=so,h=om,p=h.default||h;var w;(function(u){u.LEFT="L",u.RIGHT="R"})(w||(e.LineNumberPrefix=w={}));class S extends C.Component{constructor(n){super(n),this.resetCodeBlocks=()=>this.state.expandedBlocks.length>0?(this.setState({expandedBlocks:[]}),!0):!1,this.onBlockExpand=a=>{const c=this.state.expandedBlocks.slice();c.push(a),this.setState({expandedBlocks:c})},this.computeStyles=p(f.default),this.onLineNumberClickProxy=a=>this.props.onLineNumberClick?c=>this.props.onLineNumberClick(a,c):()=>{},this.renderWordDiff=(a,c)=>a.map((l,m)=>(0,g.jsx)("span",{className:(0,i.default)(this.styles.wordDiff,{[this.styles.wordAdded]:l.type===o.DiffType.ADDED,[this.styles.wordRemoved]:l.type===o.DiffType.REMOVED}),children:c?c(l.value):l.value},m)),this.renderLine=(a,c,l,m,L,v)=>{const x=`${l}-${a}`,y=`${v}-${L}`,b=this.props.highlightLines.includes(x)||this.props.highlightLines.includes(y),E=c===o.DiffType.ADDED,R=c===o.DiffType.REMOVED,k=c===o.DiffType.CHANGED;let D;return Array.isArray(m)?D=this.renderWordDiff(m,this.props.renderContent):this.props.renderContent?D=this.props.renderContent(m):D=m,(0,g.jsxs)(C.Fragment,{children:[!this.props.hideLineNumbers&&(0,g.jsx)("td",{onClick:a&&this.onLineNumberClickProxy(x),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!a,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedGutter]:b}),children:(0,g.jsx)("pre",{className:this.styles.lineNumber,children:a})}),!this.props.splitView&&!this.props.hideLineNumbers&&(0,g.jsx)("td",{onClick:L&&this.onLineNumberClickProxy(y),className:(0,i.default)(this.styles.gutter,{[this.styles.emptyGutter]:!L,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedGutter]:b}),children:(0,g.jsx)("pre",{className:this.styles.lineNumber,children:L})}),this.props.renderGutter?this.props.renderGutter({lineNumber:a,type:c,prefix:l,value:m,additionalLineNumber:L,additionalPrefix:v,styles:this.styles}):null,!this.props.hideMarkers&&(0,g.jsx)("td",{className:(0,i.default)(this.styles.marker,{[this.styles.emptyLine]:!D,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedLine]:b}),children:(0,g.jsxs)("pre",{children:[E&&"+",R&&"-"]})}),(0,g.jsx)("td",{className:(0,i.default)(this.styles.content,{[this.styles.emptyLine]:!D,[this.styles.diffAdded]:E,[this.styles.diffRemoved]:R,[this.styles.diffChanged]:k,[this.styles.highlightedLine]:b}),children:(0,g.jsx)("pre",{className:this.styles.contentText,children:D})})]})},this.renderSplitView=({left:a,right:c},l)=>(0,g.jsxs)("tr",{className:this.styles.line,children:[this.renderLine(a.lineNumber,a.type,w.LEFT,a.value),this.renderLine(c.lineNumber,c.type,w.RIGHT,c.value)]},l),this.renderInlineView=({left:a,right:c},l)=>{let m;return a.type===o.DiffType.REMOVED&&c.type===o.DiffType.ADDED?(0,g.jsxs)(C.Fragment,{children:[(0,g.jsx)("tr",{className:this.styles.line,children:this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,null)}),(0,g.jsx)("tr",{className:this.styles.line,children:this.renderLine(null,c.type,w.RIGHT,c.value,c.lineNumber)})]},l):(a.type===o.DiffType.REMOVED&&(m=this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,null)),a.type===o.DiffType.DEFAULT&&(m=this.renderLine(a.lineNumber,a.type,w.LEFT,a.value,c.lineNumber,w.RIGHT)),c.type===o.DiffType.ADDED&&(m=this.renderLine(null,c.type,w.RIGHT,c.value,c.lineNumber)),(0,g.jsx)("tr",{className:this.styles.line,children:m},l))},this.onBlockClickProxy=a=>()=>this.onBlockExpand(a),this.renderSkippedLineIndicator=(a,c,l,m)=>{const{hideLineNumbers:L,splitView:v}=this.props,x=this.props.codeFoldMessageRenderer?this.props.codeFoldMessageRenderer(a,l,m):(0,g.jsxs)("pre",{className:this.styles.codeFoldContent,children:["Expand ",a," lines ..."]}),y=(0,g.jsx)("td",{children:(0,g.jsx)("a",{onClick:this.onBlockClickProxy(c),tabIndex:0,children:x})}),b=!v&&!L;return(0,g.jsxs)("tr",{className:this.styles.codeFold,children:[!L&&(0,g.jsx)("td",{className:this.styles.codeFoldGutter}),this.props.renderGutter?(0,g.jsx)("td",{className:this.styles.codeFoldGutter}):null,(0,g.jsx)("td",{className:(0,i.default)({[this.styles.codeFoldGutter]:b})}),b?(0,g.jsxs)(C.Fragment,{children:[(0,g.jsx)("td",{}),y]}):(0,g.jsxs)(C.Fragment,{children:[y,this.props.renderGutter?(0,g.jsx)("td",{}):null,(0,g.jsx)("td",{})]}),(0,g.jsx)("td",{}),(0,g.jsx)("td",{})]},`${l}-${m}`)},this.renderDiff=()=>{const{oldValue:a,newValue:c,splitView:l,disableWordDiff:m,compareMethod:L,linesOffset:v}=this.props,{lineInformation:x,diffLines:y}=(0,o.computeLineInformation)(a,c,m,L,v,this.props.alwaysShowLines),b=this.props.extraLinesSurroundingDiff<0?0:Math.round(this.props.extraLinesSurroundingDiff),{lineBlocks:E,blocks:R}=(0,_.computeHiddenBlocks)(x,y,b);return x.map((k,D)=>{if(this.props.showDiffOnly){const j=E[D];if(j!==void 0){const N=R[j].endLine===D;if(!this.state.expandedBlocks.includes(j)&&N)return(0,g.jsx)(C.Fragment,{children:this.renderSkippedLineIndicator(R[j].lines,j,k.left.lineNumber,k.right.lineNumber)},D);if(!this.state.expandedBlocks.includes(j))return null}}return l?this.renderSplitView(k,D):this.renderInlineView(k,D)})},this.render=()=>{const{oldValue:a,newValue:c,useDarkTheme:l,leftTitle:m,rightTitle:L,splitView:v,hideLineNumbers:x,hideMarkers:y,nonce:b}=this.props;if(this.props.compareMethod!==o.DiffMethod.JSON&&(typeof a!="string"||typeof c!="string"))throw Error('"oldValue" and "newValue" should be strings');this.styles=this.computeStyles(this.props.styles,l,b);const E=this.renderDiff();let R=x?2:3,k=x?2:4;y&&(R-=1,k-=1);const D=this.props.renderGutter?1:0,T=(m||L)&&(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{colSpan:(v?R:k)+D,className:this.styles.titleBlock,children:(0,g.jsx)("pre",{className:this.styles.contentText,children:m})}),v&&(0,g.jsx)("td",{colSpan:R+D,className:this.styles.titleBlock,children:(0,g.jsx)("pre",{className:this.styles.contentText,children:L})})]});return(0,g.jsx)("table",{className:(0,i.default)(this.styles.diffContainer,{[this.styles.splitView]:v}),children:(0,g.jsxs)("tbody",{children:[T,E]})})},this.state={expandedBlocks:[]}}}S.defaultProps={oldValue:"",newValue:"",splitView:!0,highlightLines:[],disableWordDiff:!1,compareMethod:o.DiffMethod.CHARS,styles:{},hideLineNumbers:!1,hideMarkers:!1,extraLinesSurroundingDiff:3,showDiffOnly:!0,useDarkTheme:!1,linesOffset:0,nonce:""},e.default=S})(Xd);const am=Th(Xd),lm={variables:{dark:{diffViewerBackground:"#0d1117",diffViewerColor:"#e6edf3",addedBackground:"rgba(63, 185, 80, 0.15)",addedColor:"#e6edf3",removedBackground:"rgba(248, 81, 73, 0.15)",removedColor:"#e6edf3",wordAddedBackground:"rgba(63, 185, 80, 0.4)",wordRemovedBackground:"rgba(248, 81, 73, 0.4)",addedGutterBackground:"#1a4d2e",removedGutterBackground:"#4d1a1a",gutterBackground:"#161b22",gutterBackgroundDark:"#0d1117",highlightBackground:"#21262d",highlightGutterBackground:"#21262d",codeFoldGutterBackground:"#161b22",codeFoldBackground:"#161b22",emptyLineBackground:"#161b22",gutterColor:"#6e7681",addedGutterColor:"#3fb950",removedGutterColor:"#f85149",codeFoldContentColor:"#8b949e",diffViewerTitleBackground:"#161b22",diffViewerTitleColor:"#e6edf3",diffViewerTitleBorderColor:"#30363d"}}},cm={A:"Added",M:"Modified",D:"Deleted"},hm={A:"bg-accent-green text-white",M:"bg-accent-blue text-white",D:"bg-accent-red text-white"};function um(e){const t=e.querySelectorAll("td");for(const r of t){const s=r.querySelector("pre");if(s){const d=s.textContent?.trim();if(d==="+"||d==="-")return!0}}return!1}function dm(e){return e.textContent?.includes("hidden lines")||!1}function fm(e){const t=[],r=Array.from(e.querySelectorAll("tr"));let s=!1;for(const d of r){if(dm(d)){s=!1;continue}const g=um(d);g&&!s&&t.push(d),s=g}return t}function _m({file:e,defaultExpanded:t}){const[r,s]=V.useState(t),[d,g]=V.useState(-1),[C,i]=V.useState(0),o=V.useRef(null),f=V.useRef([]);V.useEffect(()=>{if(r&&o.current){const h=setTimeout(()=>{o.current&&(f.current=fm(o.current),i(f.current.length),g(f.current.length>0?0:-1))},200);return()=>clearTimeout(h)}else f.current=[],i(0),g(-1)},[r]);const _=h=>{if(f.current.length===0)return;let p;h==="prev"?p=Math.max(0,d-1):p=Math.min(f.current.length-1,d+1),p!==d&&(g(p),f.current[p]?.scrollIntoView({behavior:"smooth",block:"center"}))};return F.jsxs("div",{className:"border border-border-subtle rounded-lg overflow-hidden mb-3",children:[F.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-bg-tertiary",children:[F.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>s(!r),children:[F.jsx("span",{className:"text-text-secondary shrink-0",children:r?"":""}),F.jsx("span",{className:"text-sm truncate",children:e.filename}),F.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded shrink-0 ${hm[e.status]||"bg-bg-secondary"}`,children:cm[e.status]||e.status})]}),F.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[F.jsxs("span",{className:"text-xs text-text-secondary",children:[e.additions>0&&F.jsxs("span",{className:"text-accent-green mr-1",children:["+",e.additions]}),e.deletions>0&&F.jsxs("span",{className:"text-accent-red",children:["-",e.deletions]})]}),r&&C>0&&F.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[F.jsx("button",{onClick:h=>{h.stopPropagation(),_("prev")},disabled:d<=0,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""}),F.jsxs("span",{className:"text-xs text-text-muted min-w-[32px] text-center",children:[d+1,"/",C]}),F.jsx("button",{onClick:h=>{h.stopPropagation(),_("next")},disabled:d>=C-1,className:"w-6 h-6 flex items-center justify-center rounded bg-bg-secondary text-text-secondary hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]})]}),r&&F.jsx("div",{ref:o,className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:e.binary?F.jsx("div",{className:"p-4 text-center text-text-muted",children:"Binary file"}):F.jsx(am,{oldValue:e.oldValue||"",newValue:e.newValue||"",splitView:!1,useDarkTheme:!0,styles:lm,showDiffOnly:!0,extraLinesSurroundingDiff:3,codeFoldMessageRenderer:h=>F.jsxs("span",{children:[h," hidden lines"]})})})]})}const pm=({isOpen:e,onClose:t})=>{const[r,s]=V.useState(null),[d,g]=V.useState(!1),C=V.useCallback(async()=>{g(!0);try{const h=await fetch("/api/diff",{signal:AbortSignal.timeout(5e3)});if(!h.ok)throw new Error(`HTTP ${h.status}`);const p=await h.json();s(p)}catch(h){s({error:"connection_failed",message:h instanceof Error?h.message:"Cannot connect to diff server"})}finally{g(!1)}},[]);if(V.useEffect(()=>{e&&C()},[e,C]),V.useEffect(()=>{const h=p=>{e&&p.key==="Escape"&&(t(),p.preventDefault())};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[e,t]),!e)return null;const i=r?.files||[],o=i.length,f=r?.summary?.totalAdditions||0,_=r?.summary?.totalDeletions||0;return F.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-end justify-center",onClick:h=>h.target===h.currentTarget&&t(),children:F.jsxs("div",{className:"w-full h-[90vh] bg-bg-primary rounded-t-2xl flex flex-col overflow-hidden",children:[F.jsxs("div",{className:"shrink-0 px-4 py-3 border-b border-border-subtle flex items-center justify-between",children:[F.jsxs("div",{className:"flex items-center gap-3",children:[F.jsx("h2",{className:"text-lg font-semibold",children:"Git Diff"}),r?.branch&&F.jsx("span",{className:"text-sm text-accent-purple",children:r.branch})]}),F.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-bg-tertiary text-text-secondary",children:""})]}),F.jsxs("div",{className:"shrink-0 px-4 py-2 border-b border-border-subtle flex items-center justify-between text-xs text-text-secondary",children:[F.jsxs("div",{className:"flex items-center gap-3",children:[r?.git_root&&F.jsx("span",{className:"truncate max-w-[200px]",title:r.git_root,children:r.git_root}),F.jsxs("span",{children:[o," file",o!==1?"s":""]})]}),F.jsxs("div",{className:"flex items-center gap-2",children:[F.jsxs("span",{className:"text-accent-green",children:["+",f]}),F.jsxs("span",{className:"text-accent-red",children:["-",_]})]})]}),F.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d?F.jsx("div",{className:"flex items-center justify-center h-full",children:F.jsx("div",{className:"text-text-muted",children:"Loading..."})}):r?.error?F.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[F.jsx("span",{className:"text-2xl",children:""}),F.jsx("span",{className:"text-text-muted",children:r.message||"Error loading diff"})]}):i.length===0?F.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[F.jsx("span",{className:"text-2xl text-accent-green",children:""}),F.jsx("span",{className:"text-text-muted",children:"No changes"})]}):i.map((h,p)=>F.jsx(_m,{file:h,defaultExpanded:p===0},h.filename))})]})})},Ws=()=>{try{navigator.vibrate?.(8)}catch{}},gm=()=>{const{sendKey:e,sendInput:t}=Xt(),[r,s]=V.useState(null),[d,g]=V.useState(!1),[C,i]=V.useState(!1),[o,f]=V.useState(!1),[_,h]=V.useState(()=>localStorage.getItem("ttyd_toolbar_expanded")!=="false"),p=()=>{h(l=>(localStorage.setItem("ttyd_toolbar_expanded",String(!l)),!l))},w=()=>{const l=localStorage.getItem("ttyd_commands");if(l)try{s(JSON.parse(l))}catch(m){console.error("Failed to parse ttyd_commands",m)}else s({defaultCommands:[{name:"claude",cmd:"claude --dangerously-skip-permissions",visible:!0},{name:"opencode",cmd:"opencode",visible:!0}],customCommands:[]})};V.useEffect(()=>{w()},[]);const S=l=>{t(l+"\r")},u=l=>{Ws(),e(l)},n=l=>{Ws(),S(l)},a=V.useRef(null),c=async l=>{try{const m=await fetch("/api/upload-image",{method:"POST",headers:{"Content-Type":l.type},body:l});if(!m.ok)throw new Error(`Upload failed: ${m.status}`);const{path:L}=await m.json();t(L)}catch(m){console.error("[Toolbar] Image upload failed:",m)}};return F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"bg-bg-secondary border-t border-border-subtle shrink-0 pb-[env(safe-area-inset-bottom)]",children:F.jsx("div",{className:"flex flex-col gap-1.5 px-2 py-1.5",children:_?F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar",children:[F.jsx(Lh,{expanded:!0,onClick:p}),F.jsx(Ve,{label:"ESC",onClick:()=>u("ESC")}),F.jsx(Ve,{label:"^C",onClick:()=>u("CTRL_C"),className:"text-accent-red"}),F.jsx(Ve,{label:"^L",onClick:()=>u("CTRL_L")}),F.jsx(Na,{}),F.jsx(Eh,{config:r,onCmd:n}),F.jsx(At,{label:"",onClick:()=>i(!0),"aria-label":"Text input"}),F.jsx(At,{label:"",onClick:()=>a.current?.click(),"aria-label":"Upload image"}),F.jsx(At,{label:"Sel",onClick:()=>{Ws(),window.dispatchEvent(new Event("terminal-copy-viewport"))},className:"text-accent-purple","aria-label":"Copy viewport"}),F.jsx(At,{label:"Diff",onClick:()=>f(!0),className:"text-accent-green"}),F.jsx(At,{label:"",onClick:()=>g(!0),"aria-label":"Settings"})]}),F.jsxs("div",{className:"flex items-center gap-1.5",children:[F.jsx(Ve,{label:"Tab",onClick:()=>u("TAB"),wide:!0}),F.jsx(Ve,{label:"Enter",onClick:()=>u("ENTER"),wide:!0}),F.jsx("div",{className:"flex-1"}),F.jsx(Ve,{label:"",onClick:()=>u("ARROW_UP")})]}),F.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[F.jsx(Ve,{label:"",onClick:()=>u("ARROW_LEFT")}),F.jsx(Ve,{label:"",onClick:()=>u("ARROW_DOWN")}),F.jsx(Ve,{label:"",onClick:()=>u("ARROW_RIGHT")})]})]}):F.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar mask-gradient-right",children:[F.jsx(Lh,{expanded:!1,onClick:p}),F.jsx(Ve,{label:"ESC",onClick:()=>u("ESC")}),F.jsx(Ve,{label:"Tab",onClick:()=>u("TAB")}),F.jsx(Ve,{label:"^C",onClick:()=>u("CTRL_C"),className:"text-accent-red"}),F.jsx(Ve,{label:"",onClick:()=>u("ARROW_UP")}),F.jsx(Ve,{label:"",onClick:()=>u("ARROW_DOWN")}),F.jsx(Ve,{label:"",onClick:()=>u("ARROW_LEFT")}),F.jsx(Ve,{label:"",onClick:()=>u("ARROW_RIGHT")}),F.jsx(Na,{}),F.jsx(Eh,{config:r,onCmd:n}),F.jsx(At,{label:"",onClick:()=>i(!0),"aria-label":"Text input"}),F.jsx(At,{label:"",onClick:()=>a.current?.click(),"aria-label":"Upload image"}),F.jsx(At,{label:"Sel",onClick:()=>{Ws(),window.dispatchEvent(new Event("terminal-copy-viewport"))},className:"text-accent-purple","aria-label":"Copy viewport"}),F.jsx(At,{label:"Diff",onClick:()=>f(!0),className:"text-accent-green"}),F.jsx(At,{label:"",onClick:()=>g(!0),"aria-label":"Settings"})]})})}),F.jsx(sg,{isOpen:d,onClose:()=>g(!1),onConfigChange:w}),F.jsx(ng,{isOpen:C,onClose:()=>i(!1),onSend:l=>t(l)}),F.jsx("input",{ref:a,type:"file",accept:"image/*",className:"hidden",onChange:l=>{const m=l.target.files?.[0];m&&c(m),l.target.value=""}}),F.jsx(pm,{isOpen:o,onClose:()=>f(!1)})]})},Ul="min-h-[36px] flex items-center justify-center rounded-lg shadow-sm border border-border-subtle text-sm font-mono active:scale-95 active:bg-accent-blue/20 transition-all whitespace-nowrap select-none",Lh=({expanded:e,onClick:t})=>F.jsx("button",{onClick:t,className:`min-w-[36px] min-h-[36px] flex items-center justify-center rounded-lg shadow-sm border text-sm active:scale-95 transition-all shrink-0 select-none ${e?"bg-accent-blue/20 border-accent-blue text-accent-blue":"bg-bg-tertiary/50 border-border-subtle text-text-secondary"}`,"aria-label":e?"Collapse toolbar":"Expand toolbar",children:e?"":""}),Na=()=>F.jsx("div",{className:"w-px h-5 bg-border-subtle shrink-0"}),Eh=({config:e,onCmd:t})=>{if(!e)return null;const r=[...e.defaultCommands.filter(s=>s.visible),...e.customCommands];return r.length===0?null:F.jsxs(F.Fragment,{children:[r.map(s=>F.jsx(vm,{label:s.name,onClick:()=>t(s.cmd)},s.name)),F.jsx(Na,{})]})},Ve=({label:e,onClick:t,className:r="",wide:s})=>F.jsx("button",{onClick:t,className:`${Ul} bg-bg-tertiary text-text-primary ${s?"px-4":"min-w-[36px] px-2"} ${r}`,children:e}),vm=({label:e,onClick:t})=>F.jsx("button",{onClick:t,className:`${Ul} bg-bg-tertiary text-accent-blue px-3`,children:e}),At=({label:e,onClick:t,className:r="",...s})=>F.jsx("button",{onClick:t,"aria-label":s["aria-label"],className:`${Ul} bg-bg-tertiary/50 text-text-secondary min-w-[36px] px-2 ${r}`,children:e}),kh=({isOpen:e,onClose:t})=>{const{sendInput:r,clientTty:s}=Xt(),[d,g]=V.useState(""),C=V.useRef(null);V.useEffect(()=>{e&&(g(""),setTimeout(()=>C.current?.focus(),100))},[e]);const i=async()=>{const f=d.trim();if(f){t();try{if(s){const _=`/api/tmux/create?name=${encodeURIComponent(f)}&client_tty=${encodeURIComponent(s)}`;if((await fetch(_,{signal:AbortSignal.timeout(3e3)})).ok){sessionStorage.setItem("ttyd_last_tmux_session",f);return}}}catch{}r(` tmux new-session -d -s ${f} 2>/dev/null; tmux switch-client -t ${f} 2>/dev/null || tmux new -A -s ${f}\r`),sessionStorage.setItem("ttyd_last_tmux_session",f)}},o=f=>{f.key==="Enter"?(f.preventDefault(),i()):f.key==="Escape"&&t()};return e?F.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:f=>f.target===f.currentTarget&&t(),children:F.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[F.jsx("h3",{className:"text-lg font-semibold mb-4",children:"New Tmux Session"}),F.jsx("input",{ref:C,type:"text",value:d,onChange:f=>g(f.target.value),onKeyDown:o,placeholder:"Session name (e.g. work, claude)",className:"w-full px-3 py-2 bg-bg-tertiary border border-border-subtle rounded-lg text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-purple mb-4"}),F.jsxs("div",{className:"flex gap-2 justify-end",children:[F.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),F.jsx("button",{onClick:i,disabled:!d.trim(),className:"px-4 py-2 rounded-lg bg-accent-purple text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Create & Attach"})]})]})}):null},mm=1500,ym=({sessionName:e,onConfirm:t,onCancel:r})=>F.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:s=>s.target===s.currentTarget&&r(),children:F.jsxs("div",{className:"w-full max-w-sm bg-bg-secondary rounded-xl p-4",children:[F.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Kill Session?"}),F.jsxs("p",{className:"text-text-secondary text-sm mb-4",children:["Are you sure you want to kill session ",F.jsxs("span",{className:"text-accent-red font-mono",children:['"',e,'"']}),"? This action cannot be undone."]}),F.jsxs("div",{className:"flex gap-2 justify-end",children:[F.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary hover:text-text-primary",children:"Cancel"}),F.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-accent-red text-white",children:"Kill Session"})]})]})}),Cm=()=>{const{sendInput:e}=Xt(),{tmuxSessions:t,currentTmuxSession:r,clientTty:s,sessionsLoaded:d,refresh:g}=qd(),[C,i]=V.useState(!1),[o,f]=V.useState(!1),[_,h]=V.useState(null),p=V.useRef(null),w=V.useRef(null),S=V.useRef(!1);V.useEffect(()=>{const y=b=>{p.current&&!p.current.contains(b.target)&&i(!1)};if(C)return document.addEventListener("mousedown",y),document.addEventListener("touchstart",y,{passive:!0}),()=>{document.removeEventListener("mousedown",y),document.removeEventListener("touchstart",y)}},[C]);const u=async y=>{i(!1);try{const b=s;if(b){const E=`/api/tmux/switch?session=${encodeURIComponent(y)}&client_tty=${encodeURIComponent(b)}`;if((await fetch(E,{signal:AbortSignal.timeout(3e3)})).ok){sessionStorage.setItem("ttyd_last_tmux_session",y),setTimeout(g,300);return}}}catch{}e(` tmux attach -t ${y}\r`),sessionStorage.setItem("ttyd_last_tmux_session",y),setTimeout(g,500)},n=async y=>{try{const b=`/api/tmux/kill?name=${encodeURIComponent(y)}`;await fetch(b,{signal:AbortSignal.timeout(5e3)}),g()}catch{}h(null)},a=y=>{S.current=!1,w.current=window.setTimeout(()=>{S.current=!0,h(y),i(!1)},mm)},c=()=>{w.current&&(clearTimeout(w.current),w.current=null)},l=y=>{S.current||u(y)},m=async()=>{i(!1);try{const y=s;if(y){const b=`/api/tmux/detach?client_tty=${encodeURIComponent(y)}`;await fetch(b,{signal:AbortSignal.timeout(3e3)}),setTimeout(g,500);return}}catch{}e(" tmux detach\r"),setTimeout(g,500)},L=()=>{i(!1),f(!0)};if(t.length===0)return d?F.jsxs(F.Fragment,{children:[F.jsx("button",{onTouchEnd:y=>{y.preventDefault(),L()},onClick:L,className:"flex items-center gap-1.5 px-2.5 py-1 text-accent-purple text-xs font-medium active:opacity-70",children:"+ New Session"}),F.jsx(kh,{isOpen:o,onClose:()=>f(!1)})]}):null;const v=r?t.find(y=>y.name===r):null,x=v?.name||(r??"Sessions");return F.jsxs(F.Fragment,{children:[F.jsxs("div",{ref:p,className:"relative",children:[F.jsxs("button",{onClick:()=>i(!C),className:"flex items-center gap-1.5 px-2.5 py-1 bg-accent-purple rounded-md text-white text-xs font-medium whitespace-nowrap",children:[F.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${v?"bg-accent-green":"bg-text-muted opacity-50"}`}),x,F.jsx("span",{className:"ml-1 text-[10px] opacity-70",children:C?"":""})]}),C&&F.jsxs("div",{className:"absolute top-full left-0 mt-1 min-w-[160px] bg-bg-secondary border border-border-subtle rounded-lg shadow-lg z-50 overflow-hidden",children:[F.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:t.map(y=>F.jsxs("button",{onClick:()=>l(y.name),onTouchStart:()=>a(y.name),onTouchEnd:c,onMouseDown:()=>a(y.name),onMouseUp:c,onMouseLeave:c,className:`w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm transition-colors ${y.name===r?"bg-accent-purple/20 text-accent-purple":"text-text-primary hover:bg-bg-tertiary"}`,children:[F.jsx("span",{className:`w-2 h-2 rounded-full ${y.attached?"bg-accent-green":"bg-text-muted opacity-50"}`}),F.jsx("span",{className:"flex-1 truncate",children:y.name}),F.jsxs("span",{className:"text-xs text-text-muted",children:[y.windows,"w"]})]},y.name))}),F.jsxs("div",{className:"border-t border-border-subtle",children:[F.jsxs("button",{onTouchEnd:y=>{y.preventDefault(),L()},onClick:L,className:"w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm text-accent-purple hover:bg-bg-tertiary active:bg-bg-tertiary",children:[F.jsx("span",{className:"w-2 h-2 flex items-center justify-center text-xs",children:"+"}),F.jsx("span",{children:"New Session"})]}),F.jsxs("button",{onTouchEnd:y=>{y.preventDefault(),m()},onClick:m,className:"w-full flex items-center gap-2 px-3 py-2.5 text-left text-sm text-text-secondary hover:bg-bg-tertiary active:bg-bg-tertiary",children:[F.jsx("span",{className:"w-2 h-2 flex items-center justify-center text-xs",children:""}),F.jsx("span",{children:"Shell"})]})]})]})]}),F.jsx(kh,{isOpen:o,onClose:()=>f(!1)}),_&&F.jsx(ym,{sessionName:_,onConfirm:()=>n(_),onCancel:()=>h(null)})]})},Sm=({currentBranch:e,onBranchChange:t})=>{const[r,s]=V.useState(!1),[d,g]=V.useState({local:[],remote:[],current:""}),[C,i]=V.useState(""),[o,f]=V.useState(!1),_=V.useRef(null),h=V.useRef(null),p=V.useCallback(async()=>{f(!0);try{const a=await fetch("/api/git/branches",{signal:AbortSignal.timeout(5e3)});if(a.ok){const c=await a.json();g(c)}}catch{g({local:[],remote:[],current:""})}finally{f(!1)}},[]);V.useEffect(()=>{r?(p(),setTimeout(()=>h.current?.focus(),100)):i("")},[r,p]),V.useEffect(()=>{const a=c=>{_.current&&!_.current.contains(c.target)&&s(!1)};if(r)return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a,{passive:!0}),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[r]);const w=async a=>{s(!1);try{const c=`/api/git/checkout?branch=${encodeURIComponent(a)}`;(await fetch(c,{signal:AbortSignal.timeout(1e4)})).ok&&t?.()}catch{}},S=a=>{if(!C)return a;const c=C.toLowerCase();return a.filter(l=>l.toLowerCase().includes(c))},u=S(d.local),n=S(d.remote);return e?F.jsxs("div",{ref:_,className:"relative",children:[F.jsxs("button",{onClick:()=>s(!r),className:"text-accent-purple hover:text-accent-purple/80 text-xs font-mono flex items-center gap-1",children:[F.jsx("span",{children:e}),F.jsx("span",{className:"text-[10px] opacity-70",children:r?"":""})]}),r&&F.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-bg-secondary border border-border-subtle rounded-lg shadow-lg z-50 overflow-hidden",children:[F.jsx("div",{className:"p-2 border-b border-border-subtle",children:F.jsx("input",{ref:h,type:"text",value:C,onChange:a=>i(a.target.value),placeholder:"Search branches...",className:"w-full px-2 py-1.5 bg-bg-tertiary border border-border-subtle rounded text-sm text-text-primary placeholder:text-text-muted focus:outline-none focus:border-accent-purple"})}),F.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:o?F.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:"Loading..."}):F.jsxs(F.Fragment,{children:[u.length>0&&F.jsxs("div",{children:[F.jsx("div",{className:"px-3 py-1.5 text-xs text-text-muted bg-bg-tertiary",children:"Local"}),u.map(a=>F.jsxs("button",{onClick:()=>w(a),className:`w-full px-3 py-2 text-left text-sm truncate ${a===d.current?"bg-accent-purple/20 text-accent-purple":"text-text-primary hover:bg-bg-tertiary"}`,children:[a===d.current&&F.jsx("span",{className:"mr-1",children:""}),a]},a))]}),n.length>0&&F.jsxs("div",{children:[F.jsx("div",{className:"px-3 py-1.5 text-xs text-text-muted bg-bg-tertiary",children:"Remote"}),n.map(a=>F.jsx("button",{onClick:()=>w(a),className:"w-full px-3 py-2 text-left text-sm text-text-secondary hover:bg-bg-tertiary truncate",children:a},a))]}),u.length===0&&n.length===0&&F.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:"No branches found"})]})})]})]}):null};function wm(e,t=20){if(e.length<=t)return e;const r=e.split("/");return r.length<=2?"..."+e.slice(-t+3):"~/"+r.slice(-2).join("/")}const xm=()=>{const{connectionState:e}=Xt(),{branch:t,path:r,isOffline:s,refresh:d}=qd(),g=V.useCallback(()=>{setTimeout(()=>d(),500)},[d]),C=e==="connected";return F.jsx("div",{className:"h-[40px] shrink-0 border-b border-border-subtle flex items-center px-3 bg-bg-secondary overflow-visible",children:F.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary font-mono w-full",children:[F.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${C?"bg-accent-green":"bg-accent-red"}`,title:C?"Connected":"Disconnected"}),F.jsx(Cm,{}),F.jsx("span",{className:"text-border-subtle shrink-0",children:""}),s?F.jsx("span",{className:"text-text-muted",children:"(offline)"}):F.jsxs(F.Fragment,{children:[F.jsx(Sm,{currentBranch:t||"-",onBranchChange:g}),F.jsx("span",{className:"text-border-subtle shrink-0",children:""}),F.jsx("span",{className:"truncate",title:r,children:wm(r)})]})]})})},mf="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9L1tcdTAwMUJcdTAwOUJdW1tcXSgpIzs/XSooPzooPzooPzooPzo7Wy1hLXpBLVpcZFwvIyYuOj0/JUB+X10rKSp8W2EtekEtWlxkXSsoPzo7Wy1hLXpBLVpcZFwvIyYuOj0/JUB+X10rKSopP1x1MDAwNyl8KD86KD86XGR7MSw0fSg/OjtcZHswLDR9KSopP1tcZEEtUFItVFpjZi1ucS11eT0+PH5dKSkvZztmdW5jdGlvbiBsKHQpe3JldHVybiB0LnJlcGxhY2UodSwiIil9Y29uc3QgYz1be3BhdHRlcm46L15SZWFkaW5nXHMrKC4rKSQvaSx0eXBlOiJyZWFkaW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15Xcm90ZVxzKyguKz8pKD86XHMrXCguKlwpKT8kL2ksdHlwZToid3JpdGluZyIsZmlsZUdyb3VwOjF9LHtwYXR0ZXJuOi9eQ3JlYXRlZFxzKyguKykkL2ksdHlwZToid3JpdGluZyIsZmlsZUdyb3VwOjF9LHtwYXR0ZXJuOi9eRWRpdGVkXHMrKC4rKSQvaSx0eXBlOiJ3cml0aW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15SdW5uaW5nXHMrKC4rKSQvaSx0eXBlOiJleGVjdXRpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXkV4ZWN1dGluZ1xzKyguKykkL2ksdHlwZToiZXhlY3V0aW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15UaGlua2luZ1wuezN9JC9pLHR5cGU6InRoaW5raW5nIn0se3BhdHRlcm46L15BbmFseXppbmdccysoLispL2ksdHlwZToidGhpbmtpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXlxbcmVhZFxdXHMrKC4rKSQvaSx0eXBlOiJyZWFkaW5nIixmaWxlR3JvdXA6MX0se3BhdHRlcm46L15cW3dyaXRlXF1ccysoLispJC9pLHR5cGU6IndyaXRpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXlxbZXhlY1xdXHMrKC4rKSQvaSx0eXBlOiJleGVjdXRpbmciLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXuKck1xzKyguKykkL2ksdHlwZToiY29tcGxldGUiLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXuKcl1xzKyguKykkL2ksdHlwZToiZXJyb3IiLGZpbGVHcm91cDoxfSx7cGF0dGVybjovXkVycm9yOlxzKyguKykvaSx0eXBlOiJlcnJvciIsZmlsZUdyb3VwOjF9XSxhPTFlMztsZXQgZT0iIjtmdW5jdGlvbiBmKHQpe2NvbnN0IG49dC50cmltKCk7aWYoIW4pcmV0dXJuIG51bGw7Zm9yKGNvbnN0e3BhdHRlcm46cCx0eXBlOm8sZmlsZUdyb3VwOml9b2YgYyl7Y29uc3Qgcz1uLm1hdGNoKHApO2lmKHMpe2NvbnN0IHI9aT9zW2ldOnZvaWQgMDtyZXR1cm57dHlwZTpvLG1lc3NhZ2U6cnx8bixmaWxlOnJ9fX1yZXR1cm4gbnVsbH1zZWxmLm9ubWVzc2FnZT10PT57aWYodC5kYXRhLnR5cGUhPT0iZGF0YSIpcmV0dXJuO2NvbnN0IG49bCh0LmRhdGEucGF5bG9hZCk7ZSs9bixlLmxlbmd0aD5hJiYoZT1lLnNsaWNlKC1hKSk7Y29uc3QgcD1lLnNwbGl0KC9ccj9cbi8pO2U9cC5wb3AoKXx8IiI7Y29uc3Qgbz1wLnNsaWNlKDAsNTApLGk9W107Zm9yKGNvbnN0IHMgb2Ygbyl7Y29uc3Qgcj1mKHMpO3ImJmkucHVzaChyKX1pLmxlbmd0aD4wJiZzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJhY3Rpdml0eSIsYWN0aXZpdGllczppfSl9fSkoKTsK",bm=e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0)),Rh=typeof self<"u"&&self.Blob&&new Blob([bm(mf)],{type:"text/javascript;charset=utf-8"});function Lm(e){let t;try{if(t=Rh&&(self.URL||self.webkitURL).createObjectURL(Rh),!t)throw"";const r=new Worker(t,{name:e?.name});return r.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),r}catch{return new Worker("data:text/javascript;base64,"+mf,{name:e?.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const Em=10;function km(){const[e,t]=V.useState([]),{subscribeOutput:r}=Xt(),s=V.useRef(0),d=V.useRef(null),g=V.useCallback((C,i,o)=>{const f={id:`activity-${++s.current}`,type:C,message:i,file:o,timestamp:new Date};t(_=>[f,..._].slice(0,Em))},[]);return V.useEffect(()=>{const C=new Lm;d.current=C,C.onmessage=o=>{if(o.data.type==="activity")for(const f of o.data.activities)g(f.type,f.message,f.file)};const i=r(o=>{const f=typeof o=="string"?o:new TextDecoder().decode(o);C.postMessage({type:"data",payload:f})});return()=>{i(),C.terminate(),d.current=null}},[r,g]),V.useEffect(()=>(typeof window<"u"&&(window.__addMockActivity=g),()=>{typeof window<"u"&&delete window.__addMockActivity}),[g]),{activities:e,addActivity:g}}const Mh={reading:"",writing:"",thinking:"",executing:"",complete:"",error:""},Dh={reading:"text-text-secondary",writing:"text-accent-green",thinking:"text-accent-purple",executing:"text-accent-blue",complete:"text-accent-green",error:"text-accent-red"},Rm=()=>{const[e,t]=V.useState(!1),{activities:r}=km(),s=r.length>0,d=r[0];return!s&&!e?F.jsx("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle cursor-pointer",onClick:()=>t(!0),children:F.jsxs("div",{className:"px-3 py-2 text-xs text-text-muted flex items-center gap-2",children:[F.jsx("span",{children:""}),F.jsx("span",{children:"No recent activity"})]})}):e?F.jsxs("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle max-h-[200px] overflow-y-auto",children:[F.jsxs("div",{className:"px-3 py-2 text-xs text-text-muted flex items-center gap-2 cursor-pointer sticky top-0 bg-bg-secondary border-b border-border-subtle",onClick:()=>t(!1),children:[F.jsx("span",{children:""}),F.jsxs("span",{children:[r.length," activities"]})]}),F.jsx("div",{className:"divide-y divide-border-subtle",children:r.map((g,C)=>{const i=C===0&&(g.type==="reading"||g.type==="thinking"||g.type==="executing");return F.jsxs("div",{className:`px-3 py-2 text-xs flex items-center gap-2 ${i?"bg-glow-ai border-l-2 border-accent-purple":""}`,style:i?{boxShadow:"0 0 12px var(--glow-ai)"}:void 0,children:[F.jsx("span",{className:Dh[g.type],children:Mh[g.type]}),F.jsx("span",{className:"text-text-primary truncate flex-1",children:g.message}),g.file&&g.file!==g.message&&F.jsx("span",{className:"text-text-muted truncate max-w-[120px]",title:g.file,children:g.file}),F.jsx("span",{className:"text-text-muted shrink-0",children:Mm(g.timestamp)})]},g.id)})}),!s&&F.jsx("div",{className:"px-3 py-4 text-xs text-text-muted text-center",children:"No recent activity"})]}):F.jsx("div",{className:"shrink-0 bg-bg-secondary border-b border-border-subtle cursor-pointer",onClick:()=>t(!0),children:F.jsxs("div",{className:"px-3 py-2 text-xs flex items-center gap-2",children:[F.jsx("span",{className:"text-text-muted",children:""}),F.jsxs("span",{className:"text-text-secondary",children:[r.length," activities"]}),d&&F.jsxs(F.Fragment,{children:[F.jsx("span",{className:"text-border-subtle",children:""}),F.jsxs("span",{className:Dh[d.type],children:[Mh[d.type]," ",d.message]})]})]})})};function Mm(e){return e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}const Dm=()=>{const{connectionState:e,reconnect:t,reconnectAttempt:r}=Xt(),s=V.useCallback(i=>{i.key==="Enter"&&e==="disconnected"&&t()},[e,t]);if(V.useEffect(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)),[s]),e==="connected")return null;const d=e==="reconnecting",g=e==="connecting",C=e==="disconnected";return F.jsx("div",{className:"fixed inset-0 z-40 bg-black/70 flex items-center justify-center pointer-events-auto",children:F.jsxs("div",{className:"bg-bg-secondary rounded-xl p-6 max-w-xs w-full mx-4 text-center shadow-xl border border-border-subtle",children:[(g||d)&&F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"w-8 h-8 border-2 border-accent-purple border-t-transparent rounded-full animate-spin mx-auto mb-4"}),F.jsx("h3",{className:"text-lg font-semibold mb-2",children:d?"Reconnecting...":"Connecting..."}),d&&F.jsxs("p",{className:"text-sm text-text-secondary",children:["Attempt ",r," of 10"]})]}),C&&r>=10&&F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-red/20 flex items-center justify-center mx-auto mb-4",children:F.jsx("span",{className:"text-2xl",children:""})}),F.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connection Failed"}),F.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Could not connect after 10 attempts"}),F.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Try Again"})]}),C&&r<10&&r>0&&F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:F.jsx("span",{className:"text-2xl",children:""})}),F.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),F.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Reconnecting automatically..."}),F.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect Now"}),F.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]}),C&&r===0&&F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-yellow/20 flex items-center justify-center mx-auto mb-4",children:F.jsx("span",{className:"text-2xl",children:""})}),F.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Disconnected"}),F.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Connection lost"}),F.jsx("button",{onClick:t,className:"w-full py-2.5 bg-accent-purple text-white rounded-lg font-medium active:opacity-80",children:"Reconnect"}),F.jsx("p",{className:"text-xs text-text-muted mt-3",children:"or press Enter"})]})]})})},Am=({children:e})=>{const{terminalRef:t}=Xt(),[r,s]=V.useState(null),d=V.useCallback(()=>{const C=window.visualViewport;C&&s(C.height)},[]);V.useEffect(()=>{const C=window.visualViewport;if(C)return C.addEventListener("resize",d),C.addEventListener("scroll",d),d(),()=>{C.removeEventListener("resize",d),C.removeEventListener("scroll",d)}},[d]);const g=r?{height:`${r}px`}:{height:"100dvh"};return F.jsxs("div",{className:"flex flex-col bg-bg-primary overflow-hidden text-text-primary font-sans selection:bg-accent-blue/30",style:g,children:[F.jsx(xm,{}),F.jsx(Rm,{}),F.jsx("div",{ref:t,className:"flex-1 min-h-0 relative bg-bg-primary overflow-hidden",children:e}),F.jsx(gm,{}),F.jsx(Dm,{})]})};var yf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(globalThis,()=>(()=>{var r={4567:function(C,i,o){var f=this&&this.__decorate||function(c,l,m,L){var v,x=arguments.length,y=x<3?l:L===null?L=Object.getOwnPropertyDescriptor(l,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(c,l,m,L);else for(var b=c.length-1;b>=0;b--)(v=c[b])&&(y=(x<3?v(y):x>3?v(l,m,y):v(l,m))||y);return x>3&&y&&Object.defineProperty(l,m,y),y},_=this&&this.__param||function(c,l){return function(m,L){l(m,L,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=o(9042),p=o(9924),w=o(844),S=o(4725),u=o(2585),n=o(3656);let a=i.AccessibilityManager=class extends w.Disposable{constructor(c,l,m,L){super(),this._terminal=c,this._coreBrowserService=m,this._renderService=L,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let v=0;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);if(this._topBoundaryFocusListener=v=>this._handleBoundaryFocus(v,0),this._bottomBoundaryFocusListener=v=>this._handleBoundaryFocus(v,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(v=>this._handleResize(v.rows))),this.register(this._terminal.onRender(v=>this._refreshRows(v.start,v.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(v=>this._handleChar(v))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(v=>this._handleTab(v))),this.register(this._terminal.onKey(v=>this._handleKey(v.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,n.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(c){for(let l=0;l<c;l++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(c){this._clearLiveRegion(),/\p{Control}/u.test(c)||this._charsToConsume.push(c)}_refreshRows(c,l){this._liveRegionDebouncer.refresh(c,l,this._terminal.rows)}_renderRows(c,l){const m=this._terminal.buffer,L=m.lines.length.toString();for(let v=c;v<=l;v++){const x=m.lines.get(m.ydisp+v),y=[],b=x?.translateToString(!0,void 0,void 0,y)||"",E=(m.ydisp+v+1).toString(),R=this._rowElements[v];R&&(b.length===0?(R.innerText="",this._rowColumns.set(R,[0,1])):(R.textContent=b,this._rowColumns.set(R,y)),R.setAttribute("aria-posinset",E),R.setAttribute("aria-setsize",L))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(c,l){const m=c.target,L=this._rowElements[l===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(l===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==L)return;let v,x;if(l===0?(v=m,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(v=this._rowElements.shift(),x=m,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),l===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(l===0?-1:1),this._rowElements[l===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const c=document.getSelection();if(!c)return;if(c.isCollapsed)return void(this._rowContainer.contains(c.anchorNode)&&this._terminal.clearSelection());if(!c.anchorNode||!c.focusNode)return void console.error("anchorNode and/or focusNode are null");let l={node:c.anchorNode,offset:c.anchorOffset},m={node:c.focusNode,offset:c.focusOffset};if((l.node.compareDocumentPosition(m.node)&Node.DOCUMENT_POSITION_PRECEDING||l.node===m.node&&l.offset>m.offset)&&([l,m]=[m,l]),l.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(l={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(l.node))return;const L=this._rowElements.slice(-1)[0];if(m.node.compareDocumentPosition(L)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(m={node:L,offset:L.textContent?.length??0}),!this._rowContainer.contains(m.node))return;const v=({node:b,offset:E})=>{const R=b instanceof Text?b.parentNode:b;let k=parseInt(R?.getAttribute("aria-posinset"),10)-1;if(isNaN(k))return console.warn("row is invalid. Race condition?"),null;const D=this._rowColumns.get(R);if(!D)return console.warn("columns is null. Race condition?"),null;let T=E<D.length?D[E]:D.slice(-1)[0]+1;return T>=this._terminal.cols&&(++k,T=0),{row:k,column:T}},x=v(l),y=v(m);if(x&&y){if(x.row>y.row||x.row===y.row&&x.column>=y.column)throw new Error("invalid range");this._terminal.select(x.column,x.row,(y.row-x.row)*this._terminal.cols-x.column+y.column)}}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let l=this._rowContainer.children.length;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const c=this._coreBrowserService.mainDocument.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=a=f([_(1,u.IInstantiationService),_(2,S.ICoreBrowserService),_(3,S.IRenderService)],a)},3614:(C,i)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function f(p,w){return w?"\x1B[200~"+p+"\x1B[201~":p}function _(p,w,S,u){p=f(p=o(p),S.decPrivateModes.bracketedPasteMode&&u.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(p,!0),w.value=""}function h(p,w,S){const u=S.getBoundingClientRect(),n=p.clientX-u.left-10,a=p.clientY-u.top-10;w.style.width="20px",w.style.height="20px",w.style.left=`${n}px`,w.style.top=`${a}px`,w.style.zIndex="1000",w.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=f,i.copyHandler=function(p,w){p.clipboardData&&p.clipboardData.setData("text/plain",w.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,w,S,u){p.stopPropagation(),p.clipboardData&&_(p.clipboardData.getData("text/plain"),w,S,u)},i.paste=_,i.moveTextAreaUnderMouseCursor=h,i.rightClickHandler=function(p,w,S,u,n){h(p,w,S),n&&u.rightClickSelect(p),w.value=u.selectionText,w.select()}},7239:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=o(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(_,h,p){this._css.set(_,h,p)}getCss(_,h){return this._css.get(_,h)}setColor(_,h,p){this._color.set(_,h,p)}getColor(_,h){return this._color.get(_,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,h){o.addEventListener(f,_,h);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,h))}}}},3551:function(C,i,o){var f=this&&this.__decorate||function(a,c,l,m){var L,v=arguments.length,x=v<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,l):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,c,l,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(v<3?L(x):v>3?L(c,l,x):L(c,l))||x);return v>3&&x&&Object.defineProperty(c,l,x),x},_=this&&this.__param||function(a,c){return function(l,m){c(l,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const h=o(3656),p=o(8460),w=o(844),S=o(2585),u=o(4725);let n=i.Linkifier=class extends w.Disposable{get currentLink(){return this._currentLink}constructor(a,c,l,m,L){super(),this._element=a,this._mouseService=c,this._renderService=l,this._bufferService=m,this._linkProviderService=L,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,w.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,w.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){this._lastMouseEvent=a;const c=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!c)return;this._isMouseOut=!1;const l=a.composedPath();for(let m=0;m<l.length;m++){const L=l[m];if(L.classList.contains("xterm"))break;if(L.classList.contains("xterm-hover"))return}this._lastBufferCell&&c.x===this._lastBufferCell.x&&c.y===this._lastBufferCell.y||(this._handleHover(c),this._lastBufferCell=c)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,c){this._activeProviderReplies&&c||(this._activeProviderReplies?.forEach(m=>{m?.forEach(L=>{L.link.dispose&&L.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let l=!1;for(const[m,L]of this._linkProviderService.linkProviders.entries())c?this._activeProviderReplies?.get(m)&&(l=this._checkLinkProviderResult(m,a,l)):L.provideLinks(a.y,v=>{if(this._isMouseOut)return;const x=v?.map(y=>({link:y}));this._activeProviderReplies?.set(m,x),l=this._checkLinkProviderResult(m,a,l),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,c){const l=new Set;for(let m=0;m<c.size;m++){const L=c.get(m);if(L)for(let v=0;v<L.length;v++){const x=L[v],y=x.link.range.start.y<a?0:x.link.range.start.x,b=x.link.range.end.y>a?this._bufferService.cols:x.link.range.end.x;for(let E=y;E<=b;E++){if(l.has(E)){L.splice(v--,1);break}l.add(E)}}}}_checkLinkProviderResult(a,c,l){if(!this._activeProviderReplies)return l;const m=this._activeProviderReplies.get(a);let L=!1;for(let v=0;v<a;v++)this._activeProviderReplies.has(v)&&!this._activeProviderReplies.get(v)||(L=!0);if(!L&&m){const v=m.find(x=>this._linkAtPosition(x.link,c));v&&(l=!0,this._handleNewLink(v))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!l)for(let v=0;v<this._activeProviderReplies.size;v++){const x=this._activeProviderReplies.get(v)?.find(y=>this._linkAtPosition(y.link,c));if(x){l=!0,this._handleNewLink(x);break}}return l}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._currentLink)return;const c=this._positionFromMouseEvent(a,this._element,this._mouseService);c&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,c)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,c){this._currentLink&&this._lastMouseEvent&&(!a||!c||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=c)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,w.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._lastMouseEvent)return;const c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._linkAtPosition(a.link,c)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:l=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==l&&(this._currentLink.state.decorations.pointerCursor=l,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",l))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:l=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==l&&(this._currentLink.state.decorations.underline=l,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,l))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(l=>{if(!this._currentLink)return;const m=l.start===0?0:l.start+1+this._bufferService.buffer.ydisp,L=this._bufferService.buffer.ydisp+1+l.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=L&&(this._clearCurrentLink(m,L),this._lastMouseEvent)){const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._askForLink(v,!1)}})))}_linkHover(a,c,l){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(c,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),c.hover&&c.hover(l,c.text)}_fireUnderlineEvent(a,c){const l=a.range,m=this._bufferService.buffer.ydisp,L=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-m-1,l.end.x,l.end.y-m-1,void 0);(c?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(L)}_linkLeave(a,c,l){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(c,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),c.leave&&c.leave(l,c.text)}_linkAtPosition(a,c){const l=a.range.start.y*this._bufferService.cols+a.range.start.x,m=a.range.end.y*this._bufferService.cols+a.range.end.x,L=c.y*this._bufferService.cols+c.x;return l<=L&&L<=m}_positionFromMouseEvent(a,c,l){const m=l.getCoords(a,c,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,c,l,m,L){return{x1:a,y1:c,x2:l,y2:m,cols:this._bufferService.cols,fg:L}}};i.Linkifier=n=f([_(1,u.IMouseService),_(2,u.IRenderService),_(3,S.IBufferService),_(4,u.ILinkProviderService)],n)},9042:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(C,i,o){var f=this&&this.__decorate||function(u,n,a,c){var l,m=arguments.length,L=m<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,n,a,c);else for(var v=u.length-1;v>=0;v--)(l=u[v])&&(L=(m<3?l(L):m>3?l(n,a,L):l(n,a))||L);return m>3&&L&&Object.defineProperty(n,a,L),L},_=this&&this.__param||function(u,n){return function(a,c){n(a,c,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const h=o(511),p=o(2585);let w=i.OscLinkProvider=class{constructor(u,n,a){this._bufferService=u,this._optionsService=n,this._oscLinkService=a}provideLinks(u,n){const a=this._bufferService.buffer.lines.get(u-1);if(!a)return void n(void 0);const c=[],l=this._optionsService.rawOptions.linkHandler,m=new h.CellData,L=a.getTrimmedLength();let v=-1,x=-1,y=!1;for(let b=0;b<L;b++)if(x!==-1||a.hasContent(b)){if(a.loadCell(b,m),m.hasExtendedAttrs()&&m.extended.urlId){if(x===-1){x=b,v=m.extended.urlId;continue}y=m.extended.urlId!==v}else x!==-1&&(y=!0);if(y||x!==-1&&b===L-1){const E=this._oscLinkService.getLinkData(v)?.uri;if(E){const R={start:{x:x+1,y:u},end:{x:b+(y||b!==L-1?0:1),y:u}};let k=!1;if(!l?.allowNonHttpProtocols)try{const D=new URL(E);["http:","https:"].includes(D.protocol)||(k=!0)}catch{k=!0}k||c.push({text:E,range:R,activate:(D,T)=>l?l.activate(D,T,R):S(0,T),hover:(D,T)=>l?.hover?.(D,T,R),leave:(D,T)=>l?.leave?.(D,T,R)})}y=!1,m.hasExtendedAttrs()&&m.extended.urlId?(x=b,v=m.extended.urlId):(x=-1,v=-1)}}n(c)}};function S(u,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=w=f([_(0,p.IBufferService),_(1,p.IOptionsService),_(2,p.IOscLinkService)],w)},6193:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=o(3614),_=o(3656),h=o(3551),p=o(9042),w=o(3730),S=o(1680),u=o(3107),n=o(5744),a=o(2950),c=o(1296),l=o(428),m=o(4269),L=o(5114),v=o(8934),x=o(3230),y=o(9312),b=o(4725),E=o(6731),R=o(8055),k=o(8969),D=o(8460),T=o(844),j=o(6114),N=o(8437),I=o(2584),B=o(7399),M=o(5941),A=o(9074),P=o(2585),H=o(5435),W=o(4567),z=o(779);class J extends k.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor($={}){super($),this.browser=j,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new T.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(z.LinkProviderService),this._instantiationService.setService(b.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(w.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((O,U)=>this.refresh(O,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(O=>this._reportWindowsOptions(O))),this.register(this._inputHandler.onColor(O=>this._handleColorEvent(O))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(O=>this._afterResize(O.cols,O.rows))),this.register((0,T.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent($){if(this._themeService)for(const O of $){let U,K="";switch(O.index){case 256:U="foreground",K="10";break;case 257:U="background",K="11";break;case 258:U="cursor",K="12";break;default:U="ansi",K="4;"+O.index}switch(O.type){case 0:const Q=R.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[O.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${I.C0.ESC}]${K};${(0,M.toRgbString)(Q)}${I.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(Z=>Z.ansi[O.index]=R.channels.toColor(...O.color));else{const Z=U;this._themeService.modifyColors(he=>he[Z]=R.channels.toColor(...O.color))}break;case 2:this._themeService.restoreColor(O.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange($){$?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus($){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(I.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(I.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const $=this.buffer.ybase+this.buffer.y,O=this.buffer.lines.get($);if(!O)return;const U=Math.min(this.buffer.x,this.cols-1),K=this._renderService.dimensions.css.cell.height,Q=O.getWidth(U),Z=this._renderService.dimensions.css.cell.width*Q,he=this.buffer.y*this._renderService.dimensions.css.cell.height,ee=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ee+"px",this.textarea.style.top=he+"px",this.textarea.style.width=Z+"px",this.textarea.style.height=K+"px",this.textarea.style.lineHeight=K+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",O=>{this.hasSelection()&&(0,f.copyHandler)(O,this._selectionService)}));const $=O=>(0,f.handlePasteEvent)(O,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",$)),this.register((0,_.addDisposableDomListener)(this.element,"paste",$)),j.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",O=>{O.button===2&&(0,f.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",O=>{(0,f.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),j.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",O=>{O.button===1&&(0,f.moveTextAreaUnderMouseCursor)(O,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",$=>this._keyUp($),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",$=>this._keyDown($),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",$=>this._keyPress($),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",$=>this._compositionHelper.compositionupdate($))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",$=>this._inputEvent($),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open($){if(!$)throw new Error("Terminal requires a parent element.");if($.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=$.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),$.appendChild(this.element);const O=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),O.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,_.addDisposableDomListener)(this.screenElement,"mousemove",U=>this.updateCursorStyle(U))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),O.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),j.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(L.CoreBrowserService,this.textarea,$.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(l.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(v.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(O);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(u.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(c.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const $=this,O=this.element;function U(Z){const he=$._mouseService.getMouseReportCoords(Z,$.screenElement);if(!he)return!1;let ee,ue;switch(Z.overrideType||Z.type){case"mousemove":ue=32,Z.buttons===void 0?(ee=3,Z.button!==void 0&&(ee=Z.button<3?Z.button:3)):ee=1&Z.buttons?0:4&Z.buttons?1:2&Z.buttons?2:3;break;case"mouseup":ue=0,ee=Z.button<3?Z.button:3;break;case"mousedown":ue=1,ee=Z.button<3?Z.button:3;break;case"wheel":if($._customWheelEventHandler&&$._customWheelEventHandler(Z)===!1||$.viewport.getLinesScrolled(Z)===0)return!1;ue=Z.deltaY<0?0:1,ee=4;break;default:return!1}return!(ue===void 0||ee===void 0||ee>4)&&$.coreMouseService.triggerMouseEvent({col:he.col,row:he.row,x:he.x,y:he.y,button:ee,action:ue,ctrl:Z.ctrlKey,alt:Z.altKey,shift:Z.shiftKey})}const K={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:Z=>(U(Z),Z.buttons||(this._document.removeEventListener("mouseup",K.mouseup),K.mousedrag&&this._document.removeEventListener("mousemove",K.mousedrag)),this.cancel(Z)),wheel:Z=>(U(Z),this.cancel(Z,!0)),mousedrag:Z=>{Z.buttons&&U(Z)},mousemove:Z=>{Z.buttons||U(Z)}};this.register(this.coreMouseService.onProtocolChange(Z=>{Z?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Z)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Z?K.mousemove||(O.addEventListener("mousemove",Q.mousemove),K.mousemove=Q.mousemove):(O.removeEventListener("mousemove",K.mousemove),K.mousemove=null),16&Z?K.wheel||(O.addEventListener("wheel",Q.wheel,{passive:!1}),K.wheel=Q.wheel):(O.removeEventListener("wheel",K.wheel),K.wheel=null),2&Z?K.mouseup||(K.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",K.mouseup),K.mouseup=null),4&Z?K.mousedrag||(K.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",K.mousedrag),K.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(O,"mousedown",Z=>{if(Z.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Z))return U(Z),K.mouseup&&this._document.addEventListener("mouseup",K.mouseup),K.mousedrag&&this._document.addEventListener("mousemove",K.mousedrag),this.cancel(Z)})),this.register((0,_.addDisposableDomListener)(O,"wheel",Z=>{if(!K.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Z)===!1)return!1;if(!this.buffer.hasScrollback){const he=this.viewport.getLinesScrolled(Z);if(he===0)return;const ee=I.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Z.deltaY<0?"A":"B");let ue="";for(let pe=0;pe<Math.abs(he);pe++)ue+=ee;return this.coreService.triggerDataEvent(ue,!0),this.cancel(Z,!0)}return this.viewport.handleWheel(Z)?this.cancel(Z):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(O,"touchstart",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Z),this.cancel(Z)},{passive:!0})),this.register((0,_.addDisposableDomListener)(O,"touchmove",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Z)?void 0:this.cancel(Z)},{passive:!1}))}refresh($,O){this._renderService?.refreshRows($,O)}updateCursorStyle($){this._selectionService?.shouldColumnSelect($)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines($,O,U=0){U===1?(super.scrollLines($,O,U),this.refresh(0,this.rows-1)):this.viewport?.scrollLines($)}paste($){(0,f.paste)($,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler($){this._customKeyEventHandler=$}attachCustomWheelEventHandler($){this._customWheelEventHandler=$}registerLinkProvider($){return this._linkProviderService.registerLinkProvider($)}registerCharacterJoiner($){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const O=this._characterJoinerService.register($);return this.refresh(0,this.rows-1),O}deregisterCharacterJoiner($){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister($)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker($){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+$)}registerDecoration($){return this._decorationService.registerDecoration($)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select($,O,U){this._selectionService.setSelection($,O,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines($,O){this._selectionService?.selectLines($,O)}_keyDown($){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler($)===!1)return!1;const O=this.browser.isMac&&this.options.macOptionIsMeta&&$.altKey;if(!O&&!this._compositionHelper.keydown($))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;O||$.key!=="Dead"&&$.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const U=(0,B.evaluateKeyboardEvent)($,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle($),U.type===3||U.type===2){const K=this.rows-1;return this.scrollLines(U.type===2?-K:K),this.cancel($,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,$)||(U.cancel&&this.cancel($,!0),!U.key||!!($.key&&!$.ctrlKey&&!$.altKey&&!$.metaKey&&$.key.length===1&&$.key.charCodeAt(0)>=65&&$.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==I.C0.ETX&&U.key!==I.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:$}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||$.altKey||$.ctrlKey?this.cancel($,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift($,O){const U=$.isMac&&!this.options.macOptionIsMeta&&O.altKey&&!O.ctrlKey&&!O.metaKey||$.isWindows&&O.altKey&&O.ctrlKey&&!O.metaKey||$.isWindows&&O.getModifierState("AltGraph");return O.type==="keypress"?U:U&&(!O.keyCode||O.keyCode>47)}_keyUp($){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler($)===!1||(function(O){return O.keyCode===16||O.keyCode===17||O.keyCode===18}($)||this.focus(),this.updateCursorStyle($),this._keyPressHandled=!1)}_keyPress($){let O;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler($)===!1)return!1;if(this.cancel($),$.charCode)O=$.charCode;else if($.which===null||$.which===void 0)O=$.keyCode;else{if($.which===0||$.charCode===0)return!1;O=$.which}return!(!O||($.altKey||$.ctrlKey||$.metaKey)&&!this._isThirdLevelShift(this.browser,$)||(O=String.fromCharCode(O),this._onKey.fire({key:O,domEvent:$}),this._showCursor(),this.coreService.triggerDataEvent(O,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent($){if($.data&&$.inputType==="insertText"&&(!$.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const O=$.data;return this.coreService.triggerDataEvent(O,!0),this.cancel($),!0}return!1}resize($,O){$!==this.cols||O!==this.rows?super.resize($,O):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize($,O){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let $=1;$<this.rows;$++)this.buffer.lines.push(this.buffer.getBlankLine(N.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const $=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=$,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(I.C0.ESC+"[I"):this.coreService.triggerDataEvent(I.C0.ESC+"[O")}_reportWindowsOptions($){if(this._renderService)switch($){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const O=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${I.C0.ESC}[4;${U};${O}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const K=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${I.C0.ESC}[6;${Q};${K}t`)}}cancel($,O){if(this.options.cancelEvents||O)return $.preventDefault(),$.stopPropagation(),!1}}i.Terminal=J},9924:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,f=1e3){this._renderCallback=o,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,f,_){this._rowCount=_,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=h-this._lastRefreshMs,w=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},w)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f)}}},1680:function(C,i,o){var f=this&&this.__decorate||function(a,c,l,m){var L,v=arguments.length,x=v<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,l):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,c,l,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(v<3?L(x):v>3?L(c,l,x):L(c,l))||x);return v>3&&x&&Object.defineProperty(c,l,x),x},_=this&&this.__param||function(a,c){return function(l,m){c(l,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const h=o(3656),p=o(4725),w=o(8460),S=o(844),u=o(2585);let n=i.Viewport=class extends S.Disposable{constructor(a,c,l,m,L,v,x,y){super(),this._viewportElement=a,this._scrollArea=c,this._bufferService=l,this._optionsService=m,this._charSizeService=L,this._renderService=v,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const c=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==c&&(this._lastRecordedBufferHeight=c,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const c=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,c){const l=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(c<0&&this._viewportElement.scrollTop!==0||c>0&&l<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const c=this._getPixelsScrolled(a);return c!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+c:this._smoothScrollState.target+=c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=c,this._bubbleScroll(a,c))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const c=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let c=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?c*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._currentRowHeight*this._bufferService.rows),c}getBufferElements(a,c){let l,m="";const L=[],v=c??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let y=a;y<v;y++){const b=x.get(y);if(!b)continue;const E=x.get(y+1)?.isWrapped;if(m+=b.translateToString(!E),!E||y===x.length-1){const R=document.createElement("div");R.textContent=m,L.push(R),m.length>0&&(l=R),m=""}}return{bufferElements:L,cursorElement:l}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let c=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(c/=this._currentRowHeight+0,this._wheelPartialScroll+=c,c=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._bufferService.rows),c}_applyScrollModifier(a,c){const l=this._optionsService.rawOptions.fastScrollModifier;return l==="alt"&&c.altKey||l==="ctrl"&&c.ctrlKey||l==="shift"&&c.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const c=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,c!==0&&(this._viewportElement.scrollTop+=c,this._bubbleScroll(a,c))}};i.Viewport=n=f([_(2,u.IBufferService),_(3,u.IOptionsService),_(4,p.ICharSizeService),_(5,p.IRenderService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],n)},3107:function(C,i,o){var f=this&&this.__decorate||function(u,n,a,c){var l,m=arguments.length,L=m<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,n,a,c);else for(var v=u.length-1;v>=0;v--)(l=u[v])&&(L=(m<3?l(L):m>3?l(n,a,L):l(n,a))||L);return m>3&&L&&Object.defineProperty(n,a,L),L},_=this&&this.__param||function(u,n){return function(a,c){n(a,c,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const h=o(4725),p=o(844),w=o(2585);let S=i.BufferDecorationRenderer=class extends p.Disposable{constructor(u,n,a,c,l){super(),this._screenElement=u,this._bufferService=n,this._coreBrowserService=a,this._decorationService=c,this._renderService=l,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",u?.options?.layer==="top"),n.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const a=u.options.x??0;return a&&a>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(u,n),n}_refreshStyle(u){const n=u.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let a=this._decorationElements.get(u);a||(a=this._createElement(u),u.element=a,this._decorationElements.set(u,a),this._container.appendChild(a),u.onDispose(()=>{this._decorationElements.delete(u),a.remove()})),a.style.top=n*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(a)}}_refreshXPosition(u,n=u.element){if(!n)return;const a=u.options.x??0;(u.options.anchor||"left")==="right"?n.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){this._decorationElements.get(u)?.remove(),this._decorationElements.delete(u),u.dispose()}};i.BufferDecorationRenderer=S=f([_(1,w.IBufferService),_(2,h.ICoreBrowserService),_(3,w.IDecorationService),_(4,h.IRenderService)],S)},5871:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const f of this._zones)if(f.color===o.options.overviewRulerOptions.color&&f.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,o.marker.line))return;if(this._lineAdjacentToZone(f,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(f,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,f){return f>=o.startBufferLine&&f<=o.endBufferLine}_lineAdjacentToZone(o,f,_){return f>=o.startBufferLine-this._linePadding[_||"full"]&&f<=o.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(o,f){o.startBufferLine=Math.min(o.startBufferLine,f),o.endBufferLine=Math.max(o.endBufferLine,f)}}},5744:function(C,i,o){var f=this&&this.__decorate||function(l,m,L,v){var x,y=arguments.length,b=y<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,L):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,m,L,v);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(b=(y<3?x(b):y>3?x(m,L,b):x(m,L))||b);return y>3&&b&&Object.defineProperty(m,L,b),b},_=this&&this.__param||function(l,m){return function(L,v){m(L,v,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const h=o(5871),p=o(4725),w=o(844),S=o(2585),u={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let c=i.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(l,m,L,v,x,y,b){super(),this._viewportElement=l,this._screenElement=m,this._bufferService=L,this._decorationService=v,this._renderService=x,this._optionsService=y,this._coreBrowserService=b,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const E=this._canvas.getContext("2d");if(!E)throw new Error("Ctx cannot be null");this._ctx=E,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const l=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=l,n.center=m,n.right=l,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=n.left,a.right=n.left+n.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowserService.dpr);const l=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(l,12),6)*this._coreBrowserService.dpr);u.left=m,u.center=m,u.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const l=this._colorZoneStore.zones;for(const m of l)m.position!=="full"&&this._renderColorZone(m);for(const m of l)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(l){this._ctx.fillStyle=l.color,this._ctx.fillRect(a[l.position||"full"],Math.round((this._canvas.height-1)*(l.startBufferLine/this._bufferService.buffers.active.lines.length)-u[l.position||"full"]/2),n[l.position||"full"],Math.round((this._canvas.height-1)*((l.endBufferLine-l.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[l.position||"full"]))}_queueRefresh(l,m){this._shouldUpdateDimensions=l||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=c=f([_(2,S.IBufferService),_(3,S.IDecorationService),_(4,p.IRenderService),_(5,S.IOptionsService),_(6,p.ICoreBrowserService)],c)},2950:function(C,i,o){var f=this&&this.__decorate||function(u,n,a,c){var l,m=arguments.length,L=m<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(u,n,a,c);else for(var v=u.length-1;v>=0;v--)(l=u[v])&&(L=(m<3?l(L):m>3?l(n,a,L):l(n,a))||L);return m>3&&L&&Object.defineProperty(n,a,L),L},_=this&&this.__param||function(u,n){return function(a,c){n(a,c,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const h=o(4725),p=o(2585),w=o(2584);let S=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(u,n,a,c,l,m){this._textarea=u,this._compositionView=n,this._bufferService=a,this._optionsService=c,this._coreService=l,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(u){this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(u){if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const u=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,a=n.replace(u,"");this._dataAlreadySent=a,n.length>u.length?this._coreService.triggerDataEvent(a,!0):n.length<u.length?this._coreService.triggerDataEvent(`${w.C0.DEL}`,!0):n.length===u.length&&n!==u&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(u){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,c=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,l=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=l+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=l+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}u||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=S=f([_(2,p.IBufferService),_(3,p.IOptionsService),_(4,p.ICoreService),_(5,h.IRenderService)],S)},9806:(C,i)=>{function o(f,_,h){const p=h.getBoundingClientRect(),w=f.getComputedStyle(h),S=parseInt(w.getPropertyValue("padding-left")),u=parseInt(w.getPropertyValue("padding-top"));return[_.clientX-p.left-S,_.clientY-p.top-u]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(f,_,h,p,w,S,u,n,a){if(!S)return;const c=o(f,_,h);return c?(c[0]=Math.ceil((c[0]+(a?u/2:0))/u),c[1]=Math.ceil(c[1]/n),c[0]=Math.min(Math.max(c[0],1),p+(a?1:0)),c[1]=Math.min(Math.max(c[1],1),w),c):void 0}},9504:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=o(2584);function _(n,a,c,l){const m=n-h(n,c),L=a-h(a,c),v=Math.abs(m-L)-function(x,y,b){let E=0;const R=x-h(x,b),k=y-h(y,b);for(let D=0;D<Math.abs(R-k);D++){const T=p(x,y)==="A"?-1:1;b.buffer.lines.get(R+T*D)?.isWrapped&&E++}return E}(n,a,c);return u(v,S(p(n,a),l))}function h(n,a){let c=0,l=a.buffer.lines.get(n),m=l?.isWrapped;for(;m&&n>=0&&n<a.rows;)c++,l=a.buffer.lines.get(--n),m=l?.isWrapped;return c}function p(n,a){return n>a?"A":"B"}function w(n,a,c,l,m,L){let v=n,x=a,y="";for(;v!==c||x!==l;)v+=m?1:-1,m&&v>L.cols-1?(y+=L.buffer.translateBufferLineToString(x,!1,n,v),v=0,n=0,x++):!m&&v<0&&(y+=L.buffer.translateBufferLineToString(x,!1,0,n+1),v=L.cols-1,n=v,x--);return y+L.buffer.translateBufferLineToString(x,!1,n,v)}function S(n,a){const c=a?"O":"[";return f.C0.ESC+c+n}function u(n,a){n=Math.floor(n);let c="";for(let l=0;l<n;l++)c+=a;return c}i.moveToCellSequence=function(n,a,c,l){const m=c.buffer.x,L=c.buffer.y;if(!c.buffer.hasScrollback)return function(y,b,E,R,k,D){return _(b,R,k,D).length===0?"":u(w(y,b,y,b-h(b,k),!1,k).length,S("D",D))}(m,L,0,a,c,l)+_(L,a,c,l)+function(y,b,E,R,k,D){let T;T=_(b,R,k,D).length>0?R-h(R,k):b;const j=R,N=function(I,B,M,A,P,H){let W;return W=_(M,A,P,H).length>0?A-h(A,P):B,I<M&&W<=A||I>=M&&W<A?"C":"D"}(y,b,E,R,k,D);return u(w(y,T,E,j,N==="C",k).length,S(N,D))}(m,L,n,a,c,l);let v;if(L===a)return v=m>n?"D":"C",u(Math.abs(m-n),S(v,l));v=L>a?"D":"C";const x=Math.abs(L-a);return u(function(y,b){return b.cols-y}(L>a?n:m,c)+(x-1)*c.cols+1+((L>a?m:n)-1),S(v,l))}},1296:function(C,i,o){var f=this&&this.__decorate||function(D,T,j,N){var I,B=arguments.length,M=B<3?T:N===null?N=Object.getOwnPropertyDescriptor(T,j):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,T,j,N);else for(var A=D.length-1;A>=0;A--)(I=D[A])&&(M=(B<3?I(M):B>3?I(T,j,M):I(T,j))||M);return B>3&&M&&Object.defineProperty(T,j,M),M},_=this&&this.__param||function(D,T){return function(j,N){T(j,N,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const h=o(3787),p=o(2550),w=o(2223),S=o(6171),u=o(6052),n=o(4725),a=o(8055),c=o(8460),l=o(844),m=o(2585),L="xterm-dom-renderer-owner-",v="xterm-rows",x="xterm-fg-",y="xterm-bg-",b="xterm-focus",E="xterm-selection";let R=1,k=i.DomRenderer=class extends l.Disposable{constructor(D,T,j,N,I,B,M,A,P,H,W,z,J){super(),this._terminal=D,this._document=T,this._element=j,this._screenElement=N,this._viewportElement=I,this._helperContainer=B,this._linkifier2=M,this._charSizeService=P,this._optionsService=H,this._bufferService=W,this._coreBrowserService=z,this._themeService=J,this._terminalClass=R++,this._rowElements=[],this._selectionRenderModel=(0,u.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new c.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(v),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Y=>this._injectCss(Y))),this._injectCss(this._themeService.colors),this._rowFactory=A.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(L+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Y=>this._handleLinkHover(Y))),this.register(this._linkifier2.onHideLinkUnderline(Y=>this._handleLinkLeave(Y))),this.register((0,l.toDisposable)(()=>{this._element.classList.remove(L+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const j of this._rowElements)j.style.width=`${this.dimensions.css.canvas.width}px`,j.style.height=`${this.dimensions.css.cell.height}px`,j.style.lineHeight=`${this.dimensions.css.cell.height}px`,j.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${v} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${v} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${v} .xterm-dim { color: ${a.color.multiplyOpacity(D.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const j=`blink_underline_${this._terminalClass}`,N=`blink_bar_${this._terminalClass}`,I=`blink_block_${this._terminalClass}`;T+=`@keyframes ${j} { 50% {  border-bottom-style: hidden; }}`,T+=`@keyframes ${N} { 50% {  box-shadow: none; }}`,T+=`@keyframes ${I} { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,T+=`${this._terminalSelector} .${v}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${j} 1s step-end infinite;}${this._terminalSelector} .${v}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${N} 1s step-end infinite;}${this._terminalSelector} .${v}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${I} 1s step-end infinite;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${D.cursor.css} !important; color: ${D.cursorAccent.css} !important;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${v} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[B,M]of D.ansi.entries())T+=`${this._terminalSelector} .${x}${B} { color: ${M.css}; }${this._terminalSelector} .${x}${B}.xterm-dim { color: ${a.color.multiplyOpacity(M,.5).css}; }${this._terminalSelector} .${y}${B} { background-color: ${M.css}; }`;T+=`${this._terminalSelector} .${x}${w.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(D.background).css}; }${this._terminalSelector} .${x}${w.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${y}${w.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,T){for(let j=this._rowElements.length;j<=T;j++){const N=this._document.createElement("div");this._rowContainer.appendChild(N),this._rowElements.push(N)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,T){this._refreshRowElements(D,T),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,T,j){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,T,j),this.renderRows(0,this._bufferService.rows-1),!D||!T)return;this._selectionRenderModel.update(this._terminal,D,T,j);const N=this._selectionRenderModel.viewportStartRow,I=this._selectionRenderModel.viewportEndRow,B=this._selectionRenderModel.viewportCappedStartRow,M=this._selectionRenderModel.viewportCappedEndRow;if(B>=this._bufferService.rows||M<0)return;const A=this._document.createDocumentFragment();if(j){const P=D[0]>T[0];A.appendChild(this._createSelectionElement(B,P?T[0]:D[0],P?D[0]:T[0],M-B+1))}else{const P=N===B?D[0]:0,H=B===I?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(B,P,H));const W=M-B-1;if(A.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,W)),B!==M){const z=I===M?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(M,0,z))}}this._selectionContainer.appendChild(A)}_createSelectionElement(D,T,j,N=1){const I=this._document.createElement("div"),B=T*this.dimensions.css.cell.width;let M=this.dimensions.css.cell.width*(j-T);return B+M>this.dimensions.css.canvas.width&&(M=this.dimensions.css.canvas.width-B),I.style.height=N*this.dimensions.css.cell.height+"px",I.style.top=D*this.dimensions.css.cell.height+"px",I.style.left=`${B}px`,I.style.width=`${M}px`,I}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,T){const j=this._bufferService.buffer,N=j.ybase+j.y,I=Math.min(j.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=D;P<=T;P++){const H=P+j.ydisp,W=this._rowElements[P],z=j.lines.get(H);if(!W||!z)break;W.replaceChildren(...this._rowFactory.createRow(z,H,H===N,M,A,I,B,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${L}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,T,j,N,I,B){j<0&&(D=0),N<0&&(T=0);const M=this._bufferService.rows-1;j=Math.max(Math.min(j,M),0),N=Math.max(Math.min(N,M),0),I=Math.min(I,this._bufferService.cols);const A=this._bufferService.buffer,P=A.ybase+A.y,H=Math.min(A.x,I-1),W=this._optionsService.rawOptions.cursorBlink,z=this._optionsService.rawOptions.cursorStyle,J=this._optionsService.rawOptions.cursorInactiveStyle;for(let Y=j;Y<=N;++Y){const $=Y+A.ydisp,O=this._rowElements[Y],U=A.lines.get($);if(!O||!U)break;O.replaceChildren(...this._rowFactory.createRow(U,$,$===P,z,J,H,W,this.dimensions.css.cell.width,this._widthCache,B?Y===j?D:0:-1,B?(Y===N?T:I)-1:-1))}}};i.DomRenderer=k=f([_(7,m.IInstantiationService),_(8,n.ICharSizeService),_(9,m.IOptionsService),_(10,m.IBufferService),_(11,n.ICoreBrowserService),_(12,n.IThemeService)],k)},3787:function(C,i,o){var f=this&&this.__decorate||function(v,x,y,b){var E,R=arguments.length,k=R<3?x:b===null?b=Object.getOwnPropertyDescriptor(x,y):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(v,x,y,b);else for(var D=v.length-1;D>=0;D--)(E=v[D])&&(k=(R<3?E(k):R>3?E(x,y,k):E(x,y))||k);return R>3&&k&&Object.defineProperty(x,y,k),k},_=this&&this.__param||function(v,x){return function(y,b){x(y,b,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const h=o(2223),p=o(643),w=o(511),S=o(2585),u=o(8055),n=o(4725),a=o(4269),c=o(6171),l=o(3734);let m=i.DomRendererRowFactory=class{constructor(v,x,y,b,E,R,k){this._document=v,this._characterJoinerService=x,this._optionsService=y,this._coreBrowserService=b,this._coreService=E,this._decorationService=R,this._themeService=k,this._workCell=new w.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(v,x,y){this._selectionStart=v,this._selectionEnd=x,this._columnSelectMode=y}createRow(v,x,y,b,E,R,k,D,T,j,N){const I=[],B=this._characterJoinerService.getJoinedCharacters(x),M=this._themeService.colors;let A,P=v.getNoBgTrimmedLength();y&&P<R+1&&(P=R+1);let H=0,W="",z=0,J=0,Y=0,$=!1,O=0,U=!1,K=0;const Q=[],Z=j!==-1&&N!==-1;for(let he=0;he<P;he++){v.loadCell(he,this._workCell);let ee=this._workCell.getWidth();if(ee===0)continue;let ue=!1,pe=he,oe=this._workCell;if(B.length>0&&he===B[0][0]){ue=!0;const le=B.shift();oe=new a.JoinedCellData(this._workCell,v.translateToString(!0,le[0],le[1]),le[1]-le[0]),pe=le[1]-1,ee=oe.getWidth()}const He=this._isCellInSelection(he,x),gt=y&&he===R,ne=Z&&he>=j&&he<=N;let te=!1;this._decorationService.forEachDecorationAtCell(he,x,void 0,le=>{te=!0});let re=oe.getChars()||p.WHITESPACE_CELL_CHAR;if(re===" "&&(oe.isUnderline()||oe.isOverline())&&(re=""),K=ee*D-T.get(re,oe.isBold(),oe.isItalic()),A){if(H&&(He&&U||!He&&!U&&oe.bg===z)&&(He&&U&&M.selectionForeground||oe.fg===J)&&oe.extended.ext===Y&&ne===$&&K===O&&!gt&&!ue&&!te){oe.isInvisible()?W+=p.WHITESPACE_CELL_CHAR:W+=re,H++;continue}H&&(A.textContent=W),A=this._document.createElement("span"),H=0,W=""}else A=this._document.createElement("span");if(z=oe.bg,J=oe.fg,Y=oe.extended.ext,$=ne,O=K,U=He,ue&&R>=he&&R<=pe&&(R=he),!this._coreService.isCursorHidden&&gt&&this._coreService.isCursorInitialized){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)k&&Q.push("xterm-cursor-blink"),Q.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline")}}if(oe.isBold()&&Q.push("xterm-bold"),oe.isItalic()&&Q.push("xterm-italic"),oe.isDim()&&Q.push("xterm-dim"),W=oe.isInvisible()?p.WHITESPACE_CELL_CHAR:oe.getChars()||p.WHITESPACE_CELL_CHAR,oe.isUnderline()&&(Q.push(`xterm-underline-${oe.extended.underlineStyle}`),W===" "&&(W=""),!oe.isUnderlineColorDefault()))if(oe.isUnderlineColorRGB())A.style.textDecorationColor=`rgb(${l.AttributeData.toColorRGB(oe.getUnderlineColor()).join(",")})`;else{let le=oe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&oe.isBold()&&le<8&&(le+=8),A.style.textDecorationColor=M.ansi[le].css}oe.isOverline()&&(Q.push("xterm-overline"),W===" "&&(W="")),oe.isStrikethrough()&&Q.push("xterm-strikethrough"),ne&&(A.style.textDecoration="underline");let q=oe.getFgColor(),G=oe.getFgColorMode(),ae=oe.getBgColor(),ie=oe.getBgColorMode();const ge=!!oe.isInverse();if(ge){const le=q;q=ae,ae=le;const et=G;G=ie,ie=et}let ye,Se,fe,ce=!1;switch(this._decorationService.forEachDecorationAtCell(he,x,void 0,le=>{le.options.layer!=="top"&&ce||(le.backgroundColorRGB&&(ie=50331648,ae=le.backgroundColorRGB.rgba>>8&16777215,ye=le.backgroundColorRGB),le.foregroundColorRGB&&(G=50331648,q=le.foregroundColorRGB.rgba>>8&16777215,Se=le.foregroundColorRGB),ce=le.options.layer==="top")}),!ce&&He&&(ye=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,ae=ye.rgba>>8&16777215,ie=50331648,ce=!0,M.selectionForeground&&(G=50331648,q=M.selectionForeground.rgba>>8&16777215,Se=M.selectionForeground)),ce&&Q.push("xterm-decoration-top"),ie){case 16777216:case 33554432:fe=M.ansi[ae],Q.push(`xterm-bg-${ae}`);break;case 50331648:fe=u.channels.toColor(ae>>16,ae>>8&255,255&ae),this._addStyle(A,`background-color:#${L((ae>>>0).toString(16),"0",6)}`);break;default:ge?(fe=M.foreground,Q.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):fe=M.background}switch(ye||oe.isDim()&&(ye=u.color.multiplyOpacity(fe,.5)),G){case 16777216:case 33554432:oe.isBold()&&q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(q+=8),this._applyMinimumContrast(A,fe,M.ansi[q],oe,ye,void 0)||Q.push(`xterm-fg-${q}`);break;case 50331648:const le=u.channels.toColor(q>>16&255,q>>8&255,255&q);this._applyMinimumContrast(A,fe,le,oe,ye,Se)||this._addStyle(A,`color:#${L(q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(A,fe,M.foreground,oe,ye,Se)||ge&&Q.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}Q.length&&(A.className=Q.join(" "),Q.length=0),gt||ue||te?A.textContent=W:H++,K!==this.defaultSpacing&&(A.style.letterSpacing=`${K}px`),I.push(A),he=pe}return A&&H&&(A.textContent=W),I}_applyMinimumContrast(v,x,y,b,E,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,c.treatGlyphAsBackgroundColor)(b.getCode()))return!1;const k=this._getContrastCache(b);let D;if(E||R||(D=k.getColor(x.rgba,y.rgba)),D===void 0){const T=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);D=u.color.ensureContrastRatio(E||x,R||y,T),k.setColor((E||x).rgba,(R||y).rgba,D??null)}return!!D&&(this._addStyle(v,`color:${D.css}`),!0)}_getContrastCache(v){return v.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(v,x){v.setAttribute("style",`${v.getAttribute("style")||""}${x};`)}_isCellInSelection(v,x){const y=this._selectionStart,b=this._selectionEnd;return!(!y||!b)&&(this._columnSelectMode?y[0]<=b[0]?v>=y[0]&&x>=y[1]&&v<b[0]&&x<=b[1]:v<y[0]&&x>=y[1]&&v>=b[0]&&x<=b[1]:x>y[1]&&x<b[1]||y[1]===b[1]&&x===y[1]&&v>=y[0]&&v<b[0]||y[1]<b[1]&&x===b[1]&&v<b[0]||y[1]<b[1]&&x===y[1]&&v>=y[0])}};function L(v,x,y){for(;v.length<y;)v=x+v;return v}i.DomRendererRowFactory=m=f([_(1,n.ICharacterJoinerService),_(2,S.IOptionsService),_(3,n.ICoreBrowserService),_(4,S.ICoreService),_(5,S.IDecorationService),_(6,n.IThemeService)],m)},2550:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=o.createElement("span");_.classList.add("xterm-char-measure-element");const h=o.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";const w=o.createElement("span");w.classList.add("xterm-char-measure-element"),w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[_,h,p,w],this._container.appendChild(_),this._container.appendChild(h),this._container.appendChild(p),this._container.appendChild(w),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,f,_,h){o===this._font&&f===this._fontSize&&_===this._weight&&h===this._weightBold||(this._font=o,this._fontSize=f,this._weight=_,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(o,f,_){let h=0;if(!f&&!_&&o.length===1&&(h=o.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const S=this._measure(o,0);return S>0&&(this._flat[h]=S),S}let p=o;f&&(p+="B"),_&&(p+="I");let w=this._holey.get(p);if(w===void 0){let S=0;f&&(S|=1),_&&(S|=2),w=this._measure(o,S),w>0&&this._holey.set(p,w)}return w}_measure(o,f){const _=this._measureElements[f];return _.textContent=o.repeat(32),_.offsetWidth/32}}},2223:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(C,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,h,p,w){return h===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(h){return 9472<=h&&h<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,h,p=0){return(_-(2*Math.round(h)-p))%(2*Math.round(h))}},6052:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,h,p,w=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const S=_.buffers.active.ydisp,u=h[1]-S,n=p[1]-S,a=Math.max(u,0),c=Math.min(n,_.rows-1);a>=_.rows||c<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=c,this.startCol=h[0],this.endCol=p[0])}isCellSelected(_,h,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,f=this.selectionEnd;return!(!o||!f)&&(o[1]>f[1]||o[1]===f[1]&&o[0]>f[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(C,i,o){var f=this&&this.__decorate||function(c,l,m,L){var v,x=arguments.length,y=x<3?l:L===null?L=Object.getOwnPropertyDescriptor(l,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(c,l,m,L);else for(var b=c.length-1;b>=0;b--)(v=c[b])&&(y=(x<3?v(y):x>3?v(l,m,y):v(l,m))||y);return x>3&&y&&Object.defineProperty(l,m,y),y},_=this&&this.__param||function(c,l){return function(m,L){l(m,L,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const h=o(2585),p=o(8460),w=o(844);let S=i.CharSizeService=class extends w.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,l,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new a(this._optionsService))}catch{this._measureStrategy=this.register(new n(c,l,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};i.CharSizeService=S=f([_(2,h.IOptionsService)],S);class u extends w.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(l,m){l!==void 0&&l>0&&m!==void 0&&m>0&&(this._result.width=l,this._result.height=m)}}class n extends u{constructor(l,m,L){super(),this._document=l,this._parentElement=m,this._optionsService=L,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class a extends u{constructor(l){super(),this._optionsService=l,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const m=this._ctx.measureText("W");if(!("width"in m&&"fontBoundingBoxAscent"in m&&"fontBoundingBoxDescent"in m))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const l=this._ctx.measureText("W");return this._validateAndSet(l.width,l.fontBoundingBoxAscent+l.fontBoundingBoxDescent),this._result}}},4269:function(C,i,o){var f=this&&this.__decorate||function(a,c,l,m){var L,v=arguments.length,x=v<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,l):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,c,l,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(v<3?L(x):v>3?L(c,l,x):L(c,l))||x);return v>3&&x&&Object.defineProperty(c,l,x),x},_=this&&this.__param||function(a,c){return function(l,m){c(l,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=o(3734),p=o(643),w=o(511),S=o(2585);class u extends h.AttributeData{constructor(c,l,m){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=l,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let n=i.CharacterJoinerService=class Cf{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(c){const l={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(l),l.id}deregister(c){for(let l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===c)return this._characterJoiners.splice(l,1),!0;return!1}getJoinedCharacters(c){if(this._characterJoiners.length===0)return[];const l=this._bufferService.buffer.lines.get(c);if(!l||l.length===0)return[];const m=[],L=l.translateToString(!0);let v=0,x=0,y=0,b=l.getFg(0),E=l.getBg(0);for(let R=0;R<l.getTrimmedLength();R++)if(l.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==E){if(R-v>1){const k=this._getJoinedRanges(L,y,x,l,v);for(let D=0;D<k.length;D++)m.push(k[D])}v=R,y=x,b=this._workCell.fg,E=this._workCell.bg}x+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const R=this._getJoinedRanges(L,y,x,l,v);for(let k=0;k<R.length;k++)m.push(R[k])}return m}_getJoinedRanges(c,l,m,L,v){const x=c.substring(l,m);let y=[];try{y=this._characterJoiners[0].handler(x)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const E=this._characterJoiners[b].handler(x);for(let R=0;R<E.length;R++)Cf._mergeRanges(y,E[R])}catch(E){console.error(E)}return this._stringRangesToCellRanges(y,L,v),y}_stringRangesToCellRanges(c,l,m){let L=0,v=!1,x=0,y=c[L];if(y){for(let b=m;b<this._bufferService.cols;b++){const E=l.getWidth(b),R=l.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!v&&y[0]<=x&&(y[0]=b,v=!0),y[1]<=x){if(y[1]=b,y=c[++L],!y)break;y[0]<=x?(y[0]=b,v=!0):v=!1}x+=R}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(c,l){let m=!1;for(let L=0;L<c.length;L++){const v=c[L];if(m){if(l[1]<=v[0])return c[L-1][1]=l[1],c;if(l[1]<=v[1])return c[L-1][1]=Math.max(l[1],v[1]),c.splice(L,1),c;c.splice(L,1),L--}else{if(l[1]<=v[0])return c.splice(L,0,l),c;if(l[1]<=v[1])return v[0]=Math.min(l[0],v[0]),c;l[0]<v[1]&&(v[0]=Math.min(l[0],v[0]),m=!0)}}return m?c[c.length-1][1]=l[1]:c.push(l),c}};i.CharacterJoinerService=n=f([_(0,S.IBufferService)],n)},5114:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=o(844),_=o(8460),h=o(3656);class p extends f.Disposable{constructor(u,n,a){super(),this._textarea=u,this._window=n,this.mainDocument=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new w(this._window),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new _.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(c=>this._screenDprMonitor.setWindow(c))),this.register((0,_.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(u){this._window!==u&&(this._window=u,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=p;class w extends f.Disposable{constructor(u){super(),this._parentWindow=u,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(u){this._parentWindow=u,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=o(844);class _ extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{const w=this.linkProviders.indexOf(p);w!==-1&&this.linkProviders.splice(w,1)}}}}i.LinkProviderService=_},8934:function(C,i,o){var f=this&&this.__decorate||function(S,u,n,a){var c,l=arguments.length,m=l<3?u:a===null?a=Object.getOwnPropertyDescriptor(u,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(S,u,n,a);else for(var L=S.length-1;L>=0;L--)(c=S[L])&&(m=(l<3?c(m):l>3?c(u,n,m):c(u,n))||m);return l>3&&m&&Object.defineProperty(u,n,m),m},_=this&&this.__param||function(S,u){return function(n,a){u(n,a,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const h=o(4725),p=o(9806);let w=i.MouseService=class{constructor(S,u){this._renderService=S,this._charSizeService=u}getCoords(S,u,n,a,c){return(0,p.getCoords)(window,S,u,n,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,c)}getMouseReportCoords(S,u){const n=(0,p.getCoordsRelativeToElement)(window,S,u);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};i.MouseService=w=f([_(0,h.IRenderService),_(1,h.ICharSizeService)],w)},3230:function(C,i,o){var f=this&&this.__decorate||function(c,l,m,L){var v,x=arguments.length,y=x<3?l:L===null?L=Object.getOwnPropertyDescriptor(l,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(c,l,m,L);else for(var b=c.length-1;b>=0;b--)(v=c[b])&&(y=(x<3?v(y):x>3?v(l,m,y):v(l,m))||y);return x>3&&y&&Object.defineProperty(l,m,y),y},_=this&&this.__param||function(c,l){return function(m,L){l(m,L,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const h=o(6193),p=o(4725),w=o(8460),S=o(844),u=o(7226),n=o(2585);let a=i.RenderService=class extends S.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(c,l,m,L,v,x,y,b){super(),this._rowCount=c,this._charSizeService=L,this._renderer=this.register(new S.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._observerDisposable=this.register(new S.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((E,R)=>this._renderRows(E,R),y),this.register(this._renderDebouncer),this.register(y.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(x.onResize(()=>this._fullRefresh())),this.register(x.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(m.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(v.onDecorationRegistered(()=>this._fullRefresh())),this.register(v.onDecorationRemoved(()=>this._fullRefresh())),this.register(m.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(x.cols,x.rows),this._fullRefresh()})),this.register(m.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(x.buffer.y,x.buffer.y,!0))),this.register(b.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(y.window,l),this.register(y.onWindowChange(E=>this._registerIntersectionObserver(E,l)))}_registerIntersectionObserver(c,l){if("IntersectionObserver"in c){const m=new c.IntersectionObserver(L=>this._handleIntersectionChange(L[L.length-1]),{threshold:0});m.observe(l),this._observerDisposable.value=(0,S.toDisposable)(()=>m.disconnect())}}_handleIntersectionChange(c){this._isPaused=c.isIntersecting===void 0?c.intersectionRatio===0:!c.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(c,l,m=!1){this._isPaused?this._needsFullRefresh=!0:(m||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(c,l,this._rowCount))}_renderRows(c,l){this._renderer.value&&(c=Math.min(c,this._rowCount-1),l=Math.min(l,this._rowCount-1),this._renderer.value.renderRows(c,l),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:c,end:l}),this._onRender.fire({start:c,end:l}),this._isNextRenderRedrawOnly=!0)}resize(c,l){this._rowCount=l,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(c){this._renderer.value=c,this._renderer.value&&(this._renderer.value.onRequestRedraw(l=>this.refreshRows(l.start,l.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(c){return this._renderDebouncer.addRefreshCallback(c)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(c,l){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(c,l)):this._renderer.value.handleResize(c,l),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(c,l,m){this._selectionState.start=c,this._selectionState.end=l,this._selectionState.columnSelectMode=m,this._renderer.value?.handleSelectionChanged(c,l,m)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};i.RenderService=a=f([_(2,n.IOptionsService),_(3,p.ICharSizeService),_(4,n.IDecorationService),_(5,n.IBufferService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],a)},9312:function(C,i,o){var f=this&&this.__decorate||function(y,b,E,R){var k,D=arguments.length,T=D<3?b:R===null?R=Object.getOwnPropertyDescriptor(b,E):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(y,b,E,R);else for(var j=y.length-1;j>=0;j--)(k=y[j])&&(T=(D<3?k(T):D>3?k(b,E,T):k(b,E))||T);return D>3&&T&&Object.defineProperty(b,E,T),T},_=this&&this.__param||function(y,b){return function(E,R){b(E,R,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const h=o(9806),p=o(9504),w=o(456),S=o(4725),u=o(8460),n=o(844),a=o(6114),c=o(4841),l=o(511),m=o(2585),L="",v=new RegExp(L,"g");let x=i.SelectionService=class extends n.Disposable{constructor(y,b,E,R,k,D,T,j,N){super(),this._element=y,this._screenElement=b,this._linkifier=E,this._bufferService=R,this._coreService=k,this._mouseService=D,this._optionsService=T,this._renderService=j,this._coreBrowserService=N,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new l.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new u.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new u.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new u.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=I=>this._handleMouseMove(I),this._mouseUpListener=I=>this._handleMouseUp(I),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(I=>this._handleTrim(I)),this.register(this._bufferService.buffers.onBufferActivate(I=>this._handleBufferActivate(I))),this.enable(),this._model=new w.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!y||!b||y[0]===b[0]&&y[1]===b[1])}get selectionText(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!y||!b)return"";const E=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(y[0]===b[0])return"";const k=y[0]<b[0]?y[0]:b[0],D=y[0]<b[0]?b[0]:y[0];for(let T=y[1];T<=b[1];T++){const j=E.translateBufferLineToString(T,!0,k,D);R.push(j)}}else{const k=y[1]===b[1]?b[0]:void 0;R.push(E.translateBufferLineToString(y[1],!0,y[0],k));for(let D=y[1]+1;D<=b[1]-1;D++){const T=E.lines.get(D),j=E.translateBufferLineToString(D,!0);T?.isWrapped?R[R.length-1]+=j:R.push(j)}if(y[1]!==b[1]){const D=E.lines.get(b[1]),T=E.translateBufferLineToString(b[1],!0,0,b[0]);D&&D.isWrapped?R[R.length-1]+=T:R.push(T)}}return R.map(k=>k.replace(v," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const b=this._getMouseBufferCoords(y),E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(E&&R&&b)&&this._areCoordsInSelection(b,E,R)}isCellInSelection(y,b){const E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!E||!R)&&this._areCoordsInSelection([y,b],E,R)}_areCoordsInSelection(y,b,E){return y[1]>b[1]&&y[1]<E[1]||b[1]===E[1]&&y[1]===b[1]&&y[0]>=b[0]&&y[0]<E[0]||b[1]<E[1]&&y[1]===E[1]&&y[0]<E[0]||b[1]<E[1]&&y[1]===b[1]&&y[0]>=b[0]}_selectWordAtCursor(y,b){const E=this._linkifier.currentLink?.link?.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(y);return!!R&&(this._selectWordAt(R,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,b){this._model.clearSelection(),y=Math.max(y,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const b=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(y){let b=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const E=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=E?0:(b>E&&(b-=E),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(y){return a.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const b=this._getMouseBufferCoords(y);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(y){return y.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){const R=E.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const b=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const E=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){const R=(0,p.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,E=!(!y||!b||y[0]===b[0]&&y[1]===b[1]);E?y&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,b,E)):this._oldHasSelection&&this._fireOnSelectionChange(y,b,E)}_fireOnSelectionChange(y,b,E){this._oldSelectionStart=y,this._oldSelectionEnd=b,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(y,b){let E=b;for(let R=0;b>=R;R++){const k=y.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:k>1&&b!==R&&(E+=k-1)}return E}setSelection(y,b,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,b],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,b,E=!0,R=!0){if(y[0]>=this._bufferService.cols)return;const k=this._bufferService.buffer,D=k.lines.get(y[1]);if(!D)return;const T=k.translateBufferLineToString(y[1],!1);let j=this._convertViewportColToCharacterIndex(D,y[0]),N=j;const I=y[0]-j;let B=0,M=0,A=0,P=0;if(T.charAt(j)===" "){for(;j>0&&T.charAt(j-1)===" ";)j--;for(;N<T.length&&T.charAt(N+1)===" ";)N++}else{let z=y[0],J=y[0];D.getWidth(z)===0&&(B++,z--),D.getWidth(J)===2&&(M++,J++);const Y=D.getString(J).length;for(Y>1&&(P+=Y-1,N+=Y-1);z>0&&j>0&&!this._isCharWordSeparator(D.loadCell(z-1,this._workCell));){D.loadCell(z-1,this._workCell);const $=this._workCell.getChars().length;this._workCell.getWidth()===0?(B++,z--):$>1&&(A+=$-1,j-=$-1),j--,z--}for(;J<D.length&&N+1<T.length&&!this._isCharWordSeparator(D.loadCell(J+1,this._workCell));){D.loadCell(J+1,this._workCell);const $=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,J++):$>1&&(P+=$-1,N+=$-1),N++,J++}}N++;let H=j+I-B+A,W=Math.min(this._bufferService.cols,N-j+B+M-A-P);if(b||T.slice(j,N).trim()!==""){if(E&&H===0&&D.getCodePoint(0)!==32){const z=k.lines.get(y[1]-1);if(z&&D.isWrapped&&z.getCodePoint(this._bufferService.cols-1)!==32){const J=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(J){const Y=this._bufferService.cols-J.start;H-=Y,W+=Y}}}if(R&&H+W===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const z=k.lines.get(y[1]+1);if(z?.isWrapped&&z.getCodePoint(0)!==32){const J=this._getWordAt([0,y[1]+1],!1,!1,!0);J&&(W+=J.length)}}return{start:H,length:W}}}_selectWordAt(y,b){const E=this._getWordAt(y,b);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[E.start,y[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(y){const b=this._getWordAt(y,!0);if(b){let E=y[1];for(;b.start<0;)b.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,E]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const b=this._bufferService.buffer.getWrappedRangeForLine(y),E={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,c.getRangeLength)(E,this._bufferService.cols)}};i.SelectionService=x=f([_(3,m.IBufferService),_(4,m.ICoreService),_(5,S.IMouseService),_(6,m.IOptionsService),_(7,S.IRenderService),_(8,S.ICoreBrowserService)],x)},4725:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=o(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(C,i,o){var f=this&&this.__decorate||function(x,y,b,E){var R,k=arguments.length,D=k<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(x,y,b,E);else for(var T=x.length-1;T>=0;T--)(R=x[T])&&(D=(k<3?R(D):k>3?R(y,b,D):R(y,b))||D);return k>3&&D&&Object.defineProperty(y,b,D),D},_=this&&this.__param||function(x,y){return function(b,E){y(b,E,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const h=o(7239),p=o(8055),w=o(8460),S=o(844),u=o(2585),n=p.css.toColor("#ffffff"),a=p.css.toColor("#000000"),c=p.css.toColor("#ffffff"),l=p.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let b=0;b<216;b++){const E=y[b/36%6|0],R=y[b/6%6|0],k=y[b%6];x.push({css:p.channels.toCss(E,R,k),rgba:p.channels.toRgba(E,R,k)})}for(let b=0;b<24;b++){const E=8+10*b;x.push({css:p.channels.toCss(E,E,E),rgba:p.channels.toRgba(E,E,E)})}return x})());let L=i.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new w.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:a,cursor:c,cursorAccent:l,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:p.color.blend(a,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:p.color.blend(a,m),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(x={}){const y=this._colors;if(y.foreground=v(x.foreground,n),y.background=v(x.background,a),y.cursor=v(x.cursor,c),y.cursorAccent=v(x.cursorAccent,l),y.selectionBackgroundTransparent=v(x.selectionBackground,m),y.selectionBackgroundOpaque=p.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=v(x.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=p.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=x.selectionForeground?v(x.selectionForeground,p.NULL_COLOR):void 0,y.selectionForeground===p.NULL_COLOR&&(y.selectionForeground=void 0),p.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=p.color.opacity(y.selectionBackgroundTransparent,.3)),p.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=p.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=i.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=v(x.black,i.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=v(x.red,i.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=v(x.green,i.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=v(x.yellow,i.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=v(x.blue,i.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=v(x.magenta,i.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=v(x.cyan,i.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=v(x.white,i.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=v(x.brightBlack,i.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=v(x.brightRed,i.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=v(x.brightGreen,i.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=v(x.brightYellow,i.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=v(x.brightBlue,i.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=v(x.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=v(x.brightCyan,i.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=v(x.brightWhite,i.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const b=Math.min(y.ansi.length-16,x.extendedAnsi.length);for(let E=0;E<b;E++)y.ansi[E+16]=v(x.extendedAnsi[E],i.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function v(x,y){if(x!==void 0)try{return p.css.toColor(x)}catch{}return y}i.ThemeService=L=f([_(0,u.IOptionsService)],L)},6349:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=o(8460),_=o(844);class h extends _.Disposable{constructor(w){super(),this._maxLength=w,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(w){if(this._maxLength===w)return;const S=new Array(w);for(let u=0;u<Math.min(w,this.length);u++)S[u]=this._array[this._getCyclicIndex(u)];this._array=S,this._maxLength=w,this._startIndex=0}get length(){return this._length}set length(w){if(w>this._length)for(let S=this._length;S<w;S++)this._array[S]=void 0;this._length=w}get(w){return this._array[this._getCyclicIndex(w)]}set(w,S){this._array[this._getCyclicIndex(w)]=S}push(w){this._array[this._getCyclicIndex(this._length)]=w,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(w,S,...u){if(S){for(let n=w;n<this._length-S;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+S)];this._length-=S,this.onDeleteEmitter.fire({index:w,amount:S})}for(let n=this._length-1;n>=w;n--)this._array[this._getCyclicIndex(n+u.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<u.length;n++)this._array[this._getCyclicIndex(w+n)]=u[n];if(u.length&&this.onInsertEmitter.fire({index:w,amount:u.length}),this._length+u.length>this._maxLength){const n=this._length+u.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=u.length}trimStart(w){w>this._length&&(w=this._length),this._startIndex+=w,this._length-=w,this.onTrimEmitter.fire(w)}shiftElements(w,S,u){if(!(S<=0)){if(w<0||w>=this._length)throw new Error("start argument out of range");if(w+u<0)throw new Error("Cannot shift elements in list beyond index 0");if(u>0){for(let a=S-1;a>=0;a--)this.set(w+a+u,this.get(w+a));const n=w+S+u-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<S;n++)this.set(w+n+u,this.get(w+n))}}_getCyclicIndex(w){return(this._startIndex+w)%this._maxLength}}i.CircularList=h},1439:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(f,_=5){if(typeof f!="object")return f;const h=Array.isArray(f)?[]:{};for(const p in f)h[p]=_<=1?f[p]:f[p]&&o(f[p],_-1);return h}},8055:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,h=0;var p,w,S,u,n;function a(l){const m=l.toString(16);return m.length<2?"0"+m:m}function c(l,m){return l<m?(m+.05)/(l+.05):(l+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(l){l.toCss=function(m,L,v,x){return x!==void 0?`#${a(m)}${a(L)}${a(v)}${a(x)}`:`#${a(m)}${a(L)}${a(v)}`},l.toRgba=function(m,L,v,x=255){return(m<<24|L<<16|v<<8|x)>>>0},l.toColor=function(m,L,v,x){return{css:l.toCss(m,L,v,x),rgba:l.toRgba(m,L,v,x)}}}(p||(i.channels=p={})),function(l){function m(L,v){return h=Math.round(255*v),[o,f,_]=n.toChannels(L.rgba),{css:p.toCss(o,f,_,h),rgba:p.toRgba(o,f,_,h)}}l.blend=function(L,v){if(h=(255&v.rgba)/255,h===1)return{css:v.css,rgba:v.rgba};const x=v.rgba>>24&255,y=v.rgba>>16&255,b=v.rgba>>8&255,E=L.rgba>>24&255,R=L.rgba>>16&255,k=L.rgba>>8&255;return o=E+Math.round((x-E)*h),f=R+Math.round((y-R)*h),_=k+Math.round((b-k)*h),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},l.isOpaque=function(L){return(255&L.rgba)==255},l.ensureContrastRatio=function(L,v,x){const y=n.ensureContrastRatio(L.rgba,v.rgba,x);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},l.opaque=function(L){const v=(255|L.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},l.opacity=m,l.multiplyOpacity=function(L,v){return h=255&L.rgba,m(L,h*v/255)},l.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(i.color=w={})),function(l){let m,L;try{const v=document.createElement("canvas");v.width=1,v.height=1;const x=v.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",L=m.createLinearGradient(0,0,1,1))}catch{}l.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),h=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,h);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const x=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return o=parseInt(x[1]),f=parseInt(x[2]),_=parseInt(x[3]),h=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),p.toColor(o,f,_,h);if(!m||!L)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=L,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,h]=m.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,h),css:v}}}(S||(i.css=S={})),function(l){function m(L,v,x){const y=L/255,b=v/255,E=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}l.relativeLuminance=function(L){return m(L>>16&255,L>>8&255,255&L)},l.relativeLuminance2=m}(u||(i.rgb=u={})),function(l){function m(v,x,y){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;j<y&&(k>0||D>0||T>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}function L(v,x,y){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;j<y&&(k<255||D<255||T<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}l.blend=function(v,x){if(h=(255&x)/255,h===1)return x;const y=x>>24&255,b=x>>16&255,E=x>>8&255,R=v>>24&255,k=v>>16&255,D=v>>8&255;return o=R+Math.round((y-R)*h),f=k+Math.round((b-k)*h),_=D+Math.round((E-D)*h),p.toRgba(o,f,_)},l.ensureContrastRatio=function(v,x,y){const b=u.relativeLuminance(v>>8),E=u.relativeLuminance(x>>8);if(c(b,E)<y){if(E<b){const D=m(v,x,y),T=c(b,u.relativeLuminance(D>>8));if(T<y){const j=L(v,x,y);return T>c(b,u.relativeLuminance(j>>8))?D:j}return D}const R=L(v,x,y),k=c(b,u.relativeLuminance(R>>8));if(k<y){const D=m(v,x,y);return k>c(b,u.relativeLuminance(D>>8))?R:D}return R}},l.reduceLuminance=m,l.increaseLuminance=L,l.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=c},8969:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=o(844),_=o(2585),h=o(4348),p=o(7866),w=o(744),S=o(7302),u=o(6975),n=o(8460),a=o(1753),c=o(1480),l=o(7994),m=o(9282),L=o(5435),v=o(5981),x=o(2660);let y=!1;class b extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(R=>{this._onScrollApi?.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const k in R)this.optionsService.options[k]=R[k]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new S.OptionsService(R)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(w.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(u.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(c.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(l.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new L.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new v.WriteBuffer((k,D)=>this._inputHandler.parse(k,D))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,k){this._writeBuffer.write(R,k)}writeSync(R,k){this._logService.logLevel<=_.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(R,k)}input(R,k=!0){this.coreService.triggerDataEvent(R,k)}resize(R,k){isNaN(R)||isNaN(k)||(R=Math.max(R,w.MINIMUM_COLS),k=Math.max(k,w.MINIMUM_ROWS),this._bufferService.resize(R,k))}scroll(R,k=!1){this._bufferService.scroll(R,k)}scrollLines(R,k,D){this._bufferService.scrollLines(R,k,D)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const k=R-this._bufferService.buffer.ydisp;k!==0&&this.scrollLines(k)}registerEscHandler(R,k){return this._inputHandler.registerEscHandler(R,k)}registerDcsHandler(R,k){return this._inputHandler.registerDcsHandler(R,k)}registerCsiHandler(R,k){return this._inputHandler.registerCsiHandler(R,k)}registerOscHandler(R,k){return this._inputHandler.registerOscHandler(R,k)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const k=this.optionsService.rawOptions.windowsPty;k&&k.buildNumber!==void 0&&k.buildNumber!==void 0?R=k.backend==="conpty"&&k.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const k of R)k.dispose()})}}}i.CoreTerminal=b},8460:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},5435:function(C,i,o){var f=this&&this.__decorate||function(B,M,A,P){var H,W=arguments.length,z=W<3?M:P===null?P=Object.getOwnPropertyDescriptor(M,A):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(B,M,A,P);else for(var J=B.length-1;J>=0;J--)(H=B[J])&&(z=(W<3?H(z):W>3?H(M,A,z):H(M,A))||z);return W>3&&z&&Object.defineProperty(M,A,z),z},_=this&&this.__param||function(B,M){return function(A,P){M(A,P,B)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const h=o(2584),p=o(7116),w=o(2015),S=o(844),u=o(482),n=o(8437),a=o(8460),c=o(643),l=o(511),m=o(3734),L=o(2585),v=o(1480),x=o(6242),y=o(6351),b=o(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function k(B,M){if(B>24)return M.setWinLines||!1;switch(B){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var D;(function(B){B[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(i.WindowsOptionsReportType=D={}));let T=0;class j extends S.Disposable{getAttrData(){return this._curAttrData}constructor(M,A,P,H,W,z,J,Y,$=new w.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=A,this._coreService=P,this._logService=H,this._optionsService=W,this._oscLinkService=z,this._coreMouseService=J,this._unicodeService=Y,this._parser=$,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new u.StringToUtf32,this._utf8Decoder=new u.Utf8ToUtf32,this._workCell=new l.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new N(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,U)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:U.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,U,K)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:U,data:K})}),this._parser.setDcsHandlerFallback((O,U,K)=>{U==="HOOK"&&(K=K.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:U,payload:K})}),this._parser.setPrintHandler((O,U,K)=>this.print(O,U,K)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new x.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new x.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new x.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new x.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new x.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new x.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new x.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new x.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new x.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new x.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new x.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const O in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new y.DcsHandler((O,U)=>this.requestStatusString(O,U)))}_preserveStack(M,A,P,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=P,this._parseStack.position=H}_logSlowResolvingAsync(M){this._logService.logLevel<=L.LogLevelEnum.WARN&&Promise.race([M,new Promise((A,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,A){let P,H=this._activeBuffer.x,W=this._activeBuffer.y,z=0;const J=this._parseStack.paused;if(J){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(P),P;H=this._parseStack.cursorStartX,W=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>R&&(z=this._parseStack.position+R)}if(this._logService.logLevel<=L.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,O=>String.fromCharCode(O)).join("")}"`),typeof M=="string"?M.split("").map(O=>O.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(M.length,R))),J||this._dirtyRowTracker.clearRange(),M.length>R)for(let O=z;O<M.length;O+=R){const U=O+R<M.length?O+R:M.length,K=typeof M=="string"?this._stringDecoder.decode(M.substring(O,U),this._parseBuffer):this._utf8Decoder.decode(M.subarray(O,U),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,K))return this._preserveStack(H,W,K,O),this._logSlowResolvingAsync(P),P}else if(!J){const O=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,O))return this._preserveStack(H,W,O,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===H&&this._activeBuffer.y===W||this._onCursorMove.fire();const Y=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),$=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);$<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min($,this._bufferService.rows-1),Math.min(Y,this._bufferService.rows-1))}print(M,A,P){let H,W;const z=this._charsetService.charset,J=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,$=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,U=this._curAttrData;let K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-A>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodepoint(this._activeBuffer.x-1,0,1,U);let Q=this._parser.precedingJoinState;for(let Z=A;Z<P;++Z){if(H=M[Z],H<127&&z){const pe=z[String.fromCharCode(H)];pe&&(H=pe.charCodeAt(0))}const he=this._unicodeService.charProperties(H,Q);W=v.UnicodeService.extractWidth(he);const ee=v.UnicodeService.extractShouldJoin(he),ue=ee?v.UnicodeService.extractWidth(Q):0;if(Q=he,J&&this._onA11yChar.fire((0,u.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+W-ue>Y){if($){const pe=K;let oe=this._activeBuffer.x-ue;for(this._activeBuffer.x=ue,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ue>0&&K instanceof n.BufferLine&&K.copyCellsFrom(pe,oe,0,ue,!1);oe<Y;)pe.setCellFromCodepoint(oe++,0,1,U)}else if(this._activeBuffer.x=Y-1,W===2)continue}if(ee&&this._activeBuffer.x){const pe=K.getWidth(this._activeBuffer.x-1)?1:2;K.addCodepointToCell(this._activeBuffer.x-pe,H,W);for(let oe=W-ue;--oe>=0;)K.setCellFromCodepoint(this._activeBuffer.x++,0,0,U)}else if(O&&(K.insertCells(this._activeBuffer.x,W-ue,this._activeBuffer.getNullCell(U)),K.getWidth(Y-1)===2&&K.setCellFromCodepoint(Y-1,c.NULL_CELL_CODE,c.NULL_CELL_WIDTH,U)),K.setCellFromCodepoint(this._activeBuffer.x++,H,W,U),W>0)for(;--W;)K.setCellFromCodepoint(this._activeBuffer.x++,0,0,U)}this._parser.precedingJoinState=Q,this._activeBuffer.x<Y&&P-A>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodepoint(this._activeBuffer.x,0,1,U),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,A){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,A):this._parser.registerCsiHandler(M,P=>!k(P.params[0],this._optionsService.rawOptions.windowOptions)||A(P))}registerDcsHandler(M,A){return this._parser.registerDcsHandler(M,new y.DcsHandler(A))}registerEscHandler(M,A){return this._parser.registerEscHandler(M,A)}registerOscHandler(M,A){return this._parser.registerOscHandler(M,new x.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);M.hasWidth(this._activeBuffer.x)&&!M.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=M,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+A)}cursorUp(M){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const A=M.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=M.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=M.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const A=M.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,A,P,H=!1,W=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);z.replaceCells(A,P,this._activeBuffer.getNullCell(this._eraseAttrData()),W),H&&(z.isWrapped=!1)}_resetBufferLine(M,A=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),P.isWrapped=!1)}eraseInDisplay(M,A=!1){let P;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);P<this._bufferService.rows;P++)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(M,A=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let A=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;A--;)this._activeBuffer.lines.splice(W-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let A=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;A--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let A=M.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let A=M.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);H.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);H.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);H.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=M.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);H.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){const A=this._parser.precedingJoinState;if(!A)return!0;const P=M.params[0]||1,H=v.UnicodeService.extractWidth(A),W=this._activeBuffer.x-H,z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(W),J=new Uint32Array(z.length*P);let Y=0;for(let O=0;O<z.length;){const U=z.codePointAt(O)||0;J[Y++]=U,O+=U>65535?2:1}let $=Y;for(let O=1;O<P;++O)J.copyWithin($,0,Y),$+=Y;return this.print(J,0,$),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,A){const P=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:W}=this._coreMouseService,z=this._coreService,{buffers:J,cols:Y}=this._bufferService,{active:$,alt:O}=J,U=this._optionsService.rawOptions,K=ee=>ee?1:2,Q=M.params[0];return Z=Q,he=A?Q===2?4:Q===4?K(z.modes.insertMode):Q===12?3:Q===20?K(U.convertEol):0:Q===1?K(P.applicationCursorKeys):Q===3?U.windowOptions.setWinLines?Y===80?2:Y===132?1:0:0:Q===6?K(P.origin):Q===7?K(P.wraparound):Q===8?3:Q===9?K(H==="X10"):Q===12?K(U.cursorBlink):Q===25?K(!z.isCursorHidden):Q===45?K(P.reverseWraparound):Q===66?K(P.applicationKeypad):Q===67?4:Q===1e3?K(H==="VT200"):Q===1002?K(H==="DRAG"):Q===1003?K(H==="ANY"):Q===1004?K(P.sendFocus):Q===1005?4:Q===1006?K(W==="SGR"):Q===1015?4:Q===1016?K(W==="SGR_PIXELS"):Q===1048?1:Q===47||Q===1047||Q===1049?K($===O):Q===2004?K(P.bracketedPasteMode):0,z.triggerDataEvent(`${h.C0.ESC}[${A?"":"?"}${Z};${he}$y`),!0;var Z,he}_updateAttrColor(M,A,P,H,W){return A===2?(M|=50331648,M&=-16777216,M|=m.AttributeData.fromColorRGB([P,H,W])):A===5&&(M&=-50331904,M|=33554432|255&P),M}_extractColor(M,A,P){const H=[0,0,-1,0,0,0];let W=0,z=0;do{if(H[z+W]=M.params[A+z],M.hasSubParams(A+z)){const J=M.getSubParams(A+z);let Y=0;do H[1]===5&&(W=1),H[z+Y+1+W]=J[Y];while(++Y<J.length&&Y+z+1+W<H.length);break}if(H[1]===5&&z+W>=2||H[1]===2&&z+W>=5)break;H[1]&&(W=1)}while(++z+A<M.length&&z+W<H.length);for(let J=2;J<H.length;++J)H[J]===-1&&(H[J]=0);switch(H[0]){case 38:P.fg=this._updateAttrColor(P.fg,H[1],H[3],H[4],H[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,H[1],H[3],H[4],H[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,H[1],H[3],H[4],H[5])}return z}_processUnderline(M,A){A.extended=A.extended.clone(),(!~M||M>5)&&(M=1),A.extended.underlineStyle=M,A.fg|=268435456,M===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(M){M.fg=n.DEFAULT_ATTR_DATA.fg,M.bg=n.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=M.length;let P;const H=this._curAttrData;for(let W=0;W<A;W++)P=M.params[W],P>=30&&P<=37?(H.fg&=-50331904,H.fg|=16777216|P-30):P>=40&&P<=47?(H.bg&=-50331904,H.bg|=16777216|P-40):P>=90&&P<=97?(H.fg&=-50331904,H.fg|=16777224|P-90):P>=100&&P<=107?(H.bg&=-50331904,H.bg|=16777224|P-100):P===0?this._processSGR0(H):P===1?H.fg|=134217728:P===3?H.bg|=67108864:P===4?(H.fg|=268435456,this._processUnderline(M.hasSubParams(W)?M.getSubParams(W)[0]:1,H)):P===5?H.fg|=536870912:P===7?H.fg|=67108864:P===8?H.fg|=1073741824:P===9?H.fg|=2147483648:P===2?H.bg|=134217728:P===21?this._processUnderline(2,H):P===22?(H.fg&=-134217729,H.bg&=-134217729):P===23?H.bg&=-67108865:P===24?(H.fg&=-268435457,this._processUnderline(0,H)):P===25?H.fg&=-536870913:P===27?H.fg&=-67108865:P===28?H.fg&=-1073741825:P===29?H.fg&=2147483647:P===39?(H.fg&=-67108864,H.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):P===49?(H.bg&=-67108864,H.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?W+=this._extractColor(M,W,H):P===53?H.bg|=1073741824:P===55?H.bg&=-1073741825:P===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):P===100?(H.fg&=-67108864,H.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${A};${P}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const A=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${A};${P}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const A=M.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=A%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(M){const A=M.params[0]||1;let P;return(M.length<2||(P=M.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(M){if(!k(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const A=[],P=M.split(";");for(;P.length>1;){const H=P.shift(),W=P.shift();if(/^\d+$/.exec(H)){const z=parseInt(H);if(I(z))if(W==="?")A.push({type:0,index:z});else{const J=(0,b.parseColor)(W);J&&A.push({type:1,index:z,color:J})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(M){const A=M.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(M,A){this._getCurrentLinkId()&&this._finishHyperlink();const P=M.split(":");let H;const W=P.findIndex(z=>z.startsWith("id="));return W!==-1&&(H=P[W].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,A){const P=M.split(";");for(let H=0;H<P.length&&!(A>=this._specialColors.length);++H,++A)if(P[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const W=(0,b.parseColor)(P[H]);W&&this._onColor.fire([{type:1,index:this._specialColors[A],color:W}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const A=[],P=M.split(";");for(let H=0;H<P.length;++H)if(/^\d+$/.exec(P[H])){const W=parseInt(P[H]);I(W)&&A.push({type:2,index:W})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(E[M[0]],p.CHARSETS[M[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new l.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const P=this._activeBuffer.ybase+this._activeBuffer.y+A,H=this._activeBuffer.lines.get(P);H&&(H.fill(M),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,A){const P=this._bufferService.buffer,H=this._optionsService.rawOptions;return(W=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${W}${h.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,A){this._dirtyRowTracker.markRangeDirty(M,A)}}i.InputHandler=j;let N=class{constructor(B){this._bufferService=B,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(B){B<this.start?this.start=B:B>this.end&&(this.end=B)}markRangeDirty(B,M){B>M&&(T=B,B=M,M=T),B<this.start&&(this.start=B),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function I(B){return 0<=B&&B<256}N=f([_(0,L.IBufferService)],N)},844:(C,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},1505:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,h,p){this._data[_]||(this._data[_]={}),this._data[_][h]=p}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,h,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(h,p,w)}get(f,_,h,p){return this._data.get(f,_)?.get(h,p)}clear(){this._data.clear()}}},6114:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(o=this._search(this._getKey(f)),this._array.splice(o,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const _=this._getKey(f);if(_===void 0||(o=this._search(_),o===-1)||this._getKey(this._array[o])!==_)return!1;do if(this._array[o]===f)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===_);return!1}*getKeyIterator(f){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===f)}forEachByKey(f,_){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do _(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===f)}values(){return[...this._array].values()}_search(f){let _=0,h=this._array.length-1;for(;h>=_;){let p=_+h>>1;const w=this._getKey(this._array[p]);if(w>f)h=p-1;else{if(!(w<f)){for(;p>0&&this._getKey(this._array[p-1])===f;)p--;return p}_=p+1}}return _}}},7226:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,u=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),u=Math.max(S,u),a=w.timeRemaining(),1.5*u>a)return n-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-S))}ms`),void this._start();n=a}this.clear()}}class h extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=o(643);i.updateWindowsModeWrappedState=function(_){const h=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),p=h?.get(_.cols-1),w=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);w&&p&&(w.isWrapped=p[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&p[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new o;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=o(6349),_=o(7226),h=o(3734),p=o(8437),w=o(4634),S=o(511),u=o(643),n=o(4863),a=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(c,l,m){this._hasScrollback=c,this._optionsService=l,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(c){return c?(this._nullCell.fg=c.fg,this._nullCell.bg=c.bg,this._nullCell.extended=c.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(c){return c?(this._whitespaceCell.fg=c.fg,this._whitespaceCell.bg=c.bg,this._whitespaceCell.extended=c.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(c,l){return new p.BufferLine(this._bufferService.cols,this.getNullCell(c),l)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const c=this.ybase+this.y-this.ydisp;return c>=0&&c<this._rows}_getCorrectBufferLength(c){if(!this._hasScrollback)return c;const l=c+this._optionsService.rawOptions.scrollback;return l>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:l}fillViewportRows(c){if(this.lines.length===0){c===void 0&&(c=p.DEFAULT_ATTR_DATA);let l=this._rows;for(;l--;)this.lines.push(this.getBlankLine(c))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(c,l){const m=this.getNullCell(p.DEFAULT_ATTR_DATA);let L=0;const v=this._getCorrectBufferLength(l);if(v>this.lines.maxLength&&(this.lines.maxLength=v),this.lines.length>0){if(this._cols<c)for(let y=0;y<this.lines.length;y++)L+=+this.lines.get(y).resize(c,m);let x=0;if(this._rows<l)for(let y=this._rows;y<l;y++)this.lines.length<l+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(c,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(c,m)));else for(let y=this._rows;y>l;y--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(v<this.lines.maxLength){const y=this.lines.length-v;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=v}this.x=Math.min(this.x,c-1),this.y=Math.min(this.y,l-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,c-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(c,l),this._cols>c))for(let x=0;x<this.lines.length;x++)L+=+this.lines.get(x).resize(c,m);this._cols=c,this._rows=l,this._memoryCleanupQueue.clear(),L>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let c=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,c=!1);let l=0;for(;this._memoryCleanupPosition<this.lines.length;)if(l+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),l>100)return!0;return c}get _isReflowEnabled(){const c=this._optionsService.rawOptions.windowsPty;return c&&c.buildNumber?this._hasScrollback&&c.backend==="conpty"&&c.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(c,l){this._cols!==c&&(c>this._cols?this._reflowLarger(c,l):this._reflowSmaller(c,l))}_reflowLarger(c,l){const m=(0,w.reflowLargerGetLinesToRemove)(this.lines,this._cols,c,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(m.length>0){const L=(0,w.reflowLargerCreateNewLayout)(this.lines,m);(0,w.reflowLargerApplyNewLayout)(this.lines,L.layout),this._reflowLargerAdjustViewport(c,l,L.countRemoved)}}_reflowLargerAdjustViewport(c,l,m){const L=this.getNullCell(p.DEFAULT_ATTR_DATA);let v=m;for(;v-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new p.BufferLine(c,L))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(c,l){const m=this.getNullCell(p.DEFAULT_ATTR_DATA),L=[];let v=0;for(let x=this.lines.length-1;x>=0;x--){let y=this.lines.get(x);if(!y||!y.isWrapped&&y.getTrimmedLength()<=c)continue;const b=[y];for(;y.isWrapped&&x>0;)y=this.lines.get(--x),b.unshift(y);const E=this.ybase+this.y;if(E>=x&&E<x+b.length)continue;const R=b[b.length-1].getTrimmedLength(),k=(0,w.reflowSmallerGetNewLineLengths)(b,this._cols,c),D=k.length-b.length;let T;T=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const j=[];for(let P=0;P<D;P++){const H=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);j.push(H)}j.length>0&&(L.push({start:x+b.length+v,newLines:j}),v+=j.length),b.push(...j);let N=k.length-1,I=k[N];I===0&&(N--,I=k[N]);let B=b.length-D-1,M=R;for(;B>=0;){const P=Math.min(M,I);if(b[N]===void 0)break;if(b[N].copyCellsFrom(b[B],M-P,I-P,P,!0),I-=P,I===0&&(N--,I=k[N]),M-=P,M===0){B--;const H=Math.max(B,0);M=(0,w.getWrappedLineTrimmedLength)(b,H,this._cols)}}for(let P=0;P<b.length;P++)k[P]<c&&b[P].setCell(k[P],m);let A=D-T;for(;A-- >0;)this.ybase===0?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+v)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+l-1)}if(L.length>0){const x=[],y=[];for(let N=0;N<this.lines.length;N++)y.push(this.lines.get(N));const b=this.lines.length;let E=b-1,R=0,k=L[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+v);let D=0;for(let N=Math.min(this.lines.maxLength-1,b+v-1);N>=0;N--)if(k&&k.start>E+D){for(let I=k.newLines.length-1;I>=0;I--)this.lines.set(N--,k.newLines[I]);N++,x.push({index:E+1,amount:k.newLines.length}),D+=k.newLines.length,k=L[++R]}else this.lines.set(N,y[E--]);let T=0;for(let N=x.length-1;N>=0;N--)x[N].index+=T,this.lines.onInsertEmitter.fire(x[N]),T+=x[N].amount;const j=Math.max(0,b+v-this.lines.maxLength);j>0&&this.lines.onTrimEmitter.fire(j)}}translateBufferLineToString(c,l,m=0,L){const v=this.lines.get(c);return v?v.translateToString(l,m,L):""}getWrappedRangeForLine(c){let l=c,m=c;for(;l>0&&this.lines.get(l).isWrapped;)l--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:l,last:m}}setupTabStops(c){for(c!=null?this.tabs[c]||(c=this.prevStop(c)):(this.tabs={},c=0);c<this._cols;c+=this._optionsService.rawOptions.tabStopWidth)this.tabs[c]=!0}prevStop(c){for(c==null&&(c=this.x);!this.tabs[--c]&&c>0;);return c>=this._cols?this._cols-1:c<0?0:c}nextStop(c){for(c==null&&(c=this.x);!this.tabs[++c]&&c<this._cols;);return c>=this._cols?this._cols-1:c<0?0:c}clearMarkers(c){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].line===c&&(this.markers[l].dispose(),this.markers.splice(l--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].dispose(),this.markers.splice(c--,1);this._isClearing=!1}addMarker(c){const l=new n.Marker(c);return this.markers.push(l),l.register(this.lines.onTrim(m=>{l.line-=m,l.line<0&&l.dispose()})),l.register(this.lines.onInsert(m=>{l.line>=m.index&&(l.line+=m.amount)})),l.register(this.lines.onDelete(m=>{l.line>=m.index&&l.line<m.index+m.amount&&l.dispose(),l.line>m.index&&(l.line-=m.amount)})),l.register(l.onDispose(()=>this._removeMarker(l))),l}_removeMarker(c){this._isClearing||this.markers.splice(this.markers.indexOf(c),1)}}},8437:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=o(3734),_=o(511),h=o(643),p=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let w=0;class S{constructor(n,a,c=!1){this.isWrapped=c,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const l=a||_.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let m=0;m<n;++m)this.setCell(m,l);this.length=n}get(n){const a=this._data[3*n+0],c=2097151&a;return[this._data[3*n+1],2097152&a?this._combined[n]:c?(0,p.stringFromCodePoint)(c):"",a>>22,2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):c]}set(n,a){this._data[3*n+1]=a[h.CHAR_DATA_ATTR_INDEX],a[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=a[1],this._data[3*n+0]=2097152|n|a[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=a[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&a}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const a=this._data[3*n+0];return 2097152&a?this._combined[n]:2097151&a?(0,p.stringFromCodePoint)(2097151&a):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,a){return w=3*n,a.content=this._data[w+0],a.fg=this._data[w+1],a.bg=this._data[w+2],2097152&a.content&&(a.combinedData=this._combined[n]),268435456&a.bg&&(a.extended=this._extendedAttrs[n]),a}setCell(n,a){2097152&a.content&&(this._combined[n]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[n]=a.extended),this._data[3*n+0]=a.content,this._data[3*n+1]=a.fg,this._data[3*n+2]=a.bg}setCellFromCodepoint(n,a,c,l){268435456&l.bg&&(this._extendedAttrs[n]=l.extended),this._data[3*n+0]=a|c<<22,this._data[3*n+1]=l.fg,this._data[3*n+2]=l.bg}addCodepointToCell(n,a,c){let l=this._data[3*n+0];2097152&l?this._combined[n]+=(0,p.stringFromCodePoint)(a):2097151&l?(this._combined[n]=(0,p.stringFromCodePoint)(2097151&l)+(0,p.stringFromCodePoint)(a),l&=-2097152,l|=2097152):l=a|4194304,c&&(l&=-12582913,l|=c<<22),this._data[3*n+0]=l}insertCells(n,a,c){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,c),a<this.length-n){const l=new _.CellData;for(let m=this.length-n-a-1;m>=0;--m)this.setCell(n+a+m,this.loadCell(n+m,l));for(let m=0;m<a;++m)this.setCell(n+m,c)}else for(let l=n;l<this.length;++l)this.setCell(l,c);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,c)}deleteCells(n,a,c){if(n%=this.length,a<this.length-n){const l=new _.CellData;for(let m=0;m<this.length-n-a;++m)this.setCell(n+m,this.loadCell(n+a+m,l));for(let m=this.length-a;m<this.length;++m)this.setCell(m,c)}else for(let l=n;l<this.length;++l)this.setCell(l,c);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,c),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,c)}replaceCells(n,a,c,l=!1){if(l)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,c),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodepoint(a,0,1,c);n<a&&n<this.length;)this.isProtected(n)||this.setCell(n,c),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,c),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a,0,1,c);n<a&&n<this.length;)this.setCell(n++,c)}resize(n,a){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const c=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*c)this._data=new Uint32Array(this._data.buffer,0,c);else{const l=new Uint32Array(c);l.set(this._data),this._data=l}for(let l=this.length;l<n;++l)this.setCell(l,a)}else{this._data=this._data.subarray(0,c);const l=Object.keys(this._combined);for(let L=0;L<l.length;L++){const v=parseInt(l[L],10);v>=n&&delete this._combined[v]}const m=Object.keys(this._extendedAttrs);for(let L=0;L<m.length;L++){const v=parseInt(m[L],10);v>=n&&delete this._extendedAttrs[v]}}return this.length=n,4*c*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,a=!1){if(a)for(let c=0;c<this.length;++c)this.isProtected(c)||this.setCell(c,n);else{this._combined={},this._extendedAttrs={};for(let c=0;c<this.length;++c)this.setCell(c,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const a in n._combined)this._combined[a]=n._combined[a];this._extendedAttrs={};for(const a in n._extendedAttrs)this._extendedAttrs[a]=n._extendedAttrs[a];this.isWrapped=n.isWrapped}clone(){const n=new S(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const a in this._combined)n._combined[a]=this._combined[a];for(const a in this._extendedAttrs)n._extendedAttrs[a]=this._extendedAttrs[a];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,a,c,l,m){const L=n._data;if(m)for(let x=l-1;x>=0;x--){for(let y=0;y<3;y++)this._data[3*(c+x)+y]=L[3*(a+x)+y];268435456&L[3*(a+x)+2]&&(this._extendedAttrs[c+x]=n._extendedAttrs[a+x])}else for(let x=0;x<l;x++){for(let y=0;y<3;y++)this._data[3*(c+x)+y]=L[3*(a+x)+y];268435456&L[3*(a+x)+2]&&(this._extendedAttrs[c+x]=n._extendedAttrs[a+x])}const v=Object.keys(n._combined);for(let x=0;x<v.length;x++){const y=parseInt(v[x],10);y>=a&&(this._combined[y-a+c]=n._combined[y])}}translateToString(n,a,c,l){a=a??0,c=c??this.length,n&&(c=Math.min(c,this.getTrimmedLength())),l&&(l.length=0);let m="";for(;a<c;){const L=this._data[3*a+0],v=2097151&L,x=2097152&L?this._combined[a]:v?(0,p.stringFromCodePoint)(v):h.WHITESPACE_CELL_CHAR;if(m+=x,l)for(let y=0;y<x.length;++y)l.push(a);a+=L>>22||1}return l&&l.push(a),m}}i.BufferLine=S},4841:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,f){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return f*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(C,i)=>{function o(f,_,h){if(_===f.length-1)return f[_].getTrimmedLength();const p=!f[_].hasContent(h-1)&&f[_].getWidth(h-1)===1,w=f[_+1].getWidth(0)===2;return p&&w?h-1:h}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,_,h,p,w){const S=[];for(let u=0;u<f.length-1;u++){let n=u,a=f.get(++n);if(!a.isWrapped)continue;const c=[f.get(u)];for(;n<f.length&&a.isWrapped;)c.push(a),a=f.get(++n);if(p>=u&&p<n){u+=c.length-1;continue}let l=0,m=o(c,l,_),L=1,v=0;for(;L<c.length;){const y=o(c,L,_),b=y-v,E=h-m,R=Math.min(b,E);c[l].copyCellsFrom(c[L],v,m,R,!1),m+=R,m===h&&(l++,m=0),v+=R,v===y&&(L++,v=0),m===0&&l!==0&&c[l-1].getWidth(h-1)===2&&(c[l].copyCellsFrom(c[l-1],h-1,m++,1,!1),c[l-1].setCell(h-1,w))}c[l].replaceCells(m,h,w);let x=0;for(let y=c.length-1;y>0&&(y>l||c[y].getTrimmedLength()===0);y--)x++;x>0&&(S.push(u+c.length-x),S.push(x)),u+=c.length-1}return S},i.reflowLargerCreateNewLayout=function(f,_){const h=[];let p=0,w=_[p],S=0;for(let u=0;u<f.length;u++)if(w===u){const n=_[++p];f.onDeleteEmitter.fire({index:u-S,amount:n}),u+=n-1,S+=n,w=_[++p]}else h.push(u);return{layout:h,countRemoved:S}},i.reflowLargerApplyNewLayout=function(f,_){const h=[];for(let p=0;p<_.length;p++)h.push(f.get(_[p]));for(let p=0;p<h.length;p++)f.set(p,h[p]);f.length=_.length},i.reflowSmallerGetNewLineLengths=function(f,_,h){const p=[],w=f.map((a,c)=>o(f,c,_)).reduce((a,c)=>a+c);let S=0,u=0,n=0;for(;n<w;){if(w-n<h){p.push(w-n);break}S+=h;const a=o(f,u,_);S>a&&(S-=a,u++);const c=f[u].getWidth(S-1)===2;c&&S--;const l=c?h-1:h;p.push(l),n+=l}return p},i.getWrappedLineTrimmedLength=o},5295:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=o(8460),_=o(844),h=o(9092);class p extends _.Disposable{constructor(S,u){super(),this._optionsService=S,this._bufferService=u,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,u){this._normal.resize(S,u),this._alt.resize(S,u),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}i.BufferSet=p},511:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(482),_=o(643),h=o(3734);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const u=new p;return u.setFromCharData(S),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const n=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=o(8460),_=o(844);class h{get id(){return this._id}constructor(w){this.line=w,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(w){return this._disposables.push(w),w}}i.Marker=h,h._nextId=1},7116:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(C,i)=>{var o,f,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(o||(i.C0=o={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(f||(i.C1=f={})),function(h){h.ST=`${o.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=o(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(h,p,w,S){const u={type:0,cancel:!1,key:void 0},n=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?u.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?u.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?u.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(u.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:u.key=h.ctrlKey?"\b":f.C0.DEL,h.altKey&&(u.key=f.C0.ESC+u.key);break;case 9:if(h.shiftKey){u.key=f.C0.ESC+"[Z";break}u.key=f.C0.HT,u.cancel=!0;break;case 13:u.key=h.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,u.cancel=!0;break;case 27:u.key=f.C0.ESC,h.altKey&&(u.key=f.C0.ESC+f.C0.ESC),u.cancel=!0;break;case 37:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"D",u.key===f.C0.ESC+"[1;3D"&&(u.key=f.C0.ESC+(w?"b":"[1;5D"))):u.key=p?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"C",u.key===f.C0.ESC+"[1;3C"&&(u.key=f.C0.ESC+(w?"f":"[1;5C"))):u.key=p?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"A",w||u.key!==f.C0.ESC+"[1;3A"||(u.key=f.C0.ESC+"[1;5A")):u.key=p?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(h.metaKey)break;n?(u.key=f.C0.ESC+"[1;"+(n+1)+"B",w||u.key!==f.C0.ESC+"[1;3B"||(u.key=f.C0.ESC+"[1;5B")):u.key=p?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(u.key=f.C0.ESC+"[2~");break;case 46:u.key=n?f.C0.ESC+"[3;"+(n+1)+"~":f.C0.ESC+"[3~";break;case 36:u.key=n?f.C0.ESC+"[1;"+(n+1)+"H":p?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:u.key=n?f.C0.ESC+"[1;"+(n+1)+"F":p?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:h.shiftKey?u.type=2:h.ctrlKey?u.key=f.C0.ESC+"[5;"+(n+1)+"~":u.key=f.C0.ESC+"[5~";break;case 34:h.shiftKey?u.type=3:h.ctrlKey?u.key=f.C0.ESC+"[6;"+(n+1)+"~":u.key=f.C0.ESC+"[6~";break;case 112:u.key=n?f.C0.ESC+"[1;"+(n+1)+"P":f.C0.ESC+"OP";break;case 113:u.key=n?f.C0.ESC+"[1;"+(n+1)+"Q":f.C0.ESC+"OQ";break;case 114:u.key=n?f.C0.ESC+"[1;"+(n+1)+"R":f.C0.ESC+"OR";break;case 115:u.key=n?f.C0.ESC+"[1;"+(n+1)+"S":f.C0.ESC+"OS";break;case 116:u.key=n?f.C0.ESC+"[15;"+(n+1)+"~":f.C0.ESC+"[15~";break;case 117:u.key=n?f.C0.ESC+"[17;"+(n+1)+"~":f.C0.ESC+"[17~";break;case 118:u.key=n?f.C0.ESC+"[18;"+(n+1)+"~":f.C0.ESC+"[18~";break;case 119:u.key=n?f.C0.ESC+"[19;"+(n+1)+"~":f.C0.ESC+"[19~";break;case 120:u.key=n?f.C0.ESC+"[20;"+(n+1)+"~":f.C0.ESC+"[20~";break;case 121:u.key=n?f.C0.ESC+"[21;"+(n+1)+"~":f.C0.ESC+"[21~";break;case 122:u.key=n?f.C0.ESC+"[23;"+(n+1)+"~":f.C0.ESC+"[23~";break;case 123:u.key=n?f.C0.ESC+"[24;"+(n+1)+"~":f.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(w&&!S||!h.altKey||h.metaKey)!w||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?u.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(u.key=f.C0.US),h.key==="@"&&(u.key=f.C0.NUL)):h.keyCode===65&&(u.type=1);else{const a=_[h.keyCode],c=a?.[h.shiftKey?1:0];if(c)u.key=f.C0.ESC+c;else if(h.keyCode>=65&&h.keyCode<=90){const l=h.ctrlKey?h.keyCode-64:h.keyCode+32;let m=String.fromCharCode(l);h.shiftKey&&(m=m.toUpperCase()),u.key=f.C0.ESC+m}else if(h.keyCode===32)u.key=f.C0.ESC+(h.ctrlKey?f.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let l=h.code.slice(3,4);h.shiftKey||(l=l.toLowerCase()),u.key=f.C0.ESC+l,u.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?u.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?u.key=f.C0.NUL:h.keyCode>=51&&h.keyCode<=55?u.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?u.key=f.C0.DEL:h.keyCode===219?u.key=f.C0.ESC:h.keyCode===220?u.key=f.C0.FS:h.keyCode===221&&(u.key=f.C0.GS)}return u}},482:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let h="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let h=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[h++]=1024*(this._interim-55296)+w-56320+65536:(f[h++]=this._interim,f[h++]=w),this._interim=0}for(let w=p;w<_;++w){const S=o.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=_)return this._interim=S,h;const u=o.charCodeAt(w);56320<=u&&u<=57343?f[h++]=1024*(S-55296)+u-56320+65536:(f[h++]=S,f[h++]=u)}else S!==65279&&(f[h++]=S)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let h,p,w,S,u=0,n=0,a=0;if(this.interim[0]){let m=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let v,x=0;for(;(v=63&this.interim[++x])&&x<4;)L<<=6,L|=v;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-x;for(;a<b;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[x++]=v,L<<=6,L|=63&v}m||(y===2?L<128?a--:f[u++]=L:y===3?L<2048||L>=55296&&L<=57343||L===65279||(f[u++]=L):L<65536||L>1114111||(f[u++]=L)),this.interim.fill(0)}const c=_-4;let l=a;for(;l<_;){for(;!(!(l<c)||128&(h=o[l])||128&(p=o[l+1])||128&(w=o[l+2])||128&(S=o[l+3]));)f[u++]=h,f[u++]=p,f[u++]=w,f[u++]=S,l+=4;if(h=o[l++],h<128)f[u++]=h;else if((224&h)==192){if(l>=_)return this.interim[0]=h,u;if(p=o[l++],(192&p)!=128){l--;continue}if(n=(31&h)<<6|63&p,n<128){l--;continue}f[u++]=n}else if((240&h)==224){if(l>=_)return this.interim[0]=h,u;if(p=o[l++],(192&p)!=128){l--;continue}if(l>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[l++],(192&w)!=128){l--;continue}if(n=(15&h)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&h)==240){if(l>=_)return this.interim[0]=h,u;if(p=o[l++],(192&p)!=128){l--;continue}if(l>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[l++],(192&w)!=128){l--;continue}if(l>=_)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=w,u;if(S=o[l++],(192&S)!=128){l--;continue}if(n=(7&h)<<18|(63&p)<<12|(63&w)<<6|63&S,n<65536||n>1114111)continue;f[u++]=n}}return u}}},225:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=o(1480),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let p;i.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let w=0;w<_.length;++w)p.fill(0,_[w][0],_[w][1]+1)}}wcwidth(w){return w<32?0:w<127?1:w<65536?p[w]:function(S,u){let n,a=0,c=u.length-1;if(S<u[0][0]||S>u[c][1])return!1;for(;c>=a;)if(n=a+c>>1,S>u[n][1])a=n+1;else{if(!(S<u[n][0]))return!0;c=n-1}return!1}(w,h)?0:w>=131072&&w<=196605||w>=196608&&w<=262141?2:1}charProperties(w,S){let u=this.wcwidth(w),n=u===0&&S!==0;if(n){const a=f.UnicodeService.extractWidth(S);a===0?n=!1:a>u&&(u=a)}return f.UnicodeService.createPropertyValue(0,u,n)}}},5981:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=o(8460),_=o(844);class h extends _.Disposable{constructor(w){super(),this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(w,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let u;for(this._isSyncWriting=!0;u=this._writeBuffer.shift();){this._action(u);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(w,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(S)}_innerWrite(w=0,S=!0){const u=w||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],a=this._action(n,S);if(a){const l=m=>Date.now()-u>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(u,m);return void a.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(l)}const c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=h},5941:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function _(h,p){const w=h.toString(16),S=w.length<2?"0"+w:w;switch(p){case 4:return w[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}i.parseColor=function(h){if(!h)return;let p=h.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const w=o.exec(p);if(w){const S=w[1]?15:w[4]?255:w[7]?4095:65535;return[Math.round(parseInt(w[1]||w[4]||w[7]||w[10],16)/S*255),Math.round(parseInt(w[2]||w[5]||w[8]||w[11],16)/S*255),Math.round(parseInt(w[3]||w[6]||w[9]||w[12],16)/S*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),f.exec(p)&&[3,6,9,12].includes(p.length))){const w=p.length/3,S=[0,0,0];for(let u=0;u<3;++u){const n=parseInt(p.slice(w*u,w*u+w),16);S[u]=w===1?n<<4:w===2?n:w===3?n>>4:n>>8}return S}},i.toRgbString=function(h,p=16){const[w,S,u]=h;return`rgb:${_(w,p)}/${_(S,p)}/${_(u,p)}`}},5770:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=o(482),_=o(8742),h=o(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(S,u){this._handlers[S]===void 0&&(this._handlers[S]=[]);const n=this._handlers[S];return n.push(u),{dispose:()=>{const a=n.indexOf(u);a!==-1&&n.splice(a,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(S,u){if(this.reset(),this._ident=S,this._active=this._handlers[S]||p,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(u);else this._handlerFb(this._ident,"HOOK",u)}put(S,u,n){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(S,u,n);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(S,u,n))}unhook(S,u=!0){if(this._active.length){let n=!1,a=this._active.length-1,c=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,n=u,c=this._stack.fallThrough,this._stack.paused=!1),!c&&n===!1){for(;a>=0&&(n=this._active[a].unhook(S),n!==!0);a--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,n;a--}for(;a>=0;a--)if(n=this._active[a].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",S);this._active=p,this._ident=0}};const w=new _.Params;w.addParam(0),i.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=w,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():w,this._data="",this._hitLimit=!1}put(S,u,n){this._hitLimit||(this._data+=(0,f.utf32ToString)(S,u,n),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let u=!1;if(this._hitLimit)u=!1;else if(S&&(u=this._handler(this._data,this._params),u instanceof Promise))return u.then(n=>(this._params=w,this._data="",this._hitLimit=!1,n));return this._params=w,this._data="",this._hitLimit=!1,u}}},2015:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=o(844),_=o(8742),h=o(6242),p=o(6351);class w{constructor(a){this.table=new Uint8Array(a)}setDefault(a,c){this.table.fill(a<<4|c)}add(a,c,l,m){this.table[c<<8|a]=l<<4|m}addMany(a,c,l,m){for(let L=0;L<a.length;L++)this.table[c<<8|a[L]]=l<<4|m}}i.TransitionTable=w;const S=160;i.VT500_TRANSITION_TABLE=function(){const n=new w(4095),a=Array.apply(null,Array(256)).map((x,y)=>y),c=(x,y)=>a.slice(x,y),l=c(32,127),m=c(0,24);m.push(25),m.push.apply(m,c(28,32));const L=c(0,14);let v;for(v in n.setDefault(1,0),n.addMany(l,0,2,0),L)n.addMany([24,26,153,154],v,3,0),n.addMany(c(128,144),v,3,0),n.addMany(c(144,152),v,3,0),n.add(156,v,0,0),n.add(27,v,11,1),n.add(157,v,4,8),n.addMany([152,158,159],v,0,7),n.add(155,v,11,3),n.add(144,v,11,9);return n.addMany(m,0,3,0),n.addMany(m,1,3,1),n.add(127,1,0,1),n.addMany(m,8,0,8),n.addMany(m,3,3,3),n.add(127,3,0,3),n.addMany(m,4,3,4),n.add(127,4,0,4),n.addMany(m,6,3,6),n.addMany(m,5,3,5),n.add(127,5,0,5),n.addMany(m,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(l,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(c(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(l,7,0,7),n.addMany(m,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(c(64,127),3,7,0),n.addMany(c(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(c(48,60),4,8,4),n.addMany(c(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(c(32,64),6,0,6),n.add(127,6,0,6),n.addMany(c(64,127),6,0,0),n.addMany(c(32,48),3,9,5),n.addMany(c(32,48),5,9,5),n.addMany(c(48,64),5,0,6),n.addMany(c(64,127),5,7,0),n.addMany(c(32,48),4,9,5),n.addMany(c(32,48),1,9,2),n.addMany(c(32,48),2,9,2),n.addMany(c(48,127),2,10,0),n.addMany(c(48,80),1,10,0),n.addMany(c(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(c(96,127),1,10,0),n.add(80,1,11,9),n.addMany(m,9,0,9),n.add(127,9,0,9),n.addMany(c(28,32),9,0,9),n.addMany(c(32,48),9,9,12),n.addMany(c(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(m,11,0,11),n.addMany(c(32,128),11,0,11),n.addMany(c(28,32),11,0,11),n.addMany(m,10,0,10),n.add(127,10,0,10),n.addMany(c(28,32),10,0,10),n.addMany(c(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(c(32,48),10,9,12),n.addMany(m,12,0,12),n.add(127,12,0,12),n.addMany(c(28,32),12,0,12),n.addMany(c(32,48),12,9,12),n.addMany(c(48,64),12,0,11),n.addMany(c(64,127),12,12,13),n.addMany(c(64,127),10,12,13),n.addMany(c(64,127),9,12,13),n.addMany(m,13,13,13),n.addMany(l,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(S,0,2,0),n.add(S,8,5,8),n.add(S,6,0,6),n.add(S,11,0,11),n.add(S,13,13,13),n}();class u extends f.Disposable{constructor(a=i.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(c,l,m)=>{},this._executeHandlerFb=c=>{},this._csiHandlerFb=(c,l)=>{},this._escHandlerFb=c=>{},this._errorHandlerFb=c=>c,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,c=[64,126]){let l=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(l=a.prefix.charCodeAt(0),l&&60>l||l>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let L=0;L<a.intermediates.length;++L){const v=a.intermediates.charCodeAt(L);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");l<<=8,l|=v}}if(a.final.length!==1)throw new Error("final must be a single byte");const m=a.final.charCodeAt(0);if(c[0]>m||m>c[1])throw new Error(`final must be in range ${c[0]} .. ${c[1]}`);return l<<=8,l|=m,l}identToString(a){const c=[];for(;a;)c.push(String.fromCharCode(255&a)),a>>=8;return c.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,c){const l=this._identifier(a,[48,126]);this._escHandlers[l]===void 0&&(this._escHandlers[l]=[]);const m=this._escHandlers[l];return m.push(c),{dispose:()=>{const L=m.indexOf(c);L!==-1&&m.splice(L,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,c){this._executeHandlers[a.charCodeAt(0)]=c}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,c){const l=this._identifier(a);this._csiHandlers[l]===void 0&&(this._csiHandlers[l]=[]);const m=this._csiHandlers[l];return m.push(c),{dispose:()=>{const L=m.indexOf(c);L!==-1&&m.splice(L,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,c){return this._dcsParser.registerHandler(this._identifier(a),c)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,c){return this._oscParser.registerHandler(a,c)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,c,l,m,L){this._parseStack.state=a,this._parseStack.handlers=c,this._parseStack.handlerPos=l,this._parseStack.transition=m,this._parseStack.chunkPos=L}parse(a,c,l){let m,L=0,v=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(l===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(l===!1&&b>-1){for(;b>=0&&(m=y[b](this._params),m!==!0);b--)if(m instanceof Promise)return this._parseStack.handlerPos=b,m}this._parseStack.handlers=[];break;case 4:if(l===!1&&b>-1){for(;b>=0&&(m=y[b](),m!==!0);b--)if(m instanceof Promise)return this._parseStack.handlerPos=b,m}this._parseStack.handlers=[];break;case 6:if(L=a[this._parseStack.chunkPos],m=this._dcsParser.unhook(L!==24&&L!==26,l),m)return m;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(L=a[this._parseStack.chunkPos],m=this._oscParser.end(L!==24&&L!==26,l),m)return m;L===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let y=x;y<c;++y){switch(L=a[y],v=this._transitions.table[this.currentState<<8|(L<160?L:S)],v>>4){case 2:for(let D=y+1;;++D){if(D>=c||(L=a[D])<32||L>126&&L<S){this._printHandler(a,y,D),y=D-1;break}if(++D>=c||(L=a[D])<32||L>126&&L<S){this._printHandler(a,y,D),y=D-1;break}if(++D>=c||(L=a[D])<32||L>126&&L<S){this._printHandler(a,y,D),y=D-1;break}if(++D>=c||(L=a[D])<32||L>126&&L<S){this._printHandler(a,y,D),y=D-1;break}}break;case 3:this._executeHandlers[L]?this._executeHandlers[L]():this._executeHandlerFb(L),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:L,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const b=this._csiHandlers[this._collect<<8|L];let E=b?b.length-1:-1;for(;E>=0&&(m=b[E](this._params),m!==!0);E--)if(m instanceof Promise)return this._preserveStack(3,b,E,v,y),m;E<0&&this._csiHandlerFb(this._collect<<8|L,this._params),this.precedingJoinState=0;break;case 8:do switch(L){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(L-48)}while(++y<c&&(L=a[y])>47&&L<60);y--;break;case 9:this._collect<<=8,this._collect|=L;break;case 10:const R=this._escHandlers[this._collect<<8|L];let k=R?R.length-1:-1;for(;k>=0&&(m=R[k](),m!==!0);k--)if(m instanceof Promise)return this._preserveStack(4,R,k,v,y),m;k<0&&this._escHandlerFb(this._collect<<8|L),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|L,this._params);break;case 13:for(let D=y+1;;++D)if(D>=c||(L=a[D])===24||L===26||L===27||L>127&&L<S){this._dcsParser.put(a,y,D),y=D-1;break}break;case 14:if(m=this._dcsParser.unhook(L!==24&&L!==26),m)return this._preserveStack(6,[],0,v,y),m;L===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let D=y+1;;D++)if(D>=c||(L=a[D])<32||L>127&&L<S){this._oscParser.put(a,y,D),y=D-1;break}break;case 6:if(m=this._oscParser.end(L!==24&&L!==26),m)return this._preserveStack(5,[],0,v,y),m;L===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&v}}}i.EscapeSequenceParser=u},6242:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=o(5770),_=o(482),h=[];i.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,w){this._handlers[p]===void 0&&(this._handlers[p]=[]);const S=this._handlers[p];return S.push(w),{dispose:()=>{const u=S.indexOf(w);u!==-1&&S.splice(u,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,w,S){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(p,w,S);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(p,w,S))}start(){this.reset(),this._state=1}put(p,w,S){if(this._state!==3){if(this._state===1)for(;w<S;){const u=p[w++];if(u===59){this._state=2,this._start();break}if(u<48||57<u)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+u-48}this._state===2&&S-w>0&&this._put(p,w,S)}}end(p,w=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,u=this._active.length-1,n=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,S=w,n=this._stack.fallThrough,this._stack.paused=!1),!n&&S===!1){for(;u>=0&&(S=this._active[u].end(p),S!==!0);u--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,S;u--}for(;u>=0;u--)if(S=this._active[u].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",p);this._active=h,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,w,S){this._hitLimit||(this._data+=(0,_.utf32ToString)(p,w,S),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let w=!1;if(this._hitLimit)w=!1;else if(p&&(w=this._handler(this._data),w instanceof Promise))return w.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,w}}},8742:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class f{static fromArray(h){const p=new f;if(!h.length)return p;for(let w=Array.isArray(h[0])?1:0;w<h.length;++w){const S=h[w];if(Array.isArray(S))for(let u=0;u<S.length;++u)p.addSubParam(S[u]);else p.addParam(S)}return p}constructor(h=32,p=32){if(this.maxLength=h,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new f(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let p=0;p<this.length;++p){h.push(this.params[p]);const w=this._subParamsIdx[p]>>8,S=255&this._subParamsIdx[p];S-w>0&&h.push(Array.prototype.slice.call(this._subParams,w,S))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>o?o:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>o?o:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const p=this._subParamsIdx[h]>>8,w=255&this._subParamsIdx[h];return w-p>0?this._subParams.subarray(p,w):null}getSubParamsAll(){const h={};for(let p=0;p<this.length;++p){const w=this._subParamsIdx[p]>>8,S=255&this._subParamsIdx[p];S-w>0&&(h[p]=this._subParams.slice(w,S))}return h}addDigit(h){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const w=this._digitIsSub?this._subParams:this.params,S=w[p-1];w[p-1]=~S?Math.min(10*S+h,o):h}}i.Params=f},5741:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,f){const _={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(_),f.dispose=()=>this._wrappedAddonDispose(_),f.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let f=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===o){f=_;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(f,1)}}},8771:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=o(3785),_=o(511);i.BufferApiView=class{constructor(h,p){this._buffer=h,this.type=p}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const p=this._buffer.lines.get(h);if(p)return new f.BufferLineApiView(p)}getNullCell(){return new _.CellData}}},3785:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=o(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,h){if(!(_<0||_>=this._line.length))return h?(this._line.loadCell(_,h),h):this._line.loadCell(_,new f.CellData)}translateToString(_,h,p){return this._line.translateToString(_,h,p)}}},8285:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=o(8771),_=o(8460),h=o(844);class p extends h.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,f){return this._core.registerCsiHandler(o,_=>f(_.toArray()))}addCsiHandler(o,f){return this.registerCsiHandler(o,f)}registerDcsHandler(o,f){return this._core.registerDcsHandler(o,(_,h)=>f(_,h.toArray()))}addDcsHandler(o,f){return this.registerDcsHandler(o,f)}registerEscHandler(o,f){return this._core.registerEscHandler(o,f)}addEscHandler(o,f){return this.registerEscHandler(o,f)}registerOscHandler(o,f){return this._core.registerOscHandler(o,f)}addOscHandler(o,f){return this.registerOscHandler(o,f)}}},7090:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(C,i,o){var f=this&&this.__decorate||function(n,a,c,l){var m,L=arguments.length,v=L<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,c,l);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(v=(L<3?m(v):L>3?m(a,c,v):m(a,c))||v);return L>3&&v&&Object.defineProperty(a,c,v),v},_=this&&this.__param||function(n,a){return function(c,l){a(c,l,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const h=o(8460),p=o(844),w=o(5295),S=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let u=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new w.BufferSet(n,this))}resize(n,a){this.cols=n,this.rows=a,this.buffers.resize(n,a),this._onResize.fire({cols:n,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,a=!1){const c=this.buffer;let l;l=this._cachedBlankLine,l&&l.length===this.cols&&l.getFg(0)===n.fg&&l.getBg(0)===n.bg||(l=c.getBlankLine(n,a),this._cachedBlankLine=l),l.isWrapped=a;const m=c.ybase+c.scrollTop,L=c.ybase+c.scrollBottom;if(c.scrollTop===0){const v=c.lines.isFull;L===c.lines.length-1?v?c.lines.recycle().copyFrom(l):c.lines.push(l.clone()):c.lines.splice(L+1,0,l.clone()),v?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{const v=L-m+1;c.lines.shiftElements(m+1,v-1,-1),c.lines.set(L,l.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)}scrollLines(n,a,c){const l=this.buffer;if(n<0){if(l.ydisp===0)return;this.isUserScrolling=!0}else n+l.ydisp>=l.ybase&&(this.isUserScrolling=!1);const m=l.ydisp;l.ydisp=Math.max(Math.min(l.ydisp+n,l.ybase),0),m!==l.ydisp&&(a||this._onScroll.fire(l.ydisp))}};i.BufferService=u=f([_(0,S.IOptionsService)],u)},7994:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,f){this._charsets[o]=f,this.glevel===o&&(this.charset=f)}}},1753:function(C,i,o){var f=this&&this.__decorate||function(l,m,L,v){var x,y=arguments.length,b=y<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,L):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,m,L,v);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(b=(y<3?x(b):y>3?x(m,L,b):x(m,L))||b);return y>3&&b&&Object.defineProperty(m,L,b),b},_=this&&this.__param||function(l,m){return function(L,v){m(L,v,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const h=o(2585),p=o(8460),w=o(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:l=>l.button!==4&&l.action===1&&(l.ctrl=!1,l.alt=!1,l.shift=!1,!0)},VT200:{events:19,restrict:l=>l.action!==32},DRAG:{events:23,restrict:l=>l.action!==32||l.button!==3},ANY:{events:31,restrict:l=>!0}};function u(l,m){let L=(l.ctrl?16:0)|(l.shift?4:0)|(l.alt?8:0);return l.button===4?(L|=64,L|=l.action):(L|=3&l.button,4&l.button&&(L|=64),8&l.button&&(L|=128),l.action===32?L|=32:l.action!==0||m||(L|=3)),L}const n=String.fromCharCode,a={DEFAULT:l=>{const m=[u(l,!1)+32,l.col+32,l.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${n(m[0])}${n(m[1])}${n(m[2])}`},SGR:l=>{const m=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${u(l,!0)};${l.col};${l.row}${m}`},SGR_PIXELS:l=>{const m=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${u(l,!0)};${l.x};${l.y}${m}`}};let c=i.CoreMouseService=class extends w.Disposable{constructor(l,m){super(),this._bufferService=l,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const L of Object.keys(S))this.addProtocol(L,S[L]);for(const L of Object.keys(a))this.addEncoding(L,a[L]);this.reset()}addProtocol(l,m){this._protocols[l]=m}addEncoding(l,m){this._encodings[l]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(l){if(!this._protocols[l])throw new Error(`unknown protocol "${l}"`);this._activeProtocol=l,this._onProtocolChange.fire(this._protocols[l].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(l){if(!this._encodings[l])throw new Error(`unknown encoding "${l}"`);this._activeEncoding=l}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(l){if(l.col<0||l.col>=this._bufferService.cols||l.row<0||l.row>=this._bufferService.rows||l.button===4&&l.action===32||l.button===3&&l.action!==32||l.button!==4&&(l.action===2||l.action===3)||(l.col++,l.row++,l.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,l,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(l))return!1;const m=this._encodings[this._activeEncoding](l);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=l,!0}explainEvents(l){return{down:!!(1&l),up:!!(2&l),drag:!!(4&l),move:!!(8&l),wheel:!!(16&l)}}_equalEvents(l,m,L){if(L){if(l.x!==m.x||l.y!==m.y)return!1}else if(l.col!==m.col||l.row!==m.row)return!1;return l.button===m.button&&l.action===m.action&&l.ctrl===m.ctrl&&l.alt===m.alt&&l.shift===m.shift}};i.CoreMouseService=c=f([_(0,h.IBufferService),_(1,h.ICoreService)],c)},6975:function(C,i,o){var f=this&&this.__decorate||function(c,l,m,L){var v,x=arguments.length,y=x<3?l:L===null?L=Object.getOwnPropertyDescriptor(l,m):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(c,l,m,L);else for(var b=c.length-1;b>=0;b--)(v=c[b])&&(y=(x<3?v(y):x>3?v(l,m,y):v(l,m))||y);return x>3&&y&&Object.defineProperty(l,m,y),y},_=this&&this.__param||function(c,l){return function(m,L){l(m,L,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const h=o(1439),p=o(8460),w=o(844),S=o(2585),u=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=i.CoreService=class extends w.Disposable{constructor(c,l,m){super(),this._bufferService=c,this._logService=l,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(u),this.decPrivateModes=(0,h.clone)(n)}reset(){this.modes=(0,h.clone)(u),this.decPrivateModes=(0,h.clone)(n)}triggerDataEvent(c,l=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;l&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),l&&this._onUserInput.fire(),this._logService.debug(`sending data "${c}"`,()=>c.split("").map(L=>L.charCodeAt(0))),this._onData.fire(c)}triggerBinaryEvent(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${c}"`,()=>c.split("").map(l=>l.charCodeAt(0))),this._onBinary.fire(c))}};i.CoreService=a=f([_(0,S.IBufferService),_(1,S.ILogService),_(2,S.IOptionsService)],a)},9074:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=o(8055),_=o(8460),h=o(844),p=o(6106);let w=0,S=0;class u extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(c=>c?.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(c){if(c.marker.isDisposed)return;const l=new n(c);if(l){const m=l.marker.onDispose(()=>l.dispose());l.onDispose(()=>{l&&(this._decorations.delete(l)&&this._onDecorationRemoved.fire(l),m.dispose())}),this._decorations.insert(l),this._onDecorationRegistered.fire(l)}return l}reset(){for(const c of this._decorations.values())c.dispose();this._decorations.clear()}*getDecorationsAtCell(c,l,m){let L=0,v=0;for(const x of this._decorations.getKeyIterator(l))L=x.options.x??0,v=L+(x.options.width??1),c>=L&&c<v&&(!m||(x.options.layer??"bottom")===m)&&(yield x)}forEachDecorationAtCell(c,l,m,L){this._decorations.forEachByKey(l,v=>{w=v.options.x??0,S=w+(v.options.width??1),c>=w&&c<S&&(!m||(v.options.layer??"bottom")===m)&&L(v)})}}i.DecorationService=u;class n extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(c){super(),this.options=c,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=c.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=o(2585),_=o(8343);class h{constructor(...w){this._entries=new Map;for(const[S,u]of w)this.set(S,u)}set(w,S){const u=this._entries.get(w);return this._entries.set(w,S),u}forEach(w){for(const[S,u]of this._entries.entries())w(S,u)}has(w){return this._entries.has(w)}get(w){return this._entries.get(w)}}i.ServiceCollection=h,i.InstantiationService=class{constructor(){this._services=new h,this._services.set(f.IInstantiationService,this)}setService(p,w){this._services.set(p,w)}getService(p){return this._services.get(p)}createInstance(p,...w){const S=(0,_.getServiceDependencies)(p).sort((a,c)=>a.index-c.index),u=[];for(const a of S){const c=this._services.get(a.id);if(!c)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${a.id}.`);u.push(c)}const n=S.length>0?S[0].index:w.length;if(w.length!==n)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${n+1} conflicts with ${w.length} static arguments`);return new p(...w,...u)}}},7866:function(C,i,o){var f=this&&this.__decorate||function(n,a,c,l){var m,L=arguments.length,v=L<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,c,l);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(v=(L<3?m(v):L>3?m(a,c,v):m(a,c))||v);return L>3&&v&&Object.defineProperty(a,c,v),v},_=this&&this.__param||function(n,a){return function(c,l){a(c,l,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=o(844),p=o(2585),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let S,u=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,c){this._evalLazyOptionalParams(c),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...c)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){S=n},i.traceCall=function(n,a,c){if(typeof c.value!="function")throw new Error("not supported");const l=c.value;c.value=function(...m){if(S.logLevel!==p.LogLevelEnum.TRACE)return l.apply(this,m);S.trace(`GlyphRenderer#${l.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const L=l.apply(this,m);return S.trace(`GlyphRenderer#${l.name} return`,L),L}}},7302:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=o(8460),_=o(844),h=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class w extends _.Disposable{constructor(u){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...i.DEFAULT_OPTIONS};for(const a in u)if(a in n)try{const c=u[a];n[a]=this._sanitizeAndValidateOption(a,c)}catch(c){console.error(c)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,_.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(u,n){return this.onOptionChange(a=>{a===u&&n(this.rawOptions[u])})}onMultipleOptionChange(u,n){return this.onOptionChange(a=>{u.indexOf(a)!==-1&&n()})}_setupOptions(){const u=a=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},n=(a,c)=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);c=this._sanitizeAndValidateOption(a,c),this.rawOptions[a]!==c&&(this.rawOptions[a]=c,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const c={get:u.bind(this,a),set:n.bind(this,a)};Object.defineProperty(this.options,a,c)}}_sanitizeAndValidateOption(u,n){switch(u){case"cursorStyle":if(n||(n=i.DEFAULT_OPTIONS[u]),!function(a){return a==="block"||a==="underline"||a==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${u}`);break;case"wordSeparator":n||(n=i.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=p.includes(n)?n:i.DEFAULT_OPTIONS[u];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${u} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${u} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${u} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${u} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}i.OptionsService=w},2660:function(C,i,o){var f=this&&this.__decorate||function(w,S,u,n){var a,c=arguments.length,l=c<3?S:n===null?n=Object.getOwnPropertyDescriptor(S,u):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(w,S,u,n);else for(var m=w.length-1;m>=0;m--)(a=w[m])&&(l=(c<3?a(l):c>3?a(S,u,l):a(S,u))||l);return c>3&&l&&Object.defineProperty(S,u,l),l},_=this&&this.__param||function(w,S){return function(u,n){S(u,n,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const h=o(2585);let p=i.OscLinkService=class{constructor(w){this._bufferService=w,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(w){const S=this._bufferService.buffer;if(w.id===void 0){const m=S.addMarker(S.ybase+S.y),L={data:w,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(L,m)),this._dataByLinkId.set(L.id,L),L.id}const u=w,n=this._getEntryIdKey(u),a=this._entriesWithId.get(n);if(a)return this.addLineToLink(a.id,S.ybase+S.y),a.id;const c=S.addMarker(S.ybase+S.y),l={id:this._nextId++,key:this._getEntryIdKey(u),data:u,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(l,c)),this._entriesWithId.set(l.key,l),this._dataByLinkId.set(l.id,l),l.id}addLineToLink(w,S){const u=this._dataByLinkId.get(w);if(u&&u.lines.every(n=>n.line!==S)){const n=this._bufferService.buffer.addMarker(S);u.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(u,n))}}getLinkData(w){return this._dataByLinkId.get(w)?.data}_getEntryIdKey(w){return`${w.id};;${w.uri}`}_removeMarkerFromLink(w,S){const u=w.lines.indexOf(S);u!==-1&&(w.lines.splice(u,1),w.lines.length===0&&(w.data.id!==void 0&&this._entriesWithId.delete(w.key),this._dataByLinkId.delete(w.id)))}};i.OscLinkService=p=f([_(0,h.IBufferService)],p)},8343:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(p,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(h,p,S)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},2585:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(8343);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=o(8460),_=o(225);class h{static extractShouldJoin(w){return(1&w)!=0}static extractWidth(w){return w>>1&3}static extractCharKind(w){return w>>3}static createPropertyValue(w,S,u=!1){return(16777215&w)<<3|(3&S)<<1|(u?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const w=new _.UnicodeV6;this.register(w),this._active=w.version,this._activeProvider=w}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(w){if(!this._providers[w])throw new Error(`unknown Unicode version "${w}"`);this._active=w,this._activeProvider=this._providers[w],this._onChange.fire(w)}register(w){this._providers[w.version]=w}wcwidth(w){return this._activeProvider.wcwidth(w)}getStringCellWidth(w){let S=0,u=0;const n=w.length;for(let a=0;a<n;++a){let c=w.charCodeAt(a);if(55296<=c&&c<=56319){if(++a>=n)return S+this.wcwidth(c);const L=w.charCodeAt(a);56320<=L&&L<=57343?c=1024*(c-55296)+L-56320+65536:S+=this.wcwidth(L)}const l=this.charProperties(c,u);let m=h.extractWidth(l);h.extractShouldJoin(l)&&(m-=h.extractWidth(u)),S+=m,u=l}return S}charProperties(w,S){return this._activeProvider.charProperties(w,S)}}i.UnicodeService=h}},s={};function d(C){var i=s[C];if(i!==void 0)return i.exports;var o=s[C]={exports:{}};return r[C].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var C=g;Object.defineProperty(C,"__esModule",{value:!0}),C.Terminal=void 0;const i=d(9042),o=d(3236),f=d(844),_=d(5741),h=d(8285),p=d(7975),w=d(7090),S=["cols","rows"];class u extends f.Disposable{constructor(a){super(),this._core=this.register(new o.Terminal(a)),this._addonManager=this.register(new _.AddonManager),this._publicOptions={...this._core.options};const c=m=>this._core.options[m],l=(m,L)=>{this._checkReadonlyOptions(m),this._core.options[m]=L};for(const m in this._core.options){const L={get:c.bind(this,m),set:l.bind(this,m)};Object.defineProperty(this._publicOptions,m,L)}}_checkReadonlyOptions(a){if(S.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new w.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let c="none";switch(this._core.coreMouseService.activeProtocol){case"X10":c="x10";break;case"VT200":c="vt200";break;case"DRAG":c="drag";break;case"ANY":c="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:c,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const c in a)this._publicOptions[c]=a[c]}blur(){this._core.blur()}focus(){this._core.focus()}input(a,c=!0){this._core.input(a,c)}resize(a,c){this._verifyIntegers(a,c),this._core.resize(a,c)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}attachCustomWheelEventHandler(a){this._core.attachCustomWheelEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){return this._checkProposedApi(),this._verifyPositiveIntegers(a.x??0,a.width??0,a.height??0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,c,l){this._verifyIntegers(a,c,l),this._core.select(a,c,l)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,c){this._verifyIntegers(a,c),this._core.selectLines(a,c)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,c){this._core.write(a,c)}writeln(a,c){this._core.write(a),this._core.write(`\r
`,c)}paste(a){this._core.paste(a)}refresh(a,c){this._verifyIntegers(a,c),this._core.refresh(a,c)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return i}_verifyIntegers(...a){for(const c of a)if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const c of a)if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}}C.Terminal=u})(),g})())})(yf);var Tm=yf.exports,Sf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(d){this._terminal=d}dispose(){}fit(){const d=this.proposeDimensions();if(!d||!this._terminal||isNaN(d.cols)||isNaN(d.rows))return;const g=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(g._renderService.clear(),this._terminal.resize(d.cols,d.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const d=this._terminal._core,g=d._renderService.dimensions;if(g.css.cell.width===0||g.css.cell.height===0)return;const C=this._terminal.options.scrollback===0?0:d.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),h=o-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),p=f-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-C;return{cols:Math.max(2,Math.floor(p/g.css.cell.width)),rows:Math.max(1,Math.floor(h/g.css.cell.height))}}}})(),r})())})(Sf);var Bm=Sf.exports,wf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={965:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;const f=o(374),_=o(509),h=o(855),p=o(859),w=o(381),S=11,u=S*Float32Array.BYTES_PER_ELEMENT;let n,a=0,c=0,l=0;class m extends p.Disposable{constructor(v,x,y,b){super(),this._terminal=v,this._gl=x,this._dimensions=y,this._optionsService=b,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const E=this._gl;_.TextureAtlas.maxAtlasPages===void 0&&(_.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),_.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,w.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(N){let I="";for(let B=1;B<N;B++)I+=` else if (v_texpage == ${B}) { outColor = texture(u_texture[${B}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${N}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${I}
}`}(_.TextureAtlas.maxAtlasPages))),this.register((0,p.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);const R=new Float32Array([0,0,1,0,0,1,1,1]),k=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(k))),E.bindBuffer(E.ARRAY_BUFFER,k),E.bufferData(E.ARRAY_BUFFER,R,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const D=new Uint8Array([0,1,2,3]),T=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(T))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,T),E.bufferData(E.ELEMENT_ARRAY_BUFFER,D,E.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(E.createBuffer()),this.register((0,p.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,u,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,u,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,u,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,u,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,u,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,u,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);const j=new Int32Array(_.TextureAtlas.maxAtlasPages);for(let N=0;N<_.TextureAtlas.maxAtlasPages;N++)j[N]=N;E.uniform1iv(this._textureLocation,j),E.uniformMatrix4fv(this._projectionLocation,!1,w.PROJECTION_MATRIX),this._atlasTextures=[];for(let N=0;N<_.TextureAtlas.maxAtlasPages;N++){const I=new w.GLTexture((0,f.throwIfFalsy)(E.createTexture()));this.register((0,p.toDisposable)(()=>E.deleteTexture(I.texture))),E.activeTexture(E.TEXTURE0+N),E.bindTexture(E.TEXTURE_2D,I.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[N]=I}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(v,x,y,b,E,R,k,D,T){this._updateCell(this._vertices.attributes,v,x,y,b,E,R,k,D,T)}_updateCell(v,x,y,b,E,R,k,D,T,j){a=(y*this._terminal.cols+x)*S,b!==h.NULL_CELL_CODE&&b!==void 0?this._atlas&&(n=D&&D.length>1?this._atlas.getRasterizedGlyphCombinedChar(D,E,R,k,!1):this._atlas.getRasterizedGlyph(b,E,R,k,!1),c=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),E!==j&&n.offset.x>c?(l=n.offset.x-c,v[a]=-(n.offset.x-l)+this._dimensions.device.char.left,v[a+1]=-n.offset.y+this._dimensions.device.char.top,v[a+2]=(n.size.x-l)/this._dimensions.device.canvas.width,v[a+3]=n.size.y/this._dimensions.device.canvas.height,v[a+4]=n.texturePage,v[a+5]=n.texturePositionClipSpace.x+l/this._atlas.pages[n.texturePage].canvas.width,v[a+6]=n.texturePositionClipSpace.y,v[a+7]=n.sizeClipSpace.x-l/this._atlas.pages[n.texturePage].canvas.width,v[a+8]=n.sizeClipSpace.y):(v[a]=-n.offset.x+this._dimensions.device.char.left,v[a+1]=-n.offset.y+this._dimensions.device.char.top,v[a+2]=n.size.x/this._dimensions.device.canvas.width,v[a+3]=n.size.y/this._dimensions.device.canvas.height,v[a+4]=n.texturePage,v[a+5]=n.texturePositionClipSpace.x,v[a+6]=n.texturePositionClipSpace.y,v[a+7]=n.sizeClipSpace.x,v[a+8]=n.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,f.allowRescaling)(b,T,n.size.x,this._dimensions.device.cell.width)&&(v[a+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):v.fill(0,a,a+S-1-2)}clear(){const v=this._terminal,x=v.cols*v.rows*S;this._vertices.count!==x?this._vertices.attributes=new Float32Array(x):this._vertices.attributes.fill(0);let y=0;for(;y<this._vertices.attributesBuffers.length;y++)this._vertices.count!==x?this._vertices.attributesBuffers[y]=new Float32Array(x):this._vertices.attributesBuffers[y].fill(0);this._vertices.count=x,y=0;for(let b=0;b<v.rows;b++)for(let E=0;E<v.cols;E++)this._vertices.attributes[y+9]=E/v.cols,this._vertices.attributes[y+10]=b/v.rows,y+=S}handleResize(){const v=this._gl;v.useProgram(this._program),v.viewport(0,0,v.canvas.width,v.canvas.height),v.uniform2f(this._resolutionLocation,v.canvas.width,v.canvas.height),this.clear()}render(v){if(!this._atlas)return;const x=this._gl;x.useProgram(this._program),x.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const y=this._vertices.attributesBuffers[this._activeBuffer];let b=0;for(let E=0;E<v.lineLengths.length;E++){const R=E*this._terminal.cols*S,k=this._vertices.attributes.subarray(R,R+v.lineLengths[E]*S);y.set(k,b),b+=k.length}x.bindBuffer(x.ARRAY_BUFFER,this._attributesBuffer),x.bufferData(x.ARRAY_BUFFER,y.subarray(0,b),x.STREAM_DRAW);for(let E=0;E<this._atlas.pages.length;E++)this._atlas.pages[E].version!==this._atlasTextures[E].version&&this._bindAtlasPageTexture(x,this._atlas,E);x.drawElementsInstanced(x.TRIANGLE_STRIP,4,x.UNSIGNED_BYTE,0,b/S)}setAtlas(v){this._atlas=v;for(const x of this._atlasTextures)x.version=-1}_bindAtlasPageTexture(v,x,y){v.activeTexture(v.TEXTURE0+y),v.bindTexture(v.TEXTURE_2D,this._atlasTextures[y].texture),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,x.pages[y].canvas),v.generateMipmap(v.TEXTURE_2D),this._atlasTextures[y].version=x.pages[y].version}setDimensions(v){this._dimensions=v}}i.GlyphRenderer=m},742:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;const f=o(374),_=o(859),h=o(310),p=o(381),w=8*Float32Array.BYTES_PER_ELEMENT;class S{constructor(){this.attributes=new Float32Array(160),this.count=0}}let u=0,n=0,a=0,c=0,l=0,m=0,L=0;class v extends _.Disposable{constructor(y,b,E,R){super(),this._terminal=y,this._gl=b,this._dimensions=E,this._themeService=R,this._vertices=new S,this._verticesCursor=new S;const k=this._gl;this._program=(0,f.throwIfFalsy)((0,p.createProgram)(k,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,_.toDisposable)(()=>k.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(k.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=k.createVertexArray(),k.bindVertexArray(this._vertexArrayObject);const D=new Float32Array([0,0,1,0,0,1,1,1]),T=k.createBuffer();this.register((0,_.toDisposable)(()=>k.deleteBuffer(T))),k.bindBuffer(k.ARRAY_BUFFER,T),k.bufferData(k.ARRAY_BUFFER,D,k.STATIC_DRAW),k.enableVertexAttribArray(3),k.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const j=new Uint8Array([0,1,2,3]),N=k.createBuffer();this.register((0,_.toDisposable)(()=>k.deleteBuffer(N))),k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,N),k.bufferData(k.ELEMENT_ARRAY_BUFFER,j,k.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(k.createBuffer()),this.register((0,_.toDisposable)(()=>k.deleteBuffer(this._attributesBuffer))),k.bindBuffer(k.ARRAY_BUFFER,this._attributesBuffer),k.enableVertexAttribArray(0),k.vertexAttribPointer(0,2,k.FLOAT,!1,w,0),k.vertexAttribDivisor(0,1),k.enableVertexAttribArray(1),k.vertexAttribPointer(1,2,k.FLOAT,!1,w,2*Float32Array.BYTES_PER_ELEMENT),k.vertexAttribDivisor(1,1),k.enableVertexAttribArray(2),k.vertexAttribPointer(2,4,k.FLOAT,!1,w,4*Float32Array.BYTES_PER_ELEMENT),k.vertexAttribDivisor(2,1),this._updateCachedColors(R.colors),this.register(this._themeService.onChangeColors(I=>{this._updateCachedColors(I),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(y){const b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,y.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,y.count)}handleResize(){this._updateViewportRectangle()}setDimensions(y){this._dimensions=y}_updateCachedColors(y){this._bgFloat=this._colorToFloat32Array(y.background),this._cursorFloat=this._colorToFloat32Array(y.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(y){const b=this._terminal,E=this._vertices;let R,k,D,T,j,N,I,B,M,A,P,H=1;for(R=0;R<b.rows;R++){for(D=-1,T=0,j=0,N=!1,k=0;k<b.cols;k++)I=(R*b.cols+k)*h.RENDER_MODEL_INDICIES_PER_CELL,B=y.cells[I+h.RENDER_MODEL_BG_OFFSET],M=y.cells[I+h.RENDER_MODEL_FG_OFFSET],A=!!(67108864&M),(B!==T||M!==j&&(N||A))&&((T!==0||N&&j!==0)&&(P=8*H++,this._updateRectangle(E,P,j,T,D,k,R)),D=k,T=B,j=M,N=A);(T!==0||N&&j!==0)&&(P=8*H++,this._updateRectangle(E,P,j,T,D,b.cols,R))}E.count=H}updateCursor(y){const b=this._verticesCursor,E=y.cursor;if(!E||E.style==="block")return void(b.count=0);let R,k=0;E.style!=="bar"&&E.style!=="outline"||(R=8*k++,this._addRectangleFloat(b.attributes,R,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.style==="bar"?E.dpr*E.cursorWidth:E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),E.style!=="underline"&&E.style!=="outline"||(R=8*k++,this._addRectangleFloat(b.attributes,R,E.x*this._dimensions.device.cell.width,(E.y+1)*this._dimensions.device.cell.height-E.dpr,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat)),E.style==="outline"&&(R=8*k++,this._addRectangleFloat(b.attributes,R,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat),R=8*k++,this._addRectangleFloat(b.attributes,R,(E.x+E.width)*this._dimensions.device.cell.width-E.dpr,E.y*this._dimensions.device.cell.height,E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=k}_updateRectangle(y,b,E,R,k,D,T){if(67108864&E)switch(50331648&E){case 16777216:case 33554432:u=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:u=(16777215&E)<<8;break;default:u=this._themeService.colors.foreground.rgba}else switch(50331648&R){case 16777216:case 33554432:u=this._themeService.colors.ansi[255&R].rgba;break;case 50331648:u=(16777215&R)<<8;break;default:u=this._themeService.colors.background.rgba}y.attributes.length<b+4&&(y.attributes=(0,p.expandFloat32Array)(y.attributes,this._terminal.rows*this._terminal.cols*8)),n=k*this._dimensions.device.cell.width,a=T*this._dimensions.device.cell.height,c=(u>>24&255)/255,l=(u>>16&255)/255,m=(u>>8&255)/255,L=1,this._addRectangle(y.attributes,b,n,a,(D-k)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,c,l,m,L)}_addRectangle(y,b,E,R,k,D,T,j,N,I){y[b]=E/this._dimensions.device.canvas.width,y[b+1]=R/this._dimensions.device.canvas.height,y[b+2]=k/this._dimensions.device.canvas.width,y[b+3]=D/this._dimensions.device.canvas.height,y[b+4]=T,y[b+5]=j,y[b+6]=N,y[b+7]=I}_addRectangleFloat(y,b,E,R,k,D,T){y[b]=E/this._dimensions.device.canvas.width,y[b+1]=R/this._dimensions.device.canvas.height,y[b+2]=k/this._dimensions.device.canvas.width,y[b+3]=D/this._dimensions.device.canvas.height,y[b+4]=T[0],y[b+5]=T[1],y[b+6]=T[2],y[b+7]=T[3]}_colorToFloat32Array(y){return new Float32Array([(y.rgba>>24&255)/255,(y.rgba>>16&255)/255,(y.rgba>>8&255)/255,(255&y.rgba)/255])}}i.RectangleRenderer=v},310:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;const f=o(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,f.createSelectionRenderModel)()}resize(_,h){const p=_*h*i.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(h))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;const f=o(820),_=o(274),h=o(627),p=o(457),w=o(56),S=o(374),u=o(345),n=o(859),a=o(147),c=o(782),l=o(855),m=o(965),L=o(742),v=o(310),x=o(733);class y extends n.Disposable{constructor(k,D,T,j,N,I,B,M,A){super(),this._terminal=k,this._characterJoinerService=D,this._charSizeService=T,this._coreBrowserService=j,this._coreService=N,this._decorationService=I,this._optionsService=B,this._themeService=M,this._cursorBlinkStateManager=new n.MutableDisposable,this._charAtlasDisposable=this.register(new n.MutableDisposable),this._observerDisposable=this.register(new n.MutableDisposable),this._model=new v.RenderModel,this._workCell=new c.CellData,this._workCell2=new c.CellData,this._rectangleRenderer=this.register(new n.MutableDisposable),this._glyphRenderer=this.register(new n.MutableDisposable),this._onChangeTextureAtlas=this.register(new u.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new u.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new u.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new _.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new x.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,B,this._themeService)],this.dimensions=(0,S.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(B.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");const P={antialias:!1,depth:!1,preserveDrawingBuffer:A};if(this._gl=this._canvas.getContext("webgl2",P),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",H=>{console.log("webglcontextlost event received"),H.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(H)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",H=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,h.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,w.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(H,W)=>this._setCanvasDevicePixelDimensions(H,W)),this.register(this._coreBrowserService.onWindowChange(H=>{this._observerDisposable.value=(0,w.observeDevicePixelDimensions)(this._canvas,H,(W,z)=>this._setCanvasDevicePixelDimensions(W,z))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,n.toDisposable)(()=>{for(const H of this._renderLayers)H.dispose();this._canvas.parentElement?.removeChild(this._canvas),(0,h.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._charAtlas?.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(k,D){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const T of this._renderLayers)T.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.value?.setDimensions(this.dimensions),this._rectangleRenderer.value?.handleResize(),this._glyphRenderer.value?.setDimensions(this.dimensions),this._glyphRenderer.value?.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const k of this._renderLayers)k.handleBlur(this._terminal);this._cursorBlinkStateManager.value?.pause(),this._requestRedrawViewport()}handleFocus(){for(const k of this._renderLayers)k.handleFocus(this._terminal);this._cursorBlinkStateManager.value?.resume(),this._requestRedrawViewport()}handleSelectionChanged(k,D,T){for(const j of this._renderLayers)j.handleSelectionChanged(this._terminal,k,D,T);this._model.selection.update(this._core,k,D,T),this._requestRedrawViewport()}handleCursorMove(){for(const k of this._renderLayers)k.handleCursorMove(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new L.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new m.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const k=(0,h.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==k&&(this._onChangeTextureAtlas.fire(k.pages[0].canvas),this._charAtlasDisposable.value=(0,n.getDisposeArrayDisposable)([(0,u.forwardEvent)(k.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,u.forwardEvent)(k.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=k,this._charAtlas.warmUp(),this._glyphRenderer.value?.setAtlas(this._charAtlas)}_clearModel(k){this._model.clear(),k&&this._glyphRenderer.value?.clear()}clearTextureAtlas(){this._charAtlas?.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const k of this._renderLayers)k.reset(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(k){return-1}deregisterCharacterJoiner(k){return!1}renderRows(k,D){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const T of this._renderLayers)T.handleGridChanged(this._terminal,k,D);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(k,D),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new p.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(k,D){const T=this._core;let j,N,I,B,M,A,P,H,W,z,J,Y,$,O,U=this._workCell;k=E(k,T.rows-1,0),D=E(D,T.rows-1,0);const K=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Q=K-T.buffer.ydisp,Z=Math.min(this._terminal.buffer.active.cursorX,T.cols-1);let he=-1;const ee=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ue=!1;for(N=k;N<=D;N++)for(I=N+T.buffer.ydisp,B=T.buffer.lines.get(I),this._model.lineLengths[N]=0,M=this._characterJoinerService.getJoinedCharacters(I),$=0;$<T.cols;$++)if(j=this._cellColorResolver.result.bg,B.loadCell($,U),$===0&&(j=this._cellColorResolver.result.bg),A=!1,P=$,M.length>0&&$===M[0][0]&&(A=!0,H=M.shift(),U=new b(U,B.translateToString(!0,H[0],H[1]),H[1]-H[0]),P=H[1]-1),W=U.getChars(),z=U.getCode(),Y=(N*T.cols+$)*v.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(U,$,I,this.dimensions.device.cell.width),ee&&I===K&&($===Z&&(this._model.cursor={x:Z,y:Q,width:U.getWidth(),style:this._coreBrowserService.isFocused?T.options.cursorStyle||"block":T.options.cursorInactiveStyle,cursorWidth:T.options.cursorWidth,dpr:this._devicePixelRatio},he=Z+U.getWidth()-1),$>=Z&&$<=he&&(this._coreBrowserService.isFocused&&(T.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&T.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),z!==l.NULL_CELL_CODE&&(this._model.lineLengths[N]=$+1),(this._model.cells[Y]!==z||this._model.cells[Y+v.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[Y+v.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[Y+v.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ue=!0,W.length>1&&(z|=v.COMBINED_CHAR_BIT_MASK),this._model.cells[Y]=z,this._model.cells[Y+v.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Y+v.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Y+v.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,J=U.getWidth(),this._glyphRenderer.value.updateCell($,N,z,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,W,J,j),A))for(U=this._workCell,$++;$<P;$++)O=(N*T.cols+$)*v.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell($,N,l.NULL_CELL_CODE,0,0,0,l.NULL_CELL_CHAR,0,0),this._model.cells[O]=l.NULL_CELL_CODE,this._model.cells[O+v.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+v.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+v.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ue&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(k,D){this._canvas.width===k&&this._canvas.height===D||(this._canvas.width=k,this._canvas.height=D,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const k=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:k,end:k})}}i.WebglRenderer=y;class b extends a.AttributeData{constructor(k,D,T){super(),this.content=0,this.combinedData="",this.fg=k.fg,this.bg=k.bg,this.combinedData=D,this._width=T}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(k){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function E(R,k,D=0){return Math.max(Math.min(R,k),D)}i.JoinedCellData=b},381:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;const f=o(374);function _(h,p,w){const S=(0,f.throwIfFalsy)(h.createShader(p));if(h.shaderSource(S,w),h.compileShader(S),h.getShaderParameter(S,h.COMPILE_STATUS))return S;console.error(h.getShaderInfoLog(S)),h.deleteShader(S)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(h,p,w){const S=(0,f.throwIfFalsy)(h.createProgram());if(h.attachShader(S,(0,f.throwIfFalsy)(_(h,h.VERTEX_SHADER,p))),h.attachShader(S,(0,f.throwIfFalsy)(_(h,h.FRAGMENT_SHADER,w))),h.linkProgram(S),h.getProgramParameter(S,h.LINK_STATUS))return S;console.error(h.getProgramInfoLog(S)),h.deleteProgram(S)},i.createShader=_,i.expandFloat32Array=function(h,p){const w=Math.min(2*h.length,p),S=new Float32Array(w);for(let u=0;u<h.length;u++)S[u]=h[u];return S},i.GLTexture=class{constructor(h){this.texture=h,this.version=-1}}},592:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(627),_=o(237),h=o(374),p=o(859);class w extends p.Disposable{constructor(u,n,a,c,l,m,L,v){super(),this._container=n,this._alpha=l,this._coreBrowserService=m,this._optionsService=L,this._themeService=v,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${a}-layer`),this._canvas.style.zIndex=c.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(x=>{this._refreshCharAtlas(u,x),this.reset(u)})),this.register((0,p.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,h.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(u){}handleFocus(u){}handleCursorMove(u){}handleGridChanged(u,n,a){}handleSelectionChanged(u,n,a,c=!1){}_setTransparency(u,n){if(n===this._alpha)return;const a=this._canvas;this._alpha=n,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,a),this._refreshCharAtlas(u,this._themeService.colors),this.handleGridChanged(u,0,u.rows-1)}_refreshCharAtlas(u,n){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,f.acquireTextureAtlas)(u,this._optionsService.rawOptions,n,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(u,n){this._deviceCellWidth=n.device.cell.width,this._deviceCellHeight=n.device.cell.height,this._deviceCharWidth=n.device.char.width,this._deviceCharHeight=n.device.char.height,this._deviceCharLeft=n.device.char.left,this._deviceCharTop=n.device.char.top,this._canvas.width=n.device.canvas.width,this._canvas.height=n.device.canvas.height,this._canvas.style.width=`${n.css.canvas.width}px`,this._canvas.style.height=`${n.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(u,this._themeService.colors)}_fillBottomLineAtCells(u,n,a=1){this._ctx.fillRect(u*this._deviceCellWidth,(n+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,a*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(u,n,a,c){this._alpha?this._ctx.clearRect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,c*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,c*this._deviceCellHeight))}_fillCharTrueColor(u,n,a,c){this._ctx.font=this._getFont(u,!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipCell(a,c,n.getWidth()),this._ctx.fillText(n.getChars(),a*this._deviceCellWidth+this._deviceCharLeft,c*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(u,n,a){this._ctx.beginPath(),this._ctx.rect(u*this._deviceCellWidth,n*this._deviceCellHeight,a*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(u,n,a){return`${a?"italic":""} ${n?u.options.fontWeightBold:u.options.fontWeight} ${u.options.fontSize*this._coreBrowserService.dpr}px ${u.options.fontFamily}`}}i.BaseRenderLayer=w},733:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),h=o(592);class p extends h.BaseRenderLayer{constructor(S,u,n,a,c,l,m){super(n,S,"link",u,!0,c,l,m),this.register(a.onShowLinkUnderline(L=>this._handleShowLinkUnderline(L))),this.register(a.onHideLinkUnderline(L=>this._handleHideLinkUnderline(L)))}resize(S,u){super.resize(S,u),this._state=void 0}reset(S){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const S=this._state.y2-this._state.y1-1;S>0&&this._clearCells(0,this._state.y1+1,this._state.cols,S),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(S){if(S.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:S.fg!==void 0&&(0,f.is256Color)(S.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[S.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,S.y1===S.y2)this._fillBottomLineAtCells(S.x1,S.y1,S.x2-S.x1);else{this._fillBottomLineAtCells(S.x1,S.y1,S.cols-S.x1);for(let u=S.y1+1;u<S.y2;u++)this._fillBottomLineAtCells(0,u,S.cols);this._fillBottomLineAtCells(0,S.y2,S.x2)}this._state=S}_handleHideLinkUnderline(S){this._clearCurrentLink()}}i.LinkRenderLayer=p},820:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,_,h){o.addEventListener(f,_,h);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(f,_,h))}}}},274:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),h=o(374);let p,w=0,S=0,u=!1,n=!1,a=!1,c=0;i.CellColorResolver=class{constructor(l,m,L,v,x,y){this._terminal=l,this._optionService=m,this._selectionRenderModel=L,this._decorationService=v,this._coreBrowserService=x,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(l,m,L,v){if(this.result.bg=l.bg,this.result.fg=l.fg,this.result.ext=268435456&l.bg?l.extended.ext:0,S=0,w=0,n=!1,u=!1,a=!1,p=this._themeService.colors,c=0,l.getCode()!==f.NULL_CELL_CODE&&l.extended.underlineStyle===4){const x=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));c=m*v%(2*Math.round(x))}if(this._decorationService.forEachDecorationAtCell(m,L,"bottom",x=>{x.backgroundColorRGB&&(S=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,L),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:S=(16777215&this.result.fg)<<8|255;break;default:S=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:S=(16777215&this.result.bg)<<8|255}S=_.rgba.blend(S,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else S=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(w=p.selectionForeground.rgba>>8&16777215,u=!0),(0,h.treatGlyphAsBackgroundColor)(l.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))w=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}w=_.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}u=!0}}this._decorationService.forEachDecorationAtCell(m,L,"top",x=>{x.backgroundColorRGB&&(S=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),n&&(S=a?-16777216&l.bg&-134217729|S|50331648:-16777216&l.bg|S|50331648),u&&(w=-16777216&l.fg&-67108865|w|50331648),67108864&this.result.fg&&(n&&!u&&(w=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,u=!0),!n&&u&&(S=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?S:this.result.bg,this.result.fg=u?w:this.result.fg,this.result.ext&=536870911,this.result.ext|=c<<29&3758096384}}},627:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),h=[];i.acquireTextureAtlas=function(p,w,S,u,n,a,c,l){const m=(0,_.generateConfig)(u,n,a,c,w,S,l);for(let x=0;x<h.length;x++){const y=h[x],b=y.ownedBy.indexOf(p);if(b>=0){if((0,_.configEquals)(y.config,m))return y.atlas;y.ownedBy.length===1?(y.atlas.dispose(),h.splice(x,1)):y.ownedBy.splice(b,1);break}}for(let x=0;x<h.length;x++){const y=h[x];if((0,_.configEquals)(y.config,m))return y.ownedBy.push(p),y.atlas}const L=p._core,v={atlas:new f.TextureAtlas(document,m,L.unicodeService),config:m,ownedBy:[p]};return h.push(v),v.atlas},i.removeTerminalFromCache=function(p){for(let w=0;w<h.length;w++){const S=h[w].ownedBy.indexOf(p);if(S!==-1){h[w].ownedBy.length===1?(h[w].atlas.dispose(),h.splice(w,1)):h[w].ownedBy.splice(S,1);break}}}},197:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,h,p,w,S,u,n){const a={foreground:u.foreground,background:u.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:u.ansi.slice(),contrastCache:u.contrastCache,halfContrastCache:u.halfContrastCache};return{customGlyphs:S.customGlyphs,devicePixelRatio:n,letterSpacing:S.letterSpacing,lineHeight:S.lineHeight,deviceCellWidth:_,deviceCellHeight:h,deviceCharWidth:p,deviceCharHeight:w,fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:S.fontWeightBold,allowTransparency:S.allowTransparency,drawBoldTextInBrightColors:S.drawBoldTextInBrightColors,minimumContrastRatio:S.minimumContrastRatio,colors:a}},i.configEquals=function(_,h){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==h.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===h.devicePixelRatio&&_.customGlyphs===h.customGlyphs&&_.lineHeight===h.lineHeight&&_.letterSpacing===h.letterSpacing&&_.fontFamily===h.fontFamily&&_.fontSize===h.fontSize&&_.fontWeight===h.fontWeight&&_.fontWeightBold===h.fontWeightBold&&_.allowTransparency===h.allowTransparency&&_.deviceCharWidth===h.deviceCharWidth&&_.deviceCharHeight===h.deviceCharHeight&&_.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&_.minimumContrastRatio===h.minimumContrastRatio&&_.colors.foreground.rgba===h.colors.foreground.rgba&&_.colors.background.rgba===h.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},1 L${.5-u},.5 L1,.5 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M1,${.5-n} L${.5-u},${.5-n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M${.5+u},1 L${.5+u},.5 L0,.5 M${.5-u},.5 L${.5-u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5+u},${.5-n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(u,n)=>`M1,.5 L${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0 M1,${.5+n} L${.5-u},${.5+n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(u,n)=>`M0,.5 L${.5+u},.5 L${.5+u},0 M${.5-u},.5 L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M0,${.5+n} L${.5+u},${.5+n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1 M${.5+u},.5 L1,.5`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M0,.5 L${.5-u},.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M${.5+u},0 L${.5+u},1 M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},1 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(u,n,a,c,l,m,L,v){const x=i.blockElementDefinitions[n];if(x)return function(R,k,D,T,j,N){for(let I=0;I<k.length;I++){const B=k[I],M=j/8,A=N/8;R.fillRect(D+B.x*M,T+B.y*A,B.w*M,B.h*A)}}(u,x,a,c,l,m),!0;const y=_[n];if(y)return function(R,k,D,T,j,N){let I=h.get(k);I||(I=new Map,h.set(k,I));const B=R.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let M=I.get(B);if(!M){const A=k[0].length,P=k.length,H=R.canvas.ownerDocument.createElement("canvas");H.width=A,H.height=P;const W=(0,f.throwIfFalsy)(H.getContext("2d")),z=new ImageData(A,P);let J,Y,$,O;if(B.startsWith("#"))J=parseInt(B.slice(1,3),16),Y=parseInt(B.slice(3,5),16),$=parseInt(B.slice(5,7),16),O=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[J,Y,$,O]=B.substring(5,B.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<P;U++)for(let K=0;K<A;K++)z.data[4*(U*A+K)]=J,z.data[4*(U*A+K)+1]=Y,z.data[4*(U*A+K)+2]=$,z.data[4*(U*A+K)+3]=k[U][K]*(255*O);W.putImageData(z,0,0),M=(0,f.throwIfFalsy)(R.createPattern(H,null)),I.set(B,M)}R.fillStyle=M,R.fillRect(D,T,j,N)}(u,y,a,c,l,m),!0;const b=i.boxDrawingDefinitions[n];if(b)return function(R,k,D,T,j,N,I){R.strokeStyle=R.fillStyle;for(const[B,M]of Object.entries(k)){let A;R.beginPath(),R.lineWidth=I*Number.parseInt(B),A=typeof M=="function"?M(.15,.15/N*j):M;for(const P of A.split(" ")){const H=P[0],W=w[H];if(!W){console.error(`Could not find drawing instructions for "${H}"`);continue}const z=P.substring(1).split(",");z[0]&&z[1]&&W(R,S(z,j,N,D,T,!0,I))}R.stroke(),R.closePath()}}(u,b,a,c,l,m,v),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(R,k,D,T,j,N,I,B){const M=new Path2D;M.rect(D,T,j,N),R.clip(M),R.beginPath();const A=I/12;R.lineWidth=B*A;for(const P of k.d.split(" ")){const H=P[0],W=w[H];if(!W){console.error(`Could not find drawing instructions for "${H}"`);continue}const z=P.substring(1).split(",");z[0]&&z[1]&&W(R,S(z,j,N,D,T,!1,B,(k.leftPadding??0)*(A/2),(k.rightPadding??0)*(A/2)))}k.type===1?(R.strokeStyle=R.fillStyle,R.stroke()):R.fill(),R.closePath()}(u,E,a,c,l,m,L,v),!0)};const h=new Map;function p(u,n,a=0){return Math.max(Math.min(u,n),a)}const w={C:(u,n)=>u.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(u,n)=>u.lineTo(n[0],n[1]),M:(u,n)=>u.moveTo(n[0],n[1])};function S(u,n,a,c,l,m,L,v=0,x=0){const y=u.map(b=>parseFloat(b)||parseInt(b));if(y.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<y.length;b+=2)y[b]*=n-v*L-x*L,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,n,0)),y[b]+=c+v*L;for(let b=1;b<y.length;b+=2)y[b]*=a,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,a,0)),y[b]+=l;return y}},56:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,h,p){let w=new h.ResizeObserver(S=>{const u=S.find(c=>c.target===_);if(!u)return;if(!("devicePixelContentBoxSize"in u))return w?.disconnect(),void(w=void 0);const n=u.devicePixelContentBoxSize[0].inlineSize,a=u.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{w.observe(_,{box:["device-pixel-content-box"]})}catch{w.disconnect(),w=void 0}return(0,f.toDisposable)(()=>w?.disconnect())}},374:(C,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,h,p,w){return h===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(h){return 9472<=h&&h<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,h,p=0){return(_-(2*Math.round(h)-p))%(2*Math.round(h))}},296:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,h,p,w=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const S=_.buffers.active.ydisp,u=h[1]-S,n=p[1]-S,a=Math.max(u,0),c=Math.min(n,_.rows-1);a>=_.rows||c<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=c,this.startCol=h[0],this.endCol=p[0])}isCellSelected(_,h,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),h=o(374),p=o(160),w=o(345),S=o(485),u=o(385),n=o(147),a=o(855),c={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let l;class m{get pages(){return this._pages}constructor(b,E,R){this._document=b,this._config=E,this._unicodeService=R,this._didWarmUp=!1,this._cacheMap=new S.FourKeyMap,this._cacheMapCombined=new S.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new w.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new w.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=x(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const b=new u.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const R=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,R)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(I=>2*I.canvas.width<=(m.maxTextureSize||4096)).sort((I,B)=>B.canvas.width!==I.canvas.width?B.canvas.width-I.canvas.width:B.percentageUsed-I.percentageUsed);let R=-1,k=0;for(let I=0;I<E.length;I++)if(E[I].canvas.width!==k)R=I,k=E[I].canvas.width;else if(I-R==3)break;const D=E.slice(R,R+4),T=D.map(I=>I.glyphs[0].texturePage).sort((I,B)=>I>B?1:-1),j=this.pages.length-D.length,N=this._mergePages(D,j);N.version++;for(let I=T.length-1;I>=0;I--)this._deletePage(T[I]);this.pages.push(N),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(N.canvas)}const b=new L(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){const R=2*b[0].canvas.width,k=new L(this._document,R,b);for(const[D,T]of b.entries()){const j=D*T.canvas.width%R,N=Math.floor(D/2)*T.canvas.height;k.ctx.drawImage(T.canvas,j,N);for(const B of T.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/R,B.sizeClipSpace.y=B.size.y/R,B.texturePosition.x+=j,B.texturePosition.y+=N,B.texturePositionClipSpace.x=B.texturePosition.x/R,B.texturePositionClipSpace.y=B.texturePosition.y/R;this._onRemoveTextureAtlasCanvas.fire(T.canvas);const I=this._activePages.indexOf(T);I!==-1&&this._activePages.splice(I,1)}return k}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){const R=this._pages[E];for(const k of R.glyphs)k.texturePage--;R.version++}}getRasterizedGlyphCombinedChar(b,E,R,k,D){return this._getFromCacheMap(this._cacheMapCombined,b,E,R,k,D)}getRasterizedGlyph(b,E,R,k,D){return this._getFromCacheMap(this._cacheMap,b,E,R,k,D)}_getFromCacheMap(b,E,R,k,D,T=!1){return l=b.get(E,R,k,D),l||(l=this._drawToCache(E,R,k,D,T),b.set(E,R,k,D,l)),l}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,R,k){if(this._config.allowTransparency)return p.NULL_COLOR;let D;switch(b){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(E);break;case 50331648:const T=n.AttributeData.toColorRGB(E);D=p.channels.toColor(T[0],T[1],T[2]);break;default:D=R?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return D}_getForegroundColor(b,E,R,k,D,T,j,N,I,B){const M=this._getMinimumContrastColor(b,E,R,k,D,T,j,I,N,B);if(M)return M;let A;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&T<8&&(T+=8),A=this._getColorFromAnsiIndex(T);break;case 50331648:const P=n.AttributeData.toColorRGB(T);A=p.channels.toColor(P[0],P[1],P[2]);break;default:A=j?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=p.color.opaque(A)),N&&(A=p.color.multiplyOpacity(A,f.DIM_OPACITY)),A}_resolveBackgroundRgba(b,E,R){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,R,k){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&k&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,R,k,D,T,j,N,I,B){if(this._config.minimumContrastRatio===1||B)return;const M=this._getContrastCache(I),A=M.getColor(b,k);if(A!==void 0)return A||void 0;const P=this._resolveBackgroundRgba(E,R,j),H=this._resolveForegroundRgba(D,T,j,N),W=p.rgba.ensureContrastRatio(P,H,this._config.minimumContrastRatio/(I?2:1));if(!W)return void M.setColor(b,k,null);const z=p.channels.toColor(W>>24&255,W>>16&255,W>>8&255);return M.setColor(b,k,z),z}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,R,k,D=!1){const T=typeof b=="number"?String.fromCharCode(b):b,j=Math.min(this._config.deviceCellWidth*Math.max(T.length,2)+4,this._textureSize);this._tmpCanvas.width<j&&(this._tmpCanvas.width=j);const N=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<N&&(this._tmpCanvas.height=N),this._tmpCtx.save(),this._workAttributeData.fg=R,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=k,this._workAttributeData.isInvisible())return c;const I=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),M=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),P=!!this._workAttributeData.isUnderline(),H=!!this._workAttributeData.isStrikethrough(),W=!!this._workAttributeData.isOverline();let z=this._workAttributeData.getFgColor(),J=this._workAttributeData.getFgColorMode(),Y=this._workAttributeData.getBgColor(),$=this._workAttributeData.getBgColorMode();if(B){const q=z;z=Y,Y=q;const G=J;J=$,$=G}const O=this._getBackgroundColor($,Y,B,M);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const U=I?this._config.fontWeightBold:this._config.fontWeight,K=A?"italic":"";this._tmpCtx.font=`${K} ${U} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Q=T.length===1&&(0,h.isPowerlineGlyph)(T.charCodeAt(0)),Z=T.length===1&&(0,h.isRestrictedPowerlineGlyph)(T.charCodeAt(0)),he=this._getForegroundColor(E,$,Y,R,J,z,B,M,I,(0,h.treatGlyphAsBackgroundColor)(T.charCodeAt(0)));this._tmpCtx.fillStyle=he.css;const ee=Z?0:4;let ue=!1;this._config.customGlyphs!==!1&&(ue=(0,_.tryDrawCustomChar)(this._tmpCtx,T,ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let pe,oe=!Q;if(pe=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),P){this._tmpCtx.save();const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),G=q%2==1?.5:0;if(this._tmpCtx.lineWidth=q,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())oe=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{oe=!1;let fe=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&fe<8&&(fe+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(fe).css}this._tmpCtx.beginPath();const ae=ee,ie=Math.ceil(ee+this._config.deviceCharHeight)-G-(D?2*q:0),ge=ie+q,ye=ie+2*q;let Se=this._workAttributeData.getUnderlineVariantOffset();for(let fe=0;fe<pe;fe++){this._tmpCtx.save();const ce=ae+fe*this._config.deviceCellWidth,le=ae+(fe+1)*this._config.deviceCellWidth,et=ce+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ce,ie),this._tmpCtx.lineTo(le,ie),this._tmpCtx.moveTo(ce,ye),this._tmpCtx.lineTo(le,ye);break;case 3:const tt=q<=1?ye:Math.ceil(ee+this._config.deviceCharHeight-q/2)-G,Ae=q<=1?ie:Math.ceil(ee+this._config.deviceCharHeight+q/2)-G,Cr=new Path2D;Cr.rect(ce,ie,this._config.deviceCellWidth,ye-ie),this._tmpCtx.clip(Cr),this._tmpCtx.moveTo(ce-this._config.deviceCellWidth/2,ge),this._tmpCtx.bezierCurveTo(ce-this._config.deviceCellWidth/2,Ae,ce,Ae,ce,ge),this._tmpCtx.bezierCurveTo(ce,tt,et,tt,et,ge),this._tmpCtx.bezierCurveTo(et,Ae,le,Ae,le,ge),this._tmpCtx.bezierCurveTo(le,tt,le+this._config.deviceCellWidth/2,tt,le+this._config.deviceCellWidth/2,ge);break;case 4:const lt=Se===0?0:Se>=q?2*q-Se:q-Se;Se>=q||lt===0?(this._tmpCtx.setLineDash([Math.round(q),Math.round(q)]),this._tmpCtx.moveTo(ce+lt,ie),this._tmpCtx.lineTo(le,ie)):(this._tmpCtx.setLineDash([Math.round(q),Math.round(q)]),this._tmpCtx.moveTo(ce,ie),this._tmpCtx.lineTo(ce+lt,ie),this._tmpCtx.moveTo(ce+lt+q,ie),this._tmpCtx.lineTo(le,ie)),Se=(0,h.computeNextVariantOffset)(le-ce,q,Se);break;case 5:const Hr=.6,no=.3,Sr=le-ce,Si=Math.floor(Hr*Sr),wi=Math.floor(no*Sr),oo=Sr-Si-wi;this._tmpCtx.setLineDash([Si,wi,oo]),this._tmpCtx.moveTo(ce,ie),this._tmpCtx.lineTo(le,ie);break;default:this._tmpCtx.moveTo(ce,ie),this._tmpCtx.lineTo(le,ie)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ue&&this._config.fontSize>=12&&!this._config.allowTransparency&&T!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const fe=this._tmpCtx.measureText(T);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in fe&&fe.actualBoundingBoxDescent>0){this._tmpCtx.save();const ce=new Path2D;ce.rect(ae,ie-Math.ceil(q/2),this._config.deviceCellWidth*pe,ye-ie+Math.ceil(q/2)),this._tmpCtx.clip(ce),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=O.css,this._tmpCtx.strokeText(T,ee,ee+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(W){const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),G=q%2==1?.5:0;this._tmpCtx.lineWidth=q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+G),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*pe,ee+G),this._tmpCtx.stroke()}if(ue||this._tmpCtx.fillText(T,ee,ee+this._config.deviceCharHeight),T==="_"&&!this._config.allowTransparency){let q=v(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),O,he,oe);if(q)for(let G=1;G<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(T,ee,ee+this._config.deviceCharHeight-G),q=v(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),O,he,oe),q);G++);}if(H){const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),G=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+Math.floor(this._config.deviceCharHeight/2)-G),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*pe,ee+Math.floor(this._config.deviceCharHeight/2)-G),this._tmpCtx.stroke()}this._tmpCtx.restore();const He=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let gt;if(gt=this._config.allowTransparency?function(q){for(let G=0;G<q.data.length;G+=4)if(q.data[G+3]>0)return!1;return!0}(He):v(He,O,he,oe),gt)return c;const ne=this._findGlyphBoundingBox(He,this._workBoundingBox,j,Z,ue,ee);let te,re;for(;;){if(this._activePages.length===0){const q=this._createNewPage();te=q,re=q.currentRow,re.height=ne.size.y;break}te=this._activePages[this._activePages.length-1],re=te.currentRow;for(const q of this._activePages)ne.size.y<=q.currentRow.height&&(te=q,re=q.currentRow);for(let q=this._activePages.length-1;q>=0;q--)for(const G of this._activePages[q].fixedRows)G.height<=re.height&&ne.size.y<=G.height&&(te=this._activePages[q],re=G);if(re.y+ne.size.y>=te.canvas.height||re.height>ne.size.y+2){let q=!1;if(te.currentRow.y+te.currentRow.height+ne.size.y>=te.canvas.height){let G;for(const ae of this._activePages)if(ae.currentRow.y+ae.currentRow.height+ne.size.y<ae.canvas.height){G=ae;break}if(G)te=G;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&re.y+ne.size.y<=te.canvas.height&&re.height>=ne.size.y&&re.x+ne.size.x<=te.canvas.width)q=!0;else{const ae=this._createNewPage();te=ae,re=ae.currentRow,re.height=ne.size.y,q=!0}}q||(te.currentRow.height>0&&te.fixedRows.push(te.currentRow),re={x:0,y:te.currentRow.y+te.currentRow.height,height:ne.size.y},te.fixedRows.push(re),te.currentRow={x:0,y:re.y+re.height,height:0})}if(re.x+ne.size.x<=te.canvas.width)break;re===te.currentRow?(re.x=0,re.y+=re.height,re.height=0):te.fixedRows.splice(te.fixedRows.indexOf(re),1)}return ne.texturePage=this._pages.indexOf(te),ne.texturePosition.x=re.x,ne.texturePosition.y=re.y,ne.texturePositionClipSpace.x=re.x/te.canvas.width,ne.texturePositionClipSpace.y=re.y/te.canvas.height,ne.sizeClipSpace.x/=te.canvas.width,ne.sizeClipSpace.y/=te.canvas.height,re.height=Math.max(re.height,ne.size.y),re.x+=ne.size.x,te.ctx.putImageData(He,ne.texturePosition.x-this._workBoundingBox.left,ne.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ne.size.x,ne.size.y),te.addGlyph(ne),te.version++,ne}_findGlyphBoundingBox(b,E,R,k,D,T){E.top=0;const j=k?this._config.deviceCellHeight:this._tmpCanvas.height,N=k?this._config.deviceCellWidth:R;let I=!1;for(let B=0;B<j;B++){for(let M=0;M<N;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(b.data[A]!==0){E.top=B,I=!0;break}}if(I)break}E.left=0,I=!1;for(let B=0;B<T+N;B++){for(let M=0;M<j;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.left=B,I=!0;break}}if(I)break}E.right=N,I=!1;for(let B=T+N-1;B>=T;B--){for(let M=0;M<j;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.right=B,I=!0;break}}if(I)break}E.bottom=j,I=!1;for(let B=j-1;B>=0;B--){for(let M=0;M<N;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(b.data[A]!==0){E.bottom=B,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+T+(k||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+T+(k||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,R){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],R)for(const k of R)this._glyphs.push(...k.glyphs),this._usedPixels+=k._usedPixels;this.canvas=x(b,E,E),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function v(y,b,E,R){const k=b.rgba>>>24,D=b.rgba>>>16&255,T=b.rgba>>>8&255,j=E.rgba>>>24,N=E.rgba>>>16&255,I=E.rgba>>>8&255,B=Math.floor((Math.abs(k-j)+Math.abs(D-N)+Math.abs(T-I))/12);let M=!0;for(let A=0;A<y.data.length;A+=4)y.data[A]===k&&y.data[A+1]===D&&y.data[A+2]===T||R&&Math.abs(y.data[A]-k)+Math.abs(y.data[A+1]-D)+Math.abs(y.data[A+2]-T)<B?y.data[A+3]=0:M=!1;return M}function x(y,b,E){const R=y.createElement("canvas");return R.width=b,R.height=E,R}},160:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,h=0;var p,w,S,u,n;function a(l){const m=l.toString(16);return m.length<2?"0"+m:m}function c(l,m){return l<m?(m+.05)/(l+.05):(l+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(l){l.toCss=function(m,L,v,x){return x!==void 0?`#${a(m)}${a(L)}${a(v)}${a(x)}`:`#${a(m)}${a(L)}${a(v)}`},l.toRgba=function(m,L,v,x=255){return(m<<24|L<<16|v<<8|x)>>>0},l.toColor=function(m,L,v,x){return{css:l.toCss(m,L,v,x),rgba:l.toRgba(m,L,v,x)}}}(p||(i.channels=p={})),function(l){function m(L,v){return h=Math.round(255*v),[o,f,_]=n.toChannels(L.rgba),{css:p.toCss(o,f,_,h),rgba:p.toRgba(o,f,_,h)}}l.blend=function(L,v){if(h=(255&v.rgba)/255,h===1)return{css:v.css,rgba:v.rgba};const x=v.rgba>>24&255,y=v.rgba>>16&255,b=v.rgba>>8&255,E=L.rgba>>24&255,R=L.rgba>>16&255,k=L.rgba>>8&255;return o=E+Math.round((x-E)*h),f=R+Math.round((y-R)*h),_=k+Math.round((b-k)*h),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},l.isOpaque=function(L){return(255&L.rgba)==255},l.ensureContrastRatio=function(L,v,x){const y=n.ensureContrastRatio(L.rgba,v.rgba,x);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},l.opaque=function(L){const v=(255|L.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},l.opacity=m,l.multiplyOpacity=function(L,v){return h=255&L.rgba,m(L,h*v/255)},l.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(i.color=w={})),function(l){let m,L;try{const v=document.createElement("canvas");v.width=1,v.height=1;const x=v.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",L=m.createLinearGradient(0,0,1,1))}catch{}l.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),h=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,h);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const x=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return o=parseInt(x[1]),f=parseInt(x[2]),_=parseInt(x[3]),h=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),p.toColor(o,f,_,h);if(!m||!L)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=L,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,h]=m.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,h),css:v}}}(S||(i.css=S={})),function(l){function m(L,v,x){const y=L/255,b=v/255,E=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}l.relativeLuminance=function(L){return m(L>>16&255,L>>8&255,255&L)},l.relativeLuminance2=m}(u||(i.rgb=u={})),function(l){function m(v,x,y){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;j<y&&(k>0||D>0||T>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}function L(v,x,y){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;j<y&&(k<255||D<255||T<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}l.blend=function(v,x){if(h=(255&x)/255,h===1)return x;const y=x>>24&255,b=x>>16&255,E=x>>8&255,R=v>>24&255,k=v>>16&255,D=v>>8&255;return o=R+Math.round((y-R)*h),f=k+Math.round((b-k)*h),_=D+Math.round((E-D)*h),p.toRgba(o,f,_)},l.ensureContrastRatio=function(v,x,y){const b=u.relativeLuminance(v>>8),E=u.relativeLuminance(x>>8);if(c(b,E)<y){if(E<b){const D=m(v,x,y),T=c(b,u.relativeLuminance(D>>8));if(T<y){const j=L(v,x,y);return T>c(b,u.relativeLuminance(j>>8))?D:j}return D}const R=L(v,x,y),k=c(b,u.relativeLuminance(R>>8));if(k<y){const D=m(v,x,y);return k>c(b,u.relativeLuminance(D>>8))?R:D}return R}},l.reduceLuminance=m,l.increaseLuminance=L,l.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=c},345:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(C,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,h,p){this._data[_]||(this._data[_]={}),this._data[_][h]=p}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,h,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(h,p,w)}get(f,_,h,p){return this._data.get(f,_)?.get(h,p)}clear(){this._data.clear()}}},399:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,u=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),u=Math.max(S,u),a=w.timeRemaining(),1.5*u>a)return n-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-S))}ms`),void this._start();n=a}this.clear()}}class h extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new o;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),h=o(147);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const u=new p;return u.setFromCharData(S),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const n=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let h="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let h=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[h++]=1024*(this._interim-55296)+w-56320+65536:(f[h++]=this._interim,f[h++]=w),this._interim=0}for(let w=p;w<_;++w){const S=o.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=_)return this._interim=S,h;const u=o.charCodeAt(w);56320<=u&&u<=57343?f[h++]=1024*(S-55296)+u-56320+65536:(f[h++]=S,f[h++]=u)}else S!==65279&&(f[h++]=S)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let h,p,w,S,u=0,n=0,a=0;if(this.interim[0]){let m=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let v,x=0;for(;(v=63&this.interim[++x])&&x<4;)L<<=6,L|=v;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-x;for(;a<b;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[x++]=v,L<<=6,L|=63&v}m||(y===2?L<128?a--:f[u++]=L:y===3?L<2048||L>=55296&&L<=57343||L===65279||(f[u++]=L):L<65536||L>1114111||(f[u++]=L)),this.interim.fill(0)}const c=_-4;let l=a;for(;l<_;){for(;!(!(l<c)||128&(h=o[l])||128&(p=o[l+1])||128&(w=o[l+2])||128&(S=o[l+3]));)f[u++]=h,f[u++]=p,f[u++]=w,f[u++]=S,l+=4;if(h=o[l++],h<128)f[u++]=h;else if((224&h)==192){if(l>=_)return this.interim[0]=h,u;if(p=o[l++],(192&p)!=128){l--;continue}if(n=(31&h)<<6|63&p,n<128){l--;continue}f[u++]=n}else if((240&h)==224){if(l>=_)return this.interim[0]=h,u;if(p=o[l++],(192&p)!=128){l--;continue}if(l>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[l++],(192&w)!=128){l--;continue}if(n=(15&h)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&h)==240){if(l>=_)return this.interim[0]=h,u;if(p=o[l++],(192&p)!=128){l--;continue}if(l>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[l++],(192&w)!=128){l--;continue}if(l>=_)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=w,u;if(S=o[l++],(192&S)!=128){l--;continue}if(n=(7&h)<<18|(63&p)<<12|(63&w)<<6|63&S,n<65536||n>1114111)continue;f[u++]=n}}return u}}},776:function(C,i,o){var f=this&&this.__decorate||function(n,a,c,l){var m,L=arguments.length,v=L<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,c,l);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(v=(L<3?m(v):L>3?m(a,c,v):m(a,c))||v);return L>3&&v&&Object.defineProperty(a,c,v),v},_=this&&this.__param||function(n,a){return function(c,l){a(c,l,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=o(859),p=o(97),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let S,u=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,c){this._evalLazyOptionalParams(c),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...c)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){S=n},i.traceCall=function(n,a,c){if(typeof c.value!="function")throw new Error("not supported");const l=c.value;c.value=function(...m){if(S.logLevel!==p.LogLevelEnum.TRACE)return l.apply(this,m);S.trace(`GlyphRenderer#${l.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const L=l.apply(this,m);return S.trace(`GlyphRenderer#${l.name} return`,L),L}}},726:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(p,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(h,p,S)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},97:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(C){var i=s[C];if(i!==void 0)return i.exports;var o=s[C]={exports:{}};return r[C].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var C=g;Object.defineProperty(C,"__esModule",{value:!0}),C.WebglAddon=void 0;const i=d(345),o=d(859),f=d(399),_=d(666),h=d(776);class p extends o.Disposable{constructor(S){if(f.isSafari&&(0,f.getSafariVersion)()<16){const u={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",u))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=S,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(S){const u=S._core;if(!S.element)return void this.register(u.onWillOpen(()=>this.activate(S)));this._terminal=S;const n=u.coreService,a=u.optionsService,c=u,l=c._renderService,m=c._characterJoinerService,L=c._charSizeService,v=c._coreBrowserService,x=c._decorationService,y=c._logService,b=c._themeService;(0,h.setTraceLogger)(y),this._renderer=this.register(new _.WebglRenderer(S,m,L,v,n,x,a,b,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),l.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{const E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(S.cols,S.rows)}))}get textureAtlas(){return this._renderer?.textureAtlas}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}C.WebglAddon=p})(),g})())})(wf);var Om=wf.exports,xf={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={903:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=o(274),_=o(627),h=o(237),p=o(860),w=o(374),S=o(296),u=o(345),n=o(859),a=o(399),c=o(855);class l extends n.Disposable{get canvas(){return this._canvas}get cacheCanvas(){return this._charAtlas?.pages[0].canvas}constructor(v,x,y,b,E,R,k,D,T,j){super(),this._terminal=v,this._container=x,this._alpha=E,this._themeService=R,this._bufferService=k,this._optionsService=D,this._decorationService=T,this._coreBrowserService=j,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,S.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new n.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new f.CellColorResolver(this._terminal,this._optionsService,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${y}-layer`),this._canvas.style.zIndex=b.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(N=>{this._refreshCharAtlas(N),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,n.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,w.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(v,x){}handleSelectionChanged(v,x,y=!1){this._selectionModel.update(this._terminal._core,v,x,y)}_setTransparency(v){if(v===this._alpha)return;const x=this._canvas;this._alpha=v,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,x),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(v){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,_.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,v,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,u.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let x=0;x<this._charAtlas.pages.length;x++)this._bitmapGenerator[x]=new m(this._charAtlas.pages[x].canvas)}}resize(v){this._deviceCellWidth=v.device.cell.width,this._deviceCellHeight=v.device.cell.height,this._deviceCharWidth=v.device.char.width,this._deviceCharHeight=v.device.char.height,this._deviceCharLeft=v.device.char.left,this._deviceCharTop=v.device.char.top,this._canvas.width=v.device.canvas.width,this._canvas.height=v.device.canvas.height,this._canvas.style.width=`${v.css.canvas.width}px`,this._canvas.style.height=`${v.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){this._charAtlas?.clearTexture()}_fillCells(v,x,y,b){this._ctx.fillRect(v*this._deviceCellWidth,x*this._deviceCellHeight,y*this._deviceCellWidth,b*this._deviceCellHeight)}_fillMiddleLineAtCells(v,x,y=1){const b=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(v*this._deviceCellWidth,(x+1)*this._deviceCellHeight-b-this._coreBrowserService.dpr,y*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(v,x,y=1,b=0){this._ctx.fillRect(v*this._deviceCellWidth,(x+1)*this._deviceCellHeight+b-this._coreBrowserService.dpr-1,y*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(v,x,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b;for(let E=0;E<y;E++){const R=(v+E)*this._deviceCellWidth,k=(v+E+.5)*this._deviceCellWidth,D=(v+E+1)*this._deviceCellWidth,T=(x+1)*this._deviceCellHeight-b-1,j=T-b,N=T+b;this._ctx.moveTo(R,T),this._ctx.bezierCurveTo(R,j,k,j,k,T),this._ctx.bezierCurveTo(k,N,D,N,D,T)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(v,x,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b,this._ctx.setLineDash([2*b,b]);const E=v*this._deviceCellWidth,R=(x+1)*this._deviceCellHeight-b-1;this._ctx.moveTo(E,R);for(let k=0;k<y;k++){const D=(v+y+k)*this._deviceCellWidth;this._ctx.lineTo(D,R)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(v,x,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b,this._ctx.setLineDash([4*b,3*b]);const E=v*this._deviceCellWidth,R=(v+y)*this._deviceCellWidth,k=(x+1)*this._deviceCellHeight-b-1;this._ctx.moveTo(E,k),this._ctx.lineTo(R,k),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(v,x,y){this._ctx.fillRect(v*this._deviceCellWidth,x*this._deviceCellHeight,this._coreBrowserService.dpr*y,this._deviceCellHeight)}_strokeRectAtCell(v,x,y,b){const E=this._coreBrowserService.dpr;this._ctx.lineWidth=E,this._ctx.strokeRect(v*this._deviceCellWidth+E/2,x*this._deviceCellHeight+E/2,y*this._deviceCellWidth-E,b*this._deviceCellHeight-E)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(v,x,y,b){this._alpha?this._ctx.clearRect(v*this._deviceCellWidth,x*this._deviceCellHeight,y*this._deviceCellWidth,b*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(v*this._deviceCellWidth,x*this._deviceCellHeight,y*this._deviceCellWidth,b*this._deviceCellHeight))}_fillCharTrueColor(v,x,y){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=h.TEXT_BASELINE,this._clipRow(y);let b=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(b=(0,p.tryDrawCustomChar)(this._ctx,v.getChars(),x*this._deviceCellWidth,y*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),b||this._ctx.fillText(v.getChars(),x*this._deviceCellWidth+this._deviceCharLeft,y*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(v,x,y){const b=v.getChars(),E=v.getCode(),R=v.getWidth();if(this._cellColorResolver.resolve(v,x,this._bufferService.buffer.ydisp+y,this._deviceCellWidth),!this._charAtlas)return;let k;if(k=b&&b.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(b,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(v.getCode()||c.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),!k.size.x||!k.size.y)return;this._ctx.save(),this._clipRow(y),this._bitmapGenerator[k.texturePage]&&this._charAtlas.pages[k.texturePage].canvas!==this._bitmapGenerator[k.texturePage].canvas&&(this._bitmapGenerator[k.texturePage]?.bitmap?.close(),delete this._bitmapGenerator[k.texturePage]),this._charAtlas.pages[k.texturePage].version!==this._bitmapGenerator[k.texturePage]?.version&&(this._bitmapGenerator[k.texturePage]||(this._bitmapGenerator[k.texturePage]=new m(this._charAtlas.pages[k.texturePage].canvas)),this._bitmapGenerator[k.texturePage].refresh(),this._bitmapGenerator[k.texturePage].version=this._charAtlas.pages[k.texturePage].version);let D=k.size.x;this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,w.allowRescaling)(E,R,k.size.x,this._deviceCellWidth)&&(D=this._deviceCellWidth-1),this._ctx.drawImage(this._bitmapGenerator[k.texturePage]?.bitmap||this._charAtlas.pages[k.texturePage].canvas,k.texturePosition.x,k.texturePosition.y,k.size.x,k.size.y,x*this._deviceCellWidth+this._deviceCharLeft-k.offset.x,y*this._deviceCellHeight+this._deviceCharTop-k.offset.y,D,k.size.y),this._ctx.restore()}_clipRow(v){this._ctx.beginPath(),this._ctx.rect(0,v*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(v,x){return`${x?"italic":""} ${v?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}i.BaseRenderLayer=l;class m{get bitmap(){return this._bitmap}constructor(v){this.canvas=v,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){this._bitmap?.close(),this._bitmap=void 0,a.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){this._state===0&&(this._bitmap?.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(v=>{this._state===2?this.refresh():this._bitmap=v,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasRenderer=void 0;const f=o(627),_=o(56),h=o(374),p=o(345),w=o(859),S=o(873),u=o(43),n=o(630),a=o(744);class c extends w.Disposable{constructor(m,L,v,x,y,b,E,R,k,D,T){super(),this._terminal=m,this._screenElement=L,this._bufferService=x,this._charSizeService=y,this._optionsService=b,this._coreBrowserService=k,this._themeService=T,this._observerDisposable=this.register(new w.MutableDisposable),this._onRequestRedraw=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new p.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new p.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const j=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new a.TextRenderLayer(this._terminal,this._screenElement,0,j,this._bufferService,this._optionsService,E,D,this._coreBrowserService,T),new n.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,D,this._optionsService,T),new u.LinkRenderLayer(this._terminal,this._screenElement,2,v,this._bufferService,this._optionsService,D,this._coreBrowserService,T),new S.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,R,this._coreBrowserService,D,T)];for(const N of this._renderLayers)(0,p.forwardEvent)(N.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,h.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(N,I)=>this._setCanvasDevicePixelDimensions(N,I)),this.register(this._coreBrowserService.onWindowChange(N=>{this._observerDisposable.value=(0,_.observeDevicePixelDimensions)(this._renderLayers[0].canvas,N,(I,B)=>this._setCanvasDevicePixelDimensions(I,B))})),this.register((0,w.toDisposable)(()=>{for(const N of this._renderLayers)N.dispose();(0,f.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(m,L){this._updateDimensions();for(const v of this._renderLayers)v.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(m=>m.handleBlur())}handleFocus(){this._runOperation(m=>m.handleFocus())}handleSelectionChanged(m,L,v=!1){this._runOperation(x=>x.handleSelectionChanged(m,L,v)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(m=>m.handleCursorMove())}clear(){this._runOperation(m=>m.reset())}_runOperation(m){for(const L of this._renderLayers)m(L)}renderRows(m,L){for(const v of this._renderLayers)v.handleGridChanged(m,L)}clearTextureAtlas(){for(const m of this._renderLayers)m.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const m=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*m),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*m),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/m),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/m),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(m,L){this.dimensions.device.canvas.height=L,this.dimensions.device.canvas.width=m;for(const v of this._renderLayers)v.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}i.CanvasRenderer=c},873:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorRenderLayer=void 0;const f=o(457),_=o(859),h=o(399),p=o(782),w=o(903);class S extends w.BaseRenderLayer{constructor(n,a,c,l,m,L,v,x,y,b){super(n,a,"cursor",c,!0,b,m,L,y,x),this._onRequestRedraw=l,this._coreService=v,this._cursorBlinkStateManager=this.register(new _.MutableDisposable),this._cell=new p.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(L.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(n){super.resize(n),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){this._clearCursor(),this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){this._cursorBlinkStateManager.value?.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){this._cursorBlinkStateManager.value?.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){this._cursorBlinkStateManager.value?.restartBlinkAnimation()}handleGridChanged(n,a){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(n){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const a=this._bufferService.buffer.ybase+this._bufferService.buffer.y,c=a-this._bufferService.buffer.ydisp;if(c<0||c>=this._bufferService.rows)return void this._clearCursor();const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(a).loadCell(l,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const m=this._optionsService.rawOptions.cursorStyle,L=this._optionsService.rawOptions.cursorInactiveStyle;return L&&L!=="none"&&this._cursorRenderers[L](l,c,this._cell),this._ctx.restore(),this._state.x=l,this._state.y=c,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===l&&this._state.y===c&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](l,c,this._cell),this._ctx.restore(),this._state.x=l,this._state.y=c,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(h.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(n,a,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(n,a,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(n,a,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(n,a,c.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(c,n,a),this._ctx.restore()}_renderUnderlineCursor(n,a,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(n,a),this._ctx.restore()}_renderOutlineCursor(n,a,c){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(n,a,c.getWidth(),1),this._ctx.restore()}}i.CursorRenderLayer=S},574:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GridCache=void 0,i.GridCache=class{constructor(){this.cache=[]}resize(o,f){for(let _=0;_<o;_++){this.cache.length<=_&&this.cache.push([]);for(let h=this.cache[_].length;h<f;h++)this.cache[_].push(void 0);this.cache[_].length=f}this.cache.length=o}clear(){for(let o=0;o<this.cache.length;o++)for(let f=0;f<this.cache[o].length;f++)this.cache[o][f]=void 0}}},43:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=o(197),_=o(237),h=o(903);class p extends h.BaseRenderLayer{constructor(S,u,n,a,c,l,m,L,v){super(S,u,"link",n,!0,v,c,l,m,L),this.register(a.onShowLinkUnderline(x=>this._handleShowLinkUnderline(x))),this.register(a.onHideLinkUnderline(x=>this._handleHideLinkUnderline(x)))}resize(S){super.resize(S),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const S=this._state.y2-this._state.y1-1;S>0&&this._clearCells(0,this._state.y1+1,this._state.cols,S),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(S){if(S.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:S.fg&&(0,f.is256Color)(S.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[S.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,S.y1===S.y2)this._fillBottomLineAtCells(S.x1,S.y1,S.x2-S.x1);else{this._fillBottomLineAtCells(S.x1,S.y1,S.cols-S.x1);for(let u=S.y1+1;u<S.y2;u++)this._fillBottomLineAtCells(0,u,S.cols);this._fillBottomLineAtCells(0,S.y2,S.x2)}this._state=S}_handleHideLinkUnderline(S){this._clearCurrentLink()}}i.LinkRenderLayer=p},630:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRenderLayer=void 0;const f=o(903);class _ extends f.BaseRenderLayer{constructor(p,w,S,u,n,a,c,l){super(p,w,"selection",S,!0,l,u,c,a,n),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(p){super.resize(p),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(p,w,S){super.handleSelectionChanged(p,w,S),this._redrawSelection(p,w,S)}_redrawSelection(p,w,S){if(!this._didStateChange(p,w,S,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!p||!w)return void this._clearState();const u=p[1]-this._bufferService.buffer.ydisp,n=w[1]-this._bufferService.buffer.ydisp,a=Math.max(u,0),c=Math.min(n,this._bufferService.rows-1);if(a>=this._bufferService.rows||c<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,S){const l=p[0],m=w[0]-l,L=c-a+1;this._fillCells(l,a,m,L)}else{const l=u===a?p[0]:0,m=a===n?w[0]:this._bufferService.cols;this._fillCells(l,a,m-l,1);const L=Math.max(c-a-1,0);if(this._fillCells(0,a+1,this._bufferService.cols,L),a!==c){const v=n===c?w[0]:this._bufferService.cols;this._fillCells(0,c,v,1)}}this._state.start=[p[0],p[1]],this._state.end=[w[0],w[1]],this._state.columnSelectMode=S,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(p,w,S,u){return!this._areCoordinatesEqual(p,this._state.start)||!this._areCoordinatesEqual(w,this._state.end)||S!==this._state.columnSelectMode||u!==this._state.ydisp}_areCoordinatesEqual(p,w){return!(!p||!w)&&p[0]===w[0]&&p[1]===w[1]}}i.SelectionRenderLayer=_},744:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextRenderLayer=void 0;const f=o(577),_=o(147),h=o(782),p=o(855),w=o(903),S=o(574);class u extends w.BaseRenderLayer{constructor(a,c,l,m,L,v,x,y,b,E){super(a,c,"text",l,m,E,L,v,y,b),this._characterJoinerService=x,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new h.CellData,this._state=new S.GridCache,this.register(v.onSpecificOptionChange("allowTransparency",R=>this._setTransparency(R)))}resize(a){super.resize(a);const c=this._getFont(!1,!1);this._characterWidth===a.device.char.width&&this._characterFont===c||(this._characterWidth=a.device.char.width,this._characterFont=c,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(a,c,l){for(let m=a;m<=c;m++){const L=m+this._bufferService.buffer.ydisp,v=this._bufferService.buffer.lines.get(L),x=this._characterJoinerService.getJoinedCharacters(L);for(let y=0;y<this._bufferService.cols;y++){v.loadCell(y,this._workCell);let b=this._workCell,E=!1,R=y;if(b.getWidth()!==0){if(x.length>0&&y===x[0][0]){E=!0;const k=x.shift();b=new f.JoinedCellData(this._workCell,v.translateToString(!0,k[0],k[1]),k[1]-k[0]),R=k[1]-1}!E&&this._isOverlapping(b)&&R<v.length-1&&v.getCodePoint(R+1)===p.NULL_CELL_CODE&&(b.content&=-12582913,b.content|=8388608),l(b,y,m),y=R}}}}_drawBackground(a,c){const l=this._ctx,m=this._bufferService.cols;let L=0,v=0,x=null;l.save(),this._forEachCell(a,c,(y,b,E)=>{let R=null;y.isInverse()?R=y.isFgDefault()?this._themeService.colors.foreground.css:y.isFgRGB()?`rgb(${_.AttributeData.toColorRGB(y.getFgColor()).join(",")})`:this._themeService.colors.ansi[y.getFgColor()].css:y.isBgRGB()?R=`rgb(${_.AttributeData.toColorRGB(y.getBgColor()).join(",")})`:y.isBgPalette()&&(R=this._themeService.colors.ansi[y.getBgColor()].css);let k=!1;this._decorationService.forEachDecorationAtCell(b,this._bufferService.buffer.ydisp+E,void 0,D=>{D.options.layer!=="top"&&k||(D.backgroundColorRGB&&(R=D.backgroundColorRGB.css),k=D.options.layer==="top")}),x===null&&(L=b,v=E),E!==v?(l.fillStyle=x||"",this._fillCells(L,v,m-L,1),L=b,v=E):x!==R&&(l.fillStyle=x||"",this._fillCells(L,v,b-L,1),L=b,v=E),x=R}),x!==null&&(l.fillStyle=x,this._fillCells(L,v,m-L,1)),l.restore()}_drawForeground(a,c){this._forEachCell(a,c,(l,m,L)=>this._drawChars(l,m,L))}handleGridChanged(a,c){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,a,this._bufferService.cols,c-a+1),this._drawBackground(a,c),this._drawForeground(a,c))}_isOverlapping(a){if(a.getWidth()!==1||a.getCode()<256)return!1;const c=a.getChars();if(this._characterOverlapCache.hasOwnProperty(c))return this._characterOverlapCache[c];this._ctx.save(),this._ctx.font=this._characterFont;const l=Math.floor(this._ctx.measureText(c).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[c]=l,l}}i.TextRenderLayer=u},274:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=o(855),_=o(160),h=o(374);let p,w=0,S=0,u=!1,n=!1,a=!1,c=0;i.CellColorResolver=class{constructor(l,m,L,v,x,y){this._terminal=l,this._optionService=m,this._selectionRenderModel=L,this._decorationService=v,this._coreBrowserService=x,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(l,m,L,v){if(this.result.bg=l.bg,this.result.fg=l.fg,this.result.ext=268435456&l.bg?l.extended.ext:0,S=0,w=0,n=!1,u=!1,a=!1,p=this._themeService.colors,c=0,l.getCode()!==f.NULL_CELL_CODE&&l.extended.underlineStyle===4){const x=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));c=m*v%(2*Math.round(x))}if(this._decorationService.forEachDecorationAtCell(m,L,"bottom",x=>{x.backgroundColorRGB&&(S=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),a=this._selectionRenderModel.isCellSelected(this._terminal,m,L),a){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:S=(16777215&this.result.fg)<<8|255;break;default:S=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:S=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:S=(16777215&this.result.bg)<<8|255}S=_.rgba.blend(S,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else S=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(n=!0,p.selectionForeground&&(w=p.selectionForeground.rgba>>8&16777215,u=!0),(0,h.treatGlyphAsBackgroundColor)(l.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))w=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}w=_.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}u=!0}}this._decorationService.forEachDecorationAtCell(m,L,"top",x=>{x.backgroundColorRGB&&(S=x.backgroundColorRGB.rgba>>8&16777215,n=!0),x.foregroundColorRGB&&(w=x.foregroundColorRGB.rgba>>8&16777215,u=!0)}),n&&(S=a?-16777216&l.bg&-134217729|S|50331648:-16777216&l.bg|S|50331648),u&&(w=-16777216&l.fg&-67108865|w|50331648),67108864&this.result.fg&&(n&&!u&&(w=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648,u=!0),!n&&u&&(S=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648,n=!0)),p=void 0,this.result.bg=n?S:this.result.bg,this.result.fg=u?w:this.result.fg,this.result.ext&=536870911,this.result.ext|=c<<29&3758096384}}},627:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=o(509),_=o(197),h=[];i.acquireTextureAtlas=function(p,w,S,u,n,a,c,l){const m=(0,_.generateConfig)(u,n,a,c,w,S,l);for(let x=0;x<h.length;x++){const y=h[x],b=y.ownedBy.indexOf(p);if(b>=0){if((0,_.configEquals)(y.config,m))return y.atlas;y.ownedBy.length===1?(y.atlas.dispose(),h.splice(x,1)):y.ownedBy.splice(b,1);break}}for(let x=0;x<h.length;x++){const y=h[x];if((0,_.configEquals)(y.config,m))return y.ownedBy.push(p),y.atlas}const L=p._core,v={atlas:new f.TextureAtlas(document,m,L.unicodeService),config:m,ownedBy:[p]};return h.push(v),v.atlas},i.removeTerminalFromCache=function(p){for(let w=0;w<h.length;w++){const S=h[w].ownedBy.indexOf(p);if(S!==-1){h[w].ownedBy.length===1?(h[w].atlas.dispose(),h.splice(w,1)):h[w].ownedBy.splice(S,1);break}}}},197:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=o(160);i.generateConfig=function(_,h,p,w,S,u,n){const a={foreground:u.foreground,background:u.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:u.ansi.slice(),contrastCache:u.contrastCache,halfContrastCache:u.halfContrastCache};return{customGlyphs:S.customGlyphs,devicePixelRatio:n,letterSpacing:S.letterSpacing,lineHeight:S.lineHeight,deviceCellWidth:_,deviceCellHeight:h,deviceCharWidth:p,deviceCharHeight:w,fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:S.fontWeightBold,allowTransparency:S.allowTransparency,drawBoldTextInBrightColors:S.drawBoldTextInBrightColors,minimumContrastRatio:S.minimumContrastRatio,colors:a}},i.configEquals=function(_,h){for(let p=0;p<_.colors.ansi.length;p++)if(_.colors.ansi[p].rgba!==h.colors.ansi[p].rgba)return!1;return _.devicePixelRatio===h.devicePixelRatio&&_.customGlyphs===h.customGlyphs&&_.lineHeight===h.lineHeight&&_.letterSpacing===h.letterSpacing&&_.fontFamily===h.fontFamily&&_.fontSize===h.fontSize&&_.fontWeight===h.fontWeight&&_.fontWeightBold===h.fontWeightBold&&_.allowTransparency===h.allowTransparency&&_.deviceCharWidth===h.deviceCharWidth&&_.deviceCharHeight===h.deviceCharHeight&&_.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&_.minimumContrastRatio===h.minimumContrastRatio&&_.colors.foreground.rgba===h.colors.foreground.rgba&&_.colors.background.rgba===h.colors.background.rgba},i.is256Color=function(_){return(50331648&_)==16777216||(50331648&_)==33554432}},237:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=o(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const _={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},1 L${.5-u},.5 L1,.5 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M1,${.5-n} L${.5-u},${.5-n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M${.5+u},1 L${.5+u},.5 L0,.5 M${.5-u},.5 L${.5-u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5+u},${.5-n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(u,n)=>`M1,.5 L${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0 M1,${.5+n} L${.5-u},${.5+n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(u,n)=>`M0,.5 L${.5+u},.5 L${.5+u},0 M${.5-u},.5 L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M0,${.5+n} L${.5+u},${.5+n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1 M${.5+u},.5 L1,.5`},"":{1:(u,n)=>`M${.5-u},0 L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(u,n)=>`M0,.5 L${.5-u},.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M${.5+u},0 L${.5+u},1 M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},1 M${.5+u},.5 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},.5 L${.5-u},0 M${.5+u},.5 L${.5+u},0`},"":{1:(u,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:(u,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(u,n)=>`M0,.5 L1,.5 M${.5-u},0 L${.5-u},1 M${.5+u},0 L${.5+u},1`},"":{1:(u,n)=>`M0,${.5+n} L${.5-u},${.5+n} L${.5-u},1 M1,${.5+n} L${.5+u},${.5+n} L${.5+u},1 M0,${.5-n} L${.5-u},${.5-n} L${.5-u},0 M1,${.5-n} L${.5+u},${.5-n} L${.5+u},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(u,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(u,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(u,n,a,c,l,m,L,v){const x=i.blockElementDefinitions[n];if(x)return function(R,k,D,T,j,N){for(let I=0;I<k.length;I++){const B=k[I],M=j/8,A=N/8;R.fillRect(D+B.x*M,T+B.y*A,B.w*M,B.h*A)}}(u,x,a,c,l,m),!0;const y=_[n];if(y)return function(R,k,D,T,j,N){let I=h.get(k);I||(I=new Map,h.set(k,I));const B=R.fillStyle;if(typeof B!="string")throw new Error(`Unexpected fillStyle type "${B}"`);let M=I.get(B);if(!M){const A=k[0].length,P=k.length,H=R.canvas.ownerDocument.createElement("canvas");H.width=A,H.height=P;const W=(0,f.throwIfFalsy)(H.getContext("2d")),z=new ImageData(A,P);let J,Y,$,O;if(B.startsWith("#"))J=parseInt(B.slice(1,3),16),Y=parseInt(B.slice(3,5),16),$=parseInt(B.slice(5,7),16),O=B.length>7&&parseInt(B.slice(7,9),16)||1;else{if(!B.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${B}" when drawing pattern glyph`);[J,Y,$,O]=B.substring(5,B.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<P;U++)for(let K=0;K<A;K++)z.data[4*(U*A+K)]=J,z.data[4*(U*A+K)+1]=Y,z.data[4*(U*A+K)+2]=$,z.data[4*(U*A+K)+3]=k[U][K]*(255*O);W.putImageData(z,0,0),M=(0,f.throwIfFalsy)(R.createPattern(H,null)),I.set(B,M)}R.fillStyle=M,R.fillRect(D,T,j,N)}(u,y,a,c,l,m),!0;const b=i.boxDrawingDefinitions[n];if(b)return function(R,k,D,T,j,N,I){R.strokeStyle=R.fillStyle;for(const[B,M]of Object.entries(k)){let A;R.beginPath(),R.lineWidth=I*Number.parseInt(B),A=typeof M=="function"?M(.15,.15/N*j):M;for(const P of A.split(" ")){const H=P[0],W=w[H];if(!W){console.error(`Could not find drawing instructions for "${H}"`);continue}const z=P.substring(1).split(",");z[0]&&z[1]&&W(R,S(z,j,N,D,T,!0,I))}R.stroke(),R.closePath()}}(u,b,a,c,l,m,v),!0;const E=i.powerlineDefinitions[n];return!!E&&(function(R,k,D,T,j,N,I,B){const M=new Path2D;M.rect(D,T,j,N),R.clip(M),R.beginPath();const A=I/12;R.lineWidth=B*A;for(const P of k.d.split(" ")){const H=P[0],W=w[H];if(!W){console.error(`Could not find drawing instructions for "${H}"`);continue}const z=P.substring(1).split(",");z[0]&&z[1]&&W(R,S(z,j,N,D,T,!1,B,(k.leftPadding??0)*(A/2),(k.rightPadding??0)*(A/2)))}k.type===1?(R.strokeStyle=R.fillStyle,R.stroke()):R.fill(),R.closePath()}(u,E,a,c,l,m,L,v),!0)};const h=new Map;function p(u,n,a=0){return Math.max(Math.min(u,n),a)}const w={C:(u,n)=>u.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(u,n)=>u.lineTo(n[0],n[1]),M:(u,n)=>u.moveTo(n[0],n[1])};function S(u,n,a,c,l,m,L,v=0,x=0){const y=u.map(b=>parseFloat(b)||parseInt(b));if(y.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<y.length;b+=2)y[b]*=n-v*L-x*L,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,n,0)),y[b]+=c+v*L;for(let b=1;b<y.length;b+=2)y[b]*=a,m&&y[b]!==0&&(y[b]=p(Math.round(y[b]+.5)-.5,a,0)),y[b]+=l;return y}},56:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=o(859);i.observeDevicePixelDimensions=function(_,h,p){let w=new h.ResizeObserver(S=>{const u=S.find(c=>c.target===_);if(!u)return;if(!("devicePixelContentBoxSize"in u))return w?.disconnect(),void(w=void 0);const n=u.devicePixelContentBoxSize[0].inlineSize,a=u.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&p(n,a)});try{w.observe(_,{box:["device-pixel-content-box"]})}catch{w.disconnect(),w=void 0}return(0,f.toDisposable)(()=>w?.disconnect())}},374:(C,i)=>{function o(_){return 57508<=_&&_<=57558}function f(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=f,i.allowRescaling=function(_,h,p,w){return h===1&&p>Math.ceil(1.5*w)&&_!==void 0&&_>255&&!f(_)&&!o(_)&&!function(S){return 57344<=S&&S<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return o(_)||function(h){return 9472<=h&&h<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,h,p=0){return(_-(2*Math.round(h)-p))%(2*Math.round(h))}},296:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,h,p,w=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const S=_.buffers.active.ydisp,u=h[1]-S,n=p[1]-S,a=Math.max(u,0),c=Math.min(n,_.rows-1);a>=_.rows||c<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=w,this.viewportStartRow=u,this.viewportEndRow=n,this.viewportCappedStartRow=a,this.viewportCappedEndRow=c,this.startCol=h[0],this.endCol=p[0])}isCellSelected(_,h,p){return!!this.hasSelection&&(p-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=o(237),_=o(860),h=o(374),p=o(160),w=o(345),S=o(485),u=o(385),n=o(147),a=o(855),c={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let l;class m{get pages(){return this._pages}constructor(b,E,R){this._document=b,this._config=E,this._unicodeService=R,this._didWarmUp=!1,this._cacheMap=new S.FourKeyMap,this._cacheMapCombined=new S.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new w.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new w.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=x(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const b=new u.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT)){const R=this._drawToCache(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT);this._cacheMap.set(E,a.DEFAULT_COLOR,a.DEFAULT_COLOR,a.DEFAULT_EXT,R)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const E=this._pages.filter(I=>2*I.canvas.width<=(m.maxTextureSize||4096)).sort((I,B)=>B.canvas.width!==I.canvas.width?B.canvas.width-I.canvas.width:B.percentageUsed-I.percentageUsed);let R=-1,k=0;for(let I=0;I<E.length;I++)if(E[I].canvas.width!==k)R=I,k=E[I].canvas.width;else if(I-R==3)break;const D=E.slice(R,R+4),T=D.map(I=>I.glyphs[0].texturePage).sort((I,B)=>I>B?1:-1),j=this.pages.length-D.length,N=this._mergePages(D,j);N.version++;for(let I=T.length-1;I>=0;I--)this._deletePage(T[I]);this.pages.push(N),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(N.canvas)}const b=new L(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){const R=2*b[0].canvas.width,k=new L(this._document,R,b);for(const[D,T]of b.entries()){const j=D*T.canvas.width%R,N=Math.floor(D/2)*T.canvas.height;k.ctx.drawImage(T.canvas,j,N);for(const B of T.glyphs)B.texturePage=E,B.sizeClipSpace.x=B.size.x/R,B.sizeClipSpace.y=B.size.y/R,B.texturePosition.x+=j,B.texturePosition.y+=N,B.texturePositionClipSpace.x=B.texturePosition.x/R,B.texturePositionClipSpace.y=B.texturePosition.y/R;this._onRemoveTextureAtlasCanvas.fire(T.canvas);const I=this._activePages.indexOf(T);I!==-1&&this._activePages.splice(I,1)}return k}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){const R=this._pages[E];for(const k of R.glyphs)k.texturePage--;R.version++}}getRasterizedGlyphCombinedChar(b,E,R,k,D){return this._getFromCacheMap(this._cacheMapCombined,b,E,R,k,D)}getRasterizedGlyph(b,E,R,k,D){return this._getFromCacheMap(this._cacheMap,b,E,R,k,D)}_getFromCacheMap(b,E,R,k,D,T=!1){return l=b.get(E,R,k,D),l||(l=this._drawToCache(E,R,k,D,T),b.set(E,R,k,D,l)),l}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,R,k){if(this._config.allowTransparency)return p.NULL_COLOR;let D;switch(b){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(E);break;case 50331648:const T=n.AttributeData.toColorRGB(E);D=p.channels.toColor(T[0],T[1],T[2]);break;default:D=R?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return D}_getForegroundColor(b,E,R,k,D,T,j,N,I,B){const M=this._getMinimumContrastColor(b,E,R,k,D,T,j,I,N,B);if(M)return M;let A;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&T<8&&(T+=8),A=this._getColorFromAnsiIndex(T);break;case 50331648:const P=n.AttributeData.toColorRGB(T);A=p.channels.toColor(P[0],P[1],P[2]);break;default:A=j?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=p.color.opaque(A)),N&&(A=p.color.multiplyOpacity(A,f.DIM_OPACITY)),A}_resolveBackgroundRgba(b,E,R){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,R,k){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&k&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return R?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,R,k,D,T,j,N,I,B){if(this._config.minimumContrastRatio===1||B)return;const M=this._getContrastCache(I),A=M.getColor(b,k);if(A!==void 0)return A||void 0;const P=this._resolveBackgroundRgba(E,R,j),H=this._resolveForegroundRgba(D,T,j,N),W=p.rgba.ensureContrastRatio(P,H,this._config.minimumContrastRatio/(I?2:1));if(!W)return void M.setColor(b,k,null);const z=p.channels.toColor(W>>24&255,W>>16&255,W>>8&255);return M.setColor(b,k,z),z}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,R,k,D=!1){const T=typeof b=="number"?String.fromCharCode(b):b,j=Math.min(this._config.deviceCellWidth*Math.max(T.length,2)+4,this._textureSize);this._tmpCanvas.width<j&&(this._tmpCanvas.width=j);const N=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<N&&(this._tmpCanvas.height=N),this._tmpCtx.save(),this._workAttributeData.fg=R,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=k,this._workAttributeData.isInvisible())return c;const I=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),M=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),P=!!this._workAttributeData.isUnderline(),H=!!this._workAttributeData.isStrikethrough(),W=!!this._workAttributeData.isOverline();let z=this._workAttributeData.getFgColor(),J=this._workAttributeData.getFgColorMode(),Y=this._workAttributeData.getBgColor(),$=this._workAttributeData.getBgColorMode();if(B){const q=z;z=Y,Y=q;const G=J;J=$,$=G}const O=this._getBackgroundColor($,Y,B,M);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const U=I?this._config.fontWeightBold:this._config.fontWeight,K=A?"italic":"";this._tmpCtx.font=`${K} ${U} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Q=T.length===1&&(0,h.isPowerlineGlyph)(T.charCodeAt(0)),Z=T.length===1&&(0,h.isRestrictedPowerlineGlyph)(T.charCodeAt(0)),he=this._getForegroundColor(E,$,Y,R,J,z,B,M,I,(0,h.treatGlyphAsBackgroundColor)(T.charCodeAt(0)));this._tmpCtx.fillStyle=he.css;const ee=Z?0:4;let ue=!1;this._config.customGlyphs!==!1&&(ue=(0,_.tryDrawCustomChar)(this._tmpCtx,T,ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let pe,oe=!Q;if(pe=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),P){this._tmpCtx.save();const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),G=q%2==1?.5:0;if(this._tmpCtx.lineWidth=q,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())oe=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{oe=!1;let fe=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&fe<8&&(fe+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(fe).css}this._tmpCtx.beginPath();const ae=ee,ie=Math.ceil(ee+this._config.deviceCharHeight)-G-(D?2*q:0),ge=ie+q,ye=ie+2*q;let Se=this._workAttributeData.getUnderlineVariantOffset();for(let fe=0;fe<pe;fe++){this._tmpCtx.save();const ce=ae+fe*this._config.deviceCellWidth,le=ae+(fe+1)*this._config.deviceCellWidth,et=ce+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ce,ie),this._tmpCtx.lineTo(le,ie),this._tmpCtx.moveTo(ce,ye),this._tmpCtx.lineTo(le,ye);break;case 3:const tt=q<=1?ye:Math.ceil(ee+this._config.deviceCharHeight-q/2)-G,Ae=q<=1?ie:Math.ceil(ee+this._config.deviceCharHeight+q/2)-G,Cr=new Path2D;Cr.rect(ce,ie,this._config.deviceCellWidth,ye-ie),this._tmpCtx.clip(Cr),this._tmpCtx.moveTo(ce-this._config.deviceCellWidth/2,ge),this._tmpCtx.bezierCurveTo(ce-this._config.deviceCellWidth/2,Ae,ce,Ae,ce,ge),this._tmpCtx.bezierCurveTo(ce,tt,et,tt,et,ge),this._tmpCtx.bezierCurveTo(et,Ae,le,Ae,le,ge),this._tmpCtx.bezierCurveTo(le,tt,le+this._config.deviceCellWidth/2,tt,le+this._config.deviceCellWidth/2,ge);break;case 4:const lt=Se===0?0:Se>=q?2*q-Se:q-Se;Se>=q||lt===0?(this._tmpCtx.setLineDash([Math.round(q),Math.round(q)]),this._tmpCtx.moveTo(ce+lt,ie),this._tmpCtx.lineTo(le,ie)):(this._tmpCtx.setLineDash([Math.round(q),Math.round(q)]),this._tmpCtx.moveTo(ce,ie),this._tmpCtx.lineTo(ce+lt,ie),this._tmpCtx.moveTo(ce+lt+q,ie),this._tmpCtx.lineTo(le,ie)),Se=(0,h.computeNextVariantOffset)(le-ce,q,Se);break;case 5:const Hr=.6,no=.3,Sr=le-ce,Si=Math.floor(Hr*Sr),wi=Math.floor(no*Sr),oo=Sr-Si-wi;this._tmpCtx.setLineDash([Si,wi,oo]),this._tmpCtx.moveTo(ce,ie),this._tmpCtx.lineTo(le,ie);break;default:this._tmpCtx.moveTo(ce,ie),this._tmpCtx.lineTo(le,ie)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ue&&this._config.fontSize>=12&&!this._config.allowTransparency&&T!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const fe=this._tmpCtx.measureText(T);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in fe&&fe.actualBoundingBoxDescent>0){this._tmpCtx.save();const ce=new Path2D;ce.rect(ae,ie-Math.ceil(q/2),this._config.deviceCellWidth*pe,ye-ie+Math.ceil(q/2)),this._tmpCtx.clip(ce),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=O.css,this._tmpCtx.strokeText(T,ee,ee+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(W){const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),G=q%2==1?.5:0;this._tmpCtx.lineWidth=q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+G),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*pe,ee+G),this._tmpCtx.stroke()}if(ue||this._tmpCtx.fillText(T,ee,ee+this._config.deviceCharHeight),T==="_"&&!this._config.allowTransparency){let q=v(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),O,he,oe);if(q)for(let G=1;G<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(T,ee,ee+this._config.deviceCharHeight-G),q=v(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),O,he,oe),q);G++);}if(H){const q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),G=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+Math.floor(this._config.deviceCharHeight/2)-G),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*pe,ee+Math.floor(this._config.deviceCharHeight/2)-G),this._tmpCtx.stroke()}this._tmpCtx.restore();const He=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let gt;if(gt=this._config.allowTransparency?function(q){for(let G=0;G<q.data.length;G+=4)if(q.data[G+3]>0)return!1;return!0}(He):v(He,O,he,oe),gt)return c;const ne=this._findGlyphBoundingBox(He,this._workBoundingBox,j,Z,ue,ee);let te,re;for(;;){if(this._activePages.length===0){const q=this._createNewPage();te=q,re=q.currentRow,re.height=ne.size.y;break}te=this._activePages[this._activePages.length-1],re=te.currentRow;for(const q of this._activePages)ne.size.y<=q.currentRow.height&&(te=q,re=q.currentRow);for(let q=this._activePages.length-1;q>=0;q--)for(const G of this._activePages[q].fixedRows)G.height<=re.height&&ne.size.y<=G.height&&(te=this._activePages[q],re=G);if(re.y+ne.size.y>=te.canvas.height||re.height>ne.size.y+2){let q=!1;if(te.currentRow.y+te.currentRow.height+ne.size.y>=te.canvas.height){let G;for(const ae of this._activePages)if(ae.currentRow.y+ae.currentRow.height+ne.size.y<ae.canvas.height){G=ae;break}if(G)te=G;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&re.y+ne.size.y<=te.canvas.height&&re.height>=ne.size.y&&re.x+ne.size.x<=te.canvas.width)q=!0;else{const ae=this._createNewPage();te=ae,re=ae.currentRow,re.height=ne.size.y,q=!0}}q||(te.currentRow.height>0&&te.fixedRows.push(te.currentRow),re={x:0,y:te.currentRow.y+te.currentRow.height,height:ne.size.y},te.fixedRows.push(re),te.currentRow={x:0,y:re.y+re.height,height:0})}if(re.x+ne.size.x<=te.canvas.width)break;re===te.currentRow?(re.x=0,re.y+=re.height,re.height=0):te.fixedRows.splice(te.fixedRows.indexOf(re),1)}return ne.texturePage=this._pages.indexOf(te),ne.texturePosition.x=re.x,ne.texturePosition.y=re.y,ne.texturePositionClipSpace.x=re.x/te.canvas.width,ne.texturePositionClipSpace.y=re.y/te.canvas.height,ne.sizeClipSpace.x/=te.canvas.width,ne.sizeClipSpace.y/=te.canvas.height,re.height=Math.max(re.height,ne.size.y),re.x+=ne.size.x,te.ctx.putImageData(He,ne.texturePosition.x-this._workBoundingBox.left,ne.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ne.size.x,ne.size.y),te.addGlyph(ne),te.version++,ne}_findGlyphBoundingBox(b,E,R,k,D,T){E.top=0;const j=k?this._config.deviceCellHeight:this._tmpCanvas.height,N=k?this._config.deviceCellWidth:R;let I=!1;for(let B=0;B<j;B++){for(let M=0;M<N;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(b.data[A]!==0){E.top=B,I=!0;break}}if(I)break}E.left=0,I=!1;for(let B=0;B<T+N;B++){for(let M=0;M<j;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.left=B,I=!0;break}}if(I)break}E.right=N,I=!1;for(let B=T+N-1;B>=T;B--){for(let M=0;M<j;M++){const A=M*this._tmpCanvas.width*4+4*B+3;if(b.data[A]!==0){E.right=B,I=!0;break}}if(I)break}E.bottom=j,I=!1;for(let B=j-1;B>=0;B--){for(let M=0;M<N;M++){const A=B*this._tmpCanvas.width*4+4*M+3;if(b.data[A]!==0){E.bottom=B,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+T+(k||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+T+(k||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=m;class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,R){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],R)for(const k of R)this._glyphs.push(...k.glyphs),this._usedPixels+=k._usedPixels;this.canvas=x(b,E,E),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function v(y,b,E,R){const k=b.rgba>>>24,D=b.rgba>>>16&255,T=b.rgba>>>8&255,j=E.rgba>>>24,N=E.rgba>>>16&255,I=E.rgba>>>8&255,B=Math.floor((Math.abs(k-j)+Math.abs(D-N)+Math.abs(T-I))/12);let M=!0;for(let A=0;A<y.data.length;A+=4)y.data[A]===k&&y.data[A+1]===D&&y.data[A+2]===T||R&&Math.abs(y.data[A]-k)+Math.abs(y.data[A+1]-D)+Math.abs(y.data[A+2]-T)<B?y.data[A+3]=0:M=!1;return M}function x(y,b,E){const R=y.createElement("canvas");return R.width=b,R.height=E,R}},577:function(C,i,o){var f=this&&this.__decorate||function(a,c,l,m){var L,v=arguments.length,x=v<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,l):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,c,l,m);else for(var y=a.length-1;y>=0;y--)(L=a[y])&&(x=(v<3?L(x):v>3?L(c,l,x):L(c,l))||x);return v>3&&x&&Object.defineProperty(c,l,x),x},_=this&&this.__param||function(a,c){return function(l,m){c(l,m,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=o(147),p=o(855),w=o(782),S=o(97);class u extends h.AttributeData{constructor(c,l,m){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=l,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let n=i.CharacterJoinerService=class bf{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new w.CellData}register(c){const l={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(l),l.id}deregister(c){for(let l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===c)return this._characterJoiners.splice(l,1),!0;return!1}getJoinedCharacters(c){if(this._characterJoiners.length===0)return[];const l=this._bufferService.buffer.lines.get(c);if(!l||l.length===0)return[];const m=[],L=l.translateToString(!0);let v=0,x=0,y=0,b=l.getFg(0),E=l.getBg(0);for(let R=0;R<l.getTrimmedLength();R++)if(l.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==E){if(R-v>1){const k=this._getJoinedRanges(L,y,x,l,v);for(let D=0;D<k.length;D++)m.push(k[D])}v=R,y=x,b=this._workCell.fg,E=this._workCell.bg}x+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const R=this._getJoinedRanges(L,y,x,l,v);for(let k=0;k<R.length;k++)m.push(R[k])}return m}_getJoinedRanges(c,l,m,L,v){const x=c.substring(l,m);let y=[];try{y=this._characterJoiners[0].handler(x)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const E=this._characterJoiners[b].handler(x);for(let R=0;R<E.length;R++)bf._mergeRanges(y,E[R])}catch(E){console.error(E)}return this._stringRangesToCellRanges(y,L,v),y}_stringRangesToCellRanges(c,l,m){let L=0,v=!1,x=0,y=c[L];if(y){for(let b=m;b<this._bufferService.cols;b++){const E=l.getWidth(b),R=l.getString(b).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!v&&y[0]<=x&&(y[0]=b,v=!0),y[1]<=x){if(y[1]=b,y=c[++L],!y)break;y[0]<=x?(y[0]=b,v=!0):v=!1}x+=R}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(c,l){let m=!1;for(let L=0;L<c.length;L++){const v=c[L];if(m){if(l[1]<=v[0])return c[L-1][1]=l[1],c;if(l[1]<=v[1])return c[L-1][1]=Math.max(l[1],v[1]),c.splice(L,1),c;c.splice(L,1),L--}else{if(l[1]<=v[0])return c.splice(L,0,l),c;if(l[1]<=v[1])return v[0]=Math.min(l[0],v[0]),c;l[0]<v[1]&&(v[0]=Math.min(l[0],v[0]),m=!0)}}return m?c[c.length-1][1]=l[1]:c.push(l),c}};i.CharacterJoinerService=n=f([_(0,S.IBufferService)],n)},160:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,_=0,h=0;var p,w,S,u,n;function a(l){const m=l.toString(16);return m.length<2?"0"+m:m}function c(l,m){return l<m?(m+.05)/(l+.05):(l+.05)/(m+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(l){l.toCss=function(m,L,v,x){return x!==void 0?`#${a(m)}${a(L)}${a(v)}${a(x)}`:`#${a(m)}${a(L)}${a(v)}`},l.toRgba=function(m,L,v,x=255){return(m<<24|L<<16|v<<8|x)>>>0},l.toColor=function(m,L,v,x){return{css:l.toCss(m,L,v,x),rgba:l.toRgba(m,L,v,x)}}}(p||(i.channels=p={})),function(l){function m(L,v){return h=Math.round(255*v),[o,f,_]=n.toChannels(L.rgba),{css:p.toCss(o,f,_,h),rgba:p.toRgba(o,f,_,h)}}l.blend=function(L,v){if(h=(255&v.rgba)/255,h===1)return{css:v.css,rgba:v.rgba};const x=v.rgba>>24&255,y=v.rgba>>16&255,b=v.rgba>>8&255,E=L.rgba>>24&255,R=L.rgba>>16&255,k=L.rgba>>8&255;return o=E+Math.round((x-E)*h),f=R+Math.round((y-R)*h),_=k+Math.round((b-k)*h),{css:p.toCss(o,f,_),rgba:p.toRgba(o,f,_)}},l.isOpaque=function(L){return(255&L.rgba)==255},l.ensureContrastRatio=function(L,v,x){const y=n.ensureContrastRatio(L.rgba,v.rgba,x);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},l.opaque=function(L){const v=(255|L.rgba)>>>0;return[o,f,_]=n.toChannels(v),{css:p.toCss(o,f,_),rgba:v}},l.opacity=m,l.multiplyOpacity=function(L,v){return h=255&L.rgba,m(L,h*v/255)},l.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(i.color=w={})),function(l){let m,L;try{const v=document.createElement("canvas");v.width=1,v.height=1;const x=v.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",L=m.createLinearGradient(0,0,1,1))}catch{}l.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),p.toColor(o,f,_);case 5:return o=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),_=parseInt(v.slice(3,4).repeat(2),16),h=parseInt(v.slice(4,5).repeat(2),16),p.toColor(o,f,_,h);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const x=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return o=parseInt(x[1]),f=parseInt(x[2]),_=parseInt(x[3]),h=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),p.toColor(o,f,_,h);if(!m||!L)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=L,m.fillStyle=v,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[o,f,_,h]=m.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,f,_,h),css:v}}}(S||(i.css=S={})),function(l){function m(L,v,x){const y=L/255,b=v/255,E=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}l.relativeLuminance=function(L){return m(L>>16&255,L>>8&255,255&L)},l.relativeLuminance2=m}(u||(i.rgb=u={})),function(l){function m(v,x,y){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;j<y&&(k>0||D>0||T>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),T-=Math.max(0,Math.ceil(.1*T)),j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}function L(v,x,y){const b=v>>24&255,E=v>>16&255,R=v>>8&255;let k=x>>24&255,D=x>>16&255,T=x>>8&255,j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));for(;j<y&&(k<255||D<255||T<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),T=Math.min(255,T+Math.ceil(.1*(255-T))),j=c(u.relativeLuminance2(k,D,T),u.relativeLuminance2(b,E,R));return(k<<24|D<<16|T<<8|255)>>>0}l.blend=function(v,x){if(h=(255&x)/255,h===1)return x;const y=x>>24&255,b=x>>16&255,E=x>>8&255,R=v>>24&255,k=v>>16&255,D=v>>8&255;return o=R+Math.round((y-R)*h),f=k+Math.round((b-k)*h),_=D+Math.round((E-D)*h),p.toRgba(o,f,_)},l.ensureContrastRatio=function(v,x,y){const b=u.relativeLuminance(v>>8),E=u.relativeLuminance(x>>8);if(c(b,E)<y){if(E<b){const D=m(v,x,y),T=c(b,u.relativeLuminance(D>>8));if(T<y){const j=L(v,x,y);return T>c(b,u.relativeLuminance(j>>8))?D:j}return D}const R=L(v,x,y),k=c(b,u.relativeLuminance(R>>8));if(k<y){const D=m(v,x,y);return k>c(b,u.relativeLuminance(D>>8))?R:D}return R}},l.reduceLuminance=m,l.increaseLuminance=L,l.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]}}(n||(i.rgba=n={})),i.toPaddedHex=a,i.contrastRatio=c},345:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(_=>f.fire(_))},i.runAndSubscribe=function(o,f){return f(void 0),o(_=>f(_))}},859:(C,i)=>{function o(f){for(const _ of f)_.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const _=this._disposables.indexOf(f);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){this._isDisposed||f===this._value||(this._value?.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},485:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(_,h,p){this._data[_]||(this._data[_]={}),this._data[_][h]=p}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,_,h,p,w){this._data.get(f,_)||this._data.set(f,_,new o),this._data.get(f,_).set(h,p,w)}get(f,_,h,p){return this._data.get(f,_)?.get(h,p)}clear(){this._data.clear()}}},399:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=o.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(399);class _{constructor(){this._tasks=[],this._i=0}enqueue(w){this._tasks.push(w),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(w){this._idleCallback=void 0;let S=0,u=0,n=w.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),u=Math.max(S,u),a=w.timeRemaining(),1.5*u>a)return n-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-S))}ms`),void this._start();n=a}this.clear()}}class h extends _{_requestCallback(w){return setTimeout(()=>w(this._createDeadline(16)))}_cancelCallback(w){clearTimeout(w)}_createDeadline(w){const S=Date.now()+w;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new o;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(133),_=o(855),h=o(147);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const u=new p;return u.setFromCharData(S),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(S[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(S[_.CHAR_DATA_CHAR_INDEX].length===2){const n=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const a=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(n-55296)+a-56320+65536|S[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=S[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=S[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,_=o.length){let h="";for(let p=f;p<_;++p){let w=o[p];w>65535?(w-=65536,h+=String.fromCharCode(55296+(w>>10))+String.fromCharCode(w%1024+56320)):h+=String.fromCharCode(w)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const _=o.length;if(!_)return 0;let h=0,p=0;if(this._interim){const w=o.charCodeAt(p++);56320<=w&&w<=57343?f[h++]=1024*(this._interim-55296)+w-56320+65536:(f[h++]=this._interim,f[h++]=w),this._interim=0}for(let w=p;w<_;++w){const S=o.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=_)return this._interim=S,h;const u=o.charCodeAt(w);56320<=u&&u<=57343?f[h++]=1024*(S-55296)+u-56320+65536:(f[h++]=S,f[h++]=u)}else S!==65279&&(f[h++]=S)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const _=o.length;if(!_)return 0;let h,p,w,S,u=0,n=0,a=0;if(this.interim[0]){let m=!1,L=this.interim[0];L&=(224&L)==192?31:(240&L)==224?15:7;let v,x=0;for(;(v=63&this.interim[++x])&&x<4;)L<<=6,L|=v;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-x;for(;a<b;){if(a>=_)return 0;if(v=o[a++],(192&v)!=128){a--,m=!0;break}this.interim[x++]=v,L<<=6,L|=63&v}m||(y===2?L<128?a--:f[u++]=L:y===3?L<2048||L>=55296&&L<=57343||L===65279||(f[u++]=L):L<65536||L>1114111||(f[u++]=L)),this.interim.fill(0)}const c=_-4;let l=a;for(;l<_;){for(;!(!(l<c)||128&(h=o[l])||128&(p=o[l+1])||128&(w=o[l+2])||128&(S=o[l+3]));)f[u++]=h,f[u++]=p,f[u++]=w,f[u++]=S,l+=4;if(h=o[l++],h<128)f[u++]=h;else if((224&h)==192){if(l>=_)return this.interim[0]=h,u;if(p=o[l++],(192&p)!=128){l--;continue}if(n=(31&h)<<6|63&p,n<128){l--;continue}f[u++]=n}else if((240&h)==224){if(l>=_)return this.interim[0]=h,u;if(p=o[l++],(192&p)!=128){l--;continue}if(l>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[l++],(192&w)!=128){l--;continue}if(n=(15&h)<<12|(63&p)<<6|63&w,n<2048||n>=55296&&n<=57343||n===65279)continue;f[u++]=n}else if((248&h)==240){if(l>=_)return this.interim[0]=h,u;if(p=o[l++],(192&p)!=128){l--;continue}if(l>=_)return this.interim[0]=h,this.interim[1]=p,u;if(w=o[l++],(192&w)!=128){l--;continue}if(l>=_)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=w,u;if(S=o[l++],(192&S)!=128){l--;continue}if(n=(7&h)<<18|(63&p)<<12|(63&w)<<6|63&S,n<65536||n>1114111)continue;f[u++]=n}}return u}}},776:function(C,i,o){var f=this&&this.__decorate||function(n,a,c,l){var m,L=arguments.length,v=L<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,c,l);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(v=(L<3?m(v):L>3?m(a,c,v):m(a,c))||v);return L>3&&v&&Object.defineProperty(a,c,v),v},_=this&&this.__param||function(n,a){return function(c,l){a(c,l,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=o(859),p=o(97),w={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let S,u=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=w[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let a=0;a<n.length;a++)typeof n[a]=="function"&&(n[a]=n[a]())}_log(n,a,c){this._evalLazyOptionalParams(c),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...c)}trace(n,...a){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,n,a)}debug(n,...a){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,n,a)}info(n,...a){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,n,a)}warn(n,...a){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,n,a)}error(n,...a){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,n,a)}};i.LogService=u=f([_(0,p.IOptionsService)],u),i.setTraceLogger=function(n){S=n},i.traceCall=function(n,a,c){if(typeof c.value!="function")throw new Error("not supported");const l=c.value;c.value=function(...m){if(S.logLevel!==p.LogLevelEnum.TRACE)return l.apply(this,m);S.trace(`GlyphRenderer#${l.name}(${m.map(v=>JSON.stringify(v)).join(", ")})`);const L=l.apply(this,m);return S.trace(`GlyphRenderer#${l.name} return`,L),L}}},726:(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[f]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(p,w,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,n,a){n[o]===n?n[f].push({id:u,index:a}):(n[f]=[{id:u,index:a}],n[o]=n)})(h,p,S)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},97:(C,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(726);var _;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function d(C){var i=s[C];if(i!==void 0)return i.exports;var o=s[C]={exports:{}};return r[C].call(o.exports,o,o.exports,d),o.exports}var g={};return(()=>{var C=g;Object.defineProperty(C,"__esModule",{value:!0}),C.CanvasAddon=void 0;const i=d(345),o=d(859),f=d(776),_=d(949);class h extends o.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){return this._renderer?.textureAtlas}activate(w){const S=w._core;if(!w.element)return void this.register(S.onWillOpen(()=>this.activate(w)));this._terminal=w;const u=S.coreService,n=S.optionsService,a=S.screenElement,c=S.linkifier,l=S,m=l._bufferService,L=l._renderService,v=l._characterJoinerService,x=l._charSizeService,y=l._coreBrowserService,b=l._decorationService,E=l._logService,R=l._themeService;(0,f.setTraceLogger)(E),this._renderer=new _.CanvasRenderer(w,a,c,m,x,n,v,u,y,b,R),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),L.setRenderer(this._renderer),L.handleResize(m.cols,m.rows),this.register((0,o.toDisposable)(()=>{L.setRenderer(this._terminal._core._createRenderer()),L.handleResize(w.cols,w.rows),this._renderer?.dispose(),this._renderer=void 0}))}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}C.CanvasAddon=h})(),g})())})(xf);var Ah=xf.exports;const Pm="\x1B[2m",Im="\x1B[22m";function Fm(e){const t=e.charCodeAt(0);return t>=32&&t<=126}class Nm{term;predicted=[];_enabled=!1;constructor(t){this.term=t}get enabled(){return this._enabled}set enabled(t){this._enabled=t,t||this.reset()}handleInput(t){if(this._enabled)for(const r of t){if(r==="\r"||r===`
`){this.reset();return}if(r===""||r==="\b"){this.predicted.length>0&&(this.predicted.pop(),this.term.write("\b \b"));return}if(!Fm(r)){this.reset();return}this.predicted.push(r),this.term.write(`${Pm}${r}${Im}`)}}handleOutput(t){if(!this._enabled||this.predicted.length===0)return;const r=new TextDecoder().decode(t);let s=0;for(let d=0;d<r.length&&s<this.predicted.length&&r[d]===this.predicted[s];d++)s++;if(s>0){const d="\b \b".repeat(this.predicted.length);this.term.write(d),this.predicted.splice(0,s)}else if(this.predicted.length>0){const d="\b \b".repeat(this.predicted.length);this.term.write(d),this.predicted=[]}}isActive(){return this.predicted.length>0}reset(){if(this.predicted.length>0){const t="\b \b".repeat(this.predicted.length);this.term.write(t),this.predicted=[]}}}const Hm=6,jm=24,No=12,$m=e=>{const t=document.createElement("textarea");t.value=e,t.style.cssText="position:fixed;left:-9999px;top:-9999px;opacity:0",document.body.appendChild(t),t.focus(),t.select();let r=!1;try{r=document.execCommand("copy")}catch{}return document.body.removeChild(t),r},Wm=()=>{const e=V.useRef(null),t=V.useRef(null),r=V.useRef(null),{subscribeOutput:s,sendInput:d,sendControl:g,resize:C,setClientTty:i}=Xt(),o=V.useRef(i),[f,_]=V.useState(()=>{const N=localStorage.getItem("terminal_font_size");return N?parseInt(N,10):No}),h=V.useRef({initialDistance:0,initialFontSize:No}),p=V.useRef(f),w=V.useRef({lastY:0,accumDelta:0,mode:"none"}),S=V.useRef(null),[u,n]=V.useState(!1),a=V.useRef(null),c=V.useRef(null),l=V.useRef(d),m=V.useRef({mouseTracking:!1,sgrMode:!1}),[L,v]=V.useState(!1),x=V.useRef(null);V.useEffect(()=>{l.current=d},[d]);const y=V.useCallback(()=>{if(r.current&&t.current){r.current.fit();const{cols:N,rows:I}=t.current;C(N,I)}},[C]),b=V.useCallback(()=>{S.current&&clearTimeout(S.current),S.current=window.setTimeout(y,150)},[y]),E=V.useCallback(N=>{const I=Math.max(Hm,Math.min(jm,Math.round(N)));t.current&&I!==t.current.options.fontSize&&(t.current.options.fontSize=I,_(I),p.current=I,localStorage.setItem("terminal_font_size",String(I)),y(),n(!0),a.current&&clearTimeout(a.current),a.current=window.setTimeout(()=>n(!1),1200))},[y]),R=N=>{if(N.length<2)return 0;const I=N[0].clientX-N[1].clientX,B=N[0].clientY-N[1].clientY;return Math.sqrt(I*I+B*B)},k=V.useCallback(N=>{N.touches.length===2?(w.current.mode="pinch",h.current={initialDistance:R(N.touches),initialFontSize:p.current}):N.touches.length===1&&(w.current={lastY:N.touches[0].clientY,accumDelta:0,mode:"scroll"})},[]),D=V.useCallback(N=>{const I=w.current;if(N.touches.length===2){I.mode="pinch";const B=R(N.touches),{initialDistance:M,initialFontSize:A}=h.current;if(M>0){const P=B/M;E(A*P)}N.preventDefault()}else if(N.touches.length===1&&I.mode==="scroll"){const B=t.current;if(!B)return;const M=B.buffer.active.type==="alternate",A=m.current;if(M&&A.mouseTracking){const P=N.touches[0].clientY,H=I.lastY-P;I.lastY=P,I.accumDelta+=H;const W=e.current?.querySelector(".xterm-screen");if(!W)return;const z=W.getBoundingClientRect(),J=z.height/B.rows,Y=J*.8;for(;Math.abs(I.accumDelta)>=Y;){const $=I.accumDelta>0?1:-1;I.accumDelta-=$*Y;const O=z.width/B.cols,U=Math.max(1,Math.min(B.cols,Math.floor((N.touches[0].clientX-z.left)/O)+1)),K=Math.max(1,Math.min(B.rows,Math.floor((N.touches[0].clientY-z.top)/J)+1)),Q=$>0?65:64;A.sgrMode?l.current(`\x1B[<${Q};${U};${K}M`):l.current(`\x1B[M${String.fromCharCode(Q+32)}${String.fromCharCode(U+32)}${String.fromCharCode(K+32)}`)}N.preventDefault()}}},[E]),T=V.useCallback(()=>{w.current.mode="none"},[]);V.useEffect(()=>{if(!e.current)return;const N=new Tm.Terminal({fontSize:f,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#0d1117",foreground:"#e6edf3",cursor:"#58a6ff",cursorAccent:"#0d1117",selectionBackground:"rgba(163, 113, 247, 0.3)",black:"#484f58",red:"#f85149",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#a371f7",cyan:"#39c5cf",white:"#b1bac4",brightBlack:"#6e7681",brightRed:"#ffa198",brightGreen:"#56d364",brightYellow:"#e3b341",brightBlue:"#79c0ff",brightMagenta:"#d2a8ff",brightCyan:"#56d4dd",brightWhite:"#f0f6fc"},scrollback:1e3,cursorBlink:!0,allowProposedApi:!0,macOptionClickForcesSelection:!0});t.current=N;const I=new Nm(N);I.enabled=localStorage.getItem("terminal_predictive_echo")==="on",c.current=I;const B=new Bm.FitAddon;r.current=B,N.loadAddon(B);let M="dom";try{const G=new Om.WebglAddon;G.onContextLoss(()=>{console.warn("[Terminal] WebGL context lost, falling back to canvas"),G.dispose();try{N.loadAddon(new Ah.CanvasAddon)}catch{}}),N.loadAddon(G),M="webgl"}catch{try{N.loadAddon(new Ah.CanvasAddon),M="canvas"}catch{M="dom"}}console.log(`[Terminal] Using ${M} renderer`),N.open(e.current);const A=e.current.querySelector(".xterm-screen");let P=null,H=!1;const W=4,z=new WeakSet,J=/mac/i.test(navigator.platform)||/macintosh/i.test(navigator.userAgent),Y=J?{altKey:!0}:{shiftKey:!0},$=(G,ae={})=>{const ie={bubbles:!0,cancelable:!0,view:G.view,detail:G.detail,screenX:G.screenX,screenY:G.screenY,clientX:G.clientX,clientY:G.clientY,button:G.button,buttons:G.buttons,relatedTarget:G.relatedTarget,shiftKey:G.shiftKey,ctrlKey:G.ctrlKey,altKey:G.altKey,metaKey:G.metaKey,...ae},ge=new MouseEvent(G.type,ie);return z.add(ge),ge},O=G=>{z.has(G)||!m.current.mouseTracking||G.button!==0||(J?G.altKey:G.shiftKey)||(G.stopImmediatePropagation(),G.preventDefault(),P=G,H=!1)},U=G=>{if(!P||z.has(G))return;if(G.stopImmediatePropagation(),G.preventDefault(),!H){const ie=G.clientX-P.clientX,ge=G.clientY-P.clientY;if(ie*ie+ge*ge<W*W)return;H=!0,P.target?.dispatchEvent($(P,Y))}const ae=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,view:G.view,screenX:G.screenX,screenY:G.screenY,clientX:G.clientX,clientY:G.clientY,button:G.button,buttons:G.buttons,ctrlKey:G.ctrlKey,altKey:G.altKey,metaKey:G.metaKey,shiftKey:G.shiftKey,...Y});z.add(ae),G.target?.dispatchEvent(ae)},K=G=>{!P||z.has(G)||(G.stopImmediatePropagation(),G.preventDefault(),H?G.target?.dispatchEvent($(G,Y)):(P.target?.dispatchEvent($(P)),G.target?.dispatchEvent($(G))),P=null,H=!1)};A&&(A.addEventListener("mousedown",O,{capture:!0}),A.addEventListener("mousemove",U,{capture:!0}),A.addEventListener("mouseup",K,{capture:!0}));const Q=N.parser.registerOscHandler(7337,G=>(G&&o.current(G),!1)),Z=N.parser.registerCsiHandler({prefix:"?",final:"h"},G=>{for(let ae=0;ae<G.length;ae++){const ie=G[ae];typeof ie=="number"&&((ie===1e3||ie===1002||ie===1003)&&(m.current.mouseTracking=!0),ie===1006&&(m.current.sgrMode=!0))}return!1}),he=N.parser.registerCsiHandler({prefix:"?",final:"l"},G=>{for(let ae=0;ae<G.length;ae++){const ie=G[ae];typeof ie=="number"&&((ie===1e3||ie===1002||ie===1003)&&(m.current.mouseTracking=!1),ie===1006&&(m.current.sgrMode=!1))}return!1});setTimeout(()=>{B.fit();const{cols:G,rows:ae}=N;C(G,ae)},0);const ee=N.onData(G=>{I.handleInput(G),d(G)}),ue=5;let pe=0,oe=!1;const He=s(G=>{G instanceof Uint8Array&&I.handleOutput(G),pe++,pe>=ue&&!oe&&(oe=!0,g(50)),N.write((G instanceof Uint8Array,G),()=>{pe--,pe===0&&oe&&(oe=!1,g(51))})}),gt=G=>{I.enabled=G.detail};window.addEventListener("predictive-echo-changed",gt),window.addEventListener("resize",b);const ne=window.visualViewport;ne?.addEventListener("resize",b);const te=e.current;te.addEventListener("touchstart",k,{passive:!0}),te.addEventListener("touchmove",D,{passive:!1}),te.addEventListener("touchend",T,{passive:!0});const re=async G=>{const ae=G.clipboardData?.items;if(ae){for(const ie of Array.from(ae))if(ie.type.startsWith("image/")){G.preventDefault();const ge=ie.getAsFile();if(!ge)return;try{const ye=await fetch("/api/upload-image",{method:"POST",headers:{"Content-Type":ge.type},body:ge});if(!ye.ok)throw new Error(`Upload failed: ${ye.status}`);const{path:Se}=await ye.json();d(Se)}catch(ye){console.error("[Terminal] Image upload failed:",ye)}return}}};te.addEventListener("paste",re,!0);const q=()=>{if(document.getElementById("copy-mode-overlay"))return;const G=[],ae=N.buffer.active;for(let lt=0;lt<ae.length;lt++){const Hr=ae.getLine(lt);Hr&&G.push(Hr.translateToString(!0))}const ie=G.join(`
`).replace(/\n+$/,"");if(!ie)return;const ge=document.createElement("div");ge.id="copy-mode-overlay",ge.style.cssText="position:fixed;inset:0;z-index:9999;display:flex;flex-direction:column;background:#0d1117;";const ye=document.createElement("div");ye.style.cssText="display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-bottom:1px solid #30363d;flex-shrink:0;";const Se=document.createElement("span");Se.textContent="Select text to copy",Se.style.cssText="color:#8b949e;font-size:12px;";const fe=document.createElement("div");fe.style.cssText="display:flex;gap:8px;";const ce="padding:4px 10px;border-radius:6px;border:1px solid #30363d;font-size:12px;background:#21262d;color:#e6edf3;-webkit-appearance:none;",le=document.createElement("button");le.textContent="Select All",le.style.cssText=ce;const et=document.createElement("button");et.textContent="Copy All",et.style.cssText=ce+"background:#58a6ff;color:#fff;border-color:#58a6ff;";const tt=document.createElement("button");tt.textContent="",tt.style.cssText=ce+"min-width:32px;",fe.append(le,et,tt),ye.append(Se,fe);const Ae=document.createElement("textarea");Ae.readOnly=!0,Ae.value=ie,Ae.style.cssText='flex:1;margin:0;padding:12px;border:none;resize:none;outline:none;background:#0d1117;color:#e6edf3;font-family:Menlo,Monaco,"Courier New",monospace;font-size:12px;line-height:1.5;-webkit-user-select:text;user-select:text;-webkit-touch-callout:default;',ge.append(ye,Ae),document.body.appendChild(ge),Ae.scrollTop=Ae.scrollHeight;const Cr=()=>{ge.remove()};tt.onclick=Cr,le.onclick=()=>{Ae.focus(),Ae.select()},et.onclick=()=>{Ae.focus(),Ae.select(),$m(ie),v(!0),x.current&&clearTimeout(x.current),x.current=window.setTimeout(()=>v(!1),1500)}};return window.addEventListener("terminal-copy-viewport",q),()=>{He(),ee.dispose(),Q.dispose(),Z.dispose(),he.dispose(),window.removeEventListener("predictive-echo-changed",gt),window.removeEventListener("resize",b),ne?.removeEventListener("resize",b),window.removeEventListener("terminal-copy-viewport",q),A&&(A.removeEventListener("mousedown",O,{capture:!0}),A.removeEventListener("mousemove",U,{capture:!0}),A.removeEventListener("mouseup",K,{capture:!0})),S.current&&clearTimeout(S.current),x.current&&clearTimeout(x.current),te.removeEventListener("touchstart",k),te.removeEventListener("touchmove",D),te.removeEventListener("touchend",T),te.removeEventListener("paste",re,!0),N.dispose()}},[s,d,g,C,y,b,k,D,T]);const j=Math.round(f/No*100);return F.jsxs("div",{className:"relative w-full h-full",children:[F.jsx("div",{ref:e,className:"w-full h-full bg-bg-primary overflow-hidden",style:{padding:"4px"}}),u&&F.jsxs("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-black/70 backdrop-blur-sm border border-border-subtle text-text-primary text-sm font-mono pointer-events-none select-none z-10",children:[j,"%  ",f,"px"]}),L&&F.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg bg-accent-green/80 backdrop-blur-sm border border-accent-green/50 text-white text-sm font-mono pointer-events-none select-none z-10",children:"Copied!"})]})};function zm(){return V.useEffect(()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),F.jsx(tg,{children:F.jsx(ig,{children:F.jsx(Am,{children:F.jsx(Wm,{})})})})}Ho.createRoot(document.getElementById("root")).render(F.jsx(jf.StrictMode,{children:F.jsx(zm,{})}));</script>
    <style rel="stylesheet" crossorigin>/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */.xterm{cursor:text;position:relative;-moz-user-select:none;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;inset:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility:not(.debug),.xterm .xterm-message{position:absolute;inset:0;z-index:10;color:transparent;pointer-events:none}.xterm .xterm-accessibility-tree:not(.debug) *::-moz-selection{color:transparent}.xterm .xterm-accessibility-tree:not(.debug) *::selection{color:transparent}.xterm .xterm-accessibility-tree{-webkit-user-select:text;-moz-user-select:text;user-select:text;white-space:pre}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{-webkit-text-decoration:double underline;text-decoration:double underline}.xterm-underline-3{-webkit-text-decoration:wavy underline;text-decoration:wavy underline}.xterm-underline-4{-webkit-text-decoration:dotted underline;text-decoration:dotted underline}.xterm-underline-5{-webkit-text-decoration:dashed underline;text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{-webkit-text-decoration:overline double underline;text-decoration:overline double underline}.xterm-overline.xterm-underline-3{-webkit-text-decoration:overline wavy underline;text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{-webkit-text-decoration:overline dotted underline;text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{-webkit-text-decoration:overline dashed underline;text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}html,body,#root{height:100dvh;width:100%;overflow:hidden;margin:0;padding:0}body{background-color:var(--bg-primary);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0}.left-0{left:0}.left-1\/2{left:50%}.top-0{top:0}.top-3{top:.75rem}.top-full{top:100%}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-3{margin-top:.75rem}.block{display:block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.hidden{display:none}.h-1\.5{height:.375rem}.h-12{height:3rem}.h-2{height:.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-\[40px\]{height:40px}.h-\[50vh\]{height:50vh}.h-\[90vh\]{height:90vh}.h-full{height:100%}.max-h-\[200px\]{max-height:200px}.max-h-\[300px\]{max-height:300px}.max-h-\[400px\]{max-height:400px}.max-h-\[70vh\]{max-height:70vh}.max-h-\[80vh\]{max-height:80vh}.min-h-0{min-height:0px}.min-h-\[36px\]{min-height:36px}.w-1\.5{width:.375rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-2{width:.5rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-8{width:2rem}.w-full{width:100%}.w-px{width:1px}.min-w-0{min-width:0px}.min-w-\[160px\]{min-width:160px}.min-w-\[32px\]{min-width:32px}.min-w-\[36px\]{min-width:36px}.max-w-\[120px\]{max-width:120px}.max-w-\[200px\]{max-width:200px}.max-w-lg{max-width:32rem}.max-w-sm{max-width:24rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize-none{resize:none}.resize{resize:both}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-border-subtle>:not([hidden])~:not([hidden]){border-color:var(--border-subtle)}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-t-2xl{border-top-left-radius:1rem;border-top-right-radius:1rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.border-accent-blue{border-color:var(--accent-blue)}.border-accent-purple{border-color:var(--accent-purple)}.border-border-subtle{border-color:var(--border-subtle)}.border-t-transparent{border-top-color:transparent}.bg-accent-blue{background-color:var(--accent-blue)}.bg-accent-green{background-color:var(--accent-green)}.bg-accent-purple{background-color:var(--accent-purple)}.bg-accent-red{background-color:var(--accent-red)}.bg-bg-primary{background-color:var(--bg-primary)}.bg-bg-secondary{background-color:var(--bg-secondary)}.bg-bg-tertiary{background-color:var(--bg-tertiary)}.bg-black\/50{background-color:#00000080}.bg-black\/70{background-color:#000000b3}.bg-black\/80{background-color:#000c}.bg-border-subtle{background-color:var(--border-subtle)}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.bg-text-muted{background-color:var(--text-muted)}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\.5{padding-top:.625rem;padding-bottom:.625rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-\[env\(safe-area-inset-bottom\)\]{padding-bottom:env(safe-area-inset-bottom)}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-\[10px\]{font-size:10px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.tracking-wider{letter-spacing:.05em}.text-accent-blue{color:var(--accent-blue)}.text-accent-green{color:var(--accent-green)}.text-accent-purple{color:var(--accent-purple)}.text-accent-red{color:var(--accent-red)}.text-border-subtle{color:var(--border-subtle)}.text-text-muted{color:var(--text-muted)}.text-text-primary{color:var(--text-primary)}.text-text-secondary{color:var(--text-secondary)}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.opacity-50{opacity:.5}.opacity-70{opacity:.7}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.mask-gradient-right{mask-image:linear-gradient(to right,black 90%,transparent 100%);-webkit-mask-image:linear-gradient(to right,black 90%,transparent 100%)}.animate-in.fade-in{animation:fadeIn .2s ease-out forwards}:root{--bg-primary: #0d1117;--bg-secondary: #161b22;--bg-tertiary: #21262d;--accent-blue: #58a6ff;--accent-green: #3fb950;--accent-red: #f85149;--accent-purple: #a371f7;--accent-orange: #d29922;--text-primary: #e6edf3;--text-secondary: #8b949e;--text-muted: #6e7681;--border-subtle: #30363d;--glow-ai: rgba(163, 113, 247, .15)}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:var(--bg-secondary)}::-webkit-scrollbar-thumb{background:var(--bg-tertiary);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:var(--border-subtle)}::-moz-selection{background-color:var(--accent-purple);color:#fff}::selection{background-color:var(--accent-purple);color:#fff}.xterm-screen{touch-action:none}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.placeholder\:text-text-muted::-moz-placeholder{color:var(--text-muted)}.placeholder\:text-text-muted::placeholder{color:var(--text-muted)}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:start-\[2px\]:after{content:var(--tw-content);inset-inline-start:2px}.after\:top-\[2px\]:after{content:var(--tw-content);top:2px}.after\:h-5:after{content:var(--tw-content);height:1.25rem}.after\:w-5:after{content:var(--tw-content);width:1.25rem}.after\:rounded-full:after{content:var(--tw-content);border-radius:9999px}.after\:border:after{content:var(--tw-content);border-width:1px}.after\:border-gray-300:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.after\:bg-white:after{content:var(--tw-content);--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.after\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.after\:content-\[\'\'\]:after{--tw-content: "";content:var(--tw-content)}.hover\:bg-bg-tertiary:hover{background-color:var(--bg-tertiary)}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:text-accent-red:hover{color:var(--accent-red)}.hover\:text-text-primary:hover{color:var(--text-primary)}.focus\:border-accent-blue:focus{border-color:var(--accent-blue)}.focus\:border-accent-purple:focus{border-color:var(--accent-purple)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\:scale-95:active{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:bg-bg-tertiary:active{background-color:var(--bg-tertiary)}.active\:opacity-70:active{opacity:.7}.active\:opacity-80:active{opacity:.8}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-30:disabled{opacity:.3}.disabled\:opacity-50:disabled{opacity:.5}.peer:checked~.peer-checked\:bg-accent-green{background-color:var(--accent-green)}.peer:checked~.peer-checked\:after\:translate-x-full:after{content:var(--tw-content);--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.peer:checked~.peer-checked\:after\:border-white:after{content:var(--tw-content);--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.peer:focus~.peer-focus\:outline-none{outline:2px solid transparent;outline-offset:2px}.peer:checked~.rtl\:peer-checked\:after\:-translate-x-full:where([dir=rtl],[dir=rtl] *):after{content:var(--tw-content);--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
